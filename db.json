{"meta":{"version":1,"warehouse":"4.0.0"},"models":{"Asset":[{"_id":"themes/next2/source/ads.txt","path":"ads.txt","modified":1,"renderable":1},{"_id":"themes/next2/source/baidu_verify_0Jv5zioW8L.html","path":"baidu_verify_0Jv5zioW8L.html","modified":1,"renderable":1},{"_id":"themes/next2/source/robots.txt","path":"robots.txt","modified":1,"renderable":1},{"_id":"themes/next2/source/images/apple-touch-icon-next.png","path":"images/apple-touch-icon-next.png","modified":1,"renderable":1},{"_id":"themes/next2/source/css/custom.styl","path":"css/custom.styl","modified":1,"renderable":1},{"_id":"themes/next2/source/images/avatar.gif","path":"images/avatar.gif","modified":1,"renderable":1},{"_id":"themes/next2/source/css/main.styl","path":"css/main.styl","modified":1,"renderable":1},{"_id":"themes/next2/source/images/cc-by-nc.svg","path":"images/cc-by-nc.svg","modified":1,"renderable":1},{"_id":"themes/next2/source/images/cc-by-nc-sa.svg","path":"images/cc-by-nc-sa.svg","modified":1,"renderable":1},{"_id":"themes/next2/source/images/cc-by-nc-nd.svg","path":"images/cc-by-nc-nd.svg","modified":1,"renderable":1},{"_id":"themes/next2/source/images/cc-by-nd.svg","path":"images/cc-by-nd.svg","modified":1,"renderable":1},{"_id":"themes/next2/source/images/cc-by-sa.svg","path":"images/cc-by-sa.svg","modified":1,"renderable":1},{"_id":"themes/next2/source/images/cc-by.svg","path":"images/cc-by.svg","modified":1,"renderable":1},{"_id":"themes/next2/source/images/cc-zero.svg","path":"images/cc-zero.svg","modified":1,"renderable":1},{"_id":"themes/next2/source/images/favicon-16x16-next.png","path":"images/favicon-16x16-next.png","modified":1,"renderable":1},{"_id":"themes/next2/source/images/favicon-32x32-next.png","path":"images/favicon-32x32-next.png","modified":1,"renderable":1},{"_id":"themes/next2/source/images/logo-algolia-nebula-blue-full.svg","path":"images/logo-algolia-nebula-blue-full.svg","modified":1,"renderable":1},{"_id":"themes/next2/source/js/algolia-search.js","path":"js/algolia-search.js","modified":1,"renderable":1},{"_id":"themes/next2/source/images/logo.svg","path":"images/logo.svg","modified":1,"renderable":1},{"_id":"themes/next2/source/js/bookmark.js","path":"js/bookmark.js","modified":1,"renderable":1},{"_id":"themes/next2/source/js/local-search.js","path":"js/local-search.js","modified":1,"renderable":1},{"_id":"themes/next2/source/js/motion.js","path":"js/motion.js","modified":1,"renderable":1},{"_id":"themes/next2/source/js/my-use.js","path":"js/my-use.js","modified":1,"renderable":1},{"_id":"themes/next2/source/js/next-boot.js","path":"js/next-boot.js","modified":1,"renderable":1},{"_id":"themes/next2/source/js/schedule.js","path":"js/schedule.js","modified":1,"renderable":1},{"_id":"themes/next2/source/js/utils.js","path":"js/utils.js","modified":1,"renderable":1},{"_id":"themes/next2/source/js/schemes/muse.js","path":"js/schemes/muse.js","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/css/imgshare.css","path":"static/api/css/imgshare.css","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/css/like.css","path":"static/api/css/like.css","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/css/select_share.css","path":"static/api/css/select_share.css","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/css/share_popup.css","path":"static/api/css/share_popup.css","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/css/share_style0_16.css","path":"static/api/css/share_style0_16.css","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/css/share_style0_24.css","path":"static/api/css/share_style0_24.css","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/css/share_style1_16.css","path":"static/api/css/share_style1_16.css","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/css/share_style0_32.css","path":"static/api/css/share_style0_32.css","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/css/share_style1_24.css","path":"static/api/css/share_style1_24.css","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/css/share_style1_32.css","path":"static/api/css/share_style1_32.css","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/css/share_style2_16.css","path":"static/api/css/share_style2_16.css","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/css/share_style2.css","path":"static/api/css/share_style2.css","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/css/share_style2_24.css","path":"static/api/css/share_style2_24.css","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/css/share_style2_32.css","path":"static/api/css/share_style2_32.css","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/css/slide_share.css","path":"static/api/css/slide_share.css","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/css/share_style4.css","path":"static/api/css/share_style4.css","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/css/weixin_popup.css","path":"static/api/css/weixin_popup.css","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/js/share.js","path":"static/api/js/share.js","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/img/share/icons_0_16.png","path":"static/api/img/share/icons_0_16.png","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/img/share/icons_0_24.png","path":"static/api/img/share/icons_0_24.png","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/img/share/icons_0_32.png","path":"static/api/img/share/icons_0_32.png","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/img/share/icons_1_16.png","path":"static/api/img/share/icons_1_16.png","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/img/share/icons_1_24.png","path":"static/api/img/share/icons_1_24.png","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/img/share/icons_1_32.png","path":"static/api/img/share/icons_1_32.png","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/img/share/icons_2_16.png","path":"static/api/img/share/icons_2_16.png","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/img/share/icons_2_24.png","path":"static/api/img/share/icons_2_24.png","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/img/share/icons_2_32.png","path":"static/api/img/share/icons_2_32.png","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/img/share/l0.gif","path":"static/api/img/share/l0.gif","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/img/share/l1.gif","path":"static/api/img/share/l1.gif","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/img/share/l2.gif","path":"static/api/img/share/l2.gif","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/img/share/l3.gif","path":"static/api/img/share/l3.gif","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/img/share/l4.gif","path":"static/api/img/share/l4.gif","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/img/share/l5.gif","path":"static/api/img/share/l5.gif","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/img/share/l6.gif","path":"static/api/img/share/l6.gif","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/img/share/l7.gif","path":"static/api/img/share/l7.gif","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/img/share/l8.gif","path":"static/api/img/share/l8.gif","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/img/share/pop_c.gif","path":"static/api/img/share/pop_c.gif","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/img/share/r0.gif","path":"static/api/img/share/r0.gif","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/img/share/r1.gif","path":"static/api/img/share/r1.gif","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/img/share/r2.gif","path":"static/api/img/share/r2.gif","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/img/share/r3.gif","path":"static/api/img/share/r3.gif","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/img/share/r5.gif","path":"static/api/img/share/r5.gif","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/img/share/r4.gif","path":"static/api/img/share/r4.gif","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/img/share/r6.gif","path":"static/api/img/share/r6.gif","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/img/share/r7.gif","path":"static/api/img/share/r7.gif","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/img/share/sc.png","path":"static/api/img/share/sc.png","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/img/share/r8.gif","path":"static/api/img/share/r8.gif","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/img/share/selectshare_close.png","path":"static/api/img/share/selectshare_close.png","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/img/share/share-search-icon.png","path":"static/api/img/share/share-search-icon.png","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/js/base/class.js","path":"static/api/js/base/class.js","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/js/base/tangram.js","path":"static/api/js/base/tangram.js","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/js/component/anticheat.js","path":"static/api/js/component/anticheat.js","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/js/component/animate.js","path":"static/api/js/component/animate.js","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/js/component/comm_tools.js","path":"static/api/js/component/comm_tools.js","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/js/component/partners.js","path":"static/api/js/component/partners.js","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/js/component/pop_base.js","path":"static/api/js/component/pop_base.js","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/js/component/pop_dialog.js","path":"static/api/js/component/pop_dialog.js","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/js/component/pop_popup.js","path":"static/api/js/component/pop_popup.js","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/js/component/qrcode.js","path":"static/api/js/component/qrcode.js","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/js/conf/const.js","path":"static/api/js/conf/const.js","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/js/component/pop_popup_slide.js","path":"static/api/js/component/pop_popup_slide.js","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/js/conf/define.js","path":"static/api/js/conf/define.js","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/js/share/combine_api.js","path":"static/api/js/share/combine_api.js","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/js/share/api_base.js","path":"static/api/js/share/api_base.js","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/js/share/image_api.js","path":"static/api/js/share/image_api.js","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/js/share/like_api.js","path":"static/api/js/share/like_api.js","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/js/share/select_api.js","path":"static/api/js/share/select_api.js","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/js/share/likeshare.js","path":"static/api/js/share/likeshare.js","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/js/share/share_api.js","path":"static/api/js/share/share_api.js","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/js/share/slide_api.js","path":"static/api/js/share/slide_api.js","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/js/start/router.js","path":"static/api/js/start/router.js","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/js/trans/data.js","path":"static/api/js/trans/data.js","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/js/trans/logger.js","path":"static/api/js/trans/logger.js","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/js/trans/trans.js","path":"static/api/js/trans/trans.js","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/js/trans/trans_bdxc.js","path":"static/api/js/trans/trans_bdxc.js","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/js/trans/trans_weixin.js","path":"static/api/js/trans/trans_weixin.js","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/js/trans/trans_bdysc.js","path":"static/api/js/trans/trans_bdysc.js","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/js/view/image_view.js","path":"static/api/js/view/image_view.js","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/js/view/like_view.js","path":"static/api/js/view/like_view.js","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/js/view/select_view.js","path":"static/api/js/view/select_view.js","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/js/view/share_view.js","path":"static/api/js/view/share_view.js","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/js/view/slide_view.js","path":"static/api/js/view/slide_view.js","modified":1,"renderable":1},{"_id":"themes/next2/source/static/api/js/view/view_base.js","path":"static/api/js/view/view_base.js","modified":1,"renderable":1}],"Cache":[{"_id":"source/shuoshuo/index.md","hash":"a3dc4e4cd29d601e1a5919933462cc7745db55f8","modified":1632903410365},{"_id":"source/tags/index.md","hash":"f88d9033fcd66a6cf6d663c7bdf3769be23a8380","modified":1632902031828},{"_id":"source/_posts/5-years-song.md","hash":"b84a876c647c598db954448f4efc7fb4dc1d1a7d","modified":1632902031811},{"_id":"source/somewords/index.md","hash":"3cf0ccf7be96ecbe6c57be8b07d7b1fb6d15904b","modified":1632902031828},{"_id":"source/404/index.md","hash":"63b26af645aef3829d9bb472959df5c380c2f01e","modified":1632903460064},{"_id":"source/_posts/8tips.md","hash":"057899f86185b32ab42c1b9dc644bafdef675d74","modified":1632902031812},{"_id":"source/_posts/Chrome-elements.md","hash":"e0af7c70a192f93291211ed258f985f779d3ee25","modified":1632902031813},{"_id":"source/_posts/Chrome-console.md","hash":"15455ac82037e610f8735b521f02290ad0bfddf7","modified":1632902031812},{"_id":"source/_posts/Chrome-devtool-begin.md","hash":"2575aa98d23a5dde3bb16fbac8418bffd2d0b1a2","modified":1632902031812},{"_id":"source/_posts/Github和Gitee同步中的坑.md","hash":"76b587c0594b70824b1d459de4de8ef21aa00892","modified":1632902031814},{"_id":"source/_posts/Github在线IDE初体验.md","hash":"56cd6f317d67bfd7cf36d1bfd16ed91d71d386cc","modified":1632902031814},{"_id":"source/_posts/Chrome-network.md","hash":"264ee891199fea1051b718f55a4855083586c57c","modified":1632902031813},{"_id":"source/_posts/RXJS学习.md","hash":"195f77a93305d7ff81e0ce3c556c3e997d147424","modified":1649676829503},{"_id":"source/_posts/TS之type-challenges实操.md","hash":"3d275897b22f8fe8b6ec8ae73ec054ec5b7bbf68","modified":1632902031815},{"_id":"source/_posts/React-4.md","hash":"29f6aae30aa15a67774053e3e66dca1824369844","modified":1632902031814},{"_id":"source/_posts/Your-connection-is-not-private-解决办法.md","hash":"085ee4fb07c38a5f9d872b5505ce5e759ca956bf","modified":1632902031815},{"_id":"source/_posts/VSCODE-JS调试技巧.md","hash":"a768deaf3459d0dae2f3001a33d4f3b5660c0092","modified":1632902031815},{"_id":"source/_posts/again-ganhaizi.md","hash":"18aaf8a18a00f9e37351adab1afd89d035e82066","modified":1632902031816},{"_id":"source/_posts/array-function.md","hash":"ec8cc16a7231e03945e2426b18b4fa15ccea8f06","modified":1632902031816},{"_id":"source/_posts/cicd1.md","hash":"75e059c8eafe97c262304371d04c69c54b561b51","modified":1632902031816},{"_id":"source/_posts/cicd2.md","hash":"7a9f336710a15c8ea4ef76a6fc412b7fb968efdd","modified":1632902031817},{"_id":"source/_posts/cicd5.md","hash":"686657dfe4721ca0810a64db5234fdb2dd790079","modified":1632902031818},{"_id":"source/_posts/cicd3.md","hash":"a568a136bbc662f8c34bea99c0f1b93c4d23fd72","modified":1632902031817},{"_id":"source/_posts/cicd4.md","hash":"1139c83981d0ade6fd5562bef72d4fb44dbf6aa1","modified":1632902031818},{"_id":"source/_posts/cicd7.md","hash":"8fc945341cc5324d13603896b7fd44b25491f4a8","modified":1632902031819},{"_id":"source/_posts/credit.md","hash":"685b71ce0748b870194b3331dce1abe936586c1d","modified":1632902031819},{"_id":"source/_posts/fe-bug.md","hash":"838699eaae99d023556707372f6cd0afbe0b0b9e","modified":1642141074709},{"_id":"source/_posts/cicd6.md","hash":"fe1eac40e64dc06cba0db888ff9da54b9bd4c784","modified":1632902031819},{"_id":"source/_posts/git修改commit信息.md","hash":"e23070c16974e9d9457104fb297a85f4edf66787","modified":1632902031821},{"_id":"source/_posts/http.md","hash":"66931b7812da3f8a1b6d22e2c34c54f8451495dc","modified":1632902031822},{"_id":"source/_posts/football-poems.md","hash":"a148f607ceae8bccde16a8ea47e680b3408a8e8b","modified":1632902031820},{"_id":"source/_posts/hexo添加动态背景.md","hash":"6a0bd73977b6a2ea01ed30b6d2dd5283bfc628b8","modified":1632902031821},{"_id":"source/_posts/hello-world.md","hash":"e4e88df2c05c15b2e26503e38990d78021725f32","modified":1632902031821},{"_id":"source/_posts/poems-sunny.md","hash":"fa8f4c2ef482642e2659e5bc259c37114688e82f","modified":1632902031823},{"_id":"source/_posts/mysql1.md","hash":"9d82cbd1d3cc190ff9e1a68d7bd4c2ed9136762d","modified":1632902031823},{"_id":"source/_posts/master.md","hash":"e916a687b706eff4f8b0012a72950b0107fa3dee","modified":1632902031822},{"_id":"source/_posts/pseudo-classes.md","hash":"245018dda468da261e83fe6656a1069a128bf422","modified":1632902031823},{"_id":"source/_posts/关于画点连线的思考.md","hash":"244aaca2fcc54c5dde7a039da044351e30b4bded","modified":1632902031824},{"_id":"source/_posts/实现自己的React之渲染字符串.md","hash":"4a18474c093bd570824b3a91efacb5e2140392b7","modified":1632902031825},{"_id":"source/_posts/实现自己的React（15版）-1.md","hash":"318ba42bfbfec7bef81d15f4b3d5b865ac726f54","modified":1632902031825},{"_id":"source/_posts/实现自己的react-15-3.md","hash":"8af82bf9fae8f8890f07b172dfd4f5503e1ac1aa","modified":1632902031826},{"_id":"source/_posts/年末启示.md","hash":"8cc158f883144354d8c18ba6ee6503facd255f03","modified":1632902031826},{"_id":"source/_posts/再学一次JS原型.md","hash":"51a712baaa38d9b9d0fc3e0a24ccde383d824ef4","modified":1632902031824},{"_id":"themes/next2/source/static/api/js/trans/data.js","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1632902033022},{"_id":"themes/next2/source/static/api/js/trans/logger.js","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1632902033022},{"_id":"themes/next2/.editorconfig","hash":"8570735a8d8d034a3a175afd1dd40b39140b3e6a","modified":1632902032500},{"_id":"themes/next2/.gitattributes","hash":"ec43734985e1cafd53d88ded3020103f7416123c","modified":1632902032501},{"_id":"themes/next2/.eslintrc.json","hash":"9c0762486f24a8c5e60f8b6c875e4c4728942649","modified":1632902032500},{"_id":"themes/next2/.gitignore","hash":"10fa9758d8f934669c1781564ed9ce83436b11f7","modified":1632902032509},{"_id":"themes/next2/.npmignore","hash":"b5753ace1856548855d1f2c31c05da85781629e6","modified":1632902032509},{"_id":"themes/next2/_vendors.yml","hash":"87f9c5959560c6e0f8601a63657aaaa72050066b","modified":1632902032511},{"_id":"themes/next2/LICENSE.md","hash":"63ea7df5a8dc1b23cc92ca9de3ed16d53367f360","modified":1632902032510},{"_id":"themes/next2/.stylintrc","hash":"2cf4d637b56d8eb423f59656a11f6403aa90f550","modified":1632902032509},{"_id":"themes/next2/package.json","hash":"862fe99f459a556c740a3c0b5d730a889c68fe74","modified":1632902032576},{"_id":"themes/next2/README.md","hash":"f373cc6b97311ecfdcc1d2cb279faf6560de1cc6","modified":1632902032510},{"_id":"themes/next2/crowdin.yml","hash":"e026078448c77dcdd9ef50256bb6635a8f83dca6","modified":1632902032511},{"_id":"themes/next2/renovate.json","hash":"cb29cc16e61b0b8a6dac34657d76822ae29ad5aa","modified":1632902032576},{"_id":"themes/next2/_config.yml","hash":"337c9fa92f98919ade2b32f484988b01bdb46ea4","modified":1649731311113},{"_id":"themes/next2/.github/issue_label_bot.yaml","hash":"fca600ddef6f80c5e61aeed21722d191e5606e5b","modified":1632902032505},{"_id":"themes/next2/.github/CONTRIBUTING.md","hash":"eefd073dfb68884cd946f7ec6d3b3619031d7650","modified":1632902032502},{"_id":"themes/next2/.github/config.yml","hash":"7984e665e9de481a0e0e51fca5668337713f810b","modified":1632902032504},{"_id":"themes/next2/.github/CODE_OF_CONDUCT.md","hash":"81dbb25800165f68c21859cd3c09276b9f4cc417","modified":1632902032501},{"_id":"themes/next2/.github/labeler.yml","hash":"a45e489c62bf5bb5eb1866371af331b8cb9c6320","modified":1632902032505},{"_id":"themes/next2/.github/label-commenter-config.yml","hash":"1097fc47beeacfc1edb0248c27b17bf64bde3565","modified":1632902032505},{"_id":"themes/next2/.github/release-drafter.yml","hash":"7662e31224a24154c4fe06b95ccbdff51ab8f2cc","modified":1632902032506},{"_id":"themes/next2/.github/PULL_REQUEST_TEMPLATE.md","hash":"3e9fbb78e3dee0ca1dc886d0c28b0148ba0ca499","modified":1632902032504},{"_id":"themes/next2/docs/AGPL3.md","hash":"0d2b8c5fa8a614723be0767cc3bca39c49578036","modified":1632902032512},{"_id":"themes/next2/.github/stale.yml","hash":"0e40b9975455152a690eaf7047135be348966e39","modified":1632902032506},{"_id":"themes/next2/docs/AUTHORS.md","hash":"a648823121563c34a177ae91f5a774b5e29f01a0","modified":1632902032512},{"_id":"themes/next2/languages/default.yml","hash":"ea5e6aee4cb14510793ac4593a3bddffe23e530c","modified":1632902032537},{"_id":"themes/next2/languages/README.md","hash":"b2567e32805dda79601157351a07e5ca9fe01315","modified":1632902032535},{"_id":"themes/next2/docs/LICENSE.txt","hash":"8ef5fc1147c196680b06e1accab80c8d236ab951","modified":1632902032532},{"_id":"themes/next2/languages/ar.yml","hash":"7a62243ec54196e3d1bea7364f05aded490bc234","modified":1632902032536},{"_id":"themes/next2/languages/de.yml","hash":"dc448f724c7d436233e9567711a09e0d56e60e3b","modified":1632902032536},{"_id":"themes/next2/languages/id.yml","hash":"ac018805190bc4bdc06091f5a6444e612fc700b0","modified":1632902032539},{"_id":"themes/next2/languages/fr.yml","hash":"8ddfe98e7847ee8f1eaba9119f9fbdc42d7ec120","modified":1632902032539},{"_id":"themes/next2/languages/es.yml","hash":"c3506dfaa771e827ae6adb322477c6e835cd0f09","modified":1632902032538},{"_id":"themes/next2/languages/en.yml","hash":"48a76170d70ef7c1fac96720bc5064b43061708d","modified":1632902032537},{"_id":"themes/next2/languages/fa.yml","hash":"649823297167b902455c0aec8ddebb462df71c7d","modified":1632902032538},{"_id":"themes/next2/languages/it.yml","hash":"82a93c32b3fcf6517441cdc73f75bc6173beb392","modified":1632902032540},{"_id":"themes/next2/languages/ko.yml","hash":"8342df2f4190ba4ee004b70d1d6ccd341033dbe7","modified":1632902032540},{"_id":"themes/next2/languages/ja.yml","hash":"fec1e1c15ad2df7ed1249173cc719ccba6d3b842","modified":1632902032540},{"_id":"themes/next2/languages/nl.yml","hash":"0d3b56613197cb190900311507535db41daec7d4","modified":1632902032541},{"_id":"themes/next2/languages/pt-BR.yml","hash":"47daeaa23c4db073e77761c9a6f62d3932af06ec","modified":1632902032541},{"_id":"themes/next2/languages/ru.yml","hash":"fdf5c623890db24cb56ab5ffe0c49db3542477c8","modified":1632902032542},{"_id":"themes/next2/languages/tr.yml","hash":"54de3d8d85e3c7b14b163c3d322411b7301a09b3","modified":1632902032542},{"_id":"themes/next2/languages/pt.yml","hash":"e0e2675261e2e80f7ce7d19c945c08217b068d81","modified":1632902032541},{"_id":"themes/next2/languages/uk.yml","hash":"1c9a0b8d8160c77cc62064207d57f460f365cae9","modified":1632902032542},{"_id":"themes/next2/languages/vi.yml","hash":"1f9657b58e11db21f93eb895c90123b8f91751a7","modified":1632902032543},{"_id":"themes/next2/scripts/renderer.js","hash":"c53dbede2ad5f68d7349bc5ed8ac7157d723e987","modified":1632902032587},{"_id":"themes/next2/languages/zh-CN.yml","hash":"ae0c42aca5a0754dadea8cf448e1bda50fb80136","modified":1632902032543},{"_id":"themes/next2/source/ads.txt","hash":"c90a6f7cc0be11e021991ad82711aafb787da294","modified":1632902032609},{"_id":"themes/next2/source/robots.txt","hash":"59ebae3a87e1b2760c1bba5d3f2185009a87592d","modified":1632902032698},{"_id":"themes/next2/source/baidu_verify_0Jv5zioW8L.html","hash":"a6aeb565a1f8fa74621cd182be441d673fb5c00b","modified":1632902032610},{"_id":"themes/next2/languages/zh-HK.yml","hash":"149fccd0afdbc8db76e372cbc73d7b5f07bb7515","modified":1632902032543},{"_id":"themes/next2/languages/zh-TW.yml","hash":"d534f321ee0c235e1ebfea383eb1892bbd7d7e95","modified":1632902032544},{"_id":"themes/next2/layout/_layout.njk","hash":"178acef5357dea9904ea468d90ae1cd53b4db5ef","modified":1649735827098},{"_id":"themes/next2/layout/category.njk","hash":"434fc2b27120ebae91522002eb40e16f2158bd4f","modified":1632902032574},{"_id":"themes/next2/layout/index.njk","hash":"d8fa14549fa061e7bdba4ec1472cb45ecea96382","modified":1632902032575},{"_id":"themes/next2/layout/archive.njk","hash":"08885f48d5878c92c910f8c41e3209eb07b9b80e","modified":1632902032574},{"_id":"themes/next2/layout/post.njk","hash":"6abeb85fb3e4c382ed4bb6049b12a807e6226e67","modified":1632902032575},{"_id":"themes/next2/layout/page.njk","hash":"4f8f377e4f5511e27de1c2e4a1c13374b6a5d9bd","modified":1632902032575},{"_id":"themes/next2/.github/ISSUE_TEMPLATE/feature-request.md","hash":"4ecac91716eac59d7c2bc53cf6e95612d44da97b","modified":1632902032503},{"_id":"themes/next2/test/index.js","hash":"6bf0289846538be3e9a63809af98f00e1fbdd90b","modified":1632902033031},{"_id":"themes/next2/layout/tag.njk","hash":"09075c80b53b06826e7eb9ce838bca9dc363fac1","modified":1632902032576},{"_id":"themes/next2/.github/ISSUE_TEMPLATE/other.md","hash":"b47f529d059ef337b4f14ddf746c3a42744028f0","modified":1632902032503},{"_id":"themes/next2/.github/ISSUE_TEMPLATE/bug-report.md","hash":"fc4dce84ed9a5d21d3a8833ff6d776c46f876115","modified":1632902032502},{"_id":"themes/next2/.github/workflows/label-commenter.yml","hash":"b6d8162264dc4d6d31f1f9c2a940718f12cff874","modified":1632902032507},{"_id":"themes/next2/.github/workflows/labeler.yml","hash":"3acd5189488e720f23e904f2d9d24cf4b15ac1de","modified":1632902032507},{"_id":"themes/next2/.github/workflows/linter.yml","hash":"f499ad31aea9ec598308475ef0b19b7e4177103c","modified":1632902032507},{"_id":"themes/next2/.github/workflows/lock.yml","hash":"70bd0be3f33774e4b0ada3a59c901f8f9cff1013","modified":1632902032508},{"_id":"themes/next2/.github/ISSUE_TEMPLATE/question.md","hash":"d0d16ae88623d33946c16cfb68beb6ecab1ba69b","modified":1632902032503},{"_id":"themes/next2/.github/workflows/tester.yml","hash":"f0fe6d5c4242135d9cde0d830d407094ddf7c062","modified":1632902032508},{"_id":"themes/next2/docs/ru/README.md","hash":"6da6d8e75eab558630b7c6a2e5a80dc981362f47","modified":1632902032533},{"_id":"themes/next2/.github/workflows/release-drafter.yml","hash":"4f3af81009cb922be91f718a67425377515ea69d","modified":1632902032508},{"_id":"themes/next2/scripts/events/index.js","hash":"89091bc943cd8b8c63b8af3d26fb0a027048e9ba","modified":1632902032577},{"_id":"themes/next2/scripts/filters/default-injects.js","hash":"872f01cb10e422a648ea505436532e776e92926b","modified":1632902032584},{"_id":"themes/next2/scripts/helpers/engine.js","hash":"16b5beb26fbbc57255d37fe519905ec868a69f13","modified":1632902032585},{"_id":"themes/next2/docs/zh-CN/CODE_OF_CONDUCT.md","hash":"0e204dde6d21f100cba6ca7751de71848490759e","modified":1632902032534},{"_id":"themes/next2/scripts/filters/locals.js","hash":"fa1e558f058f93455acdd553ab1be30b26f137e4","modified":1632902032584},{"_id":"themes/next2/docs/zh-CN/CONTRIBUTING.md","hash":"8ee5ca39ac4a372a5c0f16e344bbe578af4aeae4","modified":1632902032534},{"_id":"themes/next2/scripts/filters/minify.js","hash":"be0574c64a38210e449c99d38a760452015060a3","modified":1632902032585},{"_id":"themes/next2/scripts/helpers/font.js","hash":"9cf01a3cf62d9b5a1a0db8145088774bf94045c8","modified":1632902032586},{"_id":"themes/next2/scripts/filters/post.js","hash":"bac5646993153f9f6a630c9f0052bb17fa760a9c","modified":1632902032585},{"_id":"themes/next2/scripts/tags/button.js","hash":"c6ad2ed544fbb25ecb5d820c36e76302504271b7","modified":1632902032588},{"_id":"themes/next2/docs/zh-CN/README.md","hash":"b5adf2afa918e2eb1000d63e0d8928a524829a35","modified":1632902032535},{"_id":"themes/next2/scripts/helpers/next-url.js","hash":"577c510374cf9bcfa8d3a1027e42411a9324805e","modified":1632902032587},{"_id":"themes/next2/scripts/helpers/next-vendors.js","hash":"afdd6a188a74c188f0dd154fac70efd4080ca262","modified":1632902032587},{"_id":"themes/next2/scripts/helpers/next-config.js","hash":"cff5f7f4d4c68499cfbf9890d4656156bd0ea1db","modified":1632902032586},{"_id":"themes/next2/scripts/tags/caniuse.js","hash":"935a311142a409c1896b3ae3f01fe7a9e2db1134","modified":1632902032589},{"_id":"themes/next2/scripts/tags/group-pictures.js","hash":"9836e3212f889e94ada4c354c7b83f7d7caa9aa7","modified":1632902032589},{"_id":"themes/next2/scripts/tags/center-quote.js","hash":"92c19d796bdb3320df9caea59bf52df7a95d9da9","modified":1632902032589},{"_id":"themes/next2/scripts/tags/label.js","hash":"8a73348186113bae0a51ea2f891c1bb882fab05a","modified":1632902032590},{"_id":"themes/next2/scripts/tags/index.js","hash":"17f9451ce1f10f78437f52218757d38d4e1591b0","modified":1632902032590},{"_id":"themes/next2/scripts/tags/link-grid.js","hash":"9e2c58d1a4d1dd84fa86144e5b4576b2fd10a37f","modified":1632902032591},{"_id":"themes/next2/scripts/tags/mermaid.js","hash":"464effc08e757ce8e1bb094707d06ad829af9d62","modified":1632902032591},{"_id":"themes/next2/scripts/tags/note.js","hash":"05be417a17385a31e1a021e1a54b15046cfd8408","modified":1632902032591},{"_id":"themes/next2/scripts/tags/pdf.js","hash":"27129fc4014d723ba93ac77b11342da2ee445d96","modified":1632902032592},{"_id":"themes/next2/scripts/tags/tabs.js","hash":"2bf00d56b3b289a7dd27e9b5820430a2457a19f3","modified":1632902032592},{"_id":"themes/next2/scripts/tags/video.js","hash":"911851fb3a56570b761d133a6e1531ebf864ea83","modified":1632902032592},{"_id":"themes/next2/source/css/_colors.styl","hash":"b37f9847d2f95632e911df670b51921a7d748068","modified":1632902032611},{"_id":"themes/next2/source/css/_mixins.styl","hash":"b9c3d3087a917c94cf34ffd6621528d377af8fc9","modified":1632902032638},{"_id":"themes/next2/source/css/custom.styl","hash":"d682cedf543e24ead61d57620fe0d02a232bf4cb","modified":1632902372073},{"_id":"themes/next2/source/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1632902032651},{"_id":"themes/next2/source/images/avatar.gif","hash":"18c53e15eb0c84b139995f9334ed8522b40aeaf6","modified":1632902032673},{"_id":"themes/next2/source/css/main.styl","hash":"937d498fbc859dd23a2a733ae1de273dab992bc4","modified":1632902032650},{"_id":"themes/next2/source/images/cc-by-nc.svg","hash":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7","modified":1632902032675},{"_id":"themes/next2/source/images/cc-by-nc-nd.svg","hash":"c6524ece3f8039a5f612feaf865d21ec8a794564","modified":1632902032674},{"_id":"themes/next2/source/images/cc-by-nd.svg","hash":"c563508ce9ced1e66948024ba1153400ac0e0621","modified":1632902032676},{"_id":"themes/next2/source/images/cc-by-nc-sa.svg","hash":"3031be41e8753c70508aa88e84ed8f4f653f157e","modified":1632902032675},{"_id":"themes/next2/source/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1632902032677},{"_id":"themes/next2/source/images/cc-by-sa.svg","hash":"aa4742d733c8af8d38d4c183b8adbdcab045872e","modified":1632902032676},{"_id":"themes/next2/source/images/cc-zero.svg","hash":"87669bf8ac268a91d027a0a4802c92a1473e9030","modified":1632902032677},{"_id":"themes/next2/source/images/cc-by.svg","hash":"28a0a4fe355a974a5e42f68031652b76798d4f7e","modified":1632902032677},{"_id":"themes/next2/source/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1632902032678},{"_id":"themes/next2/source/images/logo-algolia-nebula-blue-full.svg","hash":"b85e274207b1392782476a0430feac98db1e7da0","modified":1632902032678},{"_id":"themes/next2/source/images/logo.svg","hash":"d29cacbae1bdc4bbccb542107ee0524fe55ad6de","modified":1632902032678},{"_id":"themes/next2/source/js/algolia-search.js","hash":"a6f78c4cfffa976e4b8043e3486ce99aaba02bda","modified":1632902032679},{"_id":"themes/next2/source/js/bookmark.js","hash":"e45e1fbb7c6d645e9c410759486216e570d02bef","modified":1632902032679},{"_id":"themes/next2/source/js/motion.js","hash":"6d4bd07a6f8e1b4083119dca0acb5b289533b619","modified":1632902032680},{"_id":"themes/next2/source/js/local-search.js","hash":"9f4fe7bbe0f16be72d26ccb8b22bd33767f83cff","modified":1632902032680},{"_id":"themes/next2/source/js/my-use.js","hash":"c59f44e60bc7e4a9a2e8be7067d1eb8f504905e9","modified":1632902032681},{"_id":"themes/next2/source/js/next-boot.js","hash":"da67f3eed604dcdc4e89280c9db69fe1f62818e9","modified":1632902032681},{"_id":"themes/next2/source/js/schedule.js","hash":"ababd67895ce49049271601c6928fce56a1c6bbb","modified":1632902032681},{"_id":"themes/next2/source/js/utils.js","hash":"b9ae9b9ef6f75935bb92ea39758bc7d626742548","modified":1632902032682},{"_id":"themes/next2/layout/_macro/post-collapse.njk","hash":"1a30d751871dabfa80940042ddb1f77d07d830b9","modified":1632902032545},{"_id":"themes/next2/layout/_macro/post.njk","hash":"f15139b681ae5bea2e6f9779d616c6aebc05b971","modified":1632902032545},{"_id":"themes/next2/layout/_macro/sidebar.njk","hash":"7e061c91aa607266fbef426460ca3d0cb81ad340","modified":1632902032546},{"_id":"themes/next2/layout/_partials/languages.njk","hash":"ba9e272f1065b8f0e8848648caa7dea3f02c6be1","modified":1632902032551},{"_id":"themes/next2/layout/_partials/comments.njk","hash":"334e8d8117a46c8c097788811322a62627952219","modified":1632902032546},{"_id":"themes/next2/layout/_partials/pagination.njk","hash":"9876dbfc15713c7a47d4bcaa301f4757bd978269","modified":1632902032553},{"_id":"themes/next2/layout/_scripts/index.njk","hash":"86e5698a041342d9f36e1fee244a5b6a48e087db","modified":1632902032559},{"_id":"themes/next2/layout/_partials/footer.njk","hash":"ceba7b15267d80e1839cc48fcede2846bef473ea","modified":1632902032547},{"_id":"themes/next2/layout/_partials/widgets.njk","hash":"24eb5b683310810f93c1d7f68f8f70f1a29fd217","modified":1632902032558},{"_id":"themes/next2/layout/_third-party/baidu-push.njk","hash":"8627c8c8b031ecee16c522433b66fa4d6979b8ea","modified":1632902032562},{"_id":"themes/next2/layout/_scripts/vendors.njk","hash":"bada07da2a47ed6de6081796367b19dd9e906cfb","modified":1632902032560},{"_id":"themes/next2/layout/_scripts/noscript.njk","hash":"4f250d0bf80be06dd2c95c1d4c2ba2624b59cf2a","modified":1632902032559},{"_id":"themes/next2/layout/_third-party/google_adsense.njk","hash":"08c14ca639f892c27e2c10f1bb253765b56f32ec","modified":1632902032566},{"_id":"themes/next2/layout/_scripts/pjax.njk","hash":"28a3bcb1ce50924a5a48b0f3756ac3a8736867f1","modified":1632902032560},{"_id":"themes/next2/layout/_third-party/nprogress.njk","hash":"271139c3896a6d294f46f767cb21b2e848050841","modified":1632902032568},{"_id":"themes/next2/layout/_third-party/index.njk","hash":"4ca039707745c6a22615741b7411ff2cb0763e6d","modified":1632902032567},{"_id":"themes/next2/layout/_third-party/rating.njk","hash":"2731e262a6b88eaee2a3ca61e6a3583a7f594702","modified":1632902032569},{"_id":"themes/next2/test/helpers/index.js","hash":"63ba28afed697f7b3574436b1133b8ecc9c0c357","modified":1632902033030},{"_id":"themes/next2/layout/_third-party/quicklink.njk","hash":"294b7f6a4fa566e369d8be0ce7b28f35b6c14563","modified":1632902032569},{"_id":"themes/next2/test/tags/center-quote.js","hash":"7667342fd1a1417eaf6a254012b84ae40e8d13dd","modified":1632902033032},{"_id":"themes/next2/test/helpers/font.js","hash":"8930b1f16facc18dc6764bf6efd753ca50d3f1cb","modified":1632902033030},{"_id":"themes/next2/test/tags/button.js","hash":"48f2aa4c513e9e24bd6a811410520b74cd7ea88b","modified":1632902033031},{"_id":"themes/next2/test/helpers/next-url.js","hash":"abc4ee5149df6172b2c36b6e85d1993ec748ddea","modified":1632902033031},{"_id":"themes/next2/test/tags/caniuse.js","hash":"aa5e728445caeaf7c2ccd0f3fcb2cad0c93ca6d1","modified":1632902033032},{"_id":"themes/next2/test/tags/index.js","hash":"e8779e54f0979b221858f8bb74dd081bb503b910","modified":1632902033033},{"_id":"themes/next2/test/tags/label.js","hash":"4ebf3698c258ca978b997acbdd0dece44069c09d","modified":1632902033033},{"_id":"themes/next2/test/tags/mermaid.js","hash":"ed5b5a70ee49842501c952c4d62483f1fc8eba6b","modified":1632902033034},{"_id":"themes/next2/test/tags/group-pictures.js","hash":"caf9f6b9a72e41fb30aa24468a54496fba1fcdd8","modified":1632902033032},{"_id":"themes/next2/test/tags/pdf.js","hash":"bac003317e5bb5e046848522c5c4a7cf231e53f6","modified":1632902033035},{"_id":"themes/next2/test/tags/note.js","hash":"1b6bac741212e7ca763ab7f92ed2d4e2868126f4","modified":1632902033034},{"_id":"themes/next2/test/tags/link-grid.js","hash":"88ec69e4dc1d493d21254ed9296a2514e91f0f8b","modified":1632902033034},{"_id":"themes/next2/test/validate/index.js","hash":"2f64bf544a1676ecac7e9320660d6c845be1aea9","modified":1632902033036},{"_id":"themes/next2/scripts/filters/comment/common.js","hash":"2486f3e0150c753e5f3af1a3665d074704b8ee2c","modified":1632902032581},{"_id":"themes/next2/test/tags/tabs.js","hash":"d63722919f9da2e44d6b952801e10a2915ea9c12","modified":1632902033035},{"_id":"themes/next2/test/tags/video.js","hash":"43aaebbc60f19aa69c03b212afff4c4a3fc3b862","modified":1632902033035},{"_id":"themes/next2/scripts/filters/comment/changyan.js","hash":"199fa9a70914d0019cf0e47f55491183d53d1533","modified":1632902032580},{"_id":"themes/next2/scripts/filters/comment/disqus.js","hash":"a9b18b7447cd5a56cb692c574463a27356eb7fa6","modified":1632902032582},{"_id":"themes/next2/scripts/filters/comment/default-config.js","hash":"93ee5f9109dad885dc38c49bcee630c10f9dce6e","modified":1632902032581},{"_id":"themes/next2/scripts/filters/comment/gitalk.js","hash":"387e59cd396c62fe095b388c8ff8d4191cfbdeb9","modified":1632902032583},{"_id":"themes/next2/scripts/filters/comment/disqusjs.js","hash":"7b8ce8e9a71cf083f5337fb7c9586be8f7c316e8","modified":1632902032582},{"_id":"themes/next2/scripts/filters/comment/valine.js","hash":"c67984fc868d4799b3aa6d3b3cd060e5260b3a98","modified":1632902032584},{"_id":"themes/next2/scripts/filters/comment/livere.js","hash":"1198cb63375a53400431c2e65e3361416cdf8eb6","modified":1632902032583},{"_id":"themes/next2/scripts/events/lib/injects.js","hash":"7b0ea8d28ced63977dc6539920eb044b1098adcb","modified":1632902032578},{"_id":"themes/next2/scripts/events/lib/highlight.js","hash":"6aec7b2c38c50989a23bfaa0d560e75c7f553e12","modified":1632902032578},{"_id":"themes/next2/scripts/events/lib/config.js","hash":"545ebbd9f5aeb9f7a8e23737664c1f7d701275e1","modified":1632902032578},{"_id":"themes/next2/scripts/events/lib/vendors.js","hash":"5f412082218087fe8fc369d17b1f6960366b3ea4","modified":1632902032579},{"_id":"themes/next2/scripts/events/lib/utils.js","hash":"e227174a8ebab8d5b6e8e26faf4fd66c43f045ca","modified":1632902032579},{"_id":"themes/next2/source/css/_variables/Muse.styl","hash":"e3be898f5ebcf435a26542653a9297ff2c71aeb0","modified":1632902032649},{"_id":"themes/next2/source/css/_variables/Gemini.styl","hash":"f4e694e5db81e57442c7e34505a416d818b3044a","modified":1632902032648},{"_id":"themes/next2/source/css/_variables/Mist.styl","hash":"77dddb398fb1beefc2b824bec7b094030fdc3df9","modified":1632902032648},{"_id":"themes/next2/source/css/_variables/Pisces.styl","hash":"c65536a128b9bc9dbe2fbb1b235a3cded2891002","modified":1632902032649},{"_id":"themes/next2/source/css/_variables/base.styl","hash":"efbeee48d208a3960b4e352fab3feb2b2dab7ef8","modified":1632902032649},{"_id":"themes/next2/layout/_partials/header/index.njk","hash":"53895b3af95667edc5bf5d7356f8a2b4fe091447","modified":1632902032549},{"_id":"themes/next2/source/js/schemes/muse.js","hash":"d7a6c12bb534810eb748d0ba28aff67cccf0bb3f","modified":1632902032682},{"_id":"themes/next2/layout/_partials/head/head-unique.njk","hash":"37bdf020591feb0cf72327c9efd755bf78a0afd6","modified":1632902032547},{"_id":"themes/next2/layout/_partials/head/head.njk","hash":"d4613a3af36a114e56b68f08e365fb3eb971932a","modified":1632902032548},{"_id":"themes/next2/layout/_partials/page/categories.njk","hash":"17156d99941f28a225951ffdcfa9a115e20dc2d2","modified":1632902032552},{"_id":"themes/next2/layout/_partials/header/menu-item.njk","hash":"61eec1fb84711369b9dabd1d2cae64858844c2eb","modified":1632902032550},{"_id":"themes/next2/layout/_partials/header/sub-menu.njk","hash":"75a158a5b54a3a76ee6590f5e0e2dd4a9f0be869","modified":1632902032551},{"_id":"themes/next2/layout/_partials/header/brand.njk","hash":"c082a16163d1fb5d7cf858fb7522fca9d18f1ba6","modified":1632902032548},{"_id":"themes/next2/layout/_partials/page/breadcrumb.njk","hash":"edb3bb6d644b7407673c5ef3a426a244e98fcf89","modified":1632902032552},{"_id":"themes/next2/layout/_partials/page/page-header.njk","hash":"789915339a6234d6dd7c710cc1f8e728d9b81d35","modified":1632902032552},{"_id":"themes/next2/layout/_partials/page/schedule.njk","hash":"9d650333160ad1977fe42d9770869ff1660a95fe","modified":1632902032553},{"_id":"themes/next2/layout/_partials/page/tags.njk","hash":"a18d1598e36cc72f2b0b24c3cc3c5990dfaa3254","modified":1632902032553},{"_id":"themes/next2/layout/_partials/header/menu.njk","hash":"c9390824b57f23b7c8a5c23a9834514123673766","modified":1632902032550},{"_id":"themes/next2/layout/_partials/post/post-copyright.njk","hash":"133942922e34abae9e4de7ea5591d77c0caa4b37","modified":1632902032554},{"_id":"themes/next2/layout/_partials/search/algolia-search.njk","hash":"c2ccaac9caeea1a43dc31f4f8368f8f548aab0af","modified":1632902032557},{"_id":"themes/next2/layout/_partials/post/post-followme.njk","hash":"0a256efeacf4c5b45cf122028c8c3e5f10a7abb0","modified":1632902032554},{"_id":"themes/next2/layout/_partials/search/localsearch.njk","hash":"90156f42d6e6e326ed38482d6623a0aac0352016","modified":1632902032557},{"_id":"themes/next2/layout/_partials/post/post-meta.njk","hash":"fbdb5cdbd80970f201f5c75369eaa00aea369235","modified":1632902032555},{"_id":"themes/next2/layout/_partials/post/post-footer.njk","hash":"72164d7ff8b2a2e49ed40c3814827c6a347c41b3","modified":1632902032555},{"_id":"themes/next2/layout/_partials/post/post-related.njk","hash":"f79c44692451db26efce704813f7a8872b7e63a0","modified":1632902032556},{"_id":"themes/next2/layout/_partials/search/index.njk","hash":"b7a66a465e897c27624f0c441375c95c4cb7a5aa","modified":1632902032557},{"_id":"themes/next2/layout/_third-party/chat/chatra.njk","hash":"f910618292c63871ca2e6c6e66c491f344fa7b1f","modified":1632902032563},{"_id":"themes/next2/layout/_third-party/analytics/baidu-analytics.njk","hash":"2b5f3bc4bbed63b14a6e702b229095f3ba19fa74","modified":1632902032561},{"_id":"themes/next2/layout/_third-party/analytics/growingio.njk","hash":"5adea065641e8c55994dd2328ddae53215604928","modified":1632902032562},{"_id":"themes/next2/layout/_third-party/analytics/index.njk","hash":"d87df68dff14cfb4d91a77230cd1ac795c2a22d5","modified":1632902032562},{"_id":"themes/next2/layout/_third-party/chat/tidio.njk","hash":"cba0e6e0fad08568a9e74ba9a5bee5341cfc04c1","modified":1632902032564},{"_id":"themes/next2/layout/_third-party/comments/changyan.njk","hash":"5c2cd9b6f02bcb6248d3f18638a58e329fe8c0d1","modified":1632902032564},{"_id":"themes/next2/layout/_partials/post/post-reward.njk","hash":"a9bb52d0537d27cfe670d80e716da6780786ab8a","modified":1632902032556},{"_id":"themes/next2/layout/_partials/sidebar/site-overview.njk","hash":"c419158e19805e2db614a5f5651e3e534e4a5e4e","modified":1632902032558},{"_id":"themes/next2/layout/_third-party/analytics/google-analytics.njk","hash":"ad197fd728dd7ac90f910fdf80ce848eab3ff187","modified":1632902032561},{"_id":"themes/next2/layout/_third-party/comments/livere.njk","hash":"6252b0353c6a36d03c68ebec1073293442221bd1","modified":1632902032566},{"_id":"themes/next2/layout/_third-party/comments/disqusjs.njk","hash":"54eab4840443262432ec7c47e56e9859ace2a902","modified":1632902032565},{"_id":"themes/next2/layout/_third-party/math/index.njk","hash":"b0efe26601037e621b5cb16f0fe2f347ee27acdb","modified":1632902032567},{"_id":"themes/next2/layout/_third-party/search/algolia-search.njk","hash":"97035261aa85c7d39c6ce1211cdefc6248c0446d","modified":1632902032570},{"_id":"themes/next2/layout/_third-party/comments/valine.njk","hash":"7fc4ff4cac223e81831f2cf882fc797b953bf5e1","modified":1632902032566},{"_id":"themes/next2/layout/_third-party/math/katex.njk","hash":"b6746dfad32cc8a46ff8f4194a7a16ca41744803","modified":1632902032568},{"_id":"themes/next2/layout/_third-party/comments/disqus.njk","hash":"cc1450d62d76e59968bdd25836694b8339207384","modified":1632902032565},{"_id":"themes/next2/layout/_third-party/comments/gitalk.njk","hash":"ec0474e23ca122b34858ffb0bb8c99f241749c61","modified":1632902032565},{"_id":"themes/next2/layout/_third-party/search/localsearch.njk","hash":"767b6c714c22588bcd26ba70b0fc19b6810cbacd","modified":1632902032570},{"_id":"themes/next2/layout/_third-party/statistics/busuanzi-counter.njk","hash":"bf1bfb7562558712033625e9098899570aecba97","modified":1632902032571},{"_id":"themes/next2/layout/_third-party/statistics/cnzz-analytics.njk","hash":"a17ace37876822327a2f9306a472974442c9005d","modified":1632902032571},{"_id":"themes/next2/layout/_third-party/statistics/index.njk","hash":"8b956fb56284e8fa4a4731b1efd1f25e1b2b4a78","modified":1632902032572},{"_id":"themes/next2/layout/_third-party/search/swiftype.njk","hash":"ba0dbc06b9d244073a1c681ff7a722dcbf920b51","modified":1632902032570},{"_id":"themes/next2/layout/_third-party/statistics/firestore.njk","hash":"8635b13aa1092c22252af4743fa194272f089b59","modified":1632902032572},{"_id":"themes/next2/layout/_third-party/tags/mermaid.njk","hash":"007da98b913a62946c03a87f8fa25b3db856caa1","modified":1632902032573},{"_id":"themes/next2/layout/_third-party/math/mathjax.njk","hash":"a8239f99b316e6c060bad8173be3a25c67138697","modified":1632902032568},{"_id":"themes/next2/source/css/_common/outline/outline.styl","hash":"0c9f72ad98807521cbdcee7b5bbe2e884311db39","modified":1632902032625},{"_id":"themes/next2/layout/_third-party/statistics/lean-analytics.njk","hash":"811a3ad58c0a15550100bdc199bef8add1ad526c","modified":1632902032573},{"_id":"themes/next2/source/css/_common/scaffolding/buttons.styl","hash":"a042571d85ff7265f799004239a45f36b716b8a6","modified":1632902032630},{"_id":"themes/next2/source/css/_common/scaffolding/comments.styl","hash":"e4fecc889ba3317a64e9abba5842c79dff9b7827","modified":1632902032631},{"_id":"themes/next2/layout/_third-party/tags/pdf.njk","hash":"67d80a57f6b2cf23d56276ca8f30f25e3e8707e9","modified":1632902032574},{"_id":"themes/next2/source/css/_common/scaffolding/base.styl","hash":"ea96e86b6bcb160351c18a7edc4a561918a820cb","modified":1632902032630},{"_id":"themes/next2/source/css/_common/scaffolding/scaffolding.styl","hash":"523fb7b653b87ae37fc91fc8813e4ffad87b0d7e","modified":1632902032633},{"_id":"themes/next2/source/css/_common/outline/mobile.styl","hash":"28368ac06d04ccf0bbf3dc9e0dfcf341c200b28c","modified":1632902032625},{"_id":"themes/next2/source/css/_common/scaffolding/tables.styl","hash":"e1c85ab2831fd7d4bb84aea1850a0160be0023e8","modified":1632902032634},{"_id":"themes/next2/source/css/_common/scaffolding/toggles.styl","hash":"572a41499391677d84b16d8dbd6a996a3d5ce041","modified":1632902032637},{"_id":"themes/next2/source/css/_common/scaffolding/pagination.styl","hash":"a472fb1afc6486266b85f773501a290e0a80c370","modified":1632902032633},{"_id":"themes/next2/source/css/_common/scaffolding/normalize.styl","hash":"b56367ea676ea8e8783ea89cd4ab150c7da7a060","modified":1632902032633},{"_id":"themes/next2/source/css/_common/components/back-to-top.styl","hash":"92915560810c0311dada43ed629b8fc4ff0fc7a4","modified":1632902032613},{"_id":"themes/next2/source/css/_common/components/back-to-top-sidebar.styl","hash":"d4809783ded05625675b1b4bbd9e99d7f5f7d7f9","modified":1632902032612},{"_id":"themes/next2/source/css/_common/components/reading-progress.styl","hash":"ee8fb8348aa76a9b346927ba4cae5666d8d777f7","modified":1632902032619},{"_id":"themes/next2/source/css/_schemes/Mist/_header.styl","hash":"06786e1ed8774f8f08cbfc711296cf189aaf1b8c","modified":1632902032640},{"_id":"themes/next2/source/css/_common/components/components.styl","hash":"1c75a837faae9aa2d0a5f30d2078aa8d2ccc2552","modified":1632902032613},{"_id":"themes/next2/source/css/_schemes/Mist/_layout.styl","hash":"5604ac1e161099a4d3e5657d53507268866dc717","modified":1632902032640},{"_id":"themes/next2/source/css/_schemes/Mist/_menu.styl","hash":"f6d165dae928c12bde3f271d299a93b334116433","modified":1632902032641},{"_id":"themes/next2/source/css/_schemes/Gemini/index.styl","hash":"7ad04d5a02a7618ebb09c1d5a435d46c4df2c620","modified":1632902032639},{"_id":"themes/next2/source/css/_schemes/Muse/_header.styl","hash":"06080fd963c904d96c00eff098a284e337953013","modified":1632902032643},{"_id":"themes/next2/source/css/_schemes/Mist/index.styl","hash":"ab16a3dcdc0393b9b582ef59dcc13db9320e917c","modified":1632902032642},{"_id":"themes/next2/source/css/_schemes/Muse/_layout.styl","hash":"82a29572dd90451f75358a2ee2522b87304a0bb8","modified":1632902032643},{"_id":"themes/next2/source/css/_schemes/Mist/_posts-expand.styl","hash":"faadd1616a18d626f145e9fbdbfb770deab35b2c","modified":1632902032642},{"_id":"themes/next2/source/css/_schemes/Muse/_sub-menu.styl","hash":"c48ccd8d6651fe1a01faff8f01179456d39ba9b1","modified":1632902032645},{"_id":"themes/next2/source/css/_schemes/Muse/index.styl","hash":"6ad168288b213cec357e9b5a97674ff2ef3a910c","modified":1632902032645},{"_id":"themes/next2/source/css/_schemes/Pisces/_header.styl","hash":"be5c46b983df08b9dbac1b4749b1a101b54b6b50","modified":1632902032645},{"_id":"themes/next2/source/css/_schemes/Muse/_menu.styl","hash":"c706733f5196776fe2657a9bebe0a727cf8fe8e5","modified":1632902032644},{"_id":"themes/next2/source/css/_schemes/Pisces/_layout.styl","hash":"6eee86c8f0175d6c09e434053516cd8556f78d44","modified":1632902032646},{"_id":"themes/next2/source/css/_schemes/Muse/_sidebar.styl","hash":"a57dca7008b1f4721359a2a3b420ed2eec02b0a1","modified":1632902032644},{"_id":"themes/next2/source/css/_schemes/Pisces/_menu.styl","hash":"c435cfd858bf82726fff2c85d384e2207bea0370","modified":1632902032646},{"_id":"themes/next2/source/css/_schemes/Pisces/_sub-menu.styl","hash":"78f0b6edc296a9ed5144da9f9752c0b96bebfaa5","modified":1632902032647},{"_id":"themes/next2/source/css/_schemes/Pisces/_sidebar.styl","hash":"031765bd4564d97ba694c1b73615ed631f1c64aa","modified":1632902032647},{"_id":"themes/next2/source/css/_schemes/Pisces/index.styl","hash":"8000075b227749a7495eaf417cac6ccfbe441580","modified":1632902032647},{"_id":"themes/next2/source/static/api/css/imgshare.css","hash":"c3624a2dde649ed28b2e5d1f050fd971fbaf71a0","modified":1632902032699},{"_id":"themes/next2/source/static/api/css/like.css","hash":"2024d58206df01b858c38f07957f928b44e14cb3","modified":1632902032700},{"_id":"themes/next2/source/static/api/css/select_share.css","hash":"d0259abdb410193cf761e42bffaa51e70327a0cd","modified":1632902032700},{"_id":"themes/next2/source/static/api/css/share_style0_16.css","hash":"090e77e9e6e9b8ee0d73a233cbe46499de935bdd","modified":1632902032702},{"_id":"themes/next2/source/static/api/css/share_popup.css","hash":"338ba2b30ef8ce0c84cd36b37d7f8482996291dc","modified":1632902032701},{"_id":"themes/next2/source/static/api/css/share_style0_24.css","hash":"7d1f9f32b80f91001f4f951aa045180cde22d82e","modified":1632902032702},{"_id":"themes/next2/source/static/api/css/share_style1_16.css","hash":"aeb4e9fa96cfa0167481e1f4007079dc3f3c6c27","modified":1632902032703},{"_id":"themes/next2/source/static/api/css/share_style0_32.css","hash":"7c2d12ea532c8a55c102b649bb23ef5bf53b3ed3","modified":1632902032703},{"_id":"themes/next2/source/static/api/css/share_style1_24.css","hash":"3ee5f745c863b4f68299fe5dc125f913ca619c07","modified":1632902032704},{"_id":"themes/next2/source/static/api/css/share_style1_32.css","hash":"626d67a4c0bb72a152e90d25dbf281c0c35a2140","modified":1632902032704},{"_id":"themes/next2/source/static/api/css/share_style2_16.css","hash":"572c8e856988e463eb865f38d33ba003cc20d083","modified":1632902032705},{"_id":"themes/next2/source/static/api/css/share_style2.css","hash":"1ad451187cde8a74843fd398b924ca0ac911e9be","modified":1632902032705},{"_id":"themes/next2/source/static/api/css/share_style2_24.css","hash":"917d963d3be111064cbb1d122963da91ee3724a0","modified":1632902032705},{"_id":"themes/next2/source/static/api/css/share_style2_32.css","hash":"3657bbc4b5bbc66ebca4906ee0a1cbf9f98be883","modified":1632902032706},{"_id":"themes/next2/source/static/api/css/slide_share.css","hash":"3898feaf45559b039f885bee8f9e831f48adb20c","modified":1632902032707},{"_id":"themes/next2/source/static/api/css/share_style4.css","hash":"0a9e2ed712a5ef5c4699c038cd001a0d688a0fdf","modified":1632902032706},{"_id":"themes/next2/source/static/api/css/weixin_popup.css","hash":"5e6c5084bfd16051de5776c2e136a5462b08a32c","modified":1632902032707},{"_id":"themes/next2/source/css/_common/scaffolding/highlight/copy-code.styl","hash":"83ee4993710fc8daa1c8dbfccd5d5091fd244c30","modified":1632902032632},{"_id":"themes/next2/source/css/_common/outline/header/bookmark.styl","hash":"8cb89864e8245a356d08ef0fee3133810f646fea","modified":1632902032623},{"_id":"themes/next2/source/css/_common/scaffolding/highlight/highlight.styl","hash":"920f21dc03b28f006aef7e9d0fd444c2cd283efc","modified":1632902032632},{"_id":"themes/next2/source/css/_common/outline/header/header.styl","hash":"f1778d2c56974b96dae429456d5c55be325c4946","modified":1632902032623},{"_id":"themes/next2/source/static/api/js/share.js","hash":"73bdb33580128e6c79a726a25f98092c0faa369d","modified":1632902033017},{"_id":"themes/next2/source/css/_common/scaffolding/tags/blockquote-center.styl","hash":"15a5e273a8137550c93c8d2a60f9fcf86e04a89e","modified":1632902032634},{"_id":"themes/next2/source/css/_common/scaffolding/tags/group-pictures.styl","hash":"393ff96234e4196b569d4b11496774eb78e147de","modified":1632902032635},{"_id":"themes/next2/source/css/_common/scaffolding/tags/label.styl","hash":"f09bc97e3681d73c38d7d3c5c271486c2c6537e2","modified":1632902032635},{"_id":"themes/next2/source/css/_common/outline/header/site-nav.styl","hash":"9c8abc55c9d94d384a245013951aba5ecca2f4fe","modified":1632902032625},{"_id":"themes/next2/source/css/_common/outline/header/github-banner.styl","hash":"254e781e7b25e31a1a589c8b38dc608802f1cc6e","modified":1632902032623},{"_id":"themes/next2/source/css/_common/outline/header/menu.styl","hash":"6d8afd8e23c40bb2b2a2edbe4eb0d2671cd81188","modified":1632902032624},{"_id":"themes/next2/source/css/_common/scaffolding/tags/mermaid.styl","hash":"3c029a003e9bf747e1b9cc7c0c127f6028374876","modified":1632902032636},{"_id":"themes/next2/source/css/_common/outline/header/site-meta.styl","hash":"a83a1236564b81eab9a23dba9a634a6de90d4726","modified":1632902032624},{"_id":"themes/next2/source/css/_common/scaffolding/tags/pdf.styl","hash":"b49c64f8e9a6ca1c45c0ba98febf1974fdd03616","modified":1632902032636},{"_id":"themes/next2/source/css/_common/scaffolding/tags/tags.styl","hash":"cef4e779473daa3761709958243c6b8a57bbd814","modified":1632902032637},{"_id":"themes/next2/source/css/_common/scaffolding/tags/link-grid.styl","hash":"acfdec45e56cdd6a5ea61e0154f8a6d1bc068214","modified":1632902032635},{"_id":"themes/next2/source/css/_common/scaffolding/tags/note.styl","hash":"29bef220307d86b1eafbb3714381df32d48b5a60","modified":1632902032636},{"_id":"themes/next2/source/css/_common/scaffolding/tags/tabs.styl","hash":"dcf426c2a4836386c0c27235de3f9a95c5de67cc","modified":1632902032637},{"_id":"themes/next2/source/css/_common/components/pages/breadcrumb.styl","hash":"8afdc311c6b8db121758371f95cf1c5e77354f42","modified":1632902032614},{"_id":"themes/next2/source/css/_common/outline/footer/footer.styl","hash":"f11dca93e334b68a29e792f7abe682993fab7568","modified":1632902032622},{"_id":"themes/next2/source/css/_common/components/pages/categories.styl","hash":"b6e2eb1550a7845cb2adf86081a4ab6c7bde1e68","modified":1632902032614},{"_id":"themes/next2/source/css/_common/components/pages/pages.styl","hash":"7504dbc5c70262b048143b2c37d2b5aa2809afa2","modified":1632902032614},{"_id":"themes/next2/source/css/_common/components/post/post-body.styl","hash":"5d61dedb3bec1021d52894f9b379e4d0953f6a35","modified":1632902032616},{"_id":"themes/next2/source/css/_common/components/pages/tag-cloud.styl","hash":"1a81d1a71fcf0699629ce6e72dfd0a15f3a2dd0a","modified":1632902032615},{"_id":"themes/next2/source/css/_common/components/pages/schedule.styl","hash":"19fc5ca0784f5d2befddb9d8bc463b916c5c2518","modified":1632902032615},{"_id":"themes/next2/source/css/_common/components/post/post-followme.styl","hash":"76d0dfb3a8b873a6180604ac6daecf38b6a963a2","modified":1632902032616},{"_id":"themes/next2/source/css/_common/components/post/post-collapse.styl","hash":"8998a07acf0dbd10811835c8dfc91d92e680bcae","modified":1632902032616},{"_id":"themes/next2/source/css/_common/components/post/post-gallery.styl","hash":"aa366d37389760c8595529b850f461569577a1c5","modified":1632902032617},{"_id":"themes/next2/source/css/_common/components/post/post-nav.styl","hash":"cf6540e12c2de5befcfb7e92d915e3b75fd53dfa","modified":1632902032618},{"_id":"themes/next2/source/css/_common/components/post/post-footer.styl","hash":"8a2e724df3d5cd14765eb951f0a9e1dba399fd35","modified":1632902032617},{"_id":"themes/next2/source/css/_common/components/post/post-widgets.styl","hash":"5b5649b9749e3fd8b63aef22ceeece0a6e1df605","modified":1632902032618},{"_id":"themes/next2/source/css/_common/components/third-party/related-posts.styl","hash":"2c534d2b2dbc932ad65d335a720a7ba9612bac04","modified":1632902032620},{"_id":"themes/next2/source/css/_common/components/post/post-header.styl","hash":"d6ecc5dfd15c588782ba5e1df9f915b305622aef","modified":1632902032617},{"_id":"themes/next2/source/css/_common/components/third-party/math.styl","hash":"48ee817d05ddc788423d7f10e9823e23fda81d04","modified":1632902032620},{"_id":"themes/next2/source/css/_common/components/third-party/gitalk.styl","hash":"8a7fc03a568b95be8d3337195e38bc7ec5ba2b23","modified":1632902032620},{"_id":"themes/next2/source/css/_common/components/post/post-reward.styl","hash":"27001ad06f69ff035639210ab2f614861b21a4f4","modified":1632902032618},{"_id":"themes/next2/source/css/_common/components/post/post.styl","hash":"b3fa752f72ca1413289b76c56fbd33a00e3d25d7","modified":1632902032619},{"_id":"themes/next2/source/css/_common/components/third-party/third-party.styl","hash":"5d8fc91cdb7ee313eb367dcec7d5b2429f98242f","modified":1632902032621},{"_id":"themes/next2/source/css/_common/outline/sidebar/sidebar-author-links.styl","hash":"66782e68f1c74a7d0aecef20e2ca16bbe6b52592","modified":1632902032626},{"_id":"themes/next2/source/css/_common/outline/sidebar/sidebar-blogroll.styl","hash":"9950c3188a28e1c63b5498b7bdcd14b12ace3e28","modified":1632902032627},{"_id":"themes/next2/source/css/_common/outline/sidebar/sidebar-button.styl","hash":"ab715dbf2b98bfeb5e7b7c43e92e5c02496cc2ea","modified":1632902032627},{"_id":"themes/next2/source/css/_common/outline/sidebar/sidebar-dimmer.styl","hash":"521b36ea7bb3a843029cbfbb6b5e76e91c40a19f","modified":1632902032627},{"_id":"themes/next2/source/css/_common/components/third-party/search.styl","hash":"2896840ab8ac8ab2a7f76d18df893f290ac31625","modified":1632902032621},{"_id":"themes/next2/source/css/_common/outline/sidebar/sidebar-author.styl","hash":"5b38ac4a0f1ade0e681aff0e3366c481d9cf3dcd","modified":1632902032626},{"_id":"themes/next2/source/css/_common/outline/sidebar/sidebar-nav.styl","hash":"85d05fc483f0f8c2e00d24f0b1a80ad1363a8189","modified":1632902032628},{"_id":"themes/next2/source/css/_common/outline/sidebar/sidebar-toggle.styl","hash":"432e73bc4f99322af6af1852e0ea6e674919c31a","modified":1632902032628},{"_id":"themes/next2/source/css/_common/outline/sidebar/site-state.styl","hash":"497fc002d7415d9bed8cad26ba74ac66045397b7","modified":1632902032629},{"_id":"themes/next2/source/css/_common/outline/sidebar/sidebar-toc.styl","hash":"469855a72d2c2b63a21df8fbcb8cc41d32cb9bde","modified":1632902032628},{"_id":"themes/next2/source/css/_common/outline/sidebar/sidebar.styl","hash":"3378f4d1640033ebde25798f602fddf88f3dcadd","modified":1632902032629},{"_id":"themes/next2/source/static/api/img/share/icons_0_16.png","hash":"0eec1e81a04664b2032bd389513349e9bd5d5b0f","modified":1632902032708},{"_id":"themes/next2/source/static/api/img/share/icons_1_16.png","hash":"3793c3265429ab7b830bfaf18322259cd0b4c4ef","modified":1632902032709},{"_id":"themes/next2/source/static/api/img/share/icons_0_24.png","hash":"a89223f9714c8c4fa169430a327963ca6a1c9a6e","modified":1632902032708},{"_id":"themes/next2/source/static/api/img/share/icons_0_32.png","hash":"c20521634fdacef39631031671528713e6ba6081","modified":1632902032709},{"_id":"themes/next2/source/static/api/img/share/icons_1_24.png","hash":"9f1d472095dbe138ef7aff069b1d18cae6ffa942","modified":1632902032710},{"_id":"themes/next2/source/static/api/img/share/icons_2_16.png","hash":"07340442cb61aabb419dd226f4bfb206a7577f52","modified":1632902032711},{"_id":"themes/next2/source/static/api/img/share/icons_1_32.png","hash":"09825de5f238c97e4374d545961d6e0d5bbfb3e2","modified":1632902032710},{"_id":"themes/next2/source/static/api/img/share/icons_2_24.png","hash":"e47fb87c533f2be89f22901f0864d9b5ef83412d","modified":1632902032711},{"_id":"themes/next2/source/static/api/img/share/icons_2_32.png","hash":"deba62865245a6b5aafa446787d72165c703b943","modified":1632902032712},{"_id":"themes/next2/source/static/api/img/share/l1.gif","hash":"70e1932ca7a622ed3322b683eceb7a590860a55e","modified":1632902032743},{"_id":"themes/next2/source/static/api/img/share/l0.gif","hash":"738b92632b0a9789a9eb568b8d101eb64f55f6e0","modified":1632902032727},{"_id":"themes/next2/source/static/api/img/share/l2.gif","hash":"e6a5d6104c226a686d48759e0268e09d762e242e","modified":1632902032758},{"_id":"themes/next2/source/static/api/img/share/l3.gif","hash":"26c0dd37d98df63abb9d3d83e01bb47c34ee3f0f","modified":1632902032775},{"_id":"themes/next2/source/static/api/img/share/l4.gif","hash":"8a9c3cf99766d3f07a9c480cfdffdc3197b9a6b9","modified":1632902032790},{"_id":"themes/next2/source/static/api/img/share/l5.gif","hash":"148706f56b8ef4fd9d8483d0ac3a6730e72fc0ad","modified":1632902032804},{"_id":"themes/next2/source/static/api/img/share/l6.gif","hash":"f4b8e3188f744f13aca46b27b451d55d9e209c48","modified":1632902032819},{"_id":"themes/next2/source/static/api/img/share/pop_c.gif","hash":"e8b9ece6ddaa47ccb2c15f2396d1cd3020740603","modified":1632902032866},{"_id":"themes/next2/source/static/api/img/share/l7.gif","hash":"e4f7e5e56c8f4eb026b5cb0affe3bd69c31af261","modified":1632902032835},{"_id":"themes/next2/source/static/api/img/share/l8.gif","hash":"ec7dbc7703961356e05528d2844b983f225445e4","modified":1632902032850},{"_id":"themes/next2/source/static/api/img/share/r0.gif","hash":"882f255fbafc0136a3917c1dd40db88879c1b1c1","modified":1632902032885},{"_id":"themes/next2/source/static/api/img/share/r1.gif","hash":"96064d132ee2477c0e444c2e18162f9d1dc9e9c2","modified":1632902032899},{"_id":"themes/next2/source/static/api/img/share/r2.gif","hash":"67c84a67be3b039892e9cb8c7c29ed29813bf60f","modified":1632902032914},{"_id":"themes/next2/source/static/api/img/share/r3.gif","hash":"ecdd21f1457be54afc96e2d005524eef93d7bf85","modified":1632902032930},{"_id":"themes/next2/source/static/api/img/share/r5.gif","hash":"e61b32d1830390303927bdab21823959f8dc7023","modified":1632902032961},{"_id":"themes/next2/source/static/api/img/share/r4.gif","hash":"517435e69a2215a0f003e75a4861154ca963c30e","modified":1632902032945},{"_id":"themes/next2/source/static/api/img/share/r6.gif","hash":"4bc01e08ef0015fddf5b8c7257c094ec584ca3ee","modified":1632902032977},{"_id":"themes/next2/source/static/api/img/share/sc.png","hash":"e5a2ca56973a3d6608e7e3a48ebd9fa5ebda9991","modified":1632902033010},{"_id":"themes/next2/source/static/api/img/share/r7.gif","hash":"3c596c924910c93cf3e37cc1b2870dbf271151e2","modified":1632902032992},{"_id":"themes/next2/source/static/api/img/share/r8.gif","hash":"c068ece54a72a3f2428d4f1b5ca7c176f027dd4e","modified":1632902033009},{"_id":"themes/next2/source/static/api/img/share/selectshare_close.png","hash":"6f3666278268890a153c85fb9f04ac848c442561","modified":1632902033010},{"_id":"themes/next2/source/static/api/js/base/class.js","hash":"db02960fb51f69a0d50dc9ed626a998be3884706","modified":1632902033012},{"_id":"themes/next2/source/static/api/js/component/comm_tools.js","hash":"28d096a61f54e64bdbc32d172ae20e7f6e9656a7","modified":1632902033014},{"_id":"themes/next2/source/static/api/img/share/share-search-icon.png","hash":"0629677a7eb5aa3e8bab3faa310c6d8c467a3287","modified":1632902033011},{"_id":"themes/next2/source/static/api/js/component/anticheat.js","hash":"ee6b11a7ed39ae67c1c2aeeef96b4a0f40f8083c","modified":1632902033013},{"_id":"themes/next2/source/static/api/js/component/animate.js","hash":"17a3495543db66e4eb56a81a93edf3e41ca8cc31","modified":1632902033013},{"_id":"themes/next2/source/static/api/js/component/partners.js","hash":"a4c275ffb4d3557280211e6bf0573485b397ffd8","modified":1632902033014},{"_id":"themes/next2/source/static/api/js/component/pop_base.js","hash":"eae6e120c149a21caa2883c533ccc40bc07fda51","modified":1632902033015},{"_id":"themes/next2/source/static/api/js/component/pop_dialog.js","hash":"4417d2fa9ad8ff6c79a2352ef07e9d10a1313ee0","modified":1632902033015},{"_id":"themes/next2/source/static/api/js/component/pop_popup.js","hash":"aface5a8c3f71e9e024bf0df5b361ed8f5452f50","modified":1632902033015},{"_id":"themes/next2/source/static/api/js/conf/const.js","hash":"7da7df37d0f3d3e1977a8d107c98a3c1ecdb39c2","modified":1632902033017},{"_id":"themes/next2/source/static/api/js/conf/define.js","hash":"ee0afad836be1553980501855752ccd79fe1fe0e","modified":1632902033017},{"_id":"themes/next2/source/static/api/js/component/qrcode.js","hash":"2e3cc4cc5545556dd97ab899ff32d3ab7ccee808","modified":1632902033016},{"_id":"themes/next2/source/static/api/js/share/combine_api.js","hash":"7ad3c5396bf20704e87f98ebe118034ed3cc7b22","modified":1632902033018},{"_id":"themes/next2/source/static/api/js/share/image_api.js","hash":"43a93415f2a5dd34760042c2bcd9f4692feecb5d","modified":1632902033019},{"_id":"themes/next2/source/static/api/js/share/select_api.js","hash":"bf259a7912ee6124d741dbb5e45cab40bfa45e90","modified":1632902033020},{"_id":"themes/next2/source/static/api/js/share/likeshare.js","hash":"2d14ab97cc3dc294c51c0d6814f4ea45f4b4e312","modified":1632902033019},{"_id":"themes/next2/source/static/api/js/share/api_base.js","hash":"cbacd664451f80955c2ff4caccd4b9110062c714","modified":1632902033018},{"_id":"themes/next2/source/static/api/js/component/pop_popup_slide.js","hash":"45a72013fba95249ca965fd4d98f3bbde7a7098a","modified":1632902033016},{"_id":"themes/next2/source/static/api/js/share/like_api.js","hash":"4034b10f8f34367c6db47ae092e5b4107c2fb8b4","modified":1632902033019},{"_id":"themes/next2/source/static/api/js/share/slide_api.js","hash":"c317e3f7fec13d89178e475f26a689bb94e5aa76","modified":1632902033020},{"_id":"themes/next2/source/static/api/js/share/share_api.js","hash":"f7b86d0cc063f692a73a174d04e77cbe3c5facc7","modified":1632902033020},{"_id":"themes/next2/source/static/api/js/trans/trans_bdxc.js","hash":"a512ebfca0319ab38d06b7b0fb74bcdc942dc46e","modified":1632902033024},{"_id":"themes/next2/source/static/api/js/start/router.js","hash":"27bc546a9c796b15e59442aaf09ae645a2ed4c74","modified":1632902033021},{"_id":"themes/next2/source/static/api/js/trans/trans_bdysc.js","hash":"28bb985a03b6b1da5a89a143331932a12126c9c3","modified":1632902033025},{"_id":"themes/next2/source/static/api/js/trans/trans.js","hash":"cb82afecdbede8d5a00b6c5ea9595187b6408376","modified":1632902033023},{"_id":"themes/next2/source/static/api/js/trans/trans_weixin.js","hash":"e68e9bc91ee6fbcd64ac788463870f01602a8562","modified":1632902033026},{"_id":"themes/next2/source/static/api/js/view/image_view.js","hash":"bb66297a5bd2c7dd931b9145f5d4a616876f3373","modified":1632902033027},{"_id":"themes/next2/source/static/api/js/view/like_view.js","hash":"c1b6a3f3f89ac734c6da284c1ba1dde2ada4e250","modified":1632902033028},{"_id":"themes/next2/source/static/api/js/view/select_view.js","hash":"2611efec1d31d85609feea0c57e14d3f817a6220","modified":1632902033028},{"_id":"themes/next2/source/static/api/js/view/share_view.js","hash":"f445ce9cbbcf887da5e248b1cfadc03ab7df76d0","modified":1632902033028},{"_id":"themes/next2/source/static/api/js/view/slide_view.js","hash":"973ded5cd15eb119e79ffd9326af3a44167b26bd","modified":1632902033029},{"_id":"themes/next2/source/static/api/js/view/view_base.js","hash":"b3fd7dafde05d63af3dfe9e0a59f9367f81402c5","modified":1632902033029},{"_id":"themes/next2/source/static/api/js/base/tangram.js","hash":"e1952e27f6dc3d6339128cec157acef8cc0a775f","modified":1632902033013}],"Category":[],"Data":[],"Page":[{"title":"tags","type":"tags","layout":"tags","comments":0,"translate_title":"tags","_content":"","source":"tags/index.md","raw":"---\ntitle: tags\ntype: tags\nlayout: tags\ncomments: false\ntranslate_title: tags\n---\n","date":"2021-09-29T07:53:51.828Z","updated":"2021-09-29T07:53:51.828Z","path":"tags/index.html","_id":"cl1zxy69q0000p4vl28dn7xzz","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script>","site":{"data":{}},"length":0,"excerpt":"","more":""},{"title":"请求的资源找不到了!","comments":0,"translate_title":"404-not-found-the-page-cannot-be-displayed","_content":"\n<!DOCTYPE html>\n<html>\n\n<head>\n  <meta charset=\"UTF-8\" />\n  <title>404</title>\n</head>\n<style>\n.page404{text-align:center;}\n  .hit-the-floor {\n    text-align: center;\n    color: #fff;\n    font-size: 5em;\n    font-weight: bold;\n    font-family: Helvetica;\n    text-shadow:\n      0 1px 0 #ccc,\n      0 2px 0 #c9c9c9,\n      0 3px 0 #bbb,\n      0 4px 0 #b9b9b9,\n      0 5px 0 #aaa,\n      0 6px 1px rgba(0, 0, 0, .1),\n      0 0 5px rgba(0, 0, 0, .1),\n      0 1px 3px rgba(0, 0, 0, .3),\n      0 3px 5px rgba(0, 0, 0, .2),\n      0 5px 10px rgba(0, 0, 0, .25),\n      0 10px 10px rgba(0, 0, 0, .2),\n      0 20px 20px rgba(0, 0, 0, .15);\n  }\n</style>\n\n<body>\n<div class=\"page404\">\n  <div class=\"hit-the-floor\">404</div>\n  <div class=\"tips\">访问不到文章，可能是<strong>路径变化了</strong>！你可以进行如下操作：</div>\n  <div class=\"container1\">\n    <div class=\"container1-item\"><a href=\"/\" title=\"回到首页\">回到首页</a></div>\n    <div class=\"container1-item\"><a href=\"/archives/\" title=\"看文章归档目录\">看文章归档目录</a></div>\n    <div class=\"container1-item popup-trigger\" style=\"cursor:pointer;\">直接搜索文章内容</div>\n  </div>\n  </div>\n\n</body>\n<script>\n \n</script>\n\n</html>\n","source":"404/index.md","raw":"---\ntitle: 请求的资源找不到了!\ncomments: false\npermalink: /404\ntranslate_title: 404-not-found-the-page-cannot-be-displayed\n---\n\n<!DOCTYPE html>\n<html>\n\n<head>\n  <meta charset=\"UTF-8\" />\n  <title>404</title>\n</head>\n<style>\n.page404{text-align:center;}\n  .hit-the-floor {\n    text-align: center;\n    color: #fff;\n    font-size: 5em;\n    font-weight: bold;\n    font-family: Helvetica;\n    text-shadow:\n      0 1px 0 #ccc,\n      0 2px 0 #c9c9c9,\n      0 3px 0 #bbb,\n      0 4px 0 #b9b9b9,\n      0 5px 0 #aaa,\n      0 6px 1px rgba(0, 0, 0, .1),\n      0 0 5px rgba(0, 0, 0, .1),\n      0 1px 3px rgba(0, 0, 0, .3),\n      0 3px 5px rgba(0, 0, 0, .2),\n      0 5px 10px rgba(0, 0, 0, .25),\n      0 10px 10px rgba(0, 0, 0, .2),\n      0 20px 20px rgba(0, 0, 0, .15);\n  }\n</style>\n\n<body>\n<div class=\"page404\">\n  <div class=\"hit-the-floor\">404</div>\n  <div class=\"tips\">访问不到文章，可能是<strong>路径变化了</strong>！你可以进行如下操作：</div>\n  <div class=\"container1\">\n    <div class=\"container1-item\"><a href=\"/\" title=\"回到首页\">回到首页</a></div>\n    <div class=\"container1-item\"><a href=\"/archives/\" title=\"看文章归档目录\">看文章归档目录</a></div>\n    <div class=\"container1-item popup-trigger\" style=\"cursor:pointer;\">直接搜索文章内容</div>\n  </div>\n  </div>\n\n</body>\n<script>\n \n</script>\n\n</html>\n","date":"2021-09-29T08:17:40.064Z","updated":"2021-09-29T08:17:40.064Z","path":"/404.html","layout":"page","_id":"cl1zxy69y0002p4vl1tww7suv","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><!DOCTYPE html>\n<html>\n\n<head>\n  <meta charset=\"UTF-8\" />\n  <title>404</title>\n</head>\n<style>\n.page404{text-align:center;}\n  .hit-the-floor {\n    text-align: center;\n    color: #fff;\n    font-size: 5em;\n    font-weight: bold;\n    font-family: Helvetica;\n    text-shadow:\n      0 1px 0 #ccc,\n      0 2px 0 #c9c9c9,\n      0 3px 0 #bbb,\n      0 4px 0 #b9b9b9,\n      0 5px 0 #aaa,\n      0 6px 1px rgba(0, 0, 0, .1),\n      0 0 5px rgba(0, 0, 0, .1),\n      0 1px 3px rgba(0, 0, 0, .3),\n      0 3px 5px rgba(0, 0, 0, .2),\n      0 5px 10px rgba(0, 0, 0, .25),\n      0 10px 10px rgba(0, 0, 0, .2),\n      0 20px 20px rgba(0, 0, 0, .15);\n  }\n</style>\n\n<body>\n<div class=\"page404\">\n  <div class=\"hit-the-floor\">404</div>\n  <div class=\"tips\">访问不到文章，可能是<strong>路径变化了</strong>！你可以进行如下操作：</div>\n  <div class=\"container1\">\n    <div class=\"container1-item\"><a href=\"/\" title=\"回到首页\">回到首页</a></div>\n    <div class=\"container1-item\"><a href=\"/archives/\" title=\"看文章归档目录\">看文章归档目录</a></div>\n    <div class=\"container1-item popup-trigger\" style=\"cursor:pointer;\">直接搜索文章内容</div>\n  </div>\n  </div>\n\n</body>\n<script>\n \n</script>\n\n</html>\n","site":{"data":{}},"length":404,"excerpt":"","more":"<!DOCTYPE html>\n<html>\n\n<head>\n  <meta charset=\"UTF-8\" />\n  <title>404</title>\n</head>\n<style>\n.page404{text-align:center;}\n  .hit-the-floor {\n    text-align: center;\n    color: #fff;\n    font-size: 5em;\n    font-weight: bold;\n    font-family: Helvetica;\n    text-shadow:\n      0 1px 0 #ccc,\n      0 2px 0 #c9c9c9,\n      0 3px 0 #bbb,\n      0 4px 0 #b9b9b9,\n      0 5px 0 #aaa,\n      0 6px 1px rgba(0, 0, 0, .1),\n      0 0 5px rgba(0, 0, 0, .1),\n      0 1px 3px rgba(0, 0, 0, .3),\n      0 3px 5px rgba(0, 0, 0, .2),\n      0 5px 10px rgba(0, 0, 0, .25),\n      0 10px 10px rgba(0, 0, 0, .2),\n      0 20px 20px rgba(0, 0, 0, .15);\n  }\n</style>\n\n<body>\n<div class=\"page404\">\n  <div class=\"hit-the-floor\">404</div>\n  <div class=\"tips\">访问不到文章，可能是<strong>路径变化了</strong>！你可以进行如下操作：</div>\n  <div class=\"container1\">\n    <div class=\"container1-item\"><a href=\"/\" title=\"回到首页\">回到首页</a></div>\n    <div class=\"container1-item\"><a href=\"/archives/\" title=\"看文章归档目录\">看文章归档目录</a></div>\n    <div class=\"container1-item popup-trigger\" style=\"cursor:pointer;\">直接搜索文章内容</div>\n  </div>\n  </div>\n\n</body>\n<script>\n \n</script>\n\n</html>\n"},{"title":"一些话","type":"somewords","comments":0,"translate_title":"some-words","date":"2020-05-05T00:53:30.000Z","_content":"\n<!-- 一言API -->\n<!-- 现代写法，推荐 -->\n<!-- 兼容低版本浏览器 (包括 IE)，可移除 -->\n<script class=\"pjax-reload\" src=\"https://cdn.jsdelivr.net/npm/bluebird@3/js/browser/bluebird.min.js\"></script>\n<script class=\"pjax-reload\" src=\"https://cdn.jsdelivr.net/npm/whatwg-fetch@2.0.3/fetch.min.js\"></script>\n<!--End-->\n<script class=\"pjax-reload\">\n  fetch('https://v1.hitokoto.cn')\n    .then(function (res){\n      return res.json();\n    })\n    .then(function (data) {\n      var hitokoto = document.getElementById('hitokoto');\n      hitokoto.innerText = data.hitokoto + '——【' + data.from + '】';\n    })\n    .catch(function (err) {\n      console.error(err);\n    })\n</script>\n\n0.一言\n\n<p id=\"hitokoto\">正在加载一言...</p>\n\n1.[上过大学和没上大学的区别在哪？](https://www.zhihu.com/question/280100422/answer/566951310) （2020 年 5 月 5 日 09:38:43）\n\n> 也许等大学后你和你没上的同学一起聊天\n> 他会嘲笑你说：上大学有什么用？还不是和我一起坐在一起吃大排档。\n> 那时候你只会微微一笑:对啊，因为我们是朋友\n> **我不会因为我感觉到我们之间存在差距而嘲笑你。**\n> **而你会因为你感觉不到我们之间的差距而嘲笑我。**\n\n2.我曾七次鄙视自己的灵魂 （2020 年 5 月 8 日 23:57:13）\n\n> 第一次，当它本可进取时，却故作谦卑；\n> 第二次，当它在空虚时，用爱欲来填充；\n> 第三次，在困难和容易之间，它选择了容易；\n> 第四次，它犯了错，却借由别人也会犯错来宽慰自己；\n> 第五次，它自由软弱，却把它认为是生命的坚韧；\n> 第六次，当它鄙夷一张丑恶的嘴脸时，却不知那正是自己面具中的一副；\n> 第七次，它侧身于生活的污泥中，虽不甘心，却又畏首畏尾。\n\n3.不要一味地允许和同意，拒绝也是提升价值的方式。(2020 年 5 月 16 日 00:36:10)\n\n4.读书不是唯一的出路，学习才是。（2020 年 5 月 24 日 21:17:12）\n\n5.缝纫机乐队台词(2020 年 5 月 24 日 21:25:27)\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175117.png)\n\n<iframe frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" width=330 height=86 src=\"//music.163.com/outchain/player?type=2&id=512377374&auto=0&height=66\"></iframe>\n\n6.越哥说电影[《独自等待》](https://www.youtube.com/watch?v=mi5-1p23hlI)\n\n> 要么好好活着，要么赶紧去死\n\n> 或许每个像陈文的男生，都有过类似的经历，\n> 幻想着自己的梦中情人，脑补着她是多么完美。\n>\n> 其实不仅仅是爱情，那时我们的梦想，我们的青春，\n> 都在我们的脑海中张牙舞爪，我们迫不及待的想要抓在手里。\n> 年轻时我们爱幻想，总以为自己和别人不一样，\n> 关于爱情，关于梦想，关于自己，关于世界。\n>\n> 我们总以为它们都在远方，我们也偏执的相信，\n> 在我们看不见的地方，有我们想要的一切。\n> 可当我们的眼睛总看着前方时，\n> 那些脚下的繁花和身边的风景都会被我们忽略掉。\n>\n> 于是我们总是觉得自己正在独自等待，\n> 好像我们怎么也抓不住跑的飞快的梦想和爱情。\n> 或许时过经年，你才会想起那些年轻时陪在你身边的人，\n> 曾经你们促膝长谈，曾经你们把酒言欢，曾经你们一起犯傻；\n> 但现在的你们似乎很久都没有联系了。\n>\n> 那时候聊感情，聊梦想，聊生活，聊心事，\n> 可如今面临的却是无法穿越的时间长河。\n> 你才明白，有些人已经从你的身边悄悄溜走再也难以重来，\n> 那时候我们左手爱情，右手梦想，\n> 青春却被远远的丢在了某个不起眼的地方。\n\n7.学会解决问题。（2020 年 6 月 24 日 10:48:01）\n\n> 不要害怕遇到问题，正视问题。\n> 分析问题，找到原因。\n> ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175138.png)\n\n8.做不了时间的主人，只能做时间的奴隶。(2020 年 7 月 4 日 10:56:56)\n\n> 学会规划时间，提前安排时间。\n\n9.做好两件事。(2020 年 8 月 21 日 14:54:38)\n\n> 无论你从事什么行业，只要做好两件事就够了：一个是你的**专业**、一个是你的**人品**。专业决定了你的存在，人品决定了你的人脉；剩下的就是坚持，用善良、专业和真诚赢取更多的信任。\n\n10.有些事该经历的总归要经历，没人能替你经历这个过程。\n![image.png](https://i.loli.net/2020/09/01/EnW7bFfzVRe3Kr2.png)\n","source":"somewords/index.md","raw":"---\ntitle: 一些话\ntype: somewords\ncomments: false\ntranslate_title: some-words\ndate: 2020-05-05 08:53:30\n---\n\n<!-- 一言API -->\n<!-- 现代写法，推荐 -->\n<!-- 兼容低版本浏览器 (包括 IE)，可移除 -->\n<script class=\"pjax-reload\" src=\"https://cdn.jsdelivr.net/npm/bluebird@3/js/browser/bluebird.min.js\"></script>\n<script class=\"pjax-reload\" src=\"https://cdn.jsdelivr.net/npm/whatwg-fetch@2.0.3/fetch.min.js\"></script>\n<!--End-->\n<script class=\"pjax-reload\">\n  fetch('https://v1.hitokoto.cn')\n    .then(function (res){\n      return res.json();\n    })\n    .then(function (data) {\n      var hitokoto = document.getElementById('hitokoto');\n      hitokoto.innerText = data.hitokoto + '——【' + data.from + '】';\n    })\n    .catch(function (err) {\n      console.error(err);\n    })\n</script>\n\n0.一言\n\n<p id=\"hitokoto\">正在加载一言...</p>\n\n1.[上过大学和没上大学的区别在哪？](https://www.zhihu.com/question/280100422/answer/566951310) （2020 年 5 月 5 日 09:38:43）\n\n> 也许等大学后你和你没上的同学一起聊天\n> 他会嘲笑你说：上大学有什么用？还不是和我一起坐在一起吃大排档。\n> 那时候你只会微微一笑:对啊，因为我们是朋友\n> **我不会因为我感觉到我们之间存在差距而嘲笑你。**\n> **而你会因为你感觉不到我们之间的差距而嘲笑我。**\n\n2.我曾七次鄙视自己的灵魂 （2020 年 5 月 8 日 23:57:13）\n\n> 第一次，当它本可进取时，却故作谦卑；\n> 第二次，当它在空虚时，用爱欲来填充；\n> 第三次，在困难和容易之间，它选择了容易；\n> 第四次，它犯了错，却借由别人也会犯错来宽慰自己；\n> 第五次，它自由软弱，却把它认为是生命的坚韧；\n> 第六次，当它鄙夷一张丑恶的嘴脸时，却不知那正是自己面具中的一副；\n> 第七次，它侧身于生活的污泥中，虽不甘心，却又畏首畏尾。\n\n3.不要一味地允许和同意，拒绝也是提升价值的方式。(2020 年 5 月 16 日 00:36:10)\n\n4.读书不是唯一的出路，学习才是。（2020 年 5 月 24 日 21:17:12）\n\n5.缝纫机乐队台词(2020 年 5 月 24 日 21:25:27)\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175117.png)\n\n<iframe frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" width=330 height=86 src=\"//music.163.com/outchain/player?type=2&id=512377374&auto=0&height=66\"></iframe>\n\n6.越哥说电影[《独自等待》](https://www.youtube.com/watch?v=mi5-1p23hlI)\n\n> 要么好好活着，要么赶紧去死\n\n> 或许每个像陈文的男生，都有过类似的经历，\n> 幻想着自己的梦中情人，脑补着她是多么完美。\n>\n> 其实不仅仅是爱情，那时我们的梦想，我们的青春，\n> 都在我们的脑海中张牙舞爪，我们迫不及待的想要抓在手里。\n> 年轻时我们爱幻想，总以为自己和别人不一样，\n> 关于爱情，关于梦想，关于自己，关于世界。\n>\n> 我们总以为它们都在远方，我们也偏执的相信，\n> 在我们看不见的地方，有我们想要的一切。\n> 可当我们的眼睛总看着前方时，\n> 那些脚下的繁花和身边的风景都会被我们忽略掉。\n>\n> 于是我们总是觉得自己正在独自等待，\n> 好像我们怎么也抓不住跑的飞快的梦想和爱情。\n> 或许时过经年，你才会想起那些年轻时陪在你身边的人，\n> 曾经你们促膝长谈，曾经你们把酒言欢，曾经你们一起犯傻；\n> 但现在的你们似乎很久都没有联系了。\n>\n> 那时候聊感情，聊梦想，聊生活，聊心事，\n> 可如今面临的却是无法穿越的时间长河。\n> 你才明白，有些人已经从你的身边悄悄溜走再也难以重来，\n> 那时候我们左手爱情，右手梦想，\n> 青春却被远远的丢在了某个不起眼的地方。\n\n7.学会解决问题。（2020 年 6 月 24 日 10:48:01）\n\n> 不要害怕遇到问题，正视问题。\n> 分析问题，找到原因。\n> ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175138.png)\n\n8.做不了时间的主人，只能做时间的奴隶。(2020 年 7 月 4 日 10:56:56)\n\n> 学会规划时间，提前安排时间。\n\n9.做好两件事。(2020 年 8 月 21 日 14:54:38)\n\n> 无论你从事什么行业，只要做好两件事就够了：一个是你的**专业**、一个是你的**人品**。专业决定了你的存在，人品决定了你的人脉；剩下的就是坚持，用善良、专业和真诚赢取更多的信任。\n\n10.有些事该经历的总归要经历，没人能替你经历这个过程。\n![image.png](https://i.loli.net/2020/09/01/EnW7bFfzVRe3Kr2.png)\n","updated":"2021-09-29T07:53:51.828Z","path":"somewords/index.html","layout":"page","_id":"cl1zxy6a10005p4vl6am41770","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><!-- 一言API -->\n<!-- 现代写法，推荐 -->\n<!-- 兼容低版本浏览器 (包括 IE)，可移除 -->\n<script class=\"pjax-reload\" src=\"https://cdn.jsdelivr.net/npm/bluebird@3/js/browser/bluebird.min.js\"></script>\n<script class=\"pjax-reload\" src=\"https://cdn.jsdelivr.net/npm/whatwg-fetch@2.0.3/fetch.min.js\"></script>\n<!--End-->\n<script class=\"pjax-reload\">\n  fetch('https://v1.hitokoto.cn')\n    .then(function (res){\n      return res.json();\n    })\n    .then(function (data) {\n      var hitokoto = document.getElementById('hitokoto');\n      hitokoto.innerText = data.hitokoto + '——【' + data.from + '】';\n    })\n    .catch(function (err) {\n      console.error(err);\n    })\n</script>\n\n<p>0.一言</p>\n<p id=\"hitokoto\">正在加载一言...</p>\n\n<p>1.<a href=\"https://www.zhihu.com/question/280100422/answer/566951310\">上过大学和没上大学的区别在哪？</a> （2020 年 5 月 5 日 09:38:43）</p>\n<blockquote>\n<p>也许等大学后你和你没上的同学一起聊天<br>他会嘲笑你说：上大学有什么用？还不是和我一起坐在一起吃大排档。<br>那时候你只会微微一笑:对啊，因为我们是朋友<br><strong>我不会因为我感觉到我们之间存在差距而嘲笑你。</strong><br><strong>而你会因为你感觉不到我们之间的差距而嘲笑我。</strong></p>\n</blockquote>\n<p>2.我曾七次鄙视自己的灵魂 （2020 年 5 月 8 日 23:57:13）</p>\n<blockquote>\n<p>第一次，当它本可进取时，却故作谦卑；<br>第二次，当它在空虚时，用爱欲来填充；<br>第三次，在困难和容易之间，它选择了容易；<br>第四次，它犯了错，却借由别人也会犯错来宽慰自己；<br>第五次，它自由软弱，却把它认为是生命的坚韧；<br>第六次，当它鄙夷一张丑恶的嘴脸时，却不知那正是自己面具中的一副；<br>第七次，它侧身于生活的污泥中，虽不甘心，却又畏首畏尾。</p>\n</blockquote>\n<p>3.不要一味地允许和同意，拒绝也是提升价值的方式。(2020 年 5 月 16 日 00:36:10)</p>\n<p>4.读书不是唯一的出路，学习才是。（2020 年 5 月 24 日 21:17:12）</p>\n<p>5.缝纫机乐队台词(2020 年 5 月 24 日 21:25:27)</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175117.png\"></p>\n<iframe frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" width=330 height=86 src=\"//music.163.com/outchain/player?type=2&id=512377374&auto=0&height=66\"></iframe>\n\n<p>6.越哥说电影<a href=\"https://www.youtube.com/watch?v=mi5-1p23hlI\">《独自等待》</a></p>\n<blockquote>\n<p>要么好好活着，要么赶紧去死</p>\n</blockquote>\n<blockquote>\n<p>或许每个像陈文的男生，都有过类似的经历，<br>幻想着自己的梦中情人，脑补着她是多么完美。</p>\n<p>其实不仅仅是爱情，那时我们的梦想，我们的青春，<br>都在我们的脑海中张牙舞爪，我们迫不及待的想要抓在手里。<br>年轻时我们爱幻想，总以为自己和别人不一样，<br>关于爱情，关于梦想，关于自己，关于世界。</p>\n<p>我们总以为它们都在远方，我们也偏执的相信，<br>在我们看不见的地方，有我们想要的一切。<br>可当我们的眼睛总看着前方时，<br>那些脚下的繁花和身边的风景都会被我们忽略掉。</p>\n<p>于是我们总是觉得自己正在独自等待，<br>好像我们怎么也抓不住跑的飞快的梦想和爱情。<br>或许时过经年，你才会想起那些年轻时陪在你身边的人，<br>曾经你们促膝长谈，曾经你们把酒言欢，曾经你们一起犯傻；<br>但现在的你们似乎很久都没有联系了。</p>\n<p>那时候聊感情，聊梦想，聊生活，聊心事，<br>可如今面临的却是无法穿越的时间长河。<br>你才明白，有些人已经从你的身边悄悄溜走再也难以重来，<br>那时候我们左手爱情，右手梦想，<br>青春却被远远的丢在了某个不起眼的地方。</p>\n</blockquote>\n<p>7.学会解决问题。（2020 年 6 月 24 日 10:48:01）</p>\n<blockquote>\n<p>不要害怕遇到问题，正视问题。<br>分析问题，找到原因。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175138.png\"></p>\n</blockquote>\n<p>8.做不了时间的主人，只能做时间的奴隶。(2020 年 7 月 4 日 10:56:56)</p>\n<blockquote>\n<p>学会规划时间，提前安排时间。</p>\n</blockquote>\n<p>9.做好两件事。(2020 年 8 月 21 日 14:54:38)</p>\n<blockquote>\n<p>无论你从事什么行业，只要做好两件事就够了：一个是你的<strong>专业</strong>、一个是你的<strong>人品</strong>。专业决定了你的存在，人品决定了你的人脉；剩下的就是坚持，用善良、专业和真诚赢取更多的信任。</p>\n</blockquote>\n<p>10.有些事该经历的总归要经历，没人能替你经历这个过程。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://i.loli.net/2020/09/01/EnW7bFfzVRe3Kr2.png\" alt=\"image.png\"></p>\n","site":{"data":{}},"length":1385,"excerpt":"","more":"<!-- 一言API -->\n<!-- 现代写法，推荐 -->\n<!-- 兼容低版本浏览器 (包括 IE)，可移除 -->\n<script class=\"pjax-reload\" src=\"https://cdn.jsdelivr.net/npm/bluebird@3/js/browser/bluebird.min.js\"></script>\n<script class=\"pjax-reload\" src=\"https://cdn.jsdelivr.net/npm/whatwg-fetch@2.0.3/fetch.min.js\"></script>\n<!--End-->\n<script class=\"pjax-reload\">\n  fetch('https://v1.hitokoto.cn')\n    .then(function (res){\n      return res.json();\n    })\n    .then(function (data) {\n      var hitokoto = document.getElementById('hitokoto');\n      hitokoto.innerText = data.hitokoto + '——【' + data.from + '】';\n    })\n    .catch(function (err) {\n      console.error(err);\n    })\n</script>\n\n<p>0.一言</p>\n<p id=\"hitokoto\">正在加载一言...</p>\n\n<p>1.<a href=\"https://www.zhihu.com/question/280100422/answer/566951310\">上过大学和没上大学的区别在哪？</a> （2020 年 5 月 5 日 09:38:43）</p>\n<blockquote>\n<p>也许等大学后你和你没上的同学一起聊天<br>他会嘲笑你说：上大学有什么用？还不是和我一起坐在一起吃大排档。<br>那时候你只会微微一笑:对啊，因为我们是朋友<br><strong>我不会因为我感觉到我们之间存在差距而嘲笑你。</strong><br><strong>而你会因为你感觉不到我们之间的差距而嘲笑我。</strong></p>\n</blockquote>\n<p>2.我曾七次鄙视自己的灵魂 （2020 年 5 月 8 日 23:57:13）</p>\n<blockquote>\n<p>第一次，当它本可进取时，却故作谦卑；<br>第二次，当它在空虚时，用爱欲来填充；<br>第三次，在困难和容易之间，它选择了容易；<br>第四次，它犯了错，却借由别人也会犯错来宽慰自己；<br>第五次，它自由软弱，却把它认为是生命的坚韧；<br>第六次，当它鄙夷一张丑恶的嘴脸时，却不知那正是自己面具中的一副；<br>第七次，它侧身于生活的污泥中，虽不甘心，却又畏首畏尾。</p>\n</blockquote>\n<p>3.不要一味地允许和同意，拒绝也是提升价值的方式。(2020 年 5 月 16 日 00:36:10)</p>\n<p>4.读书不是唯一的出路，学习才是。（2020 年 5 月 24 日 21:17:12）</p>\n<p>5.缝纫机乐队台词(2020 年 5 月 24 日 21:25:27)</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175117.png\"></p>\n<iframe frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" width=330 height=86 src=\"//music.163.com/outchain/player?type=2&id=512377374&auto=0&height=66\"></iframe>\n\n<p>6.越哥说电影<a href=\"https://www.youtube.com/watch?v=mi5-1p23hlI\">《独自等待》</a></p>\n<blockquote>\n<p>要么好好活着，要么赶紧去死</p>\n</blockquote>\n<blockquote>\n<p>或许每个像陈文的男生，都有过类似的经历，<br>幻想着自己的梦中情人，脑补着她是多么完美。</p>\n<p>其实不仅仅是爱情，那时我们的梦想，我们的青春，<br>都在我们的脑海中张牙舞爪，我们迫不及待的想要抓在手里。<br>年轻时我们爱幻想，总以为自己和别人不一样，<br>关于爱情，关于梦想，关于自己，关于世界。</p>\n<p>我们总以为它们都在远方，我们也偏执的相信，<br>在我们看不见的地方，有我们想要的一切。<br>可当我们的眼睛总看着前方时，<br>那些脚下的繁花和身边的风景都会被我们忽略掉。</p>\n<p>于是我们总是觉得自己正在独自等待，<br>好像我们怎么也抓不住跑的飞快的梦想和爱情。<br>或许时过经年，你才会想起那些年轻时陪在你身边的人，<br>曾经你们促膝长谈，曾经你们把酒言欢，曾经你们一起犯傻；<br>但现在的你们似乎很久都没有联系了。</p>\n<p>那时候聊感情，聊梦想，聊生活，聊心事，<br>可如今面临的却是无法穿越的时间长河。<br>你才明白，有些人已经从你的身边悄悄溜走再也难以重来，<br>那时候我们左手爱情，右手梦想，<br>青春却被远远的丢在了某个不起眼的地方。</p>\n</blockquote>\n<p>7.学会解决问题。（2020 年 6 月 24 日 10:48:01）</p>\n<blockquote>\n<p>不要害怕遇到问题，正视问题。<br>分析问题，找到原因。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175138.png\"></p>\n</blockquote>\n<p>8.做不了时间的主人，只能做时间的奴隶。(2020 年 7 月 4 日 10:56:56)</p>\n<blockquote>\n<p>学会规划时间，提前安排时间。</p>\n</blockquote>\n<p>9.做好两件事。(2020 年 8 月 21 日 14:54:38)</p>\n<blockquote>\n<p>无论你从事什么行业，只要做好两件事就够了：一个是你的<strong>专业</strong>、一个是你的<strong>人品</strong>。专业决定了你的存在，人品决定了你的人脉；剩下的就是坚持，用善良、专业和真诚赢取更多的信任。</p>\n</blockquote>\n<p>10.有些事该经历的总归要经历，没人能替你经历这个过程。<br><img src=\"https://i.loli.net/2020/09/01/EnW7bFfzVRe3Kr2.png\" alt=\"image.png\"></p>\n"},{"title":"一些话","comments":0,"translate_title":"some-words","_content":"\n<body>\n <!-- 引用artitalk -->\n<script type=\"text/javascript\" src=\"https://unpkg.com/artitalk\" class=\"pjax-reload\"></script>\n<!-- 存放说说的容器 -->\n<div id=\"artitalk_main\"></div>\n<script class=\"pjax-reload\">\nnew Artitalk({\n    appId: 'AL2qc8mR3D1gcLYeQWEWNh62-MdYXbMMI', // Your leancloud appId\n    appKey: '7oWMi8af1pHJeuxeDGsjEson', // Your leancloud appKey\n    pageSize: 2000000,\n    avatarPla:\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/2.jpg\"\n})\n</script>\n</body>\n","source":"shuoshuo/index.md","raw":"---\ntitle: 一些话\ncomments: false\ntranslate_title: some-words\n---\n\n<body>\n <!-- 引用artitalk -->\n<script type=\"text/javascript\" src=\"https://unpkg.com/artitalk\" class=\"pjax-reload\"></script>\n<!-- 存放说说的容器 -->\n<div id=\"artitalk_main\"></div>\n<script class=\"pjax-reload\">\nnew Artitalk({\n    appId: 'AL2qc8mR3D1gcLYeQWEWNh62-MdYXbMMI', // Your leancloud appId\n    appKey: '7oWMi8af1pHJeuxeDGsjEson', // Your leancloud appKey\n    pageSize: 2000000,\n    avatarPla:\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/2.jpg\"\n})\n</script>\n</body>\n","date":"2021-09-29T08:16:50.365Z","updated":"2021-09-29T08:16:50.365Z","path":"shuoshuo/index.html","layout":"page","_id":"cl1zxy6a50007p4vlesvl4848","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><body>\n <!-- 引用artitalk -->\n<script type=\"text/javascript\" src=\"https://unpkg.com/artitalk\" class=\"pjax-reload\"></script>\n<!-- 存放说说的容器 -->\n<div id=\"artitalk_main\"></div>\n<script class=\"pjax-reload\">\nnew Artitalk({\n    appId: 'AL2qc8mR3D1gcLYeQWEWNh62-MdYXbMMI', // Your leancloud appId\n    appKey: '7oWMi8af1pHJeuxeDGsjEson', // Your leancloud appKey\n    pageSize: 2000000,\n    avatarPla:\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/2.jpg\"\n})\n</script>\n</body>\n","site":{"data":{}},"length":221,"excerpt":"","more":"<body>\n <!-- 引用artitalk -->\n<script type=\"text/javascript\" src=\"https://unpkg.com/artitalk\" class=\"pjax-reload\"></script>\n<!-- 存放说说的容器 -->\n<div id=\"artitalk_main\"></div>\n<script class=\"pjax-reload\">\nnew Artitalk({\n    appId: 'AL2qc8mR3D1gcLYeQWEWNh62-MdYXbMMI', // Your leancloud appId\n    appKey: '7oWMi8af1pHJeuxeDGsjEson', // Your leancloud appKey\n    pageSize: 2000000,\n    avatarPla:\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/2.jpg\"\n})\n</script>\n</body>\n"}],"Post":[{"title":"一首找了五年的歌","abbrlink":"6707eb52","translate_title":"a-song-that-has-been-searched-for-five-years","date":"2020-07-02T13:10:29.000Z","_content":"\n<iframe frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" width=330 height=86 src=\"//music.163.com/outchain/player?type=2&id=567510388&auto=0&height=66\"></iframe>\n\n## 题记\n\n> 听听从前的歌，想起走过的路。\n\n## 想起了这首歌\n\n今天和朋友去西岭那边漂流，结果回来的车上有点晕车，搞得我心神不宁。因为是返程，又是从川西那边回来，心里不由自主的回想起从前的时光，然后就很想找一首歌。\n\n<!-- more -->\n\n回来就在手机上摆弄着当我输入：**六月的雨 四川农业大学 就让六月的雨带走我的感伤的时候**，出现了下面的搜索结果\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923171305.png)\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923171430.png)\n\n没错我看到了这首歌，原来这首歌的名字叫做《六月》，而我之前一直都以为叫做《六月的雨》。我当时就立马分享给了我的好友晓静，感觉找到了什么宝藏。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923171532.png)\n\n这一刻，感觉时间回到了久远的从前。\n\n## 知道这首歌\n\n你也许会问，为什么知道这首歌。\n\n现在想想，这是一个小故事，也是我的宝藏，每次想起我都些许懊悔，也会让我欣慰自豪。\n\n## 未完待续\n","source":"_posts/5-years-song.md","raw":"---\ntitle: 一首找了五年的歌\nabbrlink: 6707eb52\ntags:\n  - 心得\ntranslate_title: a-song-that-has-been-searched-for-five-years\ndate: 2020-07-02 21:10:29\n---\n\n<iframe frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" width=330 height=86 src=\"//music.163.com/outchain/player?type=2&id=567510388&auto=0&height=66\"></iframe>\n\n## 题记\n\n> 听听从前的歌，想起走过的路。\n\n## 想起了这首歌\n\n今天和朋友去西岭那边漂流，结果回来的车上有点晕车，搞得我心神不宁。因为是返程，又是从川西那边回来，心里不由自主的回想起从前的时光，然后就很想找一首歌。\n\n<!-- more -->\n\n回来就在手机上摆弄着当我输入：**六月的雨 四川农业大学 就让六月的雨带走我的感伤的时候**，出现了下面的搜索结果\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923171305.png)\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923171430.png)\n\n没错我看到了这首歌，原来这首歌的名字叫做《六月》，而我之前一直都以为叫做《六月的雨》。我当时就立马分享给了我的好友晓静，感觉找到了什么宝藏。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923171532.png)\n\n这一刻，感觉时间回到了久远的从前。\n\n## 知道这首歌\n\n你也许会问，为什么知道这首歌。\n\n现在想想，这是一个小故事，也是我的宝藏，每次想起我都些许懊悔，也会让我欣慰自豪。\n\n## 未完待续\n","slug":"5-years-song","published":1,"updated":"2021-09-29T07:53:51.811Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy69u0001p4vl827hdpr7","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><iframe frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" width=330 height=86 src=\"//music.163.com/outchain/player?type=2&id=567510388&auto=0&height=66\"></iframe>\n\n<h2 id=\"题记\"><a href=\"#题记\" class=\"headerlink\" title=\"题记\"></a>题记</h2><blockquote>\n<p>听听从前的歌，想起走过的路。</p>\n</blockquote>\n<h2 id=\"想起了这首歌\"><a href=\"#想起了这首歌\" class=\"headerlink\" title=\"想起了这首歌\"></a>想起了这首歌</h2><p>今天和朋友去西岭那边漂流，结果回来的车上有点晕车，搞得我心神不宁。因为是返程，又是从川西那边回来，心里不由自主的回想起从前的时光，然后就很想找一首歌。</p>\n<span id=\"more\"></span>\n\n<p>回来就在手机上摆弄着当我输入：<strong>六月的雨 四川农业大学 就让六月的雨带走我的感伤的时候</strong>，出现了下面的搜索结果</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923171305.png\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923171430.png\"></p>\n<p>没错我看到了这首歌，原来这首歌的名字叫做《六月》，而我之前一直都以为叫做《六月的雨》。我当时就立马分享给了我的好友晓静，感觉找到了什么宝藏。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923171532.png\"></p>\n<p>这一刻，感觉时间回到了久远的从前。</p>\n<h2 id=\"知道这首歌\"><a href=\"#知道这首歌\" class=\"headerlink\" title=\"知道这首歌\"></a>知道这首歌</h2><p>你也许会问，为什么知道这首歌。</p>\n<p>现在想想，这是一个小故事，也是我的宝藏，每次想起我都些许懊悔，也会让我欣慰自豪。</p>\n<h2 id=\"未完待续\"><a href=\"#未完待续\" class=\"headerlink\" title=\"未完待续\"></a>未完待续</h2>","site":{"data":{}},"length":299,"excerpt":"<iframe frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" width=330 height=86 src=\"//music.163.com/outchain/player?type=2&id=567510388&auto=0&height=66\"></iframe>\n\n<h2 id=\"题记\"><a href=\"#题记\" class=\"headerlink\" title=\"题记\"></a>题记</h2><blockquote>\n<p>听听从前的歌，想起走过的路。</p>\n</blockquote>\n<h2 id=\"想起了这首歌\"><a href=\"#想起了这首歌\" class=\"headerlink\" title=\"想起了这首歌\"></a>想起了这首歌</h2><p>今天和朋友去西岭那边漂流，结果回来的车上有点晕车，搞得我心神不宁。因为是返程，又是从川西那边回来，心里不由自主的回想起从前的时光，然后就很想找一首歌。</p>","more":"<p>回来就在手机上摆弄着当我输入：<strong>六月的雨 四川农业大学 就让六月的雨带走我的感伤的时候</strong>，出现了下面的搜索结果</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923171305.png\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923171430.png\"></p>\n<p>没错我看到了这首歌，原来这首歌的名字叫做《六月》，而我之前一直都以为叫做《六月的雨》。我当时就立马分享给了我的好友晓静，感觉找到了什么宝藏。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923171532.png\"></p>\n<p>这一刻，感觉时间回到了久远的从前。</p>\n<h2 id=\"知道这首歌\"><a href=\"#知道这首歌\" class=\"headerlink\" title=\"知道这首歌\"></a>知道这首歌</h2><p>你也许会问，为什么知道这首歌。</p>\n<p>现在想想，这是一个小故事，也是我的宝藏，每次想起我都些许懊悔，也会让我欣慰自豪。</p>\n<h2 id=\"未完待续\"><a href=\"#未完待续\" class=\"headerlink\" title=\"未完待续\"></a>未完待续</h2>"},{"title":"Chrome开发者工具总览","abbrlink":"3d51b662","translate_title":"overview-of-chrome-developer-tools","date":"2020-05-05T02:54:01.000Z","_content":"\n## 缘起\n\n起初本来是看到旁边的一个同事在看**Application**面板的**Service Workers**的功能，然后想到自己虽然说是工作也接近两年了，但是 Chrome 开发者工具的面板自己又有多少的理解呢？\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923174740.png)\n\n<!-- more -->\n\n俗话说：工欲善其事，必先利其器。对于我们 WEB 开发者来说，Chrome 就和我们的吃饭的工具相差无异。因此，我就想做一个系列，在[谷歌官方文档](https://developers.google.com/web/tools/chrome-devtools?hl=zh-cn)的基础上，全方位的解读 DevTool 的每一个面板。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923174758.png)\n\n我想，这无论是对于初学者的入门，还是对于已从事 WEB 开发的工作人员的深入，都是很有必要的。\n\n## 计划\n\n现计划的是每周更新一个面板的使用方法，里面将包含基本的操作和一些高级的使用技巧。\n\n这对于我来说，无疑是一个考验，也是一次学习的机会。\n\n加油！\n","source":"_posts/Chrome-devtool-begin.md","raw":"---\ntitle: Chrome开发者工具总览\ntags:\n  - Chrome\nabbrlink: 3d51b662\ntranslate_title: overview-of-chrome-developer-tools\ndate: 2020-05-05 10:54:01\n---\n\n## 缘起\n\n起初本来是看到旁边的一个同事在看**Application**面板的**Service Workers**的功能，然后想到自己虽然说是工作也接近两年了，但是 Chrome 开发者工具的面板自己又有多少的理解呢？\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923174740.png)\n\n<!-- more -->\n\n俗话说：工欲善其事，必先利其器。对于我们 WEB 开发者来说，Chrome 就和我们的吃饭的工具相差无异。因此，我就想做一个系列，在[谷歌官方文档](https://developers.google.com/web/tools/chrome-devtools?hl=zh-cn)的基础上，全方位的解读 DevTool 的每一个面板。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923174758.png)\n\n我想，这无论是对于初学者的入门，还是对于已从事 WEB 开发的工作人员的深入，都是很有必要的。\n\n## 计划\n\n现计划的是每周更新一个面板的使用方法，里面将包含基本的操作和一些高级的使用技巧。\n\n这对于我来说，无疑是一个考验，也是一次学习的机会。\n\n加油！\n","slug":"Chrome-devtool-begin","published":1,"updated":"2021-09-29T07:53:51.812Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy69z0003p4vlddx13ijg","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"缘起\"><a href=\"#缘起\" class=\"headerlink\" title=\"缘起\"></a>缘起</h2><p>起初本来是看到旁边的一个同事在看<strong>Application</strong>面板的<strong>Service Workers</strong>的功能，然后想到自己虽然说是工作也接近两年了，但是 Chrome 开发者工具的面板自己又有多少的理解呢？</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923174740.png\"></p>\n<span id=\"more\"></span>\n\n<p>俗话说：工欲善其事，必先利其器。对于我们 WEB 开发者来说，Chrome 就和我们的吃饭的工具相差无异。因此，我就想做一个系列，在<a href=\"https://developers.google.com/web/tools/chrome-devtools?hl=zh-cn\">谷歌官方文档</a>的基础上，全方位的解读 DevTool 的每一个面板。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923174758.png\"></p>\n<p>我想，这无论是对于初学者的入门，还是对于已从事 WEB 开发的工作人员的深入，都是很有必要的。</p>\n<h2 id=\"计划\"><a href=\"#计划\" class=\"headerlink\" title=\"计划\"></a>计划</h2><p>现计划的是每周更新一个面板的使用方法，里面将包含基本的操作和一些高级的使用技巧。</p>\n<p>这对于我来说，无疑是一个考验，也是一次学习的机会。</p>\n<p>加油！</p>\n","site":{"data":{}},"length":305,"excerpt":"<h2 id=\"缘起\"><a href=\"#缘起\" class=\"headerlink\" title=\"缘起\"></a>缘起</h2><p>起初本来是看到旁边的一个同事在看<strong>Application</strong>面板的<strong>Service Workers</strong>的功能，然后想到自己虽然说是工作也接近两年了，但是 Chrome 开发者工具的面板自己又有多少的理解呢？</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923174740.png\"></p>","more":"<p>俗话说：工欲善其事，必先利其器。对于我们 WEB 开发者来说，Chrome 就和我们的吃饭的工具相差无异。因此，我就想做一个系列，在<a href=\"https://developers.google.com/web/tools/chrome-devtools?hl=zh-cn\">谷歌官方文档</a>的基础上，全方位的解读 DevTool 的每一个面板。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923174758.png\"></p>\n<p>我想，这无论是对于初学者的入门，还是对于已从事 WEB 开发的工作人员的深入，都是很有必要的。</p>\n<h2 id=\"计划\"><a href=\"#计划\" class=\"headerlink\" title=\"计划\"></a>计划</h2><p>现计划的是每周更新一个面板的使用方法，里面将包含基本的操作和一些高级的使用技巧。</p>\n<p>这对于我来说，无疑是一个考验，也是一次学习的机会。</p>\n<p>加油！</p>"},{"title":"8个小技巧让你成为更好的开发","abbrlink":"83dcefb7","translate_title":"8-tips-to-make-you-a-better-developer","date":"2021-02-26T03:04:33.000Z","_content":"\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210226115624.png)\n## 摘要\n\n本文主要讲了 8 个小技巧，让你知道如何安排你的工作日和休息时间，以及使用小技巧的重要原因。\n\n<!-- more -->\n## 技巧要点\n\n1. 不要过度计划。\n\n   小而简单的思考是成功的关键，比如尽量完成 3 到 5 个工作就差不多了。这个过程不是一次短跑，更像是一次马拉松。\n\n2. 只提前计划一周的工作。\n\n   长期的工作安排并不见得很好，因为你很难坚持下去。再次强调，**这个过程不是一次短跑，更像是一次马拉松。**\n\n3. 选择一些有意义的事情去做，比如一些**健康活动**就是很好的选择（锻炼等）。\n\n   有趣的是，锻炼也可以提高新的神经元的存活率。到目前为止，锻炼能够帮助你更好的学习，他比如今市面上任何的药物都有效。他不仅对你的大脑有益，对你的全身都有益。\n\n4. 尽量在工作的时候保持专注。\n\n   在确保质量的前提下，花更少的时间去专注工作，比花更对的时间分散精力的工作好得多。记住一点，一旦已从你当前的工作中分心时，想会回到之前专注的状态都会耗费你更多的精力。\n\n5. 在工作和学习中尽量远离你的手机。\n\n   我建议把手机当做一种奖励，比如专注工作一段时间之后的奖励。还有一种很有帮助的是，在工作的时候将你的手机开启“勿扰模式”。\n\n6. 明确你一天的期望和要求。\n\n   我建议可以把它写下来，可以在纸上或者屏幕上，这对避免分散注意力很有用。\n\n7. 睡眠是你学习和记忆过程中的重要组成部分。\n\n   睡眠也被证明可以明显发现困难问题和理解所学内容的能力。\n\n8. 多喝水。\n\n## 结论\n\n关键是要对自己要做的事情出一个**优先级排序**和**良好的组织**。然后坚持你的目标，或者至少要遵循你的计划。\n\n有时候遵循计划会很困难，但是这是很正常的，不必太过担心和太多压力。\n\n感谢你的阅读。\n\n## 引用地址\n> [https://dev.to/easaaa/8-tips-on-how-to-improve-your-day-as-a-developer-1b0m](https://dev.to/easaaa/8-tips-on-how-to-improve-your-day-as-a-developer-1b0m)\n\n","source":"_posts/8tips.md","raw":"---\ntitle: 8个小技巧让你成为更好的开发\nabbrlink: 83dcefb7\ntags:\n  - 翻译\ntranslate_title: 8-tips-to-make-you-a-better-developer\ndate: 2021-02-26 11:04:33\n---\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210226115624.png)\n## 摘要\n\n本文主要讲了 8 个小技巧，让你知道如何安排你的工作日和休息时间，以及使用小技巧的重要原因。\n\n<!-- more -->\n## 技巧要点\n\n1. 不要过度计划。\n\n   小而简单的思考是成功的关键，比如尽量完成 3 到 5 个工作就差不多了。这个过程不是一次短跑，更像是一次马拉松。\n\n2. 只提前计划一周的工作。\n\n   长期的工作安排并不见得很好，因为你很难坚持下去。再次强调，**这个过程不是一次短跑，更像是一次马拉松。**\n\n3. 选择一些有意义的事情去做，比如一些**健康活动**就是很好的选择（锻炼等）。\n\n   有趣的是，锻炼也可以提高新的神经元的存活率。到目前为止，锻炼能够帮助你更好的学习，他比如今市面上任何的药物都有效。他不仅对你的大脑有益，对你的全身都有益。\n\n4. 尽量在工作的时候保持专注。\n\n   在确保质量的前提下，花更少的时间去专注工作，比花更对的时间分散精力的工作好得多。记住一点，一旦已从你当前的工作中分心时，想会回到之前专注的状态都会耗费你更多的精力。\n\n5. 在工作和学习中尽量远离你的手机。\n\n   我建议把手机当做一种奖励，比如专注工作一段时间之后的奖励。还有一种很有帮助的是，在工作的时候将你的手机开启“勿扰模式”。\n\n6. 明确你一天的期望和要求。\n\n   我建议可以把它写下来，可以在纸上或者屏幕上，这对避免分散注意力很有用。\n\n7. 睡眠是你学习和记忆过程中的重要组成部分。\n\n   睡眠也被证明可以明显发现困难问题和理解所学内容的能力。\n\n8. 多喝水。\n\n## 结论\n\n关键是要对自己要做的事情出一个**优先级排序**和**良好的组织**。然后坚持你的目标，或者至少要遵循你的计划。\n\n有时候遵循计划会很困难，但是这是很正常的，不必太过担心和太多压力。\n\n感谢你的阅读。\n\n## 引用地址\n> [https://dev.to/easaaa/8-tips-on-how-to-improve-your-day-as-a-developer-1b0m](https://dev.to/easaaa/8-tips-on-how-to-improve-your-day-as-a-developer-1b0m)\n\n","slug":"8tips","published":1,"updated":"2021-09-29T07:53:51.812Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy6a20006p4vl48rs6alz","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210226115624.png\"></p>\n<h2 id=\"摘要\"><a href=\"#摘要\" class=\"headerlink\" title=\"摘要\"></a>摘要</h2><p>本文主要讲了 8 个小技巧，让你知道如何安排你的工作日和休息时间，以及使用小技巧的重要原因。</p>\n<span id=\"more\"></span>\n<h2 id=\"技巧要点\"><a href=\"#技巧要点\" class=\"headerlink\" title=\"技巧要点\"></a>技巧要点</h2><ol>\n<li><p>不要过度计划。</p>\n<p>小而简单的思考是成功的关键，比如尽量完成 3 到 5 个工作就差不多了。这个过程不是一次短跑，更像是一次马拉松。</p>\n</li>\n<li><p>只提前计划一周的工作。</p>\n<p>长期的工作安排并不见得很好，因为你很难坚持下去。再次强调，<strong>这个过程不是一次短跑，更像是一次马拉松。</strong></p>\n</li>\n<li><p>选择一些有意义的事情去做，比如一些<strong>健康活动</strong>就是很好的选择（锻炼等）。</p>\n<p>有趣的是，锻炼也可以提高新的神经元的存活率。到目前为止，锻炼能够帮助你更好的学习，他比如今市面上任何的药物都有效。他不仅对你的大脑有益，对你的全身都有益。</p>\n</li>\n<li><p>尽量在工作的时候保持专注。</p>\n<p>在确保质量的前提下，花更少的时间去专注工作，比花更对的时间分散精力的工作好得多。记住一点，一旦已从你当前的工作中分心时，想会回到之前专注的状态都会耗费你更多的精力。</p>\n</li>\n<li><p>在工作和学习中尽量远离你的手机。</p>\n<p>我建议把手机当做一种奖励，比如专注工作一段时间之后的奖励。还有一种很有帮助的是，在工作的时候将你的手机开启“勿扰模式”。</p>\n</li>\n<li><p>明确你一天的期望和要求。</p>\n<p>我建议可以把它写下来，可以在纸上或者屏幕上，这对避免分散注意力很有用。</p>\n</li>\n<li><p>睡眠是你学习和记忆过程中的重要组成部分。</p>\n<p>睡眠也被证明可以明显发现困难问题和理解所学内容的能力。</p>\n</li>\n<li><p>多喝水。</p>\n</li>\n</ol>\n<h2 id=\"结论\"><a href=\"#结论\" class=\"headerlink\" title=\"结论\"></a>结论</h2><p>关键是要对自己要做的事情出一个<strong>优先级排序</strong>和<strong>良好的组织</strong>。然后坚持你的目标，或者至少要遵循你的计划。</p>\n<p>有时候遵循计划会很困难，但是这是很正常的，不必太过担心和太多压力。</p>\n<p>感谢你的阅读。</p>\n<h2 id=\"引用地址\"><a href=\"#引用地址\" class=\"headerlink\" title=\"引用地址\"></a>引用地址</h2><blockquote>\n<p><a href=\"https://dev.to/easaaa/8-tips-on-how-to-improve-your-day-as-a-developer-1b0m\">https://dev.to/easaaa/8-tips-on-how-to-improve-your-day-as-a-developer-1b0m</a></p>\n</blockquote>\n","site":{"data":{}},"length":718,"excerpt":"<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210226115624.png\"></p>\n<h2 id=\"摘要\"><a href=\"#摘要\" class=\"headerlink\" title=\"摘要\"></a>摘要</h2><p>本文主要讲了 8 个小技巧，让你知道如何安排你的工作日和休息时间，以及使用小技巧的重要原因。</p>","more":"<h2 id=\"技巧要点\"><a href=\"#技巧要点\" class=\"headerlink\" title=\"技巧要点\"></a>技巧要点</h2><ol>\n<li><p>不要过度计划。</p>\n<p>小而简单的思考是成功的关键，比如尽量完成 3 到 5 个工作就差不多了。这个过程不是一次短跑，更像是一次马拉松。</p>\n</li>\n<li><p>只提前计划一周的工作。</p>\n<p>长期的工作安排并不见得很好，因为你很难坚持下去。再次强调，<strong>这个过程不是一次短跑，更像是一次马拉松。</strong></p>\n</li>\n<li><p>选择一些有意义的事情去做，比如一些<strong>健康活动</strong>就是很好的选择（锻炼等）。</p>\n<p>有趣的是，锻炼也可以提高新的神经元的存活率。到目前为止，锻炼能够帮助你更好的学习，他比如今市面上任何的药物都有效。他不仅对你的大脑有益，对你的全身都有益。</p>\n</li>\n<li><p>尽量在工作的时候保持专注。</p>\n<p>在确保质量的前提下，花更少的时间去专注工作，比花更对的时间分散精力的工作好得多。记住一点，一旦已从你当前的工作中分心时，想会回到之前专注的状态都会耗费你更多的精力。</p>\n</li>\n<li><p>在工作和学习中尽量远离你的手机。</p>\n<p>我建议把手机当做一种奖励，比如专注工作一段时间之后的奖励。还有一种很有帮助的是，在工作的时候将你的手机开启“勿扰模式”。</p>\n</li>\n<li><p>明确你一天的期望和要求。</p>\n<p>我建议可以把它写下来，可以在纸上或者屏幕上，这对避免分散注意力很有用。</p>\n</li>\n<li><p>睡眠是你学习和记忆过程中的重要组成部分。</p>\n<p>睡眠也被证明可以明显发现困难问题和理解所学内容的能力。</p>\n</li>\n<li><p>多喝水。</p>\n</li>\n</ol>\n<h2 id=\"结论\"><a href=\"#结论\" class=\"headerlink\" title=\"结论\"></a>结论</h2><p>关键是要对自己要做的事情出一个<strong>优先级排序</strong>和<strong>良好的组织</strong>。然后坚持你的目标，或者至少要遵循你的计划。</p>\n<p>有时候遵循计划会很困难，但是这是很正常的，不必太过担心和太多压力。</p>\n<p>感谢你的阅读。</p>\n<h2 id=\"引用地址\"><a href=\"#引用地址\" class=\"headerlink\" title=\"引用地址\"></a>引用地址</h2><blockquote>\n<p><a href=\"https://dev.to/easaaa/8-tips-on-how-to-improve-your-day-as-a-developer-1b0m\">https://dev.to/easaaa/8-tips-on-how-to-improve-your-day-as-a-developer-1b0m</a></p>\n</blockquote>"},{"title":"Chrome Console面板解析","abbrlink":"f9dc4616","translate_title":"chrome-console-panel-analysis","date":"2020-06-04T14:48:15.000Z","_content":"\n### Console 面板的打开方式\n\n- 在控制台打开的情况选择 console 按钮\n- 在 DevTool 的其他面板按 ESC 键打开面板（在开发者工具获得焦点的情况下）\n- 在右上角的菜单打开（setting--show--console--drawer）\n- 输入快捷键`Ctrl+Shift+P`，再输入 `Console`\n  ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10006.gif)\n\n<!-- more -->\n\n### 初识面板\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172121.png)\n\n#### 面板分析\n\n上面部分为工具栏\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172130.png)\n\n下面部分为命令区\n\n### 工具栏使用方法\n\n#### 展开关闭侧边栏\n\n![ia_10009.gif](https://i.loli.net/2020/09/23/NwpqoC8jKfMcB41.gif)\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172330.png)\n\n点击可以切换侧边栏的展示和隐藏，点击一栏可以对命令区的进行过滤。默认是以关闭的，就不会对信息进行过滤。\n\n左侧的分类栏目主要由以下几类:\n\n- message\n  全部的信息，就是未分类的信息，是以下信息的综合。\n- user message\n- errors\n  日志级别为 error 的日志\n- warning\n  日志级别为 warning 的日志\n- info\n  日志级别为 info 的日志\n- verbose\n  日志级别为 verbose(冗长) 的日志\n\n前面会显示该栏目总的日志数量，具体的信息会显示在该栏目的子栏目上，比如文件路径，产生日志数量，文件名等\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172403.png)\n点击对应的消息会在右侧展示过滤的结果。\n\n#### 清空命令行\n\n点击这个图标<img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172422.png\" width=\"26px\" style=\"display:inline;\" class=\"nofancybox\"/>可以清空命令行\n\n列举出可以清空命令行的一些操作\n\n- 右键菜单 Clear Console\n- 在命令行输入 clear()\n- js 调用 console.clear()\n- 快捷键`Ctrl + L`\n\n#### 上下文选择\n\n默认的上下文环境为 top，也就是当前网页打开的环境。你也可以选择切换为你需要你的环境\n\n比如在[这个 iframe 页面](https://7q43c.csb.app/)，你就可以切换环境为 iframe 的环境。\n\n源代码:[源代码 1](https://codesandbox.io/s/upbeat-frog-c6n68?file=/index.html)和[源代码 2](https://codesandbox.io/s/focused-tesla-7q43c?file=/index.html)\n\n当我进入 iframe 的上下文的时候就可以打印出 iframe 里面的数据\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10012.gif)\n\n#### 实时表达式\n\nLive Expressions 实时执行的表达式,可以创建多个表达式，失去焦点就会保存，创建之后也可以删除。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10013.gif)\n\n#### 过滤选项\n\n可以输入文本、正则等对打印的信息进行搜索和过滤。\n![ia_10014](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600854061519-ia_10014.gif)\n\n#### 打印级别过滤\n\n打印级别过滤有如下选项：\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172458.png)\n\n> Default: 默认为警告信息和错误\n> Verbose: 冗长的的打印\n> 其余为常规的信息、警告、错误级别\n\n当过滤级别不是全部展示的话会在右侧显示被隐藏的条数。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172507.png)\n\n#### 设置\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172514.png)\n\n- Hide Network\n\n  是否对有关网络的日志进行隐藏\n  ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10018.gif)\n\n- Log XmlHttpRequests\n\n  是否打印 XHR 请求\n  ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10019.gif)\n\n- Preserve Log\n  是否保留日志，每次刷新是否自动清空日志。\n- Selected Context Only\n  是否只显示当前的上下文环境的日志信息\n  ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10020.gif)\n\n- Group Similar\n\n* Eager Evaluation\n\n  及时显示执行结果\n  ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10021.gif)\n\n- Autocomplete From History\n\n  根据历史记录自动完成命令\n  ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10022.gif)\n\n- Group Similar\n  相同日志归到一个组里面，此选项在禁用日志时间戳事才有效\n- Evaluate triggers user activation\n\n### 命令区使用方法\n\n#### 基本使用\n\n- 上一行输入，下一行输出结果\n- 键盘的上线键可根据历史记录自动补全\n\n#### 右键菜单\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172532.png)\n\n- Clear console\n\n  清空命令区\n\n- Clear console history\n\n  清空历史记录，这时上下键的补全将失效\n\n- Save as\n\n  存储当前的日志信息\n\n#### Console Api\n\n参看[MDN 文档](https://developer.mozilla.org/zh-CN/docs/Web/API/Console)和[谷歌文档](https://developers.google.com/web/tools/chrome-devtools/console/api)\n\n#### Console 工具库 Api\n\n整理自[谷歌文档](https://developers.google.com/web/tools/chrome-devtools/console/utilities)\n\n| 语句              | 效果                                                                                                                                     |\n| ----------------- | ---------------------------------------------------------------------------------------------------------------------------------------- |\n| \\$\\_              | 返回最近执行的结果                                                                                                                       |\n| $0-$4             | 日志历史的最近五个 DOM 元素                                                                                                              |\n| \\$                | document.querySelector(如果引用了 jquery 等库，就会被覆盖为引入的库)                                                                     |\n| \\$\\$              | document.querySelectorAll                                                                                                                |\n| \\$x               | \\$x(path) 返回与给定 XPath 表达式匹配的 DOM 元素数组。                                                                                   |\n| clear             | 清除控制台                                                                                                                               |\n| copy              | copy(object) 将指定对象的字符串表示形式复制到剪贴板。                                                                                    |\n| debug             | 当调用指定的函数时，调试器将被调用并在 Sources 面板上的函数内部中断，从而逐步执行代码并进行调试。                                        |\n| dir               | dir(object)显示所有指定对象属性的对象样式列表。此方法是 Console API console.dir()方法的别名。                                            |\n| dirxml            | dirxml(object)打印指定对象的 XML 表示形式。此方法等效于 console.dirxml（）方法。                                                         |\n| inspect           | inspect(object/function) 打开并在适当的面板中选择指定的元素或对象：DOM 元素的 Elements 面板或 JavaScript 堆对象的 Profiles 面板。        |\n| getEventListeners | getEventListeners(object)返回在指定对象上注册的事件                                                                                      |\n| keys              | keys(object)返回一个数组，其中包含属于指定对象的属性的名称                                                                               |\n| monitor           | 调用指定的函数时，一条消息会记录到控制台，该消息指示函数名称以及调用该函数时传递给该函数的参数。                                         |\n| monitorEvents     | 当指定对象上发生指定事件之一时，事件对象将记录到控制台。您可以指定要监视的单个事件，事件数组或映射到预定义事件集合的一般事件“类型”之一。 |\n\n### 参考资源\n\n> https://developers.google.com/web/tools/chrome-devtools/console/utilities > https://developer.mozilla.org/zh-CN/docs/Web/API/Console > https://segmentfault.com/a/1190000002511877 > https://zhuanlan.zhihu.com/p/80751021\n","source":"_posts/Chrome-console.md","raw":"---\ntitle: Chrome Console面板解析\ntags:\n  - Chrome\nabbrlink: f9dc4616\ntranslate_title: chrome-console-panel-analysis\ndate: 2020-06-04 22:48:15\n---\n\n### Console 面板的打开方式\n\n- 在控制台打开的情况选择 console 按钮\n- 在 DevTool 的其他面板按 ESC 键打开面板（在开发者工具获得焦点的情况下）\n- 在右上角的菜单打开（setting--show--console--drawer）\n- 输入快捷键`Ctrl+Shift+P`，再输入 `Console`\n  ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10006.gif)\n\n<!-- more -->\n\n### 初识面板\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172121.png)\n\n#### 面板分析\n\n上面部分为工具栏\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172130.png)\n\n下面部分为命令区\n\n### 工具栏使用方法\n\n#### 展开关闭侧边栏\n\n![ia_10009.gif](https://i.loli.net/2020/09/23/NwpqoC8jKfMcB41.gif)\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172330.png)\n\n点击可以切换侧边栏的展示和隐藏，点击一栏可以对命令区的进行过滤。默认是以关闭的，就不会对信息进行过滤。\n\n左侧的分类栏目主要由以下几类:\n\n- message\n  全部的信息，就是未分类的信息，是以下信息的综合。\n- user message\n- errors\n  日志级别为 error 的日志\n- warning\n  日志级别为 warning 的日志\n- info\n  日志级别为 info 的日志\n- verbose\n  日志级别为 verbose(冗长) 的日志\n\n前面会显示该栏目总的日志数量，具体的信息会显示在该栏目的子栏目上，比如文件路径，产生日志数量，文件名等\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172403.png)\n点击对应的消息会在右侧展示过滤的结果。\n\n#### 清空命令行\n\n点击这个图标<img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172422.png\" width=\"26px\" style=\"display:inline;\" class=\"nofancybox\"/>可以清空命令行\n\n列举出可以清空命令行的一些操作\n\n- 右键菜单 Clear Console\n- 在命令行输入 clear()\n- js 调用 console.clear()\n- 快捷键`Ctrl + L`\n\n#### 上下文选择\n\n默认的上下文环境为 top，也就是当前网页打开的环境。你也可以选择切换为你需要你的环境\n\n比如在[这个 iframe 页面](https://7q43c.csb.app/)，你就可以切换环境为 iframe 的环境。\n\n源代码:[源代码 1](https://codesandbox.io/s/upbeat-frog-c6n68?file=/index.html)和[源代码 2](https://codesandbox.io/s/focused-tesla-7q43c?file=/index.html)\n\n当我进入 iframe 的上下文的时候就可以打印出 iframe 里面的数据\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10012.gif)\n\n#### 实时表达式\n\nLive Expressions 实时执行的表达式,可以创建多个表达式，失去焦点就会保存，创建之后也可以删除。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10013.gif)\n\n#### 过滤选项\n\n可以输入文本、正则等对打印的信息进行搜索和过滤。\n![ia_10014](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600854061519-ia_10014.gif)\n\n#### 打印级别过滤\n\n打印级别过滤有如下选项：\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172458.png)\n\n> Default: 默认为警告信息和错误\n> Verbose: 冗长的的打印\n> 其余为常规的信息、警告、错误级别\n\n当过滤级别不是全部展示的话会在右侧显示被隐藏的条数。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172507.png)\n\n#### 设置\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172514.png)\n\n- Hide Network\n\n  是否对有关网络的日志进行隐藏\n  ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10018.gif)\n\n- Log XmlHttpRequests\n\n  是否打印 XHR 请求\n  ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10019.gif)\n\n- Preserve Log\n  是否保留日志，每次刷新是否自动清空日志。\n- Selected Context Only\n  是否只显示当前的上下文环境的日志信息\n  ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10020.gif)\n\n- Group Similar\n\n* Eager Evaluation\n\n  及时显示执行结果\n  ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10021.gif)\n\n- Autocomplete From History\n\n  根据历史记录自动完成命令\n  ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10022.gif)\n\n- Group Similar\n  相同日志归到一个组里面，此选项在禁用日志时间戳事才有效\n- Evaluate triggers user activation\n\n### 命令区使用方法\n\n#### 基本使用\n\n- 上一行输入，下一行输出结果\n- 键盘的上线键可根据历史记录自动补全\n\n#### 右键菜单\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172532.png)\n\n- Clear console\n\n  清空命令区\n\n- Clear console history\n\n  清空历史记录，这时上下键的补全将失效\n\n- Save as\n\n  存储当前的日志信息\n\n#### Console Api\n\n参看[MDN 文档](https://developer.mozilla.org/zh-CN/docs/Web/API/Console)和[谷歌文档](https://developers.google.com/web/tools/chrome-devtools/console/api)\n\n#### Console 工具库 Api\n\n整理自[谷歌文档](https://developers.google.com/web/tools/chrome-devtools/console/utilities)\n\n| 语句              | 效果                                                                                                                                     |\n| ----------------- | ---------------------------------------------------------------------------------------------------------------------------------------- |\n| \\$\\_              | 返回最近执行的结果                                                                                                                       |\n| $0-$4             | 日志历史的最近五个 DOM 元素                                                                                                              |\n| \\$                | document.querySelector(如果引用了 jquery 等库，就会被覆盖为引入的库)                                                                     |\n| \\$\\$              | document.querySelectorAll                                                                                                                |\n| \\$x               | \\$x(path) 返回与给定 XPath 表达式匹配的 DOM 元素数组。                                                                                   |\n| clear             | 清除控制台                                                                                                                               |\n| copy              | copy(object) 将指定对象的字符串表示形式复制到剪贴板。                                                                                    |\n| debug             | 当调用指定的函数时，调试器将被调用并在 Sources 面板上的函数内部中断，从而逐步执行代码并进行调试。                                        |\n| dir               | dir(object)显示所有指定对象属性的对象样式列表。此方法是 Console API console.dir()方法的别名。                                            |\n| dirxml            | dirxml(object)打印指定对象的 XML 表示形式。此方法等效于 console.dirxml（）方法。                                                         |\n| inspect           | inspect(object/function) 打开并在适当的面板中选择指定的元素或对象：DOM 元素的 Elements 面板或 JavaScript 堆对象的 Profiles 面板。        |\n| getEventListeners | getEventListeners(object)返回在指定对象上注册的事件                                                                                      |\n| keys              | keys(object)返回一个数组，其中包含属于指定对象的属性的名称                                                                               |\n| monitor           | 调用指定的函数时，一条消息会记录到控制台，该消息指示函数名称以及调用该函数时传递给该函数的参数。                                         |\n| monitorEvents     | 当指定对象上发生指定事件之一时，事件对象将记录到控制台。您可以指定要监视的单个事件，事件数组或映射到预定义事件集合的一般事件“类型”之一。 |\n\n### 参考资源\n\n> https://developers.google.com/web/tools/chrome-devtools/console/utilities > https://developer.mozilla.org/zh-CN/docs/Web/API/Console > https://segmentfault.com/a/1190000002511877 > https://zhuanlan.zhihu.com/p/80751021\n","slug":"Chrome-console","published":1,"updated":"2021-09-29T07:53:51.812Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy6a80008p4vldvovc667","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"Console-面板的打开方式\"><a href=\"#Console-面板的打开方式\" class=\"headerlink\" title=\"Console 面板的打开方式\"></a>Console 面板的打开方式</h3><ul>\n<li>在控制台打开的情况选择 console 按钮</li>\n<li>在 DevTool 的其他面板按 ESC 键打开面板（在开发者工具获得焦点的情况下）</li>\n<li>在右上角的菜单打开（setting–show–console–drawer）</li>\n<li>输入快捷键<code>Ctrl+Shift+P</code>，再输入 <code>Console</code><br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10006.gif\"></li>\n</ul>\n<span id=\"more\"></span>\n\n<h3 id=\"初识面板\"><a href=\"#初识面板\" class=\"headerlink\" title=\"初识面板\"></a>初识面板</h3><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172121.png\"></p>\n<h4 id=\"面板分析\"><a href=\"#面板分析\" class=\"headerlink\" title=\"面板分析\"></a>面板分析</h4><p>上面部分为工具栏<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172130.png\"></p>\n<p>下面部分为命令区</p>\n<h3 id=\"工具栏使用方法\"><a href=\"#工具栏使用方法\" class=\"headerlink\" title=\"工具栏使用方法\"></a>工具栏使用方法</h3><h4 id=\"展开关闭侧边栏\"><a href=\"#展开关闭侧边栏\" class=\"headerlink\" title=\"展开关闭侧边栏\"></a>展开关闭侧边栏</h4><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://i.loli.net/2020/09/23/NwpqoC8jKfMcB41.gif\" alt=\"ia_10009.gif\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172330.png\"></p>\n<p>点击可以切换侧边栏的展示和隐藏，点击一栏可以对命令区的进行过滤。默认是以关闭的，就不会对信息进行过滤。</p>\n<p>左侧的分类栏目主要由以下几类:</p>\n<ul>\n<li>message<br>全部的信息，就是未分类的信息，是以下信息的综合。</li>\n<li>user message</li>\n<li>errors<br>日志级别为 error 的日志</li>\n<li>warning<br>日志级别为 warning 的日志</li>\n<li>info<br>日志级别为 info 的日志</li>\n<li>verbose<br>日志级别为 verbose(冗长) 的日志</li>\n</ul>\n<p>前面会显示该栏目总的日志数量，具体的信息会显示在该栏目的子栏目上，比如文件路径，产生日志数量，文件名等</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172403.png\"><br>点击对应的消息会在右侧展示过滤的结果。</p>\n<h4 id=\"清空命令行\"><a href=\"#清空命令行\" class=\"headerlink\" title=\"清空命令行\"></a>清空命令行</h4><p>点击这个图标<img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172422.png\" width=\"26px\" style=\"display:inline;\" class=\"nofancybox\"/>可以清空命令行</p>\n<p>列举出可以清空命令行的一些操作</p>\n<ul>\n<li>右键菜单 Clear Console</li>\n<li>在命令行输入 clear()</li>\n<li>js 调用 console.clear()</li>\n<li>快捷键<code>Ctrl + L</code></li>\n</ul>\n<h4 id=\"上下文选择\"><a href=\"#上下文选择\" class=\"headerlink\" title=\"上下文选择\"></a>上下文选择</h4><p>默认的上下文环境为 top，也就是当前网页打开的环境。你也可以选择切换为你需要你的环境</p>\n<p>比如在<a href=\"https://7q43c.csb.app/\">这个 iframe 页面</a>，你就可以切换环境为 iframe 的环境。</p>\n<p>源代码:<a href=\"https://codesandbox.io/s/upbeat-frog-c6n68?file=/index.html\">源代码 1</a>和<a href=\"https://codesandbox.io/s/focused-tesla-7q43c?file=/index.html\">源代码 2</a></p>\n<p>当我进入 iframe 的上下文的时候就可以打印出 iframe 里面的数据<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10012.gif\"></p>\n<h4 id=\"实时表达式\"><a href=\"#实时表达式\" class=\"headerlink\" title=\"实时表达式\"></a>实时表达式</h4><p>Live Expressions 实时执行的表达式,可以创建多个表达式，失去焦点就会保存，创建之后也可以删除。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10013.gif\"></p>\n<h4 id=\"过滤选项\"><a href=\"#过滤选项\" class=\"headerlink\" title=\"过滤选项\"></a>过滤选项</h4><p>可以输入文本、正则等对打印的信息进行搜索和过滤。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600854061519-ia_10014.gif\" alt=\"ia_10014\"></p>\n<h4 id=\"打印级别过滤\"><a href=\"#打印级别过滤\" class=\"headerlink\" title=\"打印级别过滤\"></a>打印级别过滤</h4><p>打印级别过滤有如下选项：<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172458.png\"></p>\n<blockquote>\n<p>Default: 默认为警告信息和错误<br>Verbose: 冗长的的打印<br>其余为常规的信息、警告、错误级别</p>\n</blockquote>\n<p>当过滤级别不是全部展示的话会在右侧显示被隐藏的条数。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172507.png\"></p>\n<h4 id=\"设置\"><a href=\"#设置\" class=\"headerlink\" title=\"设置\"></a>设置</h4><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172514.png\"></p>\n<ul>\n<li><p>Hide Network</p>\n<p>是否对有关网络的日志进行隐藏<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10018.gif\"></p>\n</li>\n<li><p>Log XmlHttpRequests</p>\n<p>是否打印 XHR 请求<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10019.gif\"></p>\n</li>\n<li><p>Preserve Log<br>是否保留日志，每次刷新是否自动清空日志。</p>\n</li>\n<li><p>Selected Context Only<br>是否只显示当前的上下文环境的日志信息<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10020.gif\"></p>\n</li>\n<li><p>Group Similar</p>\n</li>\n</ul>\n<ul>\n<li><p>Eager Evaluation</p>\n<p>及时显示执行结果<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10021.gif\"></p>\n</li>\n</ul>\n<ul>\n<li><p>Autocomplete From History</p>\n<p>根据历史记录自动完成命令<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10022.gif\"></p>\n</li>\n<li><p>Group Similar<br>相同日志归到一个组里面，此选项在禁用日志时间戳事才有效</p>\n</li>\n<li><p>Evaluate triggers user activation</p>\n</li>\n</ul>\n<h3 id=\"命令区使用方法\"><a href=\"#命令区使用方法\" class=\"headerlink\" title=\"命令区使用方法\"></a>命令区使用方法</h3><h4 id=\"基本使用\"><a href=\"#基本使用\" class=\"headerlink\" title=\"基本使用\"></a>基本使用</h4><ul>\n<li>上一行输入，下一行输出结果</li>\n<li>键盘的上线键可根据历史记录自动补全</li>\n</ul>\n<h4 id=\"右键菜单\"><a href=\"#右键菜单\" class=\"headerlink\" title=\"右键菜单\"></a>右键菜单</h4><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172532.png\"></p>\n<ul>\n<li><p>Clear console</p>\n<p>清空命令区</p>\n</li>\n<li><p>Clear console history</p>\n<p>清空历史记录，这时上下键的补全将失效</p>\n</li>\n<li><p>Save as</p>\n<p>存储当前的日志信息</p>\n</li>\n</ul>\n<h4 id=\"Console-Api\"><a href=\"#Console-Api\" class=\"headerlink\" title=\"Console Api\"></a>Console Api</h4><p>参看<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Console\">MDN 文档</a>和<a href=\"https://developers.google.com/web/tools/chrome-devtools/console/api\">谷歌文档</a></p>\n<h4 id=\"Console-工具库-Api\"><a href=\"#Console-工具库-Api\" class=\"headerlink\" title=\"Console 工具库 Api\"></a>Console 工具库 Api</h4><p>整理自<a href=\"https://developers.google.com/web/tools/chrome-devtools/console/utilities\">谷歌文档</a></p>\n<table>\n<thead>\n<tr>\n<th>语句</th>\n<th>效果</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>$_</td>\n<td>返回最近执行的结果</td>\n</tr>\n<tr>\n<td>$0-$4</td>\n<td>日志历史的最近五个 DOM 元素</td>\n</tr>\n<tr>\n<td>$</td>\n<td>document.querySelector(如果引用了 jquery 等库，就会被覆盖为引入的库)</td>\n</tr>\n<tr>\n<td>$$</td>\n<td>document.querySelectorAll</td>\n</tr>\n<tr>\n<td>$x</td>\n<td>$x(path) 返回与给定 XPath 表达式匹配的 DOM 元素数组。</td>\n</tr>\n<tr>\n<td>clear</td>\n<td>清除控制台</td>\n</tr>\n<tr>\n<td>copy</td>\n<td>copy(object) 将指定对象的字符串表示形式复制到剪贴板。</td>\n</tr>\n<tr>\n<td>debug</td>\n<td>当调用指定的函数时，调试器将被调用并在 Sources 面板上的函数内部中断，从而逐步执行代码并进行调试。</td>\n</tr>\n<tr>\n<td>dir</td>\n<td>dir(object)显示所有指定对象属性的对象样式列表。此方法是 Console API console.dir()方法的别名。</td>\n</tr>\n<tr>\n<td>dirxml</td>\n<td>dirxml(object)打印指定对象的 XML 表示形式。此方法等效于 console.dirxml（）方法。</td>\n</tr>\n<tr>\n<td>inspect</td>\n<td>inspect(object/function) 打开并在适当的面板中选择指定的元素或对象：DOM 元素的 Elements 面板或 JavaScript 堆对象的 Profiles 面板。</td>\n</tr>\n<tr>\n<td>getEventListeners</td>\n<td>getEventListeners(object)返回在指定对象上注册的事件</td>\n</tr>\n<tr>\n<td>keys</td>\n<td>keys(object)返回一个数组，其中包含属于指定对象的属性的名称</td>\n</tr>\n<tr>\n<td>monitor</td>\n<td>调用指定的函数时，一条消息会记录到控制台，该消息指示函数名称以及调用该函数时传递给该函数的参数。</td>\n</tr>\n<tr>\n<td>monitorEvents</td>\n<td>当指定对象上发生指定事件之一时，事件对象将记录到控制台。您可以指定要监视的单个事件，事件数组或映射到预定义事件集合的一般事件“类型”之一。</td>\n</tr>\n</tbody></table>\n<h3 id=\"参考资源\"><a href=\"#参考资源\" class=\"headerlink\" title=\"参考资源\"></a>参考资源</h3><blockquote>\n<p><a href=\"https://developers.google.com/web/tools/chrome-devtools/console/utilities\">https://developers.google.com/web/tools/chrome-devtools/console/utilities</a> &gt; <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Console\">https://developer.mozilla.org/zh-CN/docs/Web/API/Console</a> &gt; <a href=\"https://segmentfault.com/a/1190000002511877\">https://segmentfault.com/a/1190000002511877</a> &gt; <a href=\"https://zhuanlan.zhihu.com/p/80751021\">https://zhuanlan.zhihu.com/p/80751021</a></p>\n</blockquote>\n","site":{"data":{}},"length":2170,"excerpt":"<h3 id=\"Console-面板的打开方式\"><a href=\"#Console-面板的打开方式\" class=\"headerlink\" title=\"Console 面板的打开方式\"></a>Console 面板的打开方式</h3><ul>\n<li>在控制台打开的情况选择 console 按钮</li>\n<li>在 DevTool 的其他面板按 ESC 键打开面板（在开发者工具获得焦点的情况下）</li>\n<li>在右上角的菜单打开（setting–show–console–drawer）</li>\n<li>输入快捷键<code>Ctrl+Shift+P</code>，再输入 <code>Console</code><br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10006.gif\"></li>\n</ul>","more":"<h3 id=\"初识面板\"><a href=\"#初识面板\" class=\"headerlink\" title=\"初识面板\"></a>初识面板</h3><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172121.png\"></p>\n<h4 id=\"面板分析\"><a href=\"#面板分析\" class=\"headerlink\" title=\"面板分析\"></a>面板分析</h4><p>上面部分为工具栏<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172130.png\"></p>\n<p>下面部分为命令区</p>\n<h3 id=\"工具栏使用方法\"><a href=\"#工具栏使用方法\" class=\"headerlink\" title=\"工具栏使用方法\"></a>工具栏使用方法</h3><h4 id=\"展开关闭侧边栏\"><a href=\"#展开关闭侧边栏\" class=\"headerlink\" title=\"展开关闭侧边栏\"></a>展开关闭侧边栏</h4><p><img src=\"https://i.loli.net/2020/09/23/NwpqoC8jKfMcB41.gif\" alt=\"ia_10009.gif\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172330.png\"></p>\n<p>点击可以切换侧边栏的展示和隐藏，点击一栏可以对命令区的进行过滤。默认是以关闭的，就不会对信息进行过滤。</p>\n<p>左侧的分类栏目主要由以下几类:</p>\n<ul>\n<li>message<br>全部的信息，就是未分类的信息，是以下信息的综合。</li>\n<li>user message</li>\n<li>errors<br>日志级别为 error 的日志</li>\n<li>warning<br>日志级别为 warning 的日志</li>\n<li>info<br>日志级别为 info 的日志</li>\n<li>verbose<br>日志级别为 verbose(冗长) 的日志</li>\n</ul>\n<p>前面会显示该栏目总的日志数量，具体的信息会显示在该栏目的子栏目上，比如文件路径，产生日志数量，文件名等</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172403.png\"><br>点击对应的消息会在右侧展示过滤的结果。</p>\n<h4 id=\"清空命令行\"><a href=\"#清空命令行\" class=\"headerlink\" title=\"清空命令行\"></a>清空命令行</h4><p>点击这个图标<img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172422.png\" width=\"26px\" style=\"display:inline;\" class=\"nofancybox\"/>可以清空命令行</p>\n<p>列举出可以清空命令行的一些操作</p>\n<ul>\n<li>右键菜单 Clear Console</li>\n<li>在命令行输入 clear()</li>\n<li>js 调用 console.clear()</li>\n<li>快捷键<code>Ctrl + L</code></li>\n</ul>\n<h4 id=\"上下文选择\"><a href=\"#上下文选择\" class=\"headerlink\" title=\"上下文选择\"></a>上下文选择</h4><p>默认的上下文环境为 top，也就是当前网页打开的环境。你也可以选择切换为你需要你的环境</p>\n<p>比如在<a href=\"https://7q43c.csb.app/\">这个 iframe 页面</a>，你就可以切换环境为 iframe 的环境。</p>\n<p>源代码:<a href=\"https://codesandbox.io/s/upbeat-frog-c6n68?file=/index.html\">源代码 1</a>和<a href=\"https://codesandbox.io/s/focused-tesla-7q43c?file=/index.html\">源代码 2</a></p>\n<p>当我进入 iframe 的上下文的时候就可以打印出 iframe 里面的数据<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10012.gif\"></p>\n<h4 id=\"实时表达式\"><a href=\"#实时表达式\" class=\"headerlink\" title=\"实时表达式\"></a>实时表达式</h4><p>Live Expressions 实时执行的表达式,可以创建多个表达式，失去焦点就会保存，创建之后也可以删除。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10013.gif\"></p>\n<h4 id=\"过滤选项\"><a href=\"#过滤选项\" class=\"headerlink\" title=\"过滤选项\"></a>过滤选项</h4><p>可以输入文本、正则等对打印的信息进行搜索和过滤。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600854061519-ia_10014.gif\" alt=\"ia_10014\"></p>\n<h4 id=\"打印级别过滤\"><a href=\"#打印级别过滤\" class=\"headerlink\" title=\"打印级别过滤\"></a>打印级别过滤</h4><p>打印级别过滤有如下选项：<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172458.png\"></p>\n<blockquote>\n<p>Default: 默认为警告信息和错误<br>Verbose: 冗长的的打印<br>其余为常规的信息、警告、错误级别</p>\n</blockquote>\n<p>当过滤级别不是全部展示的话会在右侧显示被隐藏的条数。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172507.png\"></p>\n<h4 id=\"设置\"><a href=\"#设置\" class=\"headerlink\" title=\"设置\"></a>设置</h4><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172514.png\"></p>\n<ul>\n<li><p>Hide Network</p>\n<p>是否对有关网络的日志进行隐藏<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10018.gif\"></p>\n</li>\n<li><p>Log XmlHttpRequests</p>\n<p>是否打印 XHR 请求<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10019.gif\"></p>\n</li>\n<li><p>Preserve Log<br>是否保留日志，每次刷新是否自动清空日志。</p>\n</li>\n<li><p>Selected Context Only<br>是否只显示当前的上下文环境的日志信息<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10020.gif\"></p>\n</li>\n<li><p>Group Similar</p>\n</li>\n</ul>\n<ul>\n<li><p>Eager Evaluation</p>\n<p>及时显示执行结果<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10021.gif\"></p>\n</li>\n</ul>\n<ul>\n<li><p>Autocomplete From History</p>\n<p>根据历史记录自动完成命令<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10022.gif\"></p>\n</li>\n<li><p>Group Similar<br>相同日志归到一个组里面，此选项在禁用日志时间戳事才有效</p>\n</li>\n<li><p>Evaluate triggers user activation</p>\n</li>\n</ul>\n<h3 id=\"命令区使用方法\"><a href=\"#命令区使用方法\" class=\"headerlink\" title=\"命令区使用方法\"></a>命令区使用方法</h3><h4 id=\"基本使用\"><a href=\"#基本使用\" class=\"headerlink\" title=\"基本使用\"></a>基本使用</h4><ul>\n<li>上一行输入，下一行输出结果</li>\n<li>键盘的上线键可根据历史记录自动补全</li>\n</ul>\n<h4 id=\"右键菜单\"><a href=\"#右键菜单\" class=\"headerlink\" title=\"右键菜单\"></a>右键菜单</h4><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172532.png\"></p>\n<ul>\n<li><p>Clear console</p>\n<p>清空命令区</p>\n</li>\n<li><p>Clear console history</p>\n<p>清空历史记录，这时上下键的补全将失效</p>\n</li>\n<li><p>Save as</p>\n<p>存储当前的日志信息</p>\n</li>\n</ul>\n<h4 id=\"Console-Api\"><a href=\"#Console-Api\" class=\"headerlink\" title=\"Console Api\"></a>Console Api</h4><p>参看<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Console\">MDN 文档</a>和<a href=\"https://developers.google.com/web/tools/chrome-devtools/console/api\">谷歌文档</a></p>\n<h4 id=\"Console-工具库-Api\"><a href=\"#Console-工具库-Api\" class=\"headerlink\" title=\"Console 工具库 Api\"></a>Console 工具库 Api</h4><p>整理自<a href=\"https://developers.google.com/web/tools/chrome-devtools/console/utilities\">谷歌文档</a></p>\n<table>\n<thead>\n<tr>\n<th>语句</th>\n<th>效果</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>$_</td>\n<td>返回最近执行的结果</td>\n</tr>\n<tr>\n<td>$0-$4</td>\n<td>日志历史的最近五个 DOM 元素</td>\n</tr>\n<tr>\n<td>$</td>\n<td>document.querySelector(如果引用了 jquery 等库，就会被覆盖为引入的库)</td>\n</tr>\n<tr>\n<td>$$</td>\n<td>document.querySelectorAll</td>\n</tr>\n<tr>\n<td>$x</td>\n<td>$x(path) 返回与给定 XPath 表达式匹配的 DOM 元素数组。</td>\n</tr>\n<tr>\n<td>clear</td>\n<td>清除控制台</td>\n</tr>\n<tr>\n<td>copy</td>\n<td>copy(object) 将指定对象的字符串表示形式复制到剪贴板。</td>\n</tr>\n<tr>\n<td>debug</td>\n<td>当调用指定的函数时，调试器将被调用并在 Sources 面板上的函数内部中断，从而逐步执行代码并进行调试。</td>\n</tr>\n<tr>\n<td>dir</td>\n<td>dir(object)显示所有指定对象属性的对象样式列表。此方法是 Console API console.dir()方法的别名。</td>\n</tr>\n<tr>\n<td>dirxml</td>\n<td>dirxml(object)打印指定对象的 XML 表示形式。此方法等效于 console.dirxml（）方法。</td>\n</tr>\n<tr>\n<td>inspect</td>\n<td>inspect(object/function) 打开并在适当的面板中选择指定的元素或对象：DOM 元素的 Elements 面板或 JavaScript 堆对象的 Profiles 面板。</td>\n</tr>\n<tr>\n<td>getEventListeners</td>\n<td>getEventListeners(object)返回在指定对象上注册的事件</td>\n</tr>\n<tr>\n<td>keys</td>\n<td>keys(object)返回一个数组，其中包含属于指定对象的属性的名称</td>\n</tr>\n<tr>\n<td>monitor</td>\n<td>调用指定的函数时，一条消息会记录到控制台，该消息指示函数名称以及调用该函数时传递给该函数的参数。</td>\n</tr>\n<tr>\n<td>monitorEvents</td>\n<td>当指定对象上发生指定事件之一时，事件对象将记录到控制台。您可以指定要监视的单个事件，事件数组或映射到预定义事件集合的一般事件“类型”之一。</td>\n</tr>\n</tbody></table>\n<h3 id=\"参考资源\"><a href=\"#参考资源\" class=\"headerlink\" title=\"参考资源\"></a>参考资源</h3><blockquote>\n<p><a href=\"https://developers.google.com/web/tools/chrome-devtools/console/utilities\">https://developers.google.com/web/tools/chrome-devtools/console/utilities</a> &gt; <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Console\">https://developer.mozilla.org/zh-CN/docs/Web/API/Console</a> &gt; <a href=\"https://segmentfault.com/a/1190000002511877\">https://segmentfault.com/a/1190000002511877</a> &gt; <a href=\"https://zhuanlan.zhihu.com/p/80751021\">https://zhuanlan.zhihu.com/p/80751021</a></p>\n</blockquote>"},{"title":"Chrome Elements面板解析","abbrlink":"9430c0ea","translate_title":"chrome-elements-panel-analysis","date":"2020-05-05T03:00:03.000Z","_content":"\n### Chrome 开发者工具的打开方式\n\n在开始面板分析之前，说下 DevTool 的打开方式。\n\n- 右键 Inspect(Ctrl+Shift+I)\n- F12 打开(或者光标放在地址栏 F12 打开)\n- Menu -> More tools -> Developer Tools\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923192035.png)\n\n<!-- more -->\n\n### 初识面板\n\n在打 DevTool 之后选择 Elements 就可以打开 Elements 面板\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923192117.png)\n\n#### 面板分析\n\n最左侧面板为实际网页；在右侧的面板中，主要分为两部分，一部分是左侧的 DOM Tree 结构，右侧则是属性的子面板。\n\n### DOM 面板使用方法\n\n#### 选择元素\n\n选择元素之后，右侧的 DOM Tree 面板会高亮此元素，底部会显示当前的 DOM 元素的路径，属性子面板也会展示该元素的属性。\n\n选择元素的方式有几种：\n\n- 在元素上右键审查\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923192155.png)\n\n- 使用选择工具在页面审查\n  ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923192204.png)\n- 在 DOM Tree 面板 hover 选中元素。此时两边的显示是及时联动的，可以及时观察，底部显示了 DOM 元素路径。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923192215.png)\n\n在元素选中之后，DOM Tree 会呈现高亮状态，hover 的时候在网页的实际视图也会呈现高亮。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923192227.png)\n\n#### 切换元素\n\n在选择元素之后，可以通过键盘的**上下键**来进行上一级和下一级的选择，**左右键**可以对这个 DOM 节点进行展开和闭合。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600860508428-ia_10012.gif)\n同时，在选择了元素之后，可以直接输入$0，打印当前的元素。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923192850.png)\n\n#### 基本编辑操作\n\n所有的属性编辑之后再网页都可以及时看到效果。\n\n##### 文本编辑\n\n在对应的文本上面双击可以快速选择属性，进行修改。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923192905.png)\n\n##### 属性编辑\n\n在对应的属性上面双击可以快速选择属性，进行修改。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923192928.png)\n\n##### 元素拖拽\n\n选中的元素右键单击按住不放可以拖拽，DOM Tree 的结构顺序被改变。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10016.gif)\n\n##### 元素隐藏、删除，恢复\n\n选中元素，按**H**键（英文输入模式下）可以切换元素的显隐，**delete**键可以直接删除 DOM 节点，**Ctrl+Z**可以恢复上一步的操作。\n\n- 显隐切换\n  ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10017.gif)\n- 删除和恢复\n  ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600860698279-ia_10018.gif)\n\n#### hover 效果\n\n##### hover\n\nhover 的时候，网页内容会随鼠标位置联动，同时如果是图片元素会显示图片的缩略图和图片地址。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923193201.png)\n\n#### 右键菜单\n\n当我们在 DOM tree 面板对元素右键的的时候会显示右键菜单。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923193213.png)\n\n接下来我们将对右键菜单一一解析。\n\n##### Reveal in Source panel 在资源面板显示（图片、音视频等资源会显示）\n\n##### Open in new tab 在新窗口打开资源（图片、音视频等资源会显示）\n\n##### Add attribute 为当前元素添加属性\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600860770382-ia_10021.gif)\n\n##### Edit as HTML 以 HTML 方式编辑当前元素\n\n点击其他地方，编辑区域失去焦点就会保存\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600860994416-ia_10022.gif)\n\n##### Delete Element 删除当前的元素，和键盘的 Delete 一样\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600861077498-ia_10023.gif)\n\n##### Copy 复制\n\n###### Cut element 剪切元素\n\n**粘贴的时候原来元素会消失**\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600861109023-ia_10024.gif)\n\n###### Copy element 复制元素\n\n**粘贴的时候原来元素不会消失**\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600861135705-ia_10025.gif)\n\n###### Paste element 粘贴元素（在已复制的情况）\n\n粘贴操作\n\n###### Copy outerHTML 复制序列化的 HTML 片段（[outerHTML](https://developer.mozilla.org/zh-CN/docs/Web/API/Element/outerHTML)）\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600861179087-ia_10026.gif)\n\n###### Copy selector 复制选择器（可以直接放到选择语句中使用）\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600861215618-ia_10027.gif)\n\n###### Copy JS path 复制 JS 路径，可以直接使用\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600861240014-ia_10028.gif)\n\n###### Copy styles 复制作用在此元素的样式\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600861263916-ia_10029.gif)\n\n###### Copy XPath 复制元素的 XPath\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600861288306-ia_10030.gif)\n\n###### Copy full XPath 复制元素的完整 XPath\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600861309572-ia_10031.gif)\n\n###### Copy link address 复制当前的连接地址（在图片等媒体元素上会显示）\n\n##### Force state 强制当前元素的状态\n\n一共有五种\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923194429.png)\n(附： [全部伪类](https://developer.mozilla.org/zh-CN/docs/Web/CSS/Pseudo-classes)、 [简单的 demo](https://codesandbox.io/s/crimson-water-3phqw))\n1.:active 激活状态  \n 2.:hover 虚指状态  \n 3.:focus 获得焦点状态  \n 4.:visited 已访问过的链接状态  \n 5.:focus-within 元素获得焦点或该元素的后代元素获得焦点的状态\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10033.gif)\n\n##### Brake on 断点\n\n(附： [简单的 demo](https://fewn8.csb.app/))\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923194446.png)\n\n一共有三种可以为**JS**修改 DOM 的情况打断点：\n\n1.subtree modification 子节点修改\n\n2.attribute modification 属性修改\n\n3.node removal 节点移除\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10035.gif)\n\n##### expand recursively 将此节点的每个子节点展开\n\n##### collapse children 将子节点全部折叠\n\n一起演示：\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10036.gif)\n\n##### Scroll into view 将元素滚动到视图中\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10037.gif)\n\n##### Focus 将在视图中高亮选择的元素，但是不一定在视图显示\n\n##### Store as global variable 将此元素存储为全局变量\n\n接下来就可以像操作 JS 一样直接操作元素。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10038.gif)\n\n### 属性子面板使用方法\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923194836.png)\n\n#### Styles\n\n当我们选中元素的时候，右侧子面板就会显示当前元素的 Styles 面板。这个面板主要有三个部分**Filter 栏**、**样式操作栏**、**盒模型栏**\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923194844.png)\n\n##### Filter 栏\n\n可以对元素的样式进行筛选，强制状态，切换 class 和增加 class\n\n过滤操作\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10041.gif)\n\n强制状态，和右键菜单的区别就是在这里还可以直接看到作用的样式\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10042.gif)\n切换、增加 class\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10043.gif)\n\n增加样式（最右侧）\n\n此处的添加可以下拉添加到已经存在的 class 中，或者仅仅在开发者工具中\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10044.gif)\n\n##### 样式操作栏\n\n选中一个元素可以出现一下的样式操作面板\n\n###### 样式操作栏概览\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195025.png)\n\n- 1：元素行内样式\n- 2：元素受 class 影响的样式\n- 3：浏览器默认的样式\n- 4：继承的样式，并且有标出继承自何处\n\n###### 操作细节\n\n- 右下角可以新增**文本阴影**，**盒子阴影**，**文字淹死**，**背景色**，**权重更高的 class**\n- 右上角有显示具体的文件地址\n- 单击可以新增 css 的属性，编辑的时候会有提示\n- 双击可以款速选中\n- 前面的 checkbox 可以切换此条样式的作用\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10046.gif)\n\n颜色选择工具\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195153.png)\n文本阴影编辑\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195201.png)\nbox-shadow 工具\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195208.png)\n\n##### 盒模型栏\n\n见 Computed 面板\n\n#### Computed\n\n展示当前实际作用在元素的盒模型\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195221.png)\n\n一共有三个部分：盒模型，作用样式列表，字体加载\n\n##### 盒模型\n\n展示当前元素的 position，margin，padding，border 值，在不同的边距上面 hover 元素会对应的高亮。\n\n直接双击值可以直接修改。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10051.gif)\n\n##### 作用样式列表\n\n列出作用在元素的列表，可以切换是否展示默认的样式，可以进行 filter（同 Styles Filter）\n\n##### 字体加载\n\n展示字体加载情况\n\n#### Event Listeners\n\n[练习 demo](https://jd4oz.csb.app/)\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195248.png)\n从左到右，分别为\n\n- 刷新\n- 是否显示父元素及祖先元素的事件\n  ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10053.gif)\n- 事件监听类型选择（被动类型和非阻塞类型）\n\nPassive event listeners:[**提升页面滑动的流畅度**](https://zhuanlan.zhihu.com/p/24555031)\n\n- 框架绑定的事件监听\n\nresolve event listeners bound with framework 是否看到的是原始的代码\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10054.gif)\n\n下面就是绑定元素和具体的代码位置，key 是绑定事件名,点击 remove 可以解绑对应的事件。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195345.png)\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10056.gif)\n\n#### DOM Breakpoints\n\n展示出在右键菜单中所打的断点\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10057.gif)\n\n#### Properties\n\n展示所选中元素的各种属性\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195449.png)\n如图列举出了当前节点的：\n\n- img#hplogo 的属性\n- [图片元素的属性](https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLImageElement)\n- [元素的属性](https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement)\n- [Node 的属性](https://developer.mozilla.org/zh-CN/docs/Web/API/Node)\n- [EventTarget 的属性](https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget)\n- [Object 的属性](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object)\n\n如果有需要就可以展开详细查看\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195458.png)\n\n#### Accessibility\n\n可访问性，[计算机辅助功能](https://zh.wikipedia.org/wiki/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%BE%85%E5%8A%A9%E5%8A%9F%E8%83%BD)、[无障碍访问](https://developer.mozilla.org/zh-CN/docs/Web/Accessibility/ARIA)\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195505.png)\n\n从上往下依次为：\n\n- 可访问树\n\n可访问性树是 DOM 树的子集。它仅包含 DOM 树中与在屏幕阅读器中显示页面内容相关且有用的元素。\n\n- 可访问属性\n\nARIA 属性可确保屏幕阅读器拥有他们需要的所有信息，以正确表示页面的内容\n\n- 最终渲染的属性，计算的可访问性属性\n\n### 结语\n\n以上，就是 Chrome Elements 面板的全部内容，如有错误，还望各位看官斧正。\n\n预告：Chrome Console 面板进行中\n","source":"_posts/Chrome-elements.md","raw":"---\ntitle: Chrome Elements面板解析\ntags:\n  - Chrome\nabbrlink: 9430c0ea\ntranslate_title: chrome-elements-panel-analysis\ndate: 2020-05-05 11:00:03\n---\n\n### Chrome 开发者工具的打开方式\n\n在开始面板分析之前，说下 DevTool 的打开方式。\n\n- 右键 Inspect(Ctrl+Shift+I)\n- F12 打开(或者光标放在地址栏 F12 打开)\n- Menu -> More tools -> Developer Tools\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923192035.png)\n\n<!-- more -->\n\n### 初识面板\n\n在打 DevTool 之后选择 Elements 就可以打开 Elements 面板\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923192117.png)\n\n#### 面板分析\n\n最左侧面板为实际网页；在右侧的面板中，主要分为两部分，一部分是左侧的 DOM Tree 结构，右侧则是属性的子面板。\n\n### DOM 面板使用方法\n\n#### 选择元素\n\n选择元素之后，右侧的 DOM Tree 面板会高亮此元素，底部会显示当前的 DOM 元素的路径，属性子面板也会展示该元素的属性。\n\n选择元素的方式有几种：\n\n- 在元素上右键审查\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923192155.png)\n\n- 使用选择工具在页面审查\n  ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923192204.png)\n- 在 DOM Tree 面板 hover 选中元素。此时两边的显示是及时联动的，可以及时观察，底部显示了 DOM 元素路径。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923192215.png)\n\n在元素选中之后，DOM Tree 会呈现高亮状态，hover 的时候在网页的实际视图也会呈现高亮。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923192227.png)\n\n#### 切换元素\n\n在选择元素之后，可以通过键盘的**上下键**来进行上一级和下一级的选择，**左右键**可以对这个 DOM 节点进行展开和闭合。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600860508428-ia_10012.gif)\n同时，在选择了元素之后，可以直接输入$0，打印当前的元素。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923192850.png)\n\n#### 基本编辑操作\n\n所有的属性编辑之后再网页都可以及时看到效果。\n\n##### 文本编辑\n\n在对应的文本上面双击可以快速选择属性，进行修改。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923192905.png)\n\n##### 属性编辑\n\n在对应的属性上面双击可以快速选择属性，进行修改。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923192928.png)\n\n##### 元素拖拽\n\n选中的元素右键单击按住不放可以拖拽，DOM Tree 的结构顺序被改变。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10016.gif)\n\n##### 元素隐藏、删除，恢复\n\n选中元素，按**H**键（英文输入模式下）可以切换元素的显隐，**delete**键可以直接删除 DOM 节点，**Ctrl+Z**可以恢复上一步的操作。\n\n- 显隐切换\n  ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10017.gif)\n- 删除和恢复\n  ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600860698279-ia_10018.gif)\n\n#### hover 效果\n\n##### hover\n\nhover 的时候，网页内容会随鼠标位置联动，同时如果是图片元素会显示图片的缩略图和图片地址。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923193201.png)\n\n#### 右键菜单\n\n当我们在 DOM tree 面板对元素右键的的时候会显示右键菜单。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923193213.png)\n\n接下来我们将对右键菜单一一解析。\n\n##### Reveal in Source panel 在资源面板显示（图片、音视频等资源会显示）\n\n##### Open in new tab 在新窗口打开资源（图片、音视频等资源会显示）\n\n##### Add attribute 为当前元素添加属性\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600860770382-ia_10021.gif)\n\n##### Edit as HTML 以 HTML 方式编辑当前元素\n\n点击其他地方，编辑区域失去焦点就会保存\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600860994416-ia_10022.gif)\n\n##### Delete Element 删除当前的元素，和键盘的 Delete 一样\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600861077498-ia_10023.gif)\n\n##### Copy 复制\n\n###### Cut element 剪切元素\n\n**粘贴的时候原来元素会消失**\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600861109023-ia_10024.gif)\n\n###### Copy element 复制元素\n\n**粘贴的时候原来元素不会消失**\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600861135705-ia_10025.gif)\n\n###### Paste element 粘贴元素（在已复制的情况）\n\n粘贴操作\n\n###### Copy outerHTML 复制序列化的 HTML 片段（[outerHTML](https://developer.mozilla.org/zh-CN/docs/Web/API/Element/outerHTML)）\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600861179087-ia_10026.gif)\n\n###### Copy selector 复制选择器（可以直接放到选择语句中使用）\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600861215618-ia_10027.gif)\n\n###### Copy JS path 复制 JS 路径，可以直接使用\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600861240014-ia_10028.gif)\n\n###### Copy styles 复制作用在此元素的样式\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600861263916-ia_10029.gif)\n\n###### Copy XPath 复制元素的 XPath\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600861288306-ia_10030.gif)\n\n###### Copy full XPath 复制元素的完整 XPath\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600861309572-ia_10031.gif)\n\n###### Copy link address 复制当前的连接地址（在图片等媒体元素上会显示）\n\n##### Force state 强制当前元素的状态\n\n一共有五种\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923194429.png)\n(附： [全部伪类](https://developer.mozilla.org/zh-CN/docs/Web/CSS/Pseudo-classes)、 [简单的 demo](https://codesandbox.io/s/crimson-water-3phqw))\n1.:active 激活状态  \n 2.:hover 虚指状态  \n 3.:focus 获得焦点状态  \n 4.:visited 已访问过的链接状态  \n 5.:focus-within 元素获得焦点或该元素的后代元素获得焦点的状态\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10033.gif)\n\n##### Brake on 断点\n\n(附： [简单的 demo](https://fewn8.csb.app/))\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923194446.png)\n\n一共有三种可以为**JS**修改 DOM 的情况打断点：\n\n1.subtree modification 子节点修改\n\n2.attribute modification 属性修改\n\n3.node removal 节点移除\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10035.gif)\n\n##### expand recursively 将此节点的每个子节点展开\n\n##### collapse children 将子节点全部折叠\n\n一起演示：\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10036.gif)\n\n##### Scroll into view 将元素滚动到视图中\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10037.gif)\n\n##### Focus 将在视图中高亮选择的元素，但是不一定在视图显示\n\n##### Store as global variable 将此元素存储为全局变量\n\n接下来就可以像操作 JS 一样直接操作元素。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10038.gif)\n\n### 属性子面板使用方法\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923194836.png)\n\n#### Styles\n\n当我们选中元素的时候，右侧子面板就会显示当前元素的 Styles 面板。这个面板主要有三个部分**Filter 栏**、**样式操作栏**、**盒模型栏**\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923194844.png)\n\n##### Filter 栏\n\n可以对元素的样式进行筛选，强制状态，切换 class 和增加 class\n\n过滤操作\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10041.gif)\n\n强制状态，和右键菜单的区别就是在这里还可以直接看到作用的样式\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10042.gif)\n切换、增加 class\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10043.gif)\n\n增加样式（最右侧）\n\n此处的添加可以下拉添加到已经存在的 class 中，或者仅仅在开发者工具中\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10044.gif)\n\n##### 样式操作栏\n\n选中一个元素可以出现一下的样式操作面板\n\n###### 样式操作栏概览\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195025.png)\n\n- 1：元素行内样式\n- 2：元素受 class 影响的样式\n- 3：浏览器默认的样式\n- 4：继承的样式，并且有标出继承自何处\n\n###### 操作细节\n\n- 右下角可以新增**文本阴影**，**盒子阴影**，**文字淹死**，**背景色**，**权重更高的 class**\n- 右上角有显示具体的文件地址\n- 单击可以新增 css 的属性，编辑的时候会有提示\n- 双击可以款速选中\n- 前面的 checkbox 可以切换此条样式的作用\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10046.gif)\n\n颜色选择工具\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195153.png)\n文本阴影编辑\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195201.png)\nbox-shadow 工具\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195208.png)\n\n##### 盒模型栏\n\n见 Computed 面板\n\n#### Computed\n\n展示当前实际作用在元素的盒模型\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195221.png)\n\n一共有三个部分：盒模型，作用样式列表，字体加载\n\n##### 盒模型\n\n展示当前元素的 position，margin，padding，border 值，在不同的边距上面 hover 元素会对应的高亮。\n\n直接双击值可以直接修改。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10051.gif)\n\n##### 作用样式列表\n\n列出作用在元素的列表，可以切换是否展示默认的样式，可以进行 filter（同 Styles Filter）\n\n##### 字体加载\n\n展示字体加载情况\n\n#### Event Listeners\n\n[练习 demo](https://jd4oz.csb.app/)\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195248.png)\n从左到右，分别为\n\n- 刷新\n- 是否显示父元素及祖先元素的事件\n  ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10053.gif)\n- 事件监听类型选择（被动类型和非阻塞类型）\n\nPassive event listeners:[**提升页面滑动的流畅度**](https://zhuanlan.zhihu.com/p/24555031)\n\n- 框架绑定的事件监听\n\nresolve event listeners bound with framework 是否看到的是原始的代码\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10054.gif)\n\n下面就是绑定元素和具体的代码位置，key 是绑定事件名,点击 remove 可以解绑对应的事件。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195345.png)\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10056.gif)\n\n#### DOM Breakpoints\n\n展示出在右键菜单中所打的断点\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10057.gif)\n\n#### Properties\n\n展示所选中元素的各种属性\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195449.png)\n如图列举出了当前节点的：\n\n- img#hplogo 的属性\n- [图片元素的属性](https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLImageElement)\n- [元素的属性](https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement)\n- [Node 的属性](https://developer.mozilla.org/zh-CN/docs/Web/API/Node)\n- [EventTarget 的属性](https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget)\n- [Object 的属性](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object)\n\n如果有需要就可以展开详细查看\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195458.png)\n\n#### Accessibility\n\n可访问性，[计算机辅助功能](https://zh.wikipedia.org/wiki/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%BE%85%E5%8A%A9%E5%8A%9F%E8%83%BD)、[无障碍访问](https://developer.mozilla.org/zh-CN/docs/Web/Accessibility/ARIA)\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195505.png)\n\n从上往下依次为：\n\n- 可访问树\n\n可访问性树是 DOM 树的子集。它仅包含 DOM 树中与在屏幕阅读器中显示页面内容相关且有用的元素。\n\n- 可访问属性\n\nARIA 属性可确保屏幕阅读器拥有他们需要的所有信息，以正确表示页面的内容\n\n- 最终渲染的属性，计算的可访问性属性\n\n### 结语\n\n以上，就是 Chrome Elements 面板的全部内容，如有错误，还望各位看官斧正。\n\n预告：Chrome Console 面板进行中\n","slug":"Chrome-elements","published":1,"updated":"2021-09-29T07:53:51.813Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy6ac0009p4vldmb820nc","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"Chrome-开发者工具的打开方式\"><a href=\"#Chrome-开发者工具的打开方式\" class=\"headerlink\" title=\"Chrome 开发者工具的打开方式\"></a>Chrome 开发者工具的打开方式</h3><p>在开始面板分析之前，说下 DevTool 的打开方式。</p>\n<ul>\n<li>右键 Inspect(Ctrl+Shift+I)</li>\n<li>F12 打开(或者光标放在地址栏 F12 打开)</li>\n<li>Menu -&gt; More tools -&gt; Developer Tools</li>\n</ul>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923192035.png\"></p>\n<span id=\"more\"></span>\n\n<h3 id=\"初识面板\"><a href=\"#初识面板\" class=\"headerlink\" title=\"初识面板\"></a>初识面板</h3><p>在打 DevTool 之后选择 Elements 就可以打开 Elements 面板<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923192117.png\"></p>\n<h4 id=\"面板分析\"><a href=\"#面板分析\" class=\"headerlink\" title=\"面板分析\"></a>面板分析</h4><p>最左侧面板为实际网页；在右侧的面板中，主要分为两部分，一部分是左侧的 DOM Tree 结构，右侧则是属性的子面板。</p>\n<h3 id=\"DOM-面板使用方法\"><a href=\"#DOM-面板使用方法\" class=\"headerlink\" title=\"DOM 面板使用方法\"></a>DOM 面板使用方法</h3><h4 id=\"选择元素\"><a href=\"#选择元素\" class=\"headerlink\" title=\"选择元素\"></a>选择元素</h4><p>选择元素之后，右侧的 DOM Tree 面板会高亮此元素，底部会显示当前的 DOM 元素的路径，属性子面板也会展示该元素的属性。</p>\n<p>选择元素的方式有几种：</p>\n<ul>\n<li>在元素上右键审查</li>\n</ul>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923192155.png\"></p>\n<ul>\n<li>使用选择工具在页面审查<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923192204.png\"></li>\n<li>在 DOM Tree 面板 hover 选中元素。此时两边的显示是及时联动的，可以及时观察，底部显示了 DOM 元素路径。</li>\n</ul>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923192215.png\"></p>\n<p>在元素选中之后，DOM Tree 会呈现高亮状态，hover 的时候在网页的实际视图也会呈现高亮。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923192227.png\"></p>\n<h4 id=\"切换元素\"><a href=\"#切换元素\" class=\"headerlink\" title=\"切换元素\"></a>切换元素</h4><p>在选择元素之后，可以通过键盘的<strong>上下键</strong>来进行上一级和下一级的选择，<strong>左右键</strong>可以对这个 DOM 节点进行展开和闭合。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600860508428-ia_10012.gif\"><br>同时，在选择了元素之后，可以直接输入$0，打印当前的元素。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923192850.png\"></p>\n<h4 id=\"基本编辑操作\"><a href=\"#基本编辑操作\" class=\"headerlink\" title=\"基本编辑操作\"></a>基本编辑操作</h4><p>所有的属性编辑之后再网页都可以及时看到效果。</p>\n<h5 id=\"文本编辑\"><a href=\"#文本编辑\" class=\"headerlink\" title=\"文本编辑\"></a>文本编辑</h5><p>在对应的文本上面双击可以快速选择属性，进行修改。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923192905.png\"></p>\n<h5 id=\"属性编辑\"><a href=\"#属性编辑\" class=\"headerlink\" title=\"属性编辑\"></a>属性编辑</h5><p>在对应的属性上面双击可以快速选择属性，进行修改。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923192928.png\"></p>\n<h5 id=\"元素拖拽\"><a href=\"#元素拖拽\" class=\"headerlink\" title=\"元素拖拽\"></a>元素拖拽</h5><p>选中的元素右键单击按住不放可以拖拽，DOM Tree 的结构顺序被改变。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10016.gif\"></p>\n<h5 id=\"元素隐藏、删除，恢复\"><a href=\"#元素隐藏、删除，恢复\" class=\"headerlink\" title=\"元素隐藏、删除，恢复\"></a>元素隐藏、删除，恢复</h5><p>选中元素，按<strong>H</strong>键（英文输入模式下）可以切换元素的显隐，<strong>delete</strong>键可以直接删除 DOM 节点，<strong>Ctrl+Z</strong>可以恢复上一步的操作。</p>\n<ul>\n<li>显隐切换<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10017.gif\"></li>\n<li>删除和恢复<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600860698279-ia_10018.gif\"></li>\n</ul>\n<h4 id=\"hover-效果\"><a href=\"#hover-效果\" class=\"headerlink\" title=\"hover 效果\"></a>hover 效果</h4><h5 id=\"hover\"><a href=\"#hover\" class=\"headerlink\" title=\"hover\"></a>hover</h5><p>hover 的时候，网页内容会随鼠标位置联动，同时如果是图片元素会显示图片的缩略图和图片地址。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923193201.png\"></p>\n<h4 id=\"右键菜单\"><a href=\"#右键菜单\" class=\"headerlink\" title=\"右键菜单\"></a>右键菜单</h4><p>当我们在 DOM tree 面板对元素右键的的时候会显示右键菜单。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923193213.png\"></p>\n<p>接下来我们将对右键菜单一一解析。</p>\n<h5 id=\"Reveal-in-Source-panel-在资源面板显示（图片、音视频等资源会显示）\"><a href=\"#Reveal-in-Source-panel-在资源面板显示（图片、音视频等资源会显示）\" class=\"headerlink\" title=\"Reveal in Source panel 在资源面板显示（图片、音视频等资源会显示）\"></a>Reveal in Source panel 在资源面板显示（图片、音视频等资源会显示）</h5><h5 id=\"Open-in-new-tab-在新窗口打开资源（图片、音视频等资源会显示）\"><a href=\"#Open-in-new-tab-在新窗口打开资源（图片、音视频等资源会显示）\" class=\"headerlink\" title=\"Open in new tab 在新窗口打开资源（图片、音视频等资源会显示）\"></a>Open in new tab 在新窗口打开资源（图片、音视频等资源会显示）</h5><h5 id=\"Add-attribute-为当前元素添加属性\"><a href=\"#Add-attribute-为当前元素添加属性\" class=\"headerlink\" title=\"Add attribute 为当前元素添加属性\"></a>Add attribute 为当前元素添加属性</h5><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600860770382-ia_10021.gif\"></p>\n<h5 id=\"Edit-as-HTML-以-HTML-方式编辑当前元素\"><a href=\"#Edit-as-HTML-以-HTML-方式编辑当前元素\" class=\"headerlink\" title=\"Edit as HTML 以 HTML 方式编辑当前元素\"></a>Edit as HTML 以 HTML 方式编辑当前元素</h5><p>点击其他地方，编辑区域失去焦点就会保存</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600860994416-ia_10022.gif\"></p>\n<h5 id=\"Delete-Element-删除当前的元素，和键盘的-Delete-一样\"><a href=\"#Delete-Element-删除当前的元素，和键盘的-Delete-一样\" class=\"headerlink\" title=\"Delete Element 删除当前的元素，和键盘的 Delete 一样\"></a>Delete Element 删除当前的元素，和键盘的 Delete 一样</h5><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600861077498-ia_10023.gif\"></p>\n<h5 id=\"Copy-复制\"><a href=\"#Copy-复制\" class=\"headerlink\" title=\"Copy 复制\"></a>Copy 复制</h5><h6 id=\"Cut-element-剪切元素\"><a href=\"#Cut-element-剪切元素\" class=\"headerlink\" title=\"Cut element 剪切元素\"></a>Cut element 剪切元素</h6><p><strong>粘贴的时候原来元素会消失</strong></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600861109023-ia_10024.gif\"></p>\n<h6 id=\"Copy-element-复制元素\"><a href=\"#Copy-element-复制元素\" class=\"headerlink\" title=\"Copy element 复制元素\"></a>Copy element 复制元素</h6><p><strong>粘贴的时候原来元素不会消失</strong></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600861135705-ia_10025.gif\"></p>\n<h6 id=\"Paste-element-粘贴元素（在已复制的情况）\"><a href=\"#Paste-element-粘贴元素（在已复制的情况）\" class=\"headerlink\" title=\"Paste element 粘贴元素（在已复制的情况）\"></a>Paste element 粘贴元素（在已复制的情况）</h6><p>粘贴操作</p>\n<h6 id=\"Copy-outerHTML-复制序列化的-HTML-片段（outerHTML）\"><a href=\"#Copy-outerHTML-复制序列化的-HTML-片段（outerHTML）\" class=\"headerlink\" title=\"Copy outerHTML 复制序列化的 HTML 片段（outerHTML）\"></a>Copy outerHTML 复制序列化的 HTML 片段（<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Element/outerHTML\">outerHTML</a>）</h6><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600861179087-ia_10026.gif\"></p>\n<h6 id=\"Copy-selector-复制选择器（可以直接放到选择语句中使用）\"><a href=\"#Copy-selector-复制选择器（可以直接放到选择语句中使用）\" class=\"headerlink\" title=\"Copy selector 复制选择器（可以直接放到选择语句中使用）\"></a>Copy selector 复制选择器（可以直接放到选择语句中使用）</h6><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600861215618-ia_10027.gif\"></p>\n<h6 id=\"Copy-JS-path-复制-JS-路径，可以直接使用\"><a href=\"#Copy-JS-path-复制-JS-路径，可以直接使用\" class=\"headerlink\" title=\"Copy JS path 复制 JS 路径，可以直接使用\"></a>Copy JS path 复制 JS 路径，可以直接使用</h6><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600861240014-ia_10028.gif\"></p>\n<h6 id=\"Copy-styles-复制作用在此元素的样式\"><a href=\"#Copy-styles-复制作用在此元素的样式\" class=\"headerlink\" title=\"Copy styles 复制作用在此元素的样式\"></a>Copy styles 复制作用在此元素的样式</h6><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600861263916-ia_10029.gif\"></p>\n<h6 id=\"Copy-XPath-复制元素的-XPath\"><a href=\"#Copy-XPath-复制元素的-XPath\" class=\"headerlink\" title=\"Copy XPath 复制元素的 XPath\"></a>Copy XPath 复制元素的 XPath</h6><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600861288306-ia_10030.gif\"></p>\n<h6 id=\"Copy-full-XPath-复制元素的完整-XPath\"><a href=\"#Copy-full-XPath-复制元素的完整-XPath\" class=\"headerlink\" title=\"Copy full XPath 复制元素的完整 XPath\"></a>Copy full XPath 复制元素的完整 XPath</h6><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600861309572-ia_10031.gif\"></p>\n<h6 id=\"Copy-link-address-复制当前的连接地址（在图片等媒体元素上会显示）\"><a href=\"#Copy-link-address-复制当前的连接地址（在图片等媒体元素上会显示）\" class=\"headerlink\" title=\"Copy link address 复制当前的连接地址（在图片等媒体元素上会显示）\"></a>Copy link address 复制当前的连接地址（在图片等媒体元素上会显示）</h6><h5 id=\"Force-state-强制当前元素的状态\"><a href=\"#Force-state-强制当前元素的状态\" class=\"headerlink\" title=\"Force state 强制当前元素的状态\"></a>Force state 强制当前元素的状态</h5><p>一共有五种<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923194429.png\"><br>(附： <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/CSS/Pseudo-classes\">全部伪类</a>、 <a href=\"https://codesandbox.io/s/crimson-water-3phqw\">简单的 demo</a>)<br>1.:active 激活状态<br> 2.:hover 虚指状态<br> 3.:focus 获得焦点状态<br> 4.:visited 已访问过的链接状态<br> 5.:focus-within 元素获得焦点或该元素的后代元素获得焦点的状态<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10033.gif\"></p>\n<h5 id=\"Brake-on-断点\"><a href=\"#Brake-on-断点\" class=\"headerlink\" title=\"Brake on 断点\"></a>Brake on 断点</h5><p>(附： <a href=\"https://fewn8.csb.app/\">简单的 demo</a>)</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923194446.png\"></p>\n<p>一共有三种可以为<strong>JS</strong>修改 DOM 的情况打断点：</p>\n<p>1.subtree modification 子节点修改</p>\n<p>2.attribute modification 属性修改</p>\n<p>3.node removal 节点移除<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10035.gif\"></p>\n<h5 id=\"expand-recursively-将此节点的每个子节点展开\"><a href=\"#expand-recursively-将此节点的每个子节点展开\" class=\"headerlink\" title=\"expand recursively 将此节点的每个子节点展开\"></a>expand recursively 将此节点的每个子节点展开</h5><h5 id=\"collapse-children-将子节点全部折叠\"><a href=\"#collapse-children-将子节点全部折叠\" class=\"headerlink\" title=\"collapse children 将子节点全部折叠\"></a>collapse children 将子节点全部折叠</h5><p>一起演示：<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10036.gif\"></p>\n<h5 id=\"Scroll-into-view-将元素滚动到视图中\"><a href=\"#Scroll-into-view-将元素滚动到视图中\" class=\"headerlink\" title=\"Scroll into view 将元素滚动到视图中\"></a>Scroll into view 将元素滚动到视图中</h5><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10037.gif\"></p>\n<h5 id=\"Focus-将在视图中高亮选择的元素，但是不一定在视图显示\"><a href=\"#Focus-将在视图中高亮选择的元素，但是不一定在视图显示\" class=\"headerlink\" title=\"Focus 将在视图中高亮选择的元素，但是不一定在视图显示\"></a>Focus 将在视图中高亮选择的元素，但是不一定在视图显示</h5><h5 id=\"Store-as-global-variable-将此元素存储为全局变量\"><a href=\"#Store-as-global-variable-将此元素存储为全局变量\" class=\"headerlink\" title=\"Store as global variable 将此元素存储为全局变量\"></a>Store as global variable 将此元素存储为全局变量</h5><p>接下来就可以像操作 JS 一样直接操作元素。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10038.gif\"></p>\n<h3 id=\"属性子面板使用方法\"><a href=\"#属性子面板使用方法\" class=\"headerlink\" title=\"属性子面板使用方法\"></a>属性子面板使用方法</h3><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923194836.png\"></p>\n<h4 id=\"Styles\"><a href=\"#Styles\" class=\"headerlink\" title=\"Styles\"></a>Styles</h4><p>当我们选中元素的时候，右侧子面板就会显示当前元素的 Styles 面板。这个面板主要有三个部分<strong>Filter 栏</strong>、<strong>样式操作栏</strong>、<strong>盒模型栏</strong></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923194844.png\"></p>\n<h5 id=\"Filter-栏\"><a href=\"#Filter-栏\" class=\"headerlink\" title=\"Filter 栏\"></a>Filter 栏</h5><p>可以对元素的样式进行筛选，强制状态，切换 class 和增加 class</p>\n<p>过滤操作<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10041.gif\"></p>\n<p>强制状态，和右键菜单的区别就是在这里还可以直接看到作用的样式<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10042.gif\"><br>切换、增加 class<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10043.gif\"></p>\n<p>增加样式（最右侧）</p>\n<p>此处的添加可以下拉添加到已经存在的 class 中，或者仅仅在开发者工具中<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10044.gif\"></p>\n<h5 id=\"样式操作栏\"><a href=\"#样式操作栏\" class=\"headerlink\" title=\"样式操作栏\"></a>样式操作栏</h5><p>选中一个元素可以出现一下的样式操作面板</p>\n<h6 id=\"样式操作栏概览\"><a href=\"#样式操作栏概览\" class=\"headerlink\" title=\"样式操作栏概览\"></a>样式操作栏概览</h6><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195025.png\"></p>\n<ul>\n<li>1：元素行内样式</li>\n<li>2：元素受 class 影响的样式</li>\n<li>3：浏览器默认的样式</li>\n<li>4：继承的样式，并且有标出继承自何处</li>\n</ul>\n<h6 id=\"操作细节\"><a href=\"#操作细节\" class=\"headerlink\" title=\"操作细节\"></a>操作细节</h6><ul>\n<li>右下角可以新增<strong>文本阴影</strong>，<strong>盒子阴影</strong>，<strong>文字淹死</strong>，<strong>背景色</strong>，<strong>权重更高的 class</strong></li>\n<li>右上角有显示具体的文件地址</li>\n<li>单击可以新增 css 的属性，编辑的时候会有提示</li>\n<li>双击可以款速选中</li>\n<li>前面的 checkbox 可以切换此条样式的作用</li>\n</ul>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10046.gif\"></p>\n<p>颜色选择工具<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195153.png\"><br>文本阴影编辑<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195201.png\"><br>box-shadow 工具<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195208.png\"></p>\n<h5 id=\"盒模型栏\"><a href=\"#盒模型栏\" class=\"headerlink\" title=\"盒模型栏\"></a>盒模型栏</h5><p>见 Computed 面板</p>\n<h4 id=\"Computed\"><a href=\"#Computed\" class=\"headerlink\" title=\"Computed\"></a>Computed</h4><p>展示当前实际作用在元素的盒模型</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195221.png\"></p>\n<p>一共有三个部分：盒模型，作用样式列表，字体加载</p>\n<h5 id=\"盒模型\"><a href=\"#盒模型\" class=\"headerlink\" title=\"盒模型\"></a>盒模型</h5><p>展示当前元素的 position，margin，padding，border 值，在不同的边距上面 hover 元素会对应的高亮。</p>\n<p>直接双击值可以直接修改。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10051.gif\"></p>\n<h5 id=\"作用样式列表\"><a href=\"#作用样式列表\" class=\"headerlink\" title=\"作用样式列表\"></a>作用样式列表</h5><p>列出作用在元素的列表，可以切换是否展示默认的样式，可以进行 filter（同 Styles Filter）</p>\n<h5 id=\"字体加载\"><a href=\"#字体加载\" class=\"headerlink\" title=\"字体加载\"></a>字体加载</h5><p>展示字体加载情况</p>\n<h4 id=\"Event-Listeners\"><a href=\"#Event-Listeners\" class=\"headerlink\" title=\"Event Listeners\"></a>Event Listeners</h4><p><a href=\"https://jd4oz.csb.app/\">练习 demo</a><br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195248.png\"><br>从左到右，分别为</p>\n<ul>\n<li>刷新</li>\n<li>是否显示父元素及祖先元素的事件<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10053.gif\"></li>\n<li>事件监听类型选择（被动类型和非阻塞类型）</li>\n</ul>\n<p>Passive event listeners:<a href=\"https://zhuanlan.zhihu.com/p/24555031\"><strong>提升页面滑动的流畅度</strong></a></p>\n<ul>\n<li>框架绑定的事件监听</li>\n</ul>\n<p>resolve event listeners bound with framework 是否看到的是原始的代码<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10054.gif\"></p>\n<p>下面就是绑定元素和具体的代码位置，key 是绑定事件名,点击 remove 可以解绑对应的事件。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195345.png\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10056.gif\"></p>\n<h4 id=\"DOM-Breakpoints\"><a href=\"#DOM-Breakpoints\" class=\"headerlink\" title=\"DOM Breakpoints\"></a>DOM Breakpoints</h4><p>展示出在右键菜单中所打的断点</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10057.gif\"></p>\n<h4 id=\"Properties\"><a href=\"#Properties\" class=\"headerlink\" title=\"Properties\"></a>Properties</h4><p>展示所选中元素的各种属性<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195449.png\"><br>如图列举出了当前节点的：</p>\n<ul>\n<li>img#hplogo 的属性</li>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLImageElement\">图片元素的属性</a></li>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement\">元素的属性</a></li>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Node\">Node 的属性</a></li>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget\">EventTarget 的属性</a></li>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object\">Object 的属性</a></li>\n</ul>\n<p>如果有需要就可以展开详细查看<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195458.png\"></p>\n<h4 id=\"Accessibility\"><a href=\"#Accessibility\" class=\"headerlink\" title=\"Accessibility\"></a>Accessibility</h4><p>可访问性，<a href=\"https://zh.wikipedia.org/wiki/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%BE%85%E5%8A%A9%E5%8A%9F%E8%83%BD\">计算机辅助功能</a>、<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/Accessibility/ARIA\">无障碍访问</a></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195505.png\"></p>\n<p>从上往下依次为：</p>\n<ul>\n<li>可访问树</li>\n</ul>\n<p>可访问性树是 DOM 树的子集。它仅包含 DOM 树中与在屏幕阅读器中显示页面内容相关且有用的元素。</p>\n<ul>\n<li>可访问属性</li>\n</ul>\n<p>ARIA 属性可确保屏幕阅读器拥有他们需要的所有信息，以正确表示页面的内容</p>\n<ul>\n<li>最终渲染的属性，计算的可访问性属性</li>\n</ul>\n<h3 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h3><p>以上，就是 Chrome Elements 面板的全部内容，如有错误，还望各位看官斧正。</p>\n<p>预告：Chrome Console 面板进行中</p>\n","site":{"data":{}},"length":2847,"excerpt":"<h3 id=\"Chrome-开发者工具的打开方式\"><a href=\"#Chrome-开发者工具的打开方式\" class=\"headerlink\" title=\"Chrome 开发者工具的打开方式\"></a>Chrome 开发者工具的打开方式</h3><p>在开始面板分析之前，说下 DevTool 的打开方式。</p>\n<ul>\n<li>右键 Inspect(Ctrl+Shift+I)</li>\n<li>F12 打开(或者光标放在地址栏 F12 打开)</li>\n<li>Menu -&gt; More tools -&gt; Developer Tools</li>\n</ul>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923192035.png\"></p>","more":"<h3 id=\"初识面板\"><a href=\"#初识面板\" class=\"headerlink\" title=\"初识面板\"></a>初识面板</h3><p>在打 DevTool 之后选择 Elements 就可以打开 Elements 面板<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923192117.png\"></p>\n<h4 id=\"面板分析\"><a href=\"#面板分析\" class=\"headerlink\" title=\"面板分析\"></a>面板分析</h4><p>最左侧面板为实际网页；在右侧的面板中，主要分为两部分，一部分是左侧的 DOM Tree 结构，右侧则是属性的子面板。</p>\n<h3 id=\"DOM-面板使用方法\"><a href=\"#DOM-面板使用方法\" class=\"headerlink\" title=\"DOM 面板使用方法\"></a>DOM 面板使用方法</h3><h4 id=\"选择元素\"><a href=\"#选择元素\" class=\"headerlink\" title=\"选择元素\"></a>选择元素</h4><p>选择元素之后，右侧的 DOM Tree 面板会高亮此元素，底部会显示当前的 DOM 元素的路径，属性子面板也会展示该元素的属性。</p>\n<p>选择元素的方式有几种：</p>\n<ul>\n<li>在元素上右键审查</li>\n</ul>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923192155.png\"></p>\n<ul>\n<li>使用选择工具在页面审查<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923192204.png\"></li>\n<li>在 DOM Tree 面板 hover 选中元素。此时两边的显示是及时联动的，可以及时观察，底部显示了 DOM 元素路径。</li>\n</ul>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923192215.png\"></p>\n<p>在元素选中之后，DOM Tree 会呈现高亮状态，hover 的时候在网页的实际视图也会呈现高亮。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923192227.png\"></p>\n<h4 id=\"切换元素\"><a href=\"#切换元素\" class=\"headerlink\" title=\"切换元素\"></a>切换元素</h4><p>在选择元素之后，可以通过键盘的<strong>上下键</strong>来进行上一级和下一级的选择，<strong>左右键</strong>可以对这个 DOM 节点进行展开和闭合。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600860508428-ia_10012.gif\"><br>同时，在选择了元素之后，可以直接输入$0，打印当前的元素。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923192850.png\"></p>\n<h4 id=\"基本编辑操作\"><a href=\"#基本编辑操作\" class=\"headerlink\" title=\"基本编辑操作\"></a>基本编辑操作</h4><p>所有的属性编辑之后再网页都可以及时看到效果。</p>\n<h5 id=\"文本编辑\"><a href=\"#文本编辑\" class=\"headerlink\" title=\"文本编辑\"></a>文本编辑</h5><p>在对应的文本上面双击可以快速选择属性，进行修改。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923192905.png\"></p>\n<h5 id=\"属性编辑\"><a href=\"#属性编辑\" class=\"headerlink\" title=\"属性编辑\"></a>属性编辑</h5><p>在对应的属性上面双击可以快速选择属性，进行修改。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923192928.png\"></p>\n<h5 id=\"元素拖拽\"><a href=\"#元素拖拽\" class=\"headerlink\" title=\"元素拖拽\"></a>元素拖拽</h5><p>选中的元素右键单击按住不放可以拖拽，DOM Tree 的结构顺序被改变。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10016.gif\"></p>\n<h5 id=\"元素隐藏、删除，恢复\"><a href=\"#元素隐藏、删除，恢复\" class=\"headerlink\" title=\"元素隐藏、删除，恢复\"></a>元素隐藏、删除，恢复</h5><p>选中元素，按<strong>H</strong>键（英文输入模式下）可以切换元素的显隐，<strong>delete</strong>键可以直接删除 DOM 节点，<strong>Ctrl+Z</strong>可以恢复上一步的操作。</p>\n<ul>\n<li>显隐切换<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10017.gif\"></li>\n<li>删除和恢复<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600860698279-ia_10018.gif\"></li>\n</ul>\n<h4 id=\"hover-效果\"><a href=\"#hover-效果\" class=\"headerlink\" title=\"hover 效果\"></a>hover 效果</h4><h5 id=\"hover\"><a href=\"#hover\" class=\"headerlink\" title=\"hover\"></a>hover</h5><p>hover 的时候，网页内容会随鼠标位置联动，同时如果是图片元素会显示图片的缩略图和图片地址。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923193201.png\"></p>\n<h4 id=\"右键菜单\"><a href=\"#右键菜单\" class=\"headerlink\" title=\"右键菜单\"></a>右键菜单</h4><p>当我们在 DOM tree 面板对元素右键的的时候会显示右键菜单。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923193213.png\"></p>\n<p>接下来我们将对右键菜单一一解析。</p>\n<h5 id=\"Reveal-in-Source-panel-在资源面板显示（图片、音视频等资源会显示）\"><a href=\"#Reveal-in-Source-panel-在资源面板显示（图片、音视频等资源会显示）\" class=\"headerlink\" title=\"Reveal in Source panel 在资源面板显示（图片、音视频等资源会显示）\"></a>Reveal in Source panel 在资源面板显示（图片、音视频等资源会显示）</h5><h5 id=\"Open-in-new-tab-在新窗口打开资源（图片、音视频等资源会显示）\"><a href=\"#Open-in-new-tab-在新窗口打开资源（图片、音视频等资源会显示）\" class=\"headerlink\" title=\"Open in new tab 在新窗口打开资源（图片、音视频等资源会显示）\"></a>Open in new tab 在新窗口打开资源（图片、音视频等资源会显示）</h5><h5 id=\"Add-attribute-为当前元素添加属性\"><a href=\"#Add-attribute-为当前元素添加属性\" class=\"headerlink\" title=\"Add attribute 为当前元素添加属性\"></a>Add attribute 为当前元素添加属性</h5><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600860770382-ia_10021.gif\"></p>\n<h5 id=\"Edit-as-HTML-以-HTML-方式编辑当前元素\"><a href=\"#Edit-as-HTML-以-HTML-方式编辑当前元素\" class=\"headerlink\" title=\"Edit as HTML 以 HTML 方式编辑当前元素\"></a>Edit as HTML 以 HTML 方式编辑当前元素</h5><p>点击其他地方，编辑区域失去焦点就会保存</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600860994416-ia_10022.gif\"></p>\n<h5 id=\"Delete-Element-删除当前的元素，和键盘的-Delete-一样\"><a href=\"#Delete-Element-删除当前的元素，和键盘的-Delete-一样\" class=\"headerlink\" title=\"Delete Element 删除当前的元素，和键盘的 Delete 一样\"></a>Delete Element 删除当前的元素，和键盘的 Delete 一样</h5><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600861077498-ia_10023.gif\"></p>\n<h5 id=\"Copy-复制\"><a href=\"#Copy-复制\" class=\"headerlink\" title=\"Copy 复制\"></a>Copy 复制</h5><h6 id=\"Cut-element-剪切元素\"><a href=\"#Cut-element-剪切元素\" class=\"headerlink\" title=\"Cut element 剪切元素\"></a>Cut element 剪切元素</h6><p><strong>粘贴的时候原来元素会消失</strong></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600861109023-ia_10024.gif\"></p>\n<h6 id=\"Copy-element-复制元素\"><a href=\"#Copy-element-复制元素\" class=\"headerlink\" title=\"Copy element 复制元素\"></a>Copy element 复制元素</h6><p><strong>粘贴的时候原来元素不会消失</strong></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600861135705-ia_10025.gif\"></p>\n<h6 id=\"Paste-element-粘贴元素（在已复制的情况）\"><a href=\"#Paste-element-粘贴元素（在已复制的情况）\" class=\"headerlink\" title=\"Paste element 粘贴元素（在已复制的情况）\"></a>Paste element 粘贴元素（在已复制的情况）</h6><p>粘贴操作</p>\n<h6 id=\"Copy-outerHTML-复制序列化的-HTML-片段（outerHTML）\"><a href=\"#Copy-outerHTML-复制序列化的-HTML-片段（outerHTML）\" class=\"headerlink\" title=\"Copy outerHTML 复制序列化的 HTML 片段（outerHTML）\"></a>Copy outerHTML 复制序列化的 HTML 片段（<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Element/outerHTML\">outerHTML</a>）</h6><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600861179087-ia_10026.gif\"></p>\n<h6 id=\"Copy-selector-复制选择器（可以直接放到选择语句中使用）\"><a href=\"#Copy-selector-复制选择器（可以直接放到选择语句中使用）\" class=\"headerlink\" title=\"Copy selector 复制选择器（可以直接放到选择语句中使用）\"></a>Copy selector 复制选择器（可以直接放到选择语句中使用）</h6><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600861215618-ia_10027.gif\"></p>\n<h6 id=\"Copy-JS-path-复制-JS-路径，可以直接使用\"><a href=\"#Copy-JS-path-复制-JS-路径，可以直接使用\" class=\"headerlink\" title=\"Copy JS path 复制 JS 路径，可以直接使用\"></a>Copy JS path 复制 JS 路径，可以直接使用</h6><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600861240014-ia_10028.gif\"></p>\n<h6 id=\"Copy-styles-复制作用在此元素的样式\"><a href=\"#Copy-styles-复制作用在此元素的样式\" class=\"headerlink\" title=\"Copy styles 复制作用在此元素的样式\"></a>Copy styles 复制作用在此元素的样式</h6><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600861263916-ia_10029.gif\"></p>\n<h6 id=\"Copy-XPath-复制元素的-XPath\"><a href=\"#Copy-XPath-复制元素的-XPath\" class=\"headerlink\" title=\"Copy XPath 复制元素的 XPath\"></a>Copy XPath 复制元素的 XPath</h6><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600861288306-ia_10030.gif\"></p>\n<h6 id=\"Copy-full-XPath-复制元素的完整-XPath\"><a href=\"#Copy-full-XPath-复制元素的完整-XPath\" class=\"headerlink\" title=\"Copy full XPath 复制元素的完整 XPath\"></a>Copy full XPath 复制元素的完整 XPath</h6><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-23/1600861309572-ia_10031.gif\"></p>\n<h6 id=\"Copy-link-address-复制当前的连接地址（在图片等媒体元素上会显示）\"><a href=\"#Copy-link-address-复制当前的连接地址（在图片等媒体元素上会显示）\" class=\"headerlink\" title=\"Copy link address 复制当前的连接地址（在图片等媒体元素上会显示）\"></a>Copy link address 复制当前的连接地址（在图片等媒体元素上会显示）</h6><h5 id=\"Force-state-强制当前元素的状态\"><a href=\"#Force-state-强制当前元素的状态\" class=\"headerlink\" title=\"Force state 强制当前元素的状态\"></a>Force state 强制当前元素的状态</h5><p>一共有五种<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923194429.png\"><br>(附： <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/CSS/Pseudo-classes\">全部伪类</a>、 <a href=\"https://codesandbox.io/s/crimson-water-3phqw\">简单的 demo</a>)<br>1.:active 激活状态<br> 2.:hover 虚指状态<br> 3.:focus 获得焦点状态<br> 4.:visited 已访问过的链接状态<br> 5.:focus-within 元素获得焦点或该元素的后代元素获得焦点的状态<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10033.gif\"></p>\n<h5 id=\"Brake-on-断点\"><a href=\"#Brake-on-断点\" class=\"headerlink\" title=\"Brake on 断点\"></a>Brake on 断点</h5><p>(附： <a href=\"https://fewn8.csb.app/\">简单的 demo</a>)</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923194446.png\"></p>\n<p>一共有三种可以为<strong>JS</strong>修改 DOM 的情况打断点：</p>\n<p>1.subtree modification 子节点修改</p>\n<p>2.attribute modification 属性修改</p>\n<p>3.node removal 节点移除<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10035.gif\"></p>\n<h5 id=\"expand-recursively-将此节点的每个子节点展开\"><a href=\"#expand-recursively-将此节点的每个子节点展开\" class=\"headerlink\" title=\"expand recursively 将此节点的每个子节点展开\"></a>expand recursively 将此节点的每个子节点展开</h5><h5 id=\"collapse-children-将子节点全部折叠\"><a href=\"#collapse-children-将子节点全部折叠\" class=\"headerlink\" title=\"collapse children 将子节点全部折叠\"></a>collapse children 将子节点全部折叠</h5><p>一起演示：<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10036.gif\"></p>\n<h5 id=\"Scroll-into-view-将元素滚动到视图中\"><a href=\"#Scroll-into-view-将元素滚动到视图中\" class=\"headerlink\" title=\"Scroll into view 将元素滚动到视图中\"></a>Scroll into view 将元素滚动到视图中</h5><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10037.gif\"></p>\n<h5 id=\"Focus-将在视图中高亮选择的元素，但是不一定在视图显示\"><a href=\"#Focus-将在视图中高亮选择的元素，但是不一定在视图显示\" class=\"headerlink\" title=\"Focus 将在视图中高亮选择的元素，但是不一定在视图显示\"></a>Focus 将在视图中高亮选择的元素，但是不一定在视图显示</h5><h5 id=\"Store-as-global-variable-将此元素存储为全局变量\"><a href=\"#Store-as-global-variable-将此元素存储为全局变量\" class=\"headerlink\" title=\"Store as global variable 将此元素存储为全局变量\"></a>Store as global variable 将此元素存储为全局变量</h5><p>接下来就可以像操作 JS 一样直接操作元素。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10038.gif\"></p>\n<h3 id=\"属性子面板使用方法\"><a href=\"#属性子面板使用方法\" class=\"headerlink\" title=\"属性子面板使用方法\"></a>属性子面板使用方法</h3><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923194836.png\"></p>\n<h4 id=\"Styles\"><a href=\"#Styles\" class=\"headerlink\" title=\"Styles\"></a>Styles</h4><p>当我们选中元素的时候，右侧子面板就会显示当前元素的 Styles 面板。这个面板主要有三个部分<strong>Filter 栏</strong>、<strong>样式操作栏</strong>、<strong>盒模型栏</strong></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923194844.png\"></p>\n<h5 id=\"Filter-栏\"><a href=\"#Filter-栏\" class=\"headerlink\" title=\"Filter 栏\"></a>Filter 栏</h5><p>可以对元素的样式进行筛选，强制状态，切换 class 和增加 class</p>\n<p>过滤操作<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10041.gif\"></p>\n<p>强制状态，和右键菜单的区别就是在这里还可以直接看到作用的样式<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10042.gif\"><br>切换、增加 class<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10043.gif\"></p>\n<p>增加样式（最右侧）</p>\n<p>此处的添加可以下拉添加到已经存在的 class 中，或者仅仅在开发者工具中<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10044.gif\"></p>\n<h5 id=\"样式操作栏\"><a href=\"#样式操作栏\" class=\"headerlink\" title=\"样式操作栏\"></a>样式操作栏</h5><p>选中一个元素可以出现一下的样式操作面板</p>\n<h6 id=\"样式操作栏概览\"><a href=\"#样式操作栏概览\" class=\"headerlink\" title=\"样式操作栏概览\"></a>样式操作栏概览</h6><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195025.png\"></p>\n<ul>\n<li>1：元素行内样式</li>\n<li>2：元素受 class 影响的样式</li>\n<li>3：浏览器默认的样式</li>\n<li>4：继承的样式，并且有标出继承自何处</li>\n</ul>\n<h6 id=\"操作细节\"><a href=\"#操作细节\" class=\"headerlink\" title=\"操作细节\"></a>操作细节</h6><ul>\n<li>右下角可以新增<strong>文本阴影</strong>，<strong>盒子阴影</strong>，<strong>文字淹死</strong>，<strong>背景色</strong>，<strong>权重更高的 class</strong></li>\n<li>右上角有显示具体的文件地址</li>\n<li>单击可以新增 css 的属性，编辑的时候会有提示</li>\n<li>双击可以款速选中</li>\n<li>前面的 checkbox 可以切换此条样式的作用</li>\n</ul>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10046.gif\"></p>\n<p>颜色选择工具<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195153.png\"><br>文本阴影编辑<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195201.png\"><br>box-shadow 工具<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195208.png\"></p>\n<h5 id=\"盒模型栏\"><a href=\"#盒模型栏\" class=\"headerlink\" title=\"盒模型栏\"></a>盒模型栏</h5><p>见 Computed 面板</p>\n<h4 id=\"Computed\"><a href=\"#Computed\" class=\"headerlink\" title=\"Computed\"></a>Computed</h4><p>展示当前实际作用在元素的盒模型</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195221.png\"></p>\n<p>一共有三个部分：盒模型，作用样式列表，字体加载</p>\n<h5 id=\"盒模型\"><a href=\"#盒模型\" class=\"headerlink\" title=\"盒模型\"></a>盒模型</h5><p>展示当前元素的 position，margin，padding，border 值，在不同的边距上面 hover 元素会对应的高亮。</p>\n<p>直接双击值可以直接修改。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10051.gif\"></p>\n<h5 id=\"作用样式列表\"><a href=\"#作用样式列表\" class=\"headerlink\" title=\"作用样式列表\"></a>作用样式列表</h5><p>列出作用在元素的列表，可以切换是否展示默认的样式，可以进行 filter（同 Styles Filter）</p>\n<h5 id=\"字体加载\"><a href=\"#字体加载\" class=\"headerlink\" title=\"字体加载\"></a>字体加载</h5><p>展示字体加载情况</p>\n<h4 id=\"Event-Listeners\"><a href=\"#Event-Listeners\" class=\"headerlink\" title=\"Event Listeners\"></a>Event Listeners</h4><p><a href=\"https://jd4oz.csb.app/\">练习 demo</a><br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195248.png\"><br>从左到右，分别为</p>\n<ul>\n<li>刷新</li>\n<li>是否显示父元素及祖先元素的事件<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10053.gif\"></li>\n<li>事件监听类型选择（被动类型和非阻塞类型）</li>\n</ul>\n<p>Passive event listeners:<a href=\"https://zhuanlan.zhihu.com/p/24555031\"><strong>提升页面滑动的流畅度</strong></a></p>\n<ul>\n<li>框架绑定的事件监听</li>\n</ul>\n<p>resolve event listeners bound with framework 是否看到的是原始的代码<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10054.gif\"></p>\n<p>下面就是绑定元素和具体的代码位置，key 是绑定事件名,点击 remove 可以解绑对应的事件。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195345.png\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10056.gif\"></p>\n<h4 id=\"DOM-Breakpoints\"><a href=\"#DOM-Breakpoints\" class=\"headerlink\" title=\"DOM Breakpoints\"></a>DOM Breakpoints</h4><p>展示出在右键菜单中所打的断点</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_10057.gif\"></p>\n<h4 id=\"Properties\"><a href=\"#Properties\" class=\"headerlink\" title=\"Properties\"></a>Properties</h4><p>展示所选中元素的各种属性<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195449.png\"><br>如图列举出了当前节点的：</p>\n<ul>\n<li>img#hplogo 的属性</li>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLImageElement\">图片元素的属性</a></li>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement\">元素的属性</a></li>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Node\">Node 的属性</a></li>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget\">EventTarget 的属性</a></li>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object\">Object 的属性</a></li>\n</ul>\n<p>如果有需要就可以展开详细查看<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195458.png\"></p>\n<h4 id=\"Accessibility\"><a href=\"#Accessibility\" class=\"headerlink\" title=\"Accessibility\"></a>Accessibility</h4><p>可访问性，<a href=\"https://zh.wikipedia.org/wiki/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%BE%85%E5%8A%A9%E5%8A%9F%E8%83%BD\">计算机辅助功能</a>、<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/Accessibility/ARIA\">无障碍访问</a></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923195505.png\"></p>\n<p>从上往下依次为：</p>\n<ul>\n<li>可访问树</li>\n</ul>\n<p>可访问性树是 DOM 树的子集。它仅包含 DOM 树中与在屏幕阅读器中显示页面内容相关且有用的元素。</p>\n<ul>\n<li>可访问属性</li>\n</ul>\n<p>ARIA 属性可确保屏幕阅读器拥有他们需要的所有信息，以正确表示页面的内容</p>\n<ul>\n<li>最终渲染的属性，计算的可访问性属性</li>\n</ul>\n<h3 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h3><p>以上，就是 Chrome Elements 面板的全部内容，如有错误，还望各位看官斧正。</p>\n<p>预告：Chrome Console 面板进行中</p>"},{"title":"Chrome Network面板解析","abbrlink":"1eb8bb25","translate_title":"chrome-network-panel-analysis","date":"2020-06-14T11:15:20.000Z","_content":"\n## Network 打开方式\n\n- 在控制台打开的情况选择 Network 按钮\n- 输入快捷键`Ctrl+Shift+P`，再输入 `Network`\n\n## 初识面板\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175812.png)\n\n<!-- more -->\n\n## 工具栏\n\n工具栏差不多有十个按钮，每个按钮都有不同的功能。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175847.png)\n\n### 启用网络记录\n\n控制是否开启记录网络请求，高亮时开启。\n\n### 清除请求日志\n\n清除当前的网络请求列表\n\n### 请求过滤\n\n点击此按钮会出现过滤栏，接下来对过滤栏进行分析\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175907.png)\n\n#### 过滤输入框\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201221173352.png)\n\n我们可以利用输入框来进行过滤搜索，允许通过:`key:value`的形式来进行过滤，多个条件之间使用**空格**进行分隔，并且支持正则匹配。\n\n输入框支持一些默认字段来增强功能，比如`mime-type:image/gif larger-than:1K`可以过滤出大于 1KB 的 GIF 图片。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201221173802.png)\n当我们输入对应的键之后，Chrome 会智能将一些可以选择的值作为下拉列表展示出来。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201221174610.png)\n\n具体的字段如下：\n\n- cookie-domain cookie 所在的域\n- cookie-name cookie 的键的名字\n- cookie-path cookie 所在的目录\n- cookie-value cookie 的值\n- domain 只展示具体的域名的资源\n- has-response-header 显示包含指定 HTTP 响应标头的资源\n- is 使用`is:running`匹配`WebSocket`资源\n- larger-than 过滤出资源比指定值大的资源\n- method 请求方法过滤\n- mime-type MIME type 过滤\n- mixed-content HTTP 和 HTTPS 混合页面过滤[相关](https://developer.mozilla.org/zh-TW/docs/Web/Security/Mixed_content#Mixed_active_content)\n- priority 优先级与指定值匹配\n- resource-type 资源类型过滤\n- scheme HTTP/HTTPS 过滤\n- set-cookie-domain 根据 set-Cookie 的 Domain 过滤\n- set-cookie-name 根据 set-Cookie 的 name 过滤\n- set-cookie-value 根据 set-Cookie 的 value 过滤\n- status-code 状态码过滤\n- url 请求 URL 过滤\n\n#### 类型过滤\n\n##### Hide Data URLs\n\n含义：前缀为 data: 协议的 URL，其允许内容创建者向文档中嵌入小文件。简单的例子：用 base64 展示图片\n[demo](https://www.w3docs.com/tools/code-editor/10848)\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_1900000653.gif)\n\n##### 具体类型\n\n后面展示了一些具体的类型 All(全部)、XHR(XMLHttpRequest 和 fetch)、CSS(样式表)、Img(图片资源)、Media(媒体资源)、Font(字体资源)、WS(WebSocket)、MainFest()\n\n### 请求搜索\n\n点击搜索按钮，或者在 Network 面板按快捷键`Ctrl+F`,将会出现搜索侧边栏。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608537844605-image.png)\n侧边栏不仅可以搜索`请求地址`、`请求参数`、`头信息`，还可以搜索`响应数据`，简单说来就是可以搜索**请求的所有信息**，感觉还比讲到的`Filter`还要强大，但是不能够针对响应的文件类型做过滤。\n\n以下举例请求地址、Response 数据和 cookie。\n\n![请求地址](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608537986338-image.png)\n\n![Response响应](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608538087481-image.png)\n\n![cookie](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608538063517-image.png)\n\n### 保留请求日志\n\n`Preserve Log`:是否保留日志，一般的是关闭，代表每次刷新就会清空请求的数据；勾选代表一直保留，可以跨页面保留。\n\n### 禁用缓存\n\n`Disable cache`：是否禁用缓存，发勾选则禁用，否则代表可以使用缓存。\n\n请注意，禁用缓存功能当且仅当开发者工具面板打开的时候有效。\n\n### 网络情况模拟\n\n我们在开发的时候有时候需要用到网速模拟来查看页面的加载情况，Chrome 也很贴心的提供了这个功能。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608538559387-image.png)\n这里有几项预设：\n\n- Online 默认选项，不对网络进行模拟\n- Fast 3G 下载 1.5 Mb/s,延迟 500ms\n- Slow 3G 下载 376 kb/s,延迟 2000ms\n\n你也可以选择`Add`自定义添加\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608538845190-image.png)\n\n### 请求文件的导入导出\n\n将当前开发者工具的 NetWork 记录的请求记录全部导入和导出的功能，导出生成`HAR`文件,后面也可以导入到开发者工具。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608538973115-image.png)\n\n### 设置\n\n点击最右侧的设置按钮将出现设置条目，总共有四个功能：\n\n#### 用更高的行展示请求\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608539961418-image.png)\n\n#### Group by frame 通过请求域名分组\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608540037194-image.png)\n\n#### Show overview 展示请求总览，上面有时间线和请求，可以选择范围\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608539865340-image.png)\n\n#### Capture screenShots 屏幕捕捉\n\n开启之后可以进行屏幕捕捉，双击左键可以放大当前帧的图片，并且底部可以切换\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608540355194-image.png)\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608540251524-image.png)\n\n按住`Ctrl`再点击图片，可以看到当前帧所发出的请求。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608540509955-scr1.gif)\n\n## 信息总览栏\n\n信息总览栏列出了一些页面加载情况的参数和指标，一共有`requests`、`transferred`、`resources`、`Finish`、`DOMContentLoaded`、`Load`等字段。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201221171308.png)\n\n### 含义解析\n\n- requests 记录的是请求的数量\n- transferred 所有资源的压缩大小\n- resources 所有资源未压缩的大小\n- Finish 页面上所有 http 请求发送到响应完成的时间总和\n- DOMContentLoaded DOM 树构建完成。\n- Load 页面加载完毕。\n\n### Filter\n\n当与`Filter`搭配的时候，可以过滤出当前类型的所占全部请求的数据。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201221171911.png)\n\n## 请求区\n\n请求区总体可以看似一个表格，其中表头的列可以进行拖拽直到达到你想展示的效果，表头的项目是可以进行筛选和排序的。\n\n### 表头分析\n\n在表头右键可以展示出表头项目（在请求区域右键也可以调出）,可以通过单击来切换是否展示表头项。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609744994318-image.png)\n\n#### 基本表头\n\n具体含义如下:\n\n| 表头 | 表头 |\n| :----: | :----: |\n| Name | 资源的文件名或者唯一标识符 |\n| Path | 请求路径 |\n| Url | 请求完整地址 |\n| Method | 请求方法 |\n| Status | HTTP 状态码 |\n| Protocol | 请求协议 |\n| Scheme | 请求方法 http/https 等等 |\n| Domain | 域名 |\n| Remote Address | 远程地址 |\n| Type | 请求资源的 MIME type |\n| Initator | 发起请求的对象或者流程（Html Parser、http 重定向、JS 函数、其他-比如新网址输入） |\n| Cookies | 发送 cookie 数量 |\n| Set Cookies | 请求的响应设置 cookie 数量 |\n| Size | 响应头的大小和响应体的大小，若从缓存中获取会显示 disk cache/memory cache 等 |\n| Time | 请求开始到响应中最后一个字节接收的总持续时间 |\n| Priority | 优先级 |\n| Waterfall | 每个请求活动的可视化分解 |\n| Connection ID | 链接 ID |\n\n##### 其他释义\n\n- Sort By 设置排序的依据，可以是表头中的项目，这个和双击表头项目的作用是一样的。\n- Reset Columns 重置表头的宽度\n- Response Headers\n\n  ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609745184616-image.png)\n  可以在表头显示 Cache-Control 等响应头信息，你还可以点击底部的`Manage Header Columns`编辑头信息\n  ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609745286619-image.png)\n\n- Waterfall\n  展示的是请求的时间分布，用柱状的形式展示出来。目前可以展示出以下的时间，具体的释义在后面有详细的阐述。\n\n  - Start Time 开始时间\n  - Response Time 响应时间\n  - End Time 结束时间\n  - Total Duration 总共耗时\n  - Latency 延迟\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609745498940-image.png)\n\n### 请求区分析\n\n#### 请求区概览\n\n下图是访问谷歌官网的实例，其中大多数项目是可以像 Name 一样，hover 就可以看到详情。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609746895024-image.png)\n其中：\n\n- Initator hover 的时候会显示具体的触发调用栈\n  ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609747118058-image.png)\n- Waterfall hover 的时候会显示一些指标\n\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609748268570-image.png)\n\n\n#### Waterfall 指标\n|表头|表头|\n|:----:|:----:|\n|Queuedat|执行到Initator的时间|\n|Startedat|开始请求流程的时间|\n|Queueing|排队：已有高优先级的请求、已经达到了TCP链接数量、浏览器正在磁盘缓存中短暂分配空间|\n|Stalled|由于排队而停下来等待的时间|\n|DNSLookup|DNS查找IP|\n|Initialconnection|初始化链接|\n|Proxynegotiation|代理协商|\n|Requestsent|请求发送|\n|ServiceWorkerPreparation|浏览器准备启动ServiceWorker|\n|RequesttoServiceWorker|向ServiceWorker发送请求|\n|Waiting(TTFB)|第一个字节返回的时间。TTFB代表到第一个字节的时间。此时间包括一次往返延迟和服务器准备响应所花费的时间。|\n|ContentDownload|浏览器正在接收响应|\n|ReceivingPush|浏览器正在通过HTTP/2服务器推送接收数据|\n|ReadingPush|浏览器正在读取先前接收的本地数据|\n#### 单个请求选中分析\n当我们选择一个请求事，右侧面板会展示出这个请求的信息。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609749026512-image.png)\n一共有以下几项：\n- Headers 请求的头信息，包含Query参数和Post数据，请求头响应头等详见[HTTP Header](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers)\n- Preview 对返回的数据格式化预览\n- Response 展示返回的原始数据\n- Initator 同表头Initator\n- Cookies 同表头Cookies\n- Timing 同Waterfall\n#### 单个请求右键分析\n当我们选择一个请求右键的时候会弹出菜单\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609750559655-image.png)\n我们来具体分析：\n- Open in new tab 在新窗口打开，这个和双击某个请求的行为是一样的，都是打开新窗口GET请求\n- Clear browser cache 清楚浏览器缓存\n- Clear browser cookies 清楚浏览器cookies\n- Copy 复制此请求，会展开二级菜单\n  ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609751200913-image.png)\n  - Copy link address 复制链接地址\n  - Copy as Powershell 复制为Powershell 命令\n  - Copy as fetch 复制为fetch函数\n  - Copy as Nodejs fetch 复制为Nodejs fetch函数\n  - Copy as cURl(cmd) 复制cmd执行的命令\n  - Copy as cURl(bash) 复制bash执行的命令\n  - ... 后面五个为将全部的请求复制为对应的模式\n  - Copy all as HAR 将所有请求复制为HAR内容格式（还是文本）\n- Block request URL 禁止请求此地址，禁止之后在相同位置可以启用，禁止之后无法访问该请求。\n  \n  可以进入`network request blocking`面板查看已经禁止的请求\n  ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609752010644-image.png)\n- Block request Domain 禁止请求此域名\n  可以进入`network request blocking`面板查看已经禁止的域名\n- Replay XHR 重发此请求\n- Sort By 设置排序依据\n- Header Options 设置表头项目\n- Save all as HAR with content 同“导出”功能，将请求导出为HAR文件\n\n\n\n\n\n\n\n## 引用地址\n\n> [https://developers.google.com/web/tools/chrome-devtools/network/reference](https://developers.google.com/web/tools/chrome-devtools/network/reference)\n","source":"_posts/Chrome-network.md","raw":"---\ntitle: Chrome Network面板解析\nabbrlink: 1eb8bb25\ntags:\n  - Chrome\ntranslate_title: chrome-network-panel-analysis\ndate: 2020-06-14 19:15:20\n---\n\n## Network 打开方式\n\n- 在控制台打开的情况选择 Network 按钮\n- 输入快捷键`Ctrl+Shift+P`，再输入 `Network`\n\n## 初识面板\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175812.png)\n\n<!-- more -->\n\n## 工具栏\n\n工具栏差不多有十个按钮，每个按钮都有不同的功能。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175847.png)\n\n### 启用网络记录\n\n控制是否开启记录网络请求，高亮时开启。\n\n### 清除请求日志\n\n清除当前的网络请求列表\n\n### 请求过滤\n\n点击此按钮会出现过滤栏，接下来对过滤栏进行分析\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175907.png)\n\n#### 过滤输入框\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201221173352.png)\n\n我们可以利用输入框来进行过滤搜索，允许通过:`key:value`的形式来进行过滤，多个条件之间使用**空格**进行分隔，并且支持正则匹配。\n\n输入框支持一些默认字段来增强功能，比如`mime-type:image/gif larger-than:1K`可以过滤出大于 1KB 的 GIF 图片。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201221173802.png)\n当我们输入对应的键之后，Chrome 会智能将一些可以选择的值作为下拉列表展示出来。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201221174610.png)\n\n具体的字段如下：\n\n- cookie-domain cookie 所在的域\n- cookie-name cookie 的键的名字\n- cookie-path cookie 所在的目录\n- cookie-value cookie 的值\n- domain 只展示具体的域名的资源\n- has-response-header 显示包含指定 HTTP 响应标头的资源\n- is 使用`is:running`匹配`WebSocket`资源\n- larger-than 过滤出资源比指定值大的资源\n- method 请求方法过滤\n- mime-type MIME type 过滤\n- mixed-content HTTP 和 HTTPS 混合页面过滤[相关](https://developer.mozilla.org/zh-TW/docs/Web/Security/Mixed_content#Mixed_active_content)\n- priority 优先级与指定值匹配\n- resource-type 资源类型过滤\n- scheme HTTP/HTTPS 过滤\n- set-cookie-domain 根据 set-Cookie 的 Domain 过滤\n- set-cookie-name 根据 set-Cookie 的 name 过滤\n- set-cookie-value 根据 set-Cookie 的 value 过滤\n- status-code 状态码过滤\n- url 请求 URL 过滤\n\n#### 类型过滤\n\n##### Hide Data URLs\n\n含义：前缀为 data: 协议的 URL，其允许内容创建者向文档中嵌入小文件。简单的例子：用 base64 展示图片\n[demo](https://www.w3docs.com/tools/code-editor/10848)\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_1900000653.gif)\n\n##### 具体类型\n\n后面展示了一些具体的类型 All(全部)、XHR(XMLHttpRequest 和 fetch)、CSS(样式表)、Img(图片资源)、Media(媒体资源)、Font(字体资源)、WS(WebSocket)、MainFest()\n\n### 请求搜索\n\n点击搜索按钮，或者在 Network 面板按快捷键`Ctrl+F`,将会出现搜索侧边栏。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608537844605-image.png)\n侧边栏不仅可以搜索`请求地址`、`请求参数`、`头信息`，还可以搜索`响应数据`，简单说来就是可以搜索**请求的所有信息**，感觉还比讲到的`Filter`还要强大，但是不能够针对响应的文件类型做过滤。\n\n以下举例请求地址、Response 数据和 cookie。\n\n![请求地址](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608537986338-image.png)\n\n![Response响应](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608538087481-image.png)\n\n![cookie](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608538063517-image.png)\n\n### 保留请求日志\n\n`Preserve Log`:是否保留日志，一般的是关闭，代表每次刷新就会清空请求的数据；勾选代表一直保留，可以跨页面保留。\n\n### 禁用缓存\n\n`Disable cache`：是否禁用缓存，发勾选则禁用，否则代表可以使用缓存。\n\n请注意，禁用缓存功能当且仅当开发者工具面板打开的时候有效。\n\n### 网络情况模拟\n\n我们在开发的时候有时候需要用到网速模拟来查看页面的加载情况，Chrome 也很贴心的提供了这个功能。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608538559387-image.png)\n这里有几项预设：\n\n- Online 默认选项，不对网络进行模拟\n- Fast 3G 下载 1.5 Mb/s,延迟 500ms\n- Slow 3G 下载 376 kb/s,延迟 2000ms\n\n你也可以选择`Add`自定义添加\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608538845190-image.png)\n\n### 请求文件的导入导出\n\n将当前开发者工具的 NetWork 记录的请求记录全部导入和导出的功能，导出生成`HAR`文件,后面也可以导入到开发者工具。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608538973115-image.png)\n\n### 设置\n\n点击最右侧的设置按钮将出现设置条目，总共有四个功能：\n\n#### 用更高的行展示请求\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608539961418-image.png)\n\n#### Group by frame 通过请求域名分组\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608540037194-image.png)\n\n#### Show overview 展示请求总览，上面有时间线和请求，可以选择范围\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608539865340-image.png)\n\n#### Capture screenShots 屏幕捕捉\n\n开启之后可以进行屏幕捕捉，双击左键可以放大当前帧的图片，并且底部可以切换\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608540355194-image.png)\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608540251524-image.png)\n\n按住`Ctrl`再点击图片，可以看到当前帧所发出的请求。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608540509955-scr1.gif)\n\n## 信息总览栏\n\n信息总览栏列出了一些页面加载情况的参数和指标，一共有`requests`、`transferred`、`resources`、`Finish`、`DOMContentLoaded`、`Load`等字段。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201221171308.png)\n\n### 含义解析\n\n- requests 记录的是请求的数量\n- transferred 所有资源的压缩大小\n- resources 所有资源未压缩的大小\n- Finish 页面上所有 http 请求发送到响应完成的时间总和\n- DOMContentLoaded DOM 树构建完成。\n- Load 页面加载完毕。\n\n### Filter\n\n当与`Filter`搭配的时候，可以过滤出当前类型的所占全部请求的数据。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201221171911.png)\n\n## 请求区\n\n请求区总体可以看似一个表格，其中表头的列可以进行拖拽直到达到你想展示的效果，表头的项目是可以进行筛选和排序的。\n\n### 表头分析\n\n在表头右键可以展示出表头项目（在请求区域右键也可以调出）,可以通过单击来切换是否展示表头项。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609744994318-image.png)\n\n#### 基本表头\n\n具体含义如下:\n\n| 表头 | 表头 |\n| :----: | :----: |\n| Name | 资源的文件名或者唯一标识符 |\n| Path | 请求路径 |\n| Url | 请求完整地址 |\n| Method | 请求方法 |\n| Status | HTTP 状态码 |\n| Protocol | 请求协议 |\n| Scheme | 请求方法 http/https 等等 |\n| Domain | 域名 |\n| Remote Address | 远程地址 |\n| Type | 请求资源的 MIME type |\n| Initator | 发起请求的对象或者流程（Html Parser、http 重定向、JS 函数、其他-比如新网址输入） |\n| Cookies | 发送 cookie 数量 |\n| Set Cookies | 请求的响应设置 cookie 数量 |\n| Size | 响应头的大小和响应体的大小，若从缓存中获取会显示 disk cache/memory cache 等 |\n| Time | 请求开始到响应中最后一个字节接收的总持续时间 |\n| Priority | 优先级 |\n| Waterfall | 每个请求活动的可视化分解 |\n| Connection ID | 链接 ID |\n\n##### 其他释义\n\n- Sort By 设置排序的依据，可以是表头中的项目，这个和双击表头项目的作用是一样的。\n- Reset Columns 重置表头的宽度\n- Response Headers\n\n  ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609745184616-image.png)\n  可以在表头显示 Cache-Control 等响应头信息，你还可以点击底部的`Manage Header Columns`编辑头信息\n  ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609745286619-image.png)\n\n- Waterfall\n  展示的是请求的时间分布，用柱状的形式展示出来。目前可以展示出以下的时间，具体的释义在后面有详细的阐述。\n\n  - Start Time 开始时间\n  - Response Time 响应时间\n  - End Time 结束时间\n  - Total Duration 总共耗时\n  - Latency 延迟\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609745498940-image.png)\n\n### 请求区分析\n\n#### 请求区概览\n\n下图是访问谷歌官网的实例，其中大多数项目是可以像 Name 一样，hover 就可以看到详情。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609746895024-image.png)\n其中：\n\n- Initator hover 的时候会显示具体的触发调用栈\n  ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609747118058-image.png)\n- Waterfall hover 的时候会显示一些指标\n\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609748268570-image.png)\n\n\n#### Waterfall 指标\n|表头|表头|\n|:----:|:----:|\n|Queuedat|执行到Initator的时间|\n|Startedat|开始请求流程的时间|\n|Queueing|排队：已有高优先级的请求、已经达到了TCP链接数量、浏览器正在磁盘缓存中短暂分配空间|\n|Stalled|由于排队而停下来等待的时间|\n|DNSLookup|DNS查找IP|\n|Initialconnection|初始化链接|\n|Proxynegotiation|代理协商|\n|Requestsent|请求发送|\n|ServiceWorkerPreparation|浏览器准备启动ServiceWorker|\n|RequesttoServiceWorker|向ServiceWorker发送请求|\n|Waiting(TTFB)|第一个字节返回的时间。TTFB代表到第一个字节的时间。此时间包括一次往返延迟和服务器准备响应所花费的时间。|\n|ContentDownload|浏览器正在接收响应|\n|ReceivingPush|浏览器正在通过HTTP/2服务器推送接收数据|\n|ReadingPush|浏览器正在读取先前接收的本地数据|\n#### 单个请求选中分析\n当我们选择一个请求事，右侧面板会展示出这个请求的信息。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609749026512-image.png)\n一共有以下几项：\n- Headers 请求的头信息，包含Query参数和Post数据，请求头响应头等详见[HTTP Header](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers)\n- Preview 对返回的数据格式化预览\n- Response 展示返回的原始数据\n- Initator 同表头Initator\n- Cookies 同表头Cookies\n- Timing 同Waterfall\n#### 单个请求右键分析\n当我们选择一个请求右键的时候会弹出菜单\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609750559655-image.png)\n我们来具体分析：\n- Open in new tab 在新窗口打开，这个和双击某个请求的行为是一样的，都是打开新窗口GET请求\n- Clear browser cache 清楚浏览器缓存\n- Clear browser cookies 清楚浏览器cookies\n- Copy 复制此请求，会展开二级菜单\n  ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609751200913-image.png)\n  - Copy link address 复制链接地址\n  - Copy as Powershell 复制为Powershell 命令\n  - Copy as fetch 复制为fetch函数\n  - Copy as Nodejs fetch 复制为Nodejs fetch函数\n  - Copy as cURl(cmd) 复制cmd执行的命令\n  - Copy as cURl(bash) 复制bash执行的命令\n  - ... 后面五个为将全部的请求复制为对应的模式\n  - Copy all as HAR 将所有请求复制为HAR内容格式（还是文本）\n- Block request URL 禁止请求此地址，禁止之后在相同位置可以启用，禁止之后无法访问该请求。\n  \n  可以进入`network request blocking`面板查看已经禁止的请求\n  ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609752010644-image.png)\n- Block request Domain 禁止请求此域名\n  可以进入`network request blocking`面板查看已经禁止的域名\n- Replay XHR 重发此请求\n- Sort By 设置排序依据\n- Header Options 设置表头项目\n- Save all as HAR with content 同“导出”功能，将请求导出为HAR文件\n\n\n\n\n\n\n\n## 引用地址\n\n> [https://developers.google.com/web/tools/chrome-devtools/network/reference](https://developers.google.com/web/tools/chrome-devtools/network/reference)\n","slug":"Chrome-network","published":1,"updated":"2021-09-29T07:53:51.813Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy6ae000cp4vlfb1f3pyj","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"Network-打开方式\"><a href=\"#Network-打开方式\" class=\"headerlink\" title=\"Network 打开方式\"></a>Network 打开方式</h2><ul>\n<li>在控制台打开的情况选择 Network 按钮</li>\n<li>输入快捷键<code>Ctrl+Shift+P</code>，再输入 <code>Network</code></li>\n</ul>\n<h2 id=\"初识面板\"><a href=\"#初识面板\" class=\"headerlink\" title=\"初识面板\"></a>初识面板</h2><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175812.png\"></p>\n<span id=\"more\"></span>\n\n<h2 id=\"工具栏\"><a href=\"#工具栏\" class=\"headerlink\" title=\"工具栏\"></a>工具栏</h2><p>工具栏差不多有十个按钮，每个按钮都有不同的功能。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175847.png\"></p>\n<h3 id=\"启用网络记录\"><a href=\"#启用网络记录\" class=\"headerlink\" title=\"启用网络记录\"></a>启用网络记录</h3><p>控制是否开启记录网络请求，高亮时开启。</p>\n<h3 id=\"清除请求日志\"><a href=\"#清除请求日志\" class=\"headerlink\" title=\"清除请求日志\"></a>清除请求日志</h3><p>清除当前的网络请求列表</p>\n<h3 id=\"请求过滤\"><a href=\"#请求过滤\" class=\"headerlink\" title=\"请求过滤\"></a>请求过滤</h3><p>点击此按钮会出现过滤栏，接下来对过滤栏进行分析</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175907.png\"></p>\n<h4 id=\"过滤输入框\"><a href=\"#过滤输入框\" class=\"headerlink\" title=\"过滤输入框\"></a>过滤输入框</h4><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201221173352.png\"></p>\n<p>我们可以利用输入框来进行过滤搜索，允许通过:<code>key:value</code>的形式来进行过滤，多个条件之间使用<strong>空格</strong>进行分隔，并且支持正则匹配。</p>\n<p>输入框支持一些默认字段来增强功能，比如<code>mime-type:image/gif larger-than:1K</code>可以过滤出大于 1KB 的 GIF 图片。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201221173802.png\"><br>当我们输入对应的键之后，Chrome 会智能将一些可以选择的值作为下拉列表展示出来。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201221174610.png\"></p>\n<p>具体的字段如下：</p>\n<ul>\n<li>cookie-domain cookie 所在的域</li>\n<li>cookie-name cookie 的键的名字</li>\n<li>cookie-path cookie 所在的目录</li>\n<li>cookie-value cookie 的值</li>\n<li>domain 只展示具体的域名的资源</li>\n<li>has-response-header 显示包含指定 HTTP 响应标头的资源</li>\n<li>is 使用<code>is:running</code>匹配<code>WebSocket</code>资源</li>\n<li>larger-than 过滤出资源比指定值大的资源</li>\n<li>method 请求方法过滤</li>\n<li>mime-type MIME type 过滤</li>\n<li>mixed-content HTTP 和 HTTPS 混合页面过滤<a href=\"https://developer.mozilla.org/zh-TW/docs/Web/Security/Mixed_content#Mixed_active_content\">相关</a></li>\n<li>priority 优先级与指定值匹配</li>\n<li>resource-type 资源类型过滤</li>\n<li>scheme HTTP/HTTPS 过滤</li>\n<li>set-cookie-domain 根据 set-Cookie 的 Domain 过滤</li>\n<li>set-cookie-name 根据 set-Cookie 的 name 过滤</li>\n<li>set-cookie-value 根据 set-Cookie 的 value 过滤</li>\n<li>status-code 状态码过滤</li>\n<li>url 请求 URL 过滤</li>\n</ul>\n<h4 id=\"类型过滤\"><a href=\"#类型过滤\" class=\"headerlink\" title=\"类型过滤\"></a>类型过滤</h4><h5 id=\"Hide-Data-URLs\"><a href=\"#Hide-Data-URLs\" class=\"headerlink\" title=\"Hide Data URLs\"></a>Hide Data URLs</h5><p>含义：前缀为 data: 协议的 URL，其允许内容创建者向文档中嵌入小文件。简单的例子：用 base64 展示图片<br><a href=\"https://www.w3docs.com/tools/code-editor/10848\">demo</a><br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_1900000653.gif\"></p>\n<h5 id=\"具体类型\"><a href=\"#具体类型\" class=\"headerlink\" title=\"具体类型\"></a>具体类型</h5><p>后面展示了一些具体的类型 All(全部)、XHR(XMLHttpRequest 和 fetch)、CSS(样式表)、Img(图片资源)、Media(媒体资源)、Font(字体资源)、WS(WebSocket)、MainFest()</p>\n<h3 id=\"请求搜索\"><a href=\"#请求搜索\" class=\"headerlink\" title=\"请求搜索\"></a>请求搜索</h3><p>点击搜索按钮，或者在 Network 面板按快捷键<code>Ctrl+F</code>,将会出现搜索侧边栏。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608537844605-image.png\"><br>侧边栏不仅可以搜索<code>请求地址</code>、<code>请求参数</code>、<code>头信息</code>，还可以搜索<code>响应数据</code>，简单说来就是可以搜索<strong>请求的所有信息</strong>，感觉还比讲到的<code>Filter</code>还要强大，但是不能够针对响应的文件类型做过滤。</p>\n<p>以下举例请求地址、Response 数据和 cookie。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608537986338-image.png\" alt=\"请求地址\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608538087481-image.png\" alt=\"Response响应\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608538063517-image.png\" alt=\"cookie\"></p>\n<h3 id=\"保留请求日志\"><a href=\"#保留请求日志\" class=\"headerlink\" title=\"保留请求日志\"></a>保留请求日志</h3><p><code>Preserve Log</code>:是否保留日志，一般的是关闭，代表每次刷新就会清空请求的数据；勾选代表一直保留，可以跨页面保留。</p>\n<h3 id=\"禁用缓存\"><a href=\"#禁用缓存\" class=\"headerlink\" title=\"禁用缓存\"></a>禁用缓存</h3><p><code>Disable cache</code>：是否禁用缓存，发勾选则禁用，否则代表可以使用缓存。</p>\n<p>请注意，禁用缓存功能当且仅当开发者工具面板打开的时候有效。</p>\n<h3 id=\"网络情况模拟\"><a href=\"#网络情况模拟\" class=\"headerlink\" title=\"网络情况模拟\"></a>网络情况模拟</h3><p>我们在开发的时候有时候需要用到网速模拟来查看页面的加载情况，Chrome 也很贴心的提供了这个功能。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608538559387-image.png\"><br>这里有几项预设：</p>\n<ul>\n<li>Online 默认选项，不对网络进行模拟</li>\n<li>Fast 3G 下载 1.5 Mb/s,延迟 500ms</li>\n<li>Slow 3G 下载 376 kb/s,延迟 2000ms</li>\n</ul>\n<p>你也可以选择<code>Add</code>自定义添加</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608538845190-image.png\"></p>\n<h3 id=\"请求文件的导入导出\"><a href=\"#请求文件的导入导出\" class=\"headerlink\" title=\"请求文件的导入导出\"></a>请求文件的导入导出</h3><p>将当前开发者工具的 NetWork 记录的请求记录全部导入和导出的功能，导出生成<code>HAR</code>文件,后面也可以导入到开发者工具。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608538973115-image.png\"></p>\n<h3 id=\"设置\"><a href=\"#设置\" class=\"headerlink\" title=\"设置\"></a>设置</h3><p>点击最右侧的设置按钮将出现设置条目，总共有四个功能：</p>\n<h4 id=\"用更高的行展示请求\"><a href=\"#用更高的行展示请求\" class=\"headerlink\" title=\"用更高的行展示请求\"></a>用更高的行展示请求</h4><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608539961418-image.png\"></p>\n<h4 id=\"Group-by-frame-通过请求域名分组\"><a href=\"#Group-by-frame-通过请求域名分组\" class=\"headerlink\" title=\"Group by frame 通过请求域名分组\"></a>Group by frame 通过请求域名分组</h4><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608540037194-image.png\"></p>\n<h4 id=\"Show-overview-展示请求总览，上面有时间线和请求，可以选择范围\"><a href=\"#Show-overview-展示请求总览，上面有时间线和请求，可以选择范围\" class=\"headerlink\" title=\"Show overview 展示请求总览，上面有时间线和请求，可以选择范围\"></a>Show overview 展示请求总览，上面有时间线和请求，可以选择范围</h4><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608539865340-image.png\"></p>\n<h4 id=\"Capture-screenShots-屏幕捕捉\"><a href=\"#Capture-screenShots-屏幕捕捉\" class=\"headerlink\" title=\"Capture screenShots 屏幕捕捉\"></a>Capture screenShots 屏幕捕捉</h4><p>开启之后可以进行屏幕捕捉，双击左键可以放大当前帧的图片，并且底部可以切换</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608540355194-image.png\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608540251524-image.png\"></p>\n<p>按住<code>Ctrl</code>再点击图片，可以看到当前帧所发出的请求。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608540509955-scr1.gif\"></p>\n<h2 id=\"信息总览栏\"><a href=\"#信息总览栏\" class=\"headerlink\" title=\"信息总览栏\"></a>信息总览栏</h2><p>信息总览栏列出了一些页面加载情况的参数和指标，一共有<code>requests</code>、<code>transferred</code>、<code>resources</code>、<code>Finish</code>、<code>DOMContentLoaded</code>、<code>Load</code>等字段。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201221171308.png\"></p>\n<h3 id=\"含义解析\"><a href=\"#含义解析\" class=\"headerlink\" title=\"含义解析\"></a>含义解析</h3><ul>\n<li>requests 记录的是请求的数量</li>\n<li>transferred 所有资源的压缩大小</li>\n<li>resources 所有资源未压缩的大小</li>\n<li>Finish 页面上所有 http 请求发送到响应完成的时间总和</li>\n<li>DOMContentLoaded DOM 树构建完成。</li>\n<li>Load 页面加载完毕。</li>\n</ul>\n<h3 id=\"Filter\"><a href=\"#Filter\" class=\"headerlink\" title=\"Filter\"></a>Filter</h3><p>当与<code>Filter</code>搭配的时候，可以过滤出当前类型的所占全部请求的数据。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201221171911.png\"></p>\n<h2 id=\"请求区\"><a href=\"#请求区\" class=\"headerlink\" title=\"请求区\"></a>请求区</h2><p>请求区总体可以看似一个表格，其中表头的列可以进行拖拽直到达到你想展示的效果，表头的项目是可以进行筛选和排序的。</p>\n<h3 id=\"表头分析\"><a href=\"#表头分析\" class=\"headerlink\" title=\"表头分析\"></a>表头分析</h3><p>在表头右键可以展示出表头项目（在请求区域右键也可以调出）,可以通过单击来切换是否展示表头项。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609744994318-image.png\"></p>\n<h4 id=\"基本表头\"><a href=\"#基本表头\" class=\"headerlink\" title=\"基本表头\"></a>基本表头</h4><p>具体含义如下:</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">表头</th>\n<th align=\"center\">表头</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">Name</td>\n<td align=\"center\">资源的文件名或者唯一标识符</td>\n</tr>\n<tr>\n<td align=\"center\">Path</td>\n<td align=\"center\">请求路径</td>\n</tr>\n<tr>\n<td align=\"center\">Url</td>\n<td align=\"center\">请求完整地址</td>\n</tr>\n<tr>\n<td align=\"center\">Method</td>\n<td align=\"center\">请求方法</td>\n</tr>\n<tr>\n<td align=\"center\">Status</td>\n<td align=\"center\">HTTP 状态码</td>\n</tr>\n<tr>\n<td align=\"center\">Protocol</td>\n<td align=\"center\">请求协议</td>\n</tr>\n<tr>\n<td align=\"center\">Scheme</td>\n<td align=\"center\">请求方法 http/https 等等</td>\n</tr>\n<tr>\n<td align=\"center\">Domain</td>\n<td align=\"center\">域名</td>\n</tr>\n<tr>\n<td align=\"center\">Remote Address</td>\n<td align=\"center\">远程地址</td>\n</tr>\n<tr>\n<td align=\"center\">Type</td>\n<td align=\"center\">请求资源的 MIME type</td>\n</tr>\n<tr>\n<td align=\"center\">Initator</td>\n<td align=\"center\">发起请求的对象或者流程（Html Parser、http 重定向、JS 函数、其他-比如新网址输入）</td>\n</tr>\n<tr>\n<td align=\"center\">Cookies</td>\n<td align=\"center\">发送 cookie 数量</td>\n</tr>\n<tr>\n<td align=\"center\">Set Cookies</td>\n<td align=\"center\">请求的响应设置 cookie 数量</td>\n</tr>\n<tr>\n<td align=\"center\">Size</td>\n<td align=\"center\">响应头的大小和响应体的大小，若从缓存中获取会显示 disk cache/memory cache 等</td>\n</tr>\n<tr>\n<td align=\"center\">Time</td>\n<td align=\"center\">请求开始到响应中最后一个字节接收的总持续时间</td>\n</tr>\n<tr>\n<td align=\"center\">Priority</td>\n<td align=\"center\">优先级</td>\n</tr>\n<tr>\n<td align=\"center\">Waterfall</td>\n<td align=\"center\">每个请求活动的可视化分解</td>\n</tr>\n<tr>\n<td align=\"center\">Connection ID</td>\n<td align=\"center\">链接 ID</td>\n</tr>\n</tbody></table>\n<h5 id=\"其他释义\"><a href=\"#其他释义\" class=\"headerlink\" title=\"其他释义\"></a>其他释义</h5><ul>\n<li><p>Sort By 设置排序的依据，可以是表头中的项目，这个和双击表头项目的作用是一样的。</p>\n</li>\n<li><p>Reset Columns 重置表头的宽度</p>\n</li>\n<li><p>Response Headers</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609745184616-image.png\"><br>可以在表头显示 Cache-Control 等响应头信息，你还可以点击底部的<code>Manage Header Columns</code>编辑头信息<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609745286619-image.png\"></p>\n</li>\n<li><p>Waterfall<br>展示的是请求的时间分布，用柱状的形式展示出来。目前可以展示出以下的时间，具体的释义在后面有详细的阐述。</p>\n<ul>\n<li>Start Time 开始时间</li>\n<li>Response Time 响应时间</li>\n<li>End Time 结束时间</li>\n<li>Total Duration 总共耗时</li>\n<li>Latency 延迟</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609745498940-image.png\"></p>\n<h3 id=\"请求区分析\"><a href=\"#请求区分析\" class=\"headerlink\" title=\"请求区分析\"></a>请求区分析</h3><h4 id=\"请求区概览\"><a href=\"#请求区概览\" class=\"headerlink\" title=\"请求区概览\"></a>请求区概览</h4><p>下图是访问谷歌官网的实例，其中大多数项目是可以像 Name 一样，hover 就可以看到详情。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609746895024-image.png\"><br>其中：</p>\n<ul>\n<li>Initator hover 的时候会显示具体的触发调用栈<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609747118058-image.png\"></li>\n<li>Waterfall hover 的时候会显示一些指标</li>\n</ul>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609748268570-image.png\"></p>\n<h4 id=\"Waterfall-指标\"><a href=\"#Waterfall-指标\" class=\"headerlink\" title=\"Waterfall 指标\"></a>Waterfall 指标</h4><table>\n<thead>\n<tr>\n<th align=\"center\">表头</th>\n<th align=\"center\">表头</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">Queuedat</td>\n<td align=\"center\">执行到Initator的时间</td>\n</tr>\n<tr>\n<td align=\"center\">Startedat</td>\n<td align=\"center\">开始请求流程的时间</td>\n</tr>\n<tr>\n<td align=\"center\">Queueing</td>\n<td align=\"center\">排队：已有高优先级的请求、已经达到了TCP链接数量、浏览器正在磁盘缓存中短暂分配空间</td>\n</tr>\n<tr>\n<td align=\"center\">Stalled</td>\n<td align=\"center\">由于排队而停下来等待的时间</td>\n</tr>\n<tr>\n<td align=\"center\">DNSLookup</td>\n<td align=\"center\">DNS查找IP</td>\n</tr>\n<tr>\n<td align=\"center\">Initialconnection</td>\n<td align=\"center\">初始化链接</td>\n</tr>\n<tr>\n<td align=\"center\">Proxynegotiation</td>\n<td align=\"center\">代理协商</td>\n</tr>\n<tr>\n<td align=\"center\">Requestsent</td>\n<td align=\"center\">请求发送</td>\n</tr>\n<tr>\n<td align=\"center\">ServiceWorkerPreparation</td>\n<td align=\"center\">浏览器准备启动ServiceWorker</td>\n</tr>\n<tr>\n<td align=\"center\">RequesttoServiceWorker</td>\n<td align=\"center\">向ServiceWorker发送请求</td>\n</tr>\n<tr>\n<td align=\"center\">Waiting(TTFB)</td>\n<td align=\"center\">第一个字节返回的时间。TTFB代表到第一个字节的时间。此时间包括一次往返延迟和服务器准备响应所花费的时间。</td>\n</tr>\n<tr>\n<td align=\"center\">ContentDownload</td>\n<td align=\"center\">浏览器正在接收响应</td>\n</tr>\n<tr>\n<td align=\"center\">ReceivingPush</td>\n<td align=\"center\">浏览器正在通过HTTP/2服务器推送接收数据</td>\n</tr>\n<tr>\n<td align=\"center\">ReadingPush</td>\n<td align=\"center\">浏览器正在读取先前接收的本地数据</td>\n</tr>\n</tbody></table>\n<h4 id=\"单个请求选中分析\"><a href=\"#单个请求选中分析\" class=\"headerlink\" title=\"单个请求选中分析\"></a>单个请求选中分析</h4><p>当我们选择一个请求事，右侧面板会展示出这个请求的信息。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609749026512-image.png\"><br>一共有以下几项：</p>\n<ul>\n<li>Headers 请求的头信息，包含Query参数和Post数据，请求头响应头等详见<a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers\">HTTP Header</a></li>\n<li>Preview 对返回的数据格式化预览</li>\n<li>Response 展示返回的原始数据</li>\n<li>Initator 同表头Initator</li>\n<li>Cookies 同表头Cookies</li>\n<li>Timing 同Waterfall<h4 id=\"单个请求右键分析\"><a href=\"#单个请求右键分析\" class=\"headerlink\" title=\"单个请求右键分析\"></a>单个请求右键分析</h4>当我们选择一个请求右键的时候会弹出菜单</li>\n</ul>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609750559655-image.png\"><br>我们来具体分析：</p>\n<ul>\n<li><p>Open in new tab 在新窗口打开，这个和双击某个请求的行为是一样的，都是打开新窗口GET请求</p>\n</li>\n<li><p>Clear browser cache 清楚浏览器缓存</p>\n</li>\n<li><p>Clear browser cookies 清楚浏览器cookies</p>\n</li>\n<li><p>Copy 复制此请求，会展开二级菜单<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609751200913-image.png\"></p>\n<ul>\n<li>Copy link address 复制链接地址</li>\n<li>Copy as Powershell 复制为Powershell 命令</li>\n<li>Copy as fetch 复制为fetch函数</li>\n<li>Copy as Nodejs fetch 复制为Nodejs fetch函数</li>\n<li>Copy as cURl(cmd) 复制cmd执行的命令</li>\n<li>Copy as cURl(bash) 复制bash执行的命令</li>\n<li>… 后面五个为将全部的请求复制为对应的模式</li>\n<li>Copy all as HAR 将所有请求复制为HAR内容格式（还是文本）</li>\n</ul>\n</li>\n<li><p>Block request URL 禁止请求此地址，禁止之后在相同位置可以启用，禁止之后无法访问该请求。</p>\n<p>可以进入<code>network request blocking</code>面板查看已经禁止的请求<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609752010644-image.png\"></p>\n</li>\n<li><p>Block request Domain 禁止请求此域名<br>可以进入<code>network request blocking</code>面板查看已经禁止的域名</p>\n</li>\n<li><p>Replay XHR 重发此请求</p>\n</li>\n<li><p>Sort By 设置排序依据</p>\n</li>\n<li><p>Header Options 设置表头项目</p>\n</li>\n<li><p>Save all as HAR with content 同“导出”功能，将请求导出为HAR文件</p>\n</li>\n</ul>\n<h2 id=\"引用地址\"><a href=\"#引用地址\" class=\"headerlink\" title=\"引用地址\"></a>引用地址</h2><blockquote>\n<p><a href=\"https://developers.google.com/web/tools/chrome-devtools/network/reference\">https://developers.google.com/web/tools/chrome-devtools/network/reference</a></p>\n</blockquote>\n","site":{"data":{}},"length":4057,"excerpt":"<h2 id=\"Network-打开方式\"><a href=\"#Network-打开方式\" class=\"headerlink\" title=\"Network 打开方式\"></a>Network 打开方式</h2><ul>\n<li>在控制台打开的情况选择 Network 按钮</li>\n<li>输入快捷键<code>Ctrl+Shift+P</code>，再输入 <code>Network</code></li>\n</ul>\n<h2 id=\"初识面板\"><a href=\"#初识面板\" class=\"headerlink\" title=\"初识面板\"></a>初识面板</h2><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175812.png\"></p>","more":"<h2 id=\"工具栏\"><a href=\"#工具栏\" class=\"headerlink\" title=\"工具栏\"></a>工具栏</h2><p>工具栏差不多有十个按钮，每个按钮都有不同的功能。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175847.png\"></p>\n<h3 id=\"启用网络记录\"><a href=\"#启用网络记录\" class=\"headerlink\" title=\"启用网络记录\"></a>启用网络记录</h3><p>控制是否开启记录网络请求，高亮时开启。</p>\n<h3 id=\"清除请求日志\"><a href=\"#清除请求日志\" class=\"headerlink\" title=\"清除请求日志\"></a>清除请求日志</h3><p>清除当前的网络请求列表</p>\n<h3 id=\"请求过滤\"><a href=\"#请求过滤\" class=\"headerlink\" title=\"请求过滤\"></a>请求过滤</h3><p>点击此按钮会出现过滤栏，接下来对过滤栏进行分析</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175907.png\"></p>\n<h4 id=\"过滤输入框\"><a href=\"#过滤输入框\" class=\"headerlink\" title=\"过滤输入框\"></a>过滤输入框</h4><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201221173352.png\"></p>\n<p>我们可以利用输入框来进行过滤搜索，允许通过:<code>key:value</code>的形式来进行过滤，多个条件之间使用<strong>空格</strong>进行分隔，并且支持正则匹配。</p>\n<p>输入框支持一些默认字段来增强功能，比如<code>mime-type:image/gif larger-than:1K</code>可以过滤出大于 1KB 的 GIF 图片。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201221173802.png\"><br>当我们输入对应的键之后，Chrome 会智能将一些可以选择的值作为下拉列表展示出来。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201221174610.png\"></p>\n<p>具体的字段如下：</p>\n<ul>\n<li>cookie-domain cookie 所在的域</li>\n<li>cookie-name cookie 的键的名字</li>\n<li>cookie-path cookie 所在的目录</li>\n<li>cookie-value cookie 的值</li>\n<li>domain 只展示具体的域名的资源</li>\n<li>has-response-header 显示包含指定 HTTP 响应标头的资源</li>\n<li>is 使用<code>is:running</code>匹配<code>WebSocket</code>资源</li>\n<li>larger-than 过滤出资源比指定值大的资源</li>\n<li>method 请求方法过滤</li>\n<li>mime-type MIME type 过滤</li>\n<li>mixed-content HTTP 和 HTTPS 混合页面过滤<a href=\"https://developer.mozilla.org/zh-TW/docs/Web/Security/Mixed_content#Mixed_active_content\">相关</a></li>\n<li>priority 优先级与指定值匹配</li>\n<li>resource-type 资源类型过滤</li>\n<li>scheme HTTP/HTTPS 过滤</li>\n<li>set-cookie-domain 根据 set-Cookie 的 Domain 过滤</li>\n<li>set-cookie-name 根据 set-Cookie 的 name 过滤</li>\n<li>set-cookie-value 根据 set-Cookie 的 value 过滤</li>\n<li>status-code 状态码过滤</li>\n<li>url 请求 URL 过滤</li>\n</ul>\n<h4 id=\"类型过滤\"><a href=\"#类型过滤\" class=\"headerlink\" title=\"类型过滤\"></a>类型过滤</h4><h5 id=\"Hide-Data-URLs\"><a href=\"#Hide-Data-URLs\" class=\"headerlink\" title=\"Hide Data URLs\"></a>Hide Data URLs</h5><p>含义：前缀为 data: 协议的 URL，其允许内容创建者向文档中嵌入小文件。简单的例子：用 base64 展示图片<br><a href=\"https://www.w3docs.com/tools/code-editor/10848\">demo</a><br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/ia_1900000653.gif\"></p>\n<h5 id=\"具体类型\"><a href=\"#具体类型\" class=\"headerlink\" title=\"具体类型\"></a>具体类型</h5><p>后面展示了一些具体的类型 All(全部)、XHR(XMLHttpRequest 和 fetch)、CSS(样式表)、Img(图片资源)、Media(媒体资源)、Font(字体资源)、WS(WebSocket)、MainFest()</p>\n<h3 id=\"请求搜索\"><a href=\"#请求搜索\" class=\"headerlink\" title=\"请求搜索\"></a>请求搜索</h3><p>点击搜索按钮，或者在 Network 面板按快捷键<code>Ctrl+F</code>,将会出现搜索侧边栏。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608537844605-image.png\"><br>侧边栏不仅可以搜索<code>请求地址</code>、<code>请求参数</code>、<code>头信息</code>，还可以搜索<code>响应数据</code>，简单说来就是可以搜索<strong>请求的所有信息</strong>，感觉还比讲到的<code>Filter</code>还要强大，但是不能够针对响应的文件类型做过滤。</p>\n<p>以下举例请求地址、Response 数据和 cookie。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608537986338-image.png\" alt=\"请求地址\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608538087481-image.png\" alt=\"Response响应\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608538063517-image.png\" alt=\"cookie\"></p>\n<h3 id=\"保留请求日志\"><a href=\"#保留请求日志\" class=\"headerlink\" title=\"保留请求日志\"></a>保留请求日志</h3><p><code>Preserve Log</code>:是否保留日志，一般的是关闭，代表每次刷新就会清空请求的数据；勾选代表一直保留，可以跨页面保留。</p>\n<h3 id=\"禁用缓存\"><a href=\"#禁用缓存\" class=\"headerlink\" title=\"禁用缓存\"></a>禁用缓存</h3><p><code>Disable cache</code>：是否禁用缓存，发勾选则禁用，否则代表可以使用缓存。</p>\n<p>请注意，禁用缓存功能当且仅当开发者工具面板打开的时候有效。</p>\n<h3 id=\"网络情况模拟\"><a href=\"#网络情况模拟\" class=\"headerlink\" title=\"网络情况模拟\"></a>网络情况模拟</h3><p>我们在开发的时候有时候需要用到网速模拟来查看页面的加载情况，Chrome 也很贴心的提供了这个功能。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608538559387-image.png\"><br>这里有几项预设：</p>\n<ul>\n<li>Online 默认选项，不对网络进行模拟</li>\n<li>Fast 3G 下载 1.5 Mb/s,延迟 500ms</li>\n<li>Slow 3G 下载 376 kb/s,延迟 2000ms</li>\n</ul>\n<p>你也可以选择<code>Add</code>自定义添加</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608538845190-image.png\"></p>\n<h3 id=\"请求文件的导入导出\"><a href=\"#请求文件的导入导出\" class=\"headerlink\" title=\"请求文件的导入导出\"></a>请求文件的导入导出</h3><p>将当前开发者工具的 NetWork 记录的请求记录全部导入和导出的功能，导出生成<code>HAR</code>文件,后面也可以导入到开发者工具。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608538973115-image.png\"></p>\n<h3 id=\"设置\"><a href=\"#设置\" class=\"headerlink\" title=\"设置\"></a>设置</h3><p>点击最右侧的设置按钮将出现设置条目，总共有四个功能：</p>\n<h4 id=\"用更高的行展示请求\"><a href=\"#用更高的行展示请求\" class=\"headerlink\" title=\"用更高的行展示请求\"></a>用更高的行展示请求</h4><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608539961418-image.png\"></p>\n<h4 id=\"Group-by-frame-通过请求域名分组\"><a href=\"#Group-by-frame-通过请求域名分组\" class=\"headerlink\" title=\"Group by frame 通过请求域名分组\"></a>Group by frame 通过请求域名分组</h4><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608540037194-image.png\"></p>\n<h4 id=\"Show-overview-展示请求总览，上面有时间线和请求，可以选择范围\"><a href=\"#Show-overview-展示请求总览，上面有时间线和请求，可以选择范围\" class=\"headerlink\" title=\"Show overview 展示请求总览，上面有时间线和请求，可以选择范围\"></a>Show overview 展示请求总览，上面有时间线和请求，可以选择范围</h4><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608539865340-image.png\"></p>\n<h4 id=\"Capture-screenShots-屏幕捕捉\"><a href=\"#Capture-screenShots-屏幕捕捉\" class=\"headerlink\" title=\"Capture screenShots 屏幕捕捉\"></a>Capture screenShots 屏幕捕捉</h4><p>开启之后可以进行屏幕捕捉，双击左键可以放大当前帧的图片，并且底部可以切换</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608540355194-image.png\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608540251524-image.png\"></p>\n<p>按住<code>Ctrl</code>再点击图片，可以看到当前帧所发出的请求。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-21/1608540509955-scr1.gif\"></p>\n<h2 id=\"信息总览栏\"><a href=\"#信息总览栏\" class=\"headerlink\" title=\"信息总览栏\"></a>信息总览栏</h2><p>信息总览栏列出了一些页面加载情况的参数和指标，一共有<code>requests</code>、<code>transferred</code>、<code>resources</code>、<code>Finish</code>、<code>DOMContentLoaded</code>、<code>Load</code>等字段。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201221171308.png\"></p>\n<h3 id=\"含义解析\"><a href=\"#含义解析\" class=\"headerlink\" title=\"含义解析\"></a>含义解析</h3><ul>\n<li>requests 记录的是请求的数量</li>\n<li>transferred 所有资源的压缩大小</li>\n<li>resources 所有资源未压缩的大小</li>\n<li>Finish 页面上所有 http 请求发送到响应完成的时间总和</li>\n<li>DOMContentLoaded DOM 树构建完成。</li>\n<li>Load 页面加载完毕。</li>\n</ul>\n<h3 id=\"Filter\"><a href=\"#Filter\" class=\"headerlink\" title=\"Filter\"></a>Filter</h3><p>当与<code>Filter</code>搭配的时候，可以过滤出当前类型的所占全部请求的数据。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201221171911.png\"></p>\n<h2 id=\"请求区\"><a href=\"#请求区\" class=\"headerlink\" title=\"请求区\"></a>请求区</h2><p>请求区总体可以看似一个表格，其中表头的列可以进行拖拽直到达到你想展示的效果，表头的项目是可以进行筛选和排序的。</p>\n<h3 id=\"表头分析\"><a href=\"#表头分析\" class=\"headerlink\" title=\"表头分析\"></a>表头分析</h3><p>在表头右键可以展示出表头项目（在请求区域右键也可以调出）,可以通过单击来切换是否展示表头项。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609744994318-image.png\"></p>\n<h4 id=\"基本表头\"><a href=\"#基本表头\" class=\"headerlink\" title=\"基本表头\"></a>基本表头</h4><p>具体含义如下:</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">表头</th>\n<th align=\"center\">表头</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">Name</td>\n<td align=\"center\">资源的文件名或者唯一标识符</td>\n</tr>\n<tr>\n<td align=\"center\">Path</td>\n<td align=\"center\">请求路径</td>\n</tr>\n<tr>\n<td align=\"center\">Url</td>\n<td align=\"center\">请求完整地址</td>\n</tr>\n<tr>\n<td align=\"center\">Method</td>\n<td align=\"center\">请求方法</td>\n</tr>\n<tr>\n<td align=\"center\">Status</td>\n<td align=\"center\">HTTP 状态码</td>\n</tr>\n<tr>\n<td align=\"center\">Protocol</td>\n<td align=\"center\">请求协议</td>\n</tr>\n<tr>\n<td align=\"center\">Scheme</td>\n<td align=\"center\">请求方法 http/https 等等</td>\n</tr>\n<tr>\n<td align=\"center\">Domain</td>\n<td align=\"center\">域名</td>\n</tr>\n<tr>\n<td align=\"center\">Remote Address</td>\n<td align=\"center\">远程地址</td>\n</tr>\n<tr>\n<td align=\"center\">Type</td>\n<td align=\"center\">请求资源的 MIME type</td>\n</tr>\n<tr>\n<td align=\"center\">Initator</td>\n<td align=\"center\">发起请求的对象或者流程（Html Parser、http 重定向、JS 函数、其他-比如新网址输入）</td>\n</tr>\n<tr>\n<td align=\"center\">Cookies</td>\n<td align=\"center\">发送 cookie 数量</td>\n</tr>\n<tr>\n<td align=\"center\">Set Cookies</td>\n<td align=\"center\">请求的响应设置 cookie 数量</td>\n</tr>\n<tr>\n<td align=\"center\">Size</td>\n<td align=\"center\">响应头的大小和响应体的大小，若从缓存中获取会显示 disk cache/memory cache 等</td>\n</tr>\n<tr>\n<td align=\"center\">Time</td>\n<td align=\"center\">请求开始到响应中最后一个字节接收的总持续时间</td>\n</tr>\n<tr>\n<td align=\"center\">Priority</td>\n<td align=\"center\">优先级</td>\n</tr>\n<tr>\n<td align=\"center\">Waterfall</td>\n<td align=\"center\">每个请求活动的可视化分解</td>\n</tr>\n<tr>\n<td align=\"center\">Connection ID</td>\n<td align=\"center\">链接 ID</td>\n</tr>\n</tbody></table>\n<h5 id=\"其他释义\"><a href=\"#其他释义\" class=\"headerlink\" title=\"其他释义\"></a>其他释义</h5><ul>\n<li><p>Sort By 设置排序的依据，可以是表头中的项目，这个和双击表头项目的作用是一样的。</p>\n</li>\n<li><p>Reset Columns 重置表头的宽度</p>\n</li>\n<li><p>Response Headers</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609745184616-image.png\"><br>可以在表头显示 Cache-Control 等响应头信息，你还可以点击底部的<code>Manage Header Columns</code>编辑头信息<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609745286619-image.png\"></p>\n</li>\n<li><p>Waterfall<br>展示的是请求的时间分布，用柱状的形式展示出来。目前可以展示出以下的时间，具体的释义在后面有详细的阐述。</p>\n<ul>\n<li>Start Time 开始时间</li>\n<li>Response Time 响应时间</li>\n<li>End Time 结束时间</li>\n<li>Total Duration 总共耗时</li>\n<li>Latency 延迟</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609745498940-image.png\"></p>\n<h3 id=\"请求区分析\"><a href=\"#请求区分析\" class=\"headerlink\" title=\"请求区分析\"></a>请求区分析</h3><h4 id=\"请求区概览\"><a href=\"#请求区概览\" class=\"headerlink\" title=\"请求区概览\"></a>请求区概览</h4><p>下图是访问谷歌官网的实例，其中大多数项目是可以像 Name 一样，hover 就可以看到详情。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609746895024-image.png\"><br>其中：</p>\n<ul>\n<li>Initator hover 的时候会显示具体的触发调用栈<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609747118058-image.png\"></li>\n<li>Waterfall hover 的时候会显示一些指标</li>\n</ul>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609748268570-image.png\"></p>\n<h4 id=\"Waterfall-指标\"><a href=\"#Waterfall-指标\" class=\"headerlink\" title=\"Waterfall 指标\"></a>Waterfall 指标</h4><table>\n<thead>\n<tr>\n<th align=\"center\">表头</th>\n<th align=\"center\">表头</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">Queuedat</td>\n<td align=\"center\">执行到Initator的时间</td>\n</tr>\n<tr>\n<td align=\"center\">Startedat</td>\n<td align=\"center\">开始请求流程的时间</td>\n</tr>\n<tr>\n<td align=\"center\">Queueing</td>\n<td align=\"center\">排队：已有高优先级的请求、已经达到了TCP链接数量、浏览器正在磁盘缓存中短暂分配空间</td>\n</tr>\n<tr>\n<td align=\"center\">Stalled</td>\n<td align=\"center\">由于排队而停下来等待的时间</td>\n</tr>\n<tr>\n<td align=\"center\">DNSLookup</td>\n<td align=\"center\">DNS查找IP</td>\n</tr>\n<tr>\n<td align=\"center\">Initialconnection</td>\n<td align=\"center\">初始化链接</td>\n</tr>\n<tr>\n<td align=\"center\">Proxynegotiation</td>\n<td align=\"center\">代理协商</td>\n</tr>\n<tr>\n<td align=\"center\">Requestsent</td>\n<td align=\"center\">请求发送</td>\n</tr>\n<tr>\n<td align=\"center\">ServiceWorkerPreparation</td>\n<td align=\"center\">浏览器准备启动ServiceWorker</td>\n</tr>\n<tr>\n<td align=\"center\">RequesttoServiceWorker</td>\n<td align=\"center\">向ServiceWorker发送请求</td>\n</tr>\n<tr>\n<td align=\"center\">Waiting(TTFB)</td>\n<td align=\"center\">第一个字节返回的时间。TTFB代表到第一个字节的时间。此时间包括一次往返延迟和服务器准备响应所花费的时间。</td>\n</tr>\n<tr>\n<td align=\"center\">ContentDownload</td>\n<td align=\"center\">浏览器正在接收响应</td>\n</tr>\n<tr>\n<td align=\"center\">ReceivingPush</td>\n<td align=\"center\">浏览器正在通过HTTP/2服务器推送接收数据</td>\n</tr>\n<tr>\n<td align=\"center\">ReadingPush</td>\n<td align=\"center\">浏览器正在读取先前接收的本地数据</td>\n</tr>\n</tbody></table>\n<h4 id=\"单个请求选中分析\"><a href=\"#单个请求选中分析\" class=\"headerlink\" title=\"单个请求选中分析\"></a>单个请求选中分析</h4><p>当我们选择一个请求事，右侧面板会展示出这个请求的信息。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609749026512-image.png\"><br>一共有以下几项：</p>\n<ul>\n<li>Headers 请求的头信息，包含Query参数和Post数据，请求头响应头等详见<a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers\">HTTP Header</a></li>\n<li>Preview 对返回的数据格式化预览</li>\n<li>Response 展示返回的原始数据</li>\n<li>Initator 同表头Initator</li>\n<li>Cookies 同表头Cookies</li>\n<li>Timing 同Waterfall<h4 id=\"单个请求右键分析\"><a href=\"#单个请求右键分析\" class=\"headerlink\" title=\"单个请求右键分析\"></a>单个请求右键分析</h4>当我们选择一个请求右键的时候会弹出菜单</li>\n</ul>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609750559655-image.png\"><br>我们来具体分析：</p>\n<ul>\n<li><p>Open in new tab 在新窗口打开，这个和双击某个请求的行为是一样的，都是打开新窗口GET请求</p>\n</li>\n<li><p>Clear browser cache 清楚浏览器缓存</p>\n</li>\n<li><p>Clear browser cookies 清楚浏览器cookies</p>\n</li>\n<li><p>Copy 复制此请求，会展开二级菜单<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609751200913-image.png\"></p>\n<ul>\n<li>Copy link address 复制链接地址</li>\n<li>Copy as Powershell 复制为Powershell 命令</li>\n<li>Copy as fetch 复制为fetch函数</li>\n<li>Copy as Nodejs fetch 复制为Nodejs fetch函数</li>\n<li>Copy as cURl(cmd) 复制cmd执行的命令</li>\n<li>Copy as cURl(bash) 复制bash执行的命令</li>\n<li>… 后面五个为将全部的请求复制为对应的模式</li>\n<li>Copy all as HAR 将所有请求复制为HAR内容格式（还是文本）</li>\n</ul>\n</li>\n<li><p>Block request URL 禁止请求此地址，禁止之后在相同位置可以启用，禁止之后无法访问该请求。</p>\n<p>可以进入<code>network request blocking</code>面板查看已经禁止的请求<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2021-1-4/1609752010644-image.png\"></p>\n</li>\n<li><p>Block request Domain 禁止请求此域名<br>可以进入<code>network request blocking</code>面板查看已经禁止的域名</p>\n</li>\n<li><p>Replay XHR 重发此请求</p>\n</li>\n<li><p>Sort By 设置排序依据</p>\n</li>\n<li><p>Header Options 设置表头项目</p>\n</li>\n<li><p>Save all as HAR with content 同“导出”功能，将请求导出为HAR文件</p>\n</li>\n</ul>\n<h2 id=\"引用地址\"><a href=\"#引用地址\" class=\"headerlink\" title=\"引用地址\"></a>引用地址</h2><blockquote>\n<p><a href=\"https://developers.google.com/web/tools/chrome-devtools/network/reference\">https://developers.google.com/web/tools/chrome-devtools/network/reference</a></p>\n</blockquote>"},{"title":"Github和Gitee同步中的坑","abbrlink":"be3db861","translate_title":"pitfalls-in-github-and-gitee-synchronization","date":"2020-10-09T07:50:48.000Z","_content":"\n最近在做 Github Pages 到 Gitee Pages 的同步操作，做个镜像备份\n\n## 仓库同步\n\n我的博客构建使用的是 Github Action，因此同步功能使用的是[`wearerequired/git-mirror-action@master`](https://github.com/wearerequired/git-mirror-action)。因为 Gitee Page 的并不会随着仓库更新主动更新，因此还需要[`yanglbme/gitee-pages-action@master`](https://github.com/yanglbme/gitee-pages-action)做一个 build 的操作。\n\n<!-- more -->\n\n[具体可以参照我的配置文件](https://github.com/kitety/blog/blob/master/.github/workflows/main.yml)，部分整体配置如下：\n\n```yml\n- name: Sync to Gitee\nuses: wearerequired/git-mirror-action@master\nenv:\n  # 注意在 Settings->Secrets 配置 GITEE_RSA_PRIVATE_KEY\n  SSH_PRIVATE_KEY: ${{ secrets.ACTION_DEPLOY_KEY }}\nwith:\n  # 注意替换为你的 GitHub 源仓库地址\n  source-repo: \"git@github.com:kitety/kitety.github.io.git\"\n  # 注意替换为你的 Gitee 目标仓库地址\n  destination-repo: \"git@gitee.com:kitety/kitety.git\"\n\n- name: Build Gitee Pages\nuses: yanglbme/gitee-pages-action@master\nwith:\n  # 注意替换为你的 Gitee 用户名\n  gitee-username: kitety\n  # 注意在 Settings->Secrets 配置 GITEE_PASSWORD\n  gitee-password: ${{ secrets.GITEE_PASSWORD }}\n  # 注意替换为你的 Gitee 仓库\n  gitee-repo: kitety/kitety\n\n```\n\n其中：ACTION_DEPLOY_KEY 是私钥，GITEE_PASSWORD 是 Gitee 的密码。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201009155932.png)\n\n## 踩坑\n\n### 第一次同步\n\n第一次同步的时候必须先再自己的电脑上提交上去，就是不要用上面的命令行做第一次提交。\n\n### 登陆问题\n\n开始我的也是跑 Github Action 没有问题，看起正常。但是在 gitee 的博客内容不更新，每次跑的时候还有短信的异地登录提醒。\n\n后来发现有人也有相同的[问题](https://github.com/yanglbme/gitee-pages-action/issues/6),仔细看了解决。\n\n**解决方案**\n就是要关注`Gitee（Gitee.com）官方账号`,绑定自己的 Gitee 账号，后面就会有推送的提醒，这样就可以同步更新了。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201009212425.png)\n\n以上就是解决问题的方法了。\n","source":"_posts/Github和Gitee同步中的坑.md","raw":"---\ntitle: Github和Gitee同步中的坑\ntags:\n  - Hexo\nabbrlink: be3db861\ntranslate_title: pitfalls-in-github-and-gitee-synchronization\ndate: 2020-10-09 15:50:48\n---\n\n最近在做 Github Pages 到 Gitee Pages 的同步操作，做个镜像备份\n\n## 仓库同步\n\n我的博客构建使用的是 Github Action，因此同步功能使用的是[`wearerequired/git-mirror-action@master`](https://github.com/wearerequired/git-mirror-action)。因为 Gitee Page 的并不会随着仓库更新主动更新，因此还需要[`yanglbme/gitee-pages-action@master`](https://github.com/yanglbme/gitee-pages-action)做一个 build 的操作。\n\n<!-- more -->\n\n[具体可以参照我的配置文件](https://github.com/kitety/blog/blob/master/.github/workflows/main.yml)，部分整体配置如下：\n\n```yml\n- name: Sync to Gitee\nuses: wearerequired/git-mirror-action@master\nenv:\n  # 注意在 Settings->Secrets 配置 GITEE_RSA_PRIVATE_KEY\n  SSH_PRIVATE_KEY: ${{ secrets.ACTION_DEPLOY_KEY }}\nwith:\n  # 注意替换为你的 GitHub 源仓库地址\n  source-repo: \"git@github.com:kitety/kitety.github.io.git\"\n  # 注意替换为你的 Gitee 目标仓库地址\n  destination-repo: \"git@gitee.com:kitety/kitety.git\"\n\n- name: Build Gitee Pages\nuses: yanglbme/gitee-pages-action@master\nwith:\n  # 注意替换为你的 Gitee 用户名\n  gitee-username: kitety\n  # 注意在 Settings->Secrets 配置 GITEE_PASSWORD\n  gitee-password: ${{ secrets.GITEE_PASSWORD }}\n  # 注意替换为你的 Gitee 仓库\n  gitee-repo: kitety/kitety\n\n```\n\n其中：ACTION_DEPLOY_KEY 是私钥，GITEE_PASSWORD 是 Gitee 的密码。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201009155932.png)\n\n## 踩坑\n\n### 第一次同步\n\n第一次同步的时候必须先再自己的电脑上提交上去，就是不要用上面的命令行做第一次提交。\n\n### 登陆问题\n\n开始我的也是跑 Github Action 没有问题，看起正常。但是在 gitee 的博客内容不更新，每次跑的时候还有短信的异地登录提醒。\n\n后来发现有人也有相同的[问题](https://github.com/yanglbme/gitee-pages-action/issues/6),仔细看了解决。\n\n**解决方案**\n就是要关注`Gitee（Gitee.com）官方账号`,绑定自己的 Gitee 账号，后面就会有推送的提醒，这样就可以同步更新了。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201009212425.png)\n\n以上就是解决问题的方法了。\n","slug":"Github和Gitee同步中的坑","published":1,"updated":"2021-09-29T07:53:51.814Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy6af000dp4vlbdhf8cao","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>最近在做 Github Pages 到 Gitee Pages 的同步操作，做个镜像备份</p>\n<h2 id=\"仓库同步\"><a href=\"#仓库同步\" class=\"headerlink\" title=\"仓库同步\"></a>仓库同步</h2><p>我的博客构建使用的是 Github Action，因此同步功能使用的是<a href=\"https://github.com/wearerequired/git-mirror-action\"><code>wearerequired/git-mirror-action@master</code></a>。因为 Gitee Page 的并不会随着仓库更新主动更新，因此还需要<a href=\"https://github.com/yanglbme/gitee-pages-action\"><code>yanglbme/gitee-pages-action@master</code></a>做一个 build 的操作。</p>\n<span id=\"more\"></span>\n\n<p><a href=\"https://github.com/kitety/blog/blob/master/.github/workflows/main.yml\">具体可以参照我的配置文件</a>，部分整体配置如下：</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Sync</span> <span class=\"string\">to</span> <span class=\"string\">Gitee</span></span><br><span class=\"line\"><span class=\"attr\">uses:</span> <span class=\"string\">wearerequired/git-mirror-action@master</span></span><br><span class=\"line\"><span class=\"attr\">env:</span></span><br><span class=\"line\">  <span class=\"comment\"># 注意在 Settings-&gt;Secrets 配置 GITEE_RSA_PRIVATE_KEY</span></span><br><span class=\"line\">  <span class=\"attr\">SSH_PRIVATE_KEY:</span> <span class=\"string\">$&#123;&#123;</span> <span class=\"string\">secrets.ACTION_DEPLOY_KEY</span> <span class=\"string\">&#125;&#125;</span></span><br><span class=\"line\"><span class=\"attr\">with:</span></span><br><span class=\"line\">  <span class=\"comment\"># 注意替换为你的 GitHub 源仓库地址</span></span><br><span class=\"line\">  <span class=\"attr\">source-repo:</span> <span class=\"string\">&quot;git@github.com:kitety/kitety.github.io.git&quot;</span></span><br><span class=\"line\">  <span class=\"comment\"># 注意替换为你的 Gitee 目标仓库地址</span></span><br><span class=\"line\">  <span class=\"attr\">destination-repo:</span> <span class=\"string\">&quot;git@gitee.com:kitety/kitety.git&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Build</span> <span class=\"string\">Gitee</span> <span class=\"string\">Pages</span></span><br><span class=\"line\"><span class=\"attr\">uses:</span> <span class=\"string\">yanglbme/gitee-pages-action@master</span></span><br><span class=\"line\"><span class=\"attr\">with:</span></span><br><span class=\"line\">  <span class=\"comment\"># 注意替换为你的 Gitee 用户名</span></span><br><span class=\"line\">  <span class=\"attr\">gitee-username:</span> <span class=\"string\">kitety</span></span><br><span class=\"line\">  <span class=\"comment\"># 注意在 Settings-&gt;Secrets 配置 GITEE_PASSWORD</span></span><br><span class=\"line\">  <span class=\"attr\">gitee-password:</span> <span class=\"string\">$&#123;&#123;</span> <span class=\"string\">secrets.GITEE_PASSWORD</span> <span class=\"string\">&#125;&#125;</span></span><br><span class=\"line\">  <span class=\"comment\"># 注意替换为你的 Gitee 仓库</span></span><br><span class=\"line\">  <span class=\"attr\">gitee-repo:</span> <span class=\"string\">kitety/kitety</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>其中：ACTION_DEPLOY_KEY 是私钥，GITEE_PASSWORD 是 Gitee 的密码。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201009155932.png\"></p>\n<h2 id=\"踩坑\"><a href=\"#踩坑\" class=\"headerlink\" title=\"踩坑\"></a>踩坑</h2><h3 id=\"第一次同步\"><a href=\"#第一次同步\" class=\"headerlink\" title=\"第一次同步\"></a>第一次同步</h3><p>第一次同步的时候必须先再自己的电脑上提交上去，就是不要用上面的命令行做第一次提交。</p>\n<h3 id=\"登陆问题\"><a href=\"#登陆问题\" class=\"headerlink\" title=\"登陆问题\"></a>登陆问题</h3><p>开始我的也是跑 Github Action 没有问题，看起正常。但是在 gitee 的博客内容不更新，每次跑的时候还有短信的异地登录提醒。</p>\n<p>后来发现有人也有相同的<a href=\"https://github.com/yanglbme/gitee-pages-action/issues/6\">问题</a>,仔细看了解决。</p>\n<p><strong>解决方案</strong><br>就是要关注<code>Gitee（Gitee.com）官方账号</code>,绑定自己的 Gitee 账号，后面就会有推送的提醒，这样就可以同步更新了。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201009212425.png\"></p>\n<p>以上就是解决问题的方法了。</p>\n","site":{"data":{}},"length":1098,"excerpt":"<p>最近在做 Github Pages 到 Gitee Pages 的同步操作，做个镜像备份</p>\n<h2 id=\"仓库同步\"><a href=\"#仓库同步\" class=\"headerlink\" title=\"仓库同步\"></a>仓库同步</h2><p>我的博客构建使用的是 Github Action，因此同步功能使用的是<a href=\"https://github.com/wearerequired/git-mirror-action\"><code>wearerequired/git-mirror-action@master</code></a>。因为 Gitee Page 的并不会随着仓库更新主动更新，因此还需要<a href=\"https://github.com/yanglbme/gitee-pages-action\"><code>yanglbme/gitee-pages-action@master</code></a>做一个 build 的操作。</p>","more":"<p><a href=\"https://github.com/kitety/blog/blob/master/.github/workflows/main.yml\">具体可以参照我的配置文件</a>，部分整体配置如下：</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Sync</span> <span class=\"string\">to</span> <span class=\"string\">Gitee</span></span><br><span class=\"line\"><span class=\"attr\">uses:</span> <span class=\"string\">wearerequired/git-mirror-action@master</span></span><br><span class=\"line\"><span class=\"attr\">env:</span></span><br><span class=\"line\">  <span class=\"comment\"># 注意在 Settings-&gt;Secrets 配置 GITEE_RSA_PRIVATE_KEY</span></span><br><span class=\"line\">  <span class=\"attr\">SSH_PRIVATE_KEY:</span> <span class=\"string\">$&#123;&#123;</span> <span class=\"string\">secrets.ACTION_DEPLOY_KEY</span> <span class=\"string\">&#125;&#125;</span></span><br><span class=\"line\"><span class=\"attr\">with:</span></span><br><span class=\"line\">  <span class=\"comment\"># 注意替换为你的 GitHub 源仓库地址</span></span><br><span class=\"line\">  <span class=\"attr\">source-repo:</span> <span class=\"string\">&quot;git@github.com:kitety/kitety.github.io.git&quot;</span></span><br><span class=\"line\">  <span class=\"comment\"># 注意替换为你的 Gitee 目标仓库地址</span></span><br><span class=\"line\">  <span class=\"attr\">destination-repo:</span> <span class=\"string\">&quot;git@gitee.com:kitety/kitety.git&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Build</span> <span class=\"string\">Gitee</span> <span class=\"string\">Pages</span></span><br><span class=\"line\"><span class=\"attr\">uses:</span> <span class=\"string\">yanglbme/gitee-pages-action@master</span></span><br><span class=\"line\"><span class=\"attr\">with:</span></span><br><span class=\"line\">  <span class=\"comment\"># 注意替换为你的 Gitee 用户名</span></span><br><span class=\"line\">  <span class=\"attr\">gitee-username:</span> <span class=\"string\">kitety</span></span><br><span class=\"line\">  <span class=\"comment\"># 注意在 Settings-&gt;Secrets 配置 GITEE_PASSWORD</span></span><br><span class=\"line\">  <span class=\"attr\">gitee-password:</span> <span class=\"string\">$&#123;&#123;</span> <span class=\"string\">secrets.GITEE_PASSWORD</span> <span class=\"string\">&#125;&#125;</span></span><br><span class=\"line\">  <span class=\"comment\"># 注意替换为你的 Gitee 仓库</span></span><br><span class=\"line\">  <span class=\"attr\">gitee-repo:</span> <span class=\"string\">kitety/kitety</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>其中：ACTION_DEPLOY_KEY 是私钥，GITEE_PASSWORD 是 Gitee 的密码。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201009155932.png\"></p>\n<h2 id=\"踩坑\"><a href=\"#踩坑\" class=\"headerlink\" title=\"踩坑\"></a>踩坑</h2><h3 id=\"第一次同步\"><a href=\"#第一次同步\" class=\"headerlink\" title=\"第一次同步\"></a>第一次同步</h3><p>第一次同步的时候必须先再自己的电脑上提交上去，就是不要用上面的命令行做第一次提交。</p>\n<h3 id=\"登陆问题\"><a href=\"#登陆问题\" class=\"headerlink\" title=\"登陆问题\"></a>登陆问题</h3><p>开始我的也是跑 Github Action 没有问题，看起正常。但是在 gitee 的博客内容不更新，每次跑的时候还有短信的异地登录提醒。</p>\n<p>后来发现有人也有相同的<a href=\"https://github.com/yanglbme/gitee-pages-action/issues/6\">问题</a>,仔细看了解决。</p>\n<p><strong>解决方案</strong><br>就是要关注<code>Gitee（Gitee.com）官方账号</code>,绑定自己的 Gitee 账号，后面就会有推送的提醒，这样就可以同步更新了。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201009212425.png\"></p>\n<p>以上就是解决问题的方法了。</p>"},{"title":"RXJS学习","abbrlink":"d685a9c8","translate_title":"rxjs-learning","date":"2022-04-11T11:30:35.000Z","_content":"\n# RxJS 学习\n\nReactive 响应式编程是一种思维模式，并且针对各种语言都有其各自的实现，如：RxJava、RxGo、RxJS 等等。\n\n在前端领域 Reactive 响应式使用的比较多的 RxJS，比如在**Angular**和**Nestjs**等框架中就有内置 RxJS。\n\nRxJS 是 Reactive Extensions for JavaScript 的缩写，起源于 Reactive Extensions，是一个基于可观测数据流 Stream 结合观察者模式和迭代器模式的一种异步编程的应用库。\n\n官网声称可以讲 Rxjs 理解为处理事件的“Lodash”\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20220411193345.png)\n\n<!-- more -->\n\n## **认识 Observable 和 Observe**\n\n首先我们需要说一下简单的观察者模式 Observe\n\n其实我们最简单的点击事件就是一种观察者模式\n\n```jsx\nfunction clickHandler(event) {\n  console.log(\"user click!\");\n}\n\ndocument.body.addEventListener(\"click\", clickHandler);\n```\n\n我们也可以简单的手写一个类来模拟。\n\n```jsx\nclass Producer {\n  constructor() {\n    this.listeners = [];\n  }\n  addListener(listener) {\n    if (typeof listener === \"function\") {\n      this.listeners.push(listener);\n    } else {\n      throw new Error(\"listener 必須是 function\");\n    }\n  }\n  removeListener(listener) {\n    this.listeners.splice(this.listeners.indexOf(listener), 1);\n  }\n  notify(message) {\n    this.listeners.forEach((listener) => {\n      listener(message);\n    });\n  }\n}\n```\n\n我们将数据放在数组中，需要的时候在遍历调用\n\n还有一种是迭代器模式\n\n```jsx\nvar arr = [1, 2, 3];\n\nvar iterator = arr[Symbol.iterator]();\n\niterator.next();\n// { value: 1, done: false }\niterator.next();\n// { value: 2, done: false }\niterator.next();\n// { value: 3, done: false }\niterator.next();\n// { value: undefined, done: true }\n```\n\n而**Observable**具有以上两者的通性，都是渐进式的获取值\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20220411193200.png)\n\n**Observable 就像是一个序列，里面的元素会随着时间推送**\n\n## **创建 Observable**\n\ncreate\n\n- create\n\n  ```jsx\n  var observable = Rx.Observable.create(function (observer) {\n    observer.next(\"Jerry\");\n    observer.next(\"anna\");\n    setTimeout(() => {\n      observer.next(\"RxJS 30 Days!\");\n    }, 30);\n  });\n\n  console.log(\"observable: \", observable);\n  console.log(\"start\");\n  observable.subscribe({\n    next: function (value) {\n      console.log(value);\n    },\n    complete: function () {\n      console.log(\"complete!\");\n    },\n    error: function (error) {\n      console.log(error);\n    },\n  });\n  console.log(\"end\");\n  ```\n\nof\n\n- of\n  ```jsx\n  var source = Rx.Observable.of(\"jerry\", \"Anna\");\n  ```\n\nfrom 把类数组的值转换为 observable\n\n- from\n  ```jsx\n  // Set, WeakSet, Iterator\n  var arr = [\"jerry\", \"Anna\", 2017, 2016, \"30 days\"];\n  var source = Rx.Observable.from(arr);\n  ```\n\nempty 没有做任何事\n\n- empty\n  ```jsx\n  var source = Rx.Observable.empty();\n  ```\n\n_never_\n\n- never 都不会发生，它只是一个可以观察到的存在\n  ```jsx\n  var source = Rx.Observable.never();\n  ```\n\nthrow 抛出错误\n\n- throw\n  ```jsx\n  var source = Rx.Observable.throw(\"Oop!\");\n  ```\n\ntimer 间隔输出数字\n\n- timer\n  两个参数，第一个参数表示第一个输出的延迟时间；第二个参数表示后序输出的间隔时间，没有的话就只输出一个数字\n\ninterval 间隔输出数字\n\nfromEvent 将事件转换成 observable 序列\n\nfromPromise 将\\***\\*promise\\*\\***转换成 observable 序列\n\nRxjs 提供了一些纯函数作为工具函数，叫做 Operator。\n\nRxjs 的 operator 可以和数组的一些方法类比起来学习\n\n| RxJS                 | 类比学习                                                |\n| -------------------- | ------------------------------------------------------- |\n| map                  | 和数组 map 一样，对每一项执行函数并返回                 |\n| concat               | 和数组 concat 类似，做 observable 的拼接                |\n| take                 | 和数组 slice 类似，去除 n 个，直接输入数字              |\n| skip                 | 跳过 n 个                                               |\n| takeLast             | 取后面 n 个                                             |\n| last                 | 最后一个                                                |\n| merge                | 对各个 observable 送出的值做”或“处理                    |\n| combineLatest        | 取得各个 observable 最后送出的值                        |\n| zip                  | 分别在推出第 n 个数的时候触发 同时                      |\n| scan                 | 逐次的从 observable 获取订阅的值，执行函数              |\n| debounceTime         | 消抖时间                                                |\n| distinct             | 去重                                                    |\n| distinctUntilChanged | 去重，只和最近的上一个的值进行比较                      |\n| repeat               | 重复次数或者无限                                        |\n| retryWhen            | 一个回调，接受一个由 error 组成的 Observable 并且会循环 |\n| switch               | 数组的 flatten                                          |\n","source":"_posts/RXJS学习.md","raw":"---\ntitle: RXJS学习\ntags:\n  - RXJS\nabbrlink: d685a9c8\ntranslate_title: rxjs-learning\ndate: 2022-04-11 19:30:35\n---\n\n# RxJS 学习\n\nReactive 响应式编程是一种思维模式，并且针对各种语言都有其各自的实现，如：RxJava、RxGo、RxJS 等等。\n\n在前端领域 Reactive 响应式使用的比较多的 RxJS，比如在**Angular**和**Nestjs**等框架中就有内置 RxJS。\n\nRxJS 是 Reactive Extensions for JavaScript 的缩写，起源于 Reactive Extensions，是一个基于可观测数据流 Stream 结合观察者模式和迭代器模式的一种异步编程的应用库。\n\n官网声称可以讲 Rxjs 理解为处理事件的“Lodash”\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20220411193345.png)\n\n<!-- more -->\n\n## **认识 Observable 和 Observe**\n\n首先我们需要说一下简单的观察者模式 Observe\n\n其实我们最简单的点击事件就是一种观察者模式\n\n```jsx\nfunction clickHandler(event) {\n  console.log(\"user click!\");\n}\n\ndocument.body.addEventListener(\"click\", clickHandler);\n```\n\n我们也可以简单的手写一个类来模拟。\n\n```jsx\nclass Producer {\n  constructor() {\n    this.listeners = [];\n  }\n  addListener(listener) {\n    if (typeof listener === \"function\") {\n      this.listeners.push(listener);\n    } else {\n      throw new Error(\"listener 必須是 function\");\n    }\n  }\n  removeListener(listener) {\n    this.listeners.splice(this.listeners.indexOf(listener), 1);\n  }\n  notify(message) {\n    this.listeners.forEach((listener) => {\n      listener(message);\n    });\n  }\n}\n```\n\n我们将数据放在数组中，需要的时候在遍历调用\n\n还有一种是迭代器模式\n\n```jsx\nvar arr = [1, 2, 3];\n\nvar iterator = arr[Symbol.iterator]();\n\niterator.next();\n// { value: 1, done: false }\niterator.next();\n// { value: 2, done: false }\niterator.next();\n// { value: 3, done: false }\niterator.next();\n// { value: undefined, done: true }\n```\n\n而**Observable**具有以上两者的通性，都是渐进式的获取值\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20220411193200.png)\n\n**Observable 就像是一个序列，里面的元素会随着时间推送**\n\n## **创建 Observable**\n\ncreate\n\n- create\n\n  ```jsx\n  var observable = Rx.Observable.create(function (observer) {\n    observer.next(\"Jerry\");\n    observer.next(\"anna\");\n    setTimeout(() => {\n      observer.next(\"RxJS 30 Days!\");\n    }, 30);\n  });\n\n  console.log(\"observable: \", observable);\n  console.log(\"start\");\n  observable.subscribe({\n    next: function (value) {\n      console.log(value);\n    },\n    complete: function () {\n      console.log(\"complete!\");\n    },\n    error: function (error) {\n      console.log(error);\n    },\n  });\n  console.log(\"end\");\n  ```\n\nof\n\n- of\n  ```jsx\n  var source = Rx.Observable.of(\"jerry\", \"Anna\");\n  ```\n\nfrom 把类数组的值转换为 observable\n\n- from\n  ```jsx\n  // Set, WeakSet, Iterator\n  var arr = [\"jerry\", \"Anna\", 2017, 2016, \"30 days\"];\n  var source = Rx.Observable.from(arr);\n  ```\n\nempty 没有做任何事\n\n- empty\n  ```jsx\n  var source = Rx.Observable.empty();\n  ```\n\n_never_\n\n- never 都不会发生，它只是一个可以观察到的存在\n  ```jsx\n  var source = Rx.Observable.never();\n  ```\n\nthrow 抛出错误\n\n- throw\n  ```jsx\n  var source = Rx.Observable.throw(\"Oop!\");\n  ```\n\ntimer 间隔输出数字\n\n- timer\n  两个参数，第一个参数表示第一个输出的延迟时间；第二个参数表示后序输出的间隔时间，没有的话就只输出一个数字\n\ninterval 间隔输出数字\n\nfromEvent 将事件转换成 observable 序列\n\nfromPromise 将\\***\\*promise\\*\\***转换成 observable 序列\n\nRxjs 提供了一些纯函数作为工具函数，叫做 Operator。\n\nRxjs 的 operator 可以和数组的一些方法类比起来学习\n\n| RxJS                 | 类比学习                                                |\n| -------------------- | ------------------------------------------------------- |\n| map                  | 和数组 map 一样，对每一项执行函数并返回                 |\n| concat               | 和数组 concat 类似，做 observable 的拼接                |\n| take                 | 和数组 slice 类似，去除 n 个，直接输入数字              |\n| skip                 | 跳过 n 个                                               |\n| takeLast             | 取后面 n 个                                             |\n| last                 | 最后一个                                                |\n| merge                | 对各个 observable 送出的值做”或“处理                    |\n| combineLatest        | 取得各个 observable 最后送出的值                        |\n| zip                  | 分别在推出第 n 个数的时候触发 同时                      |\n| scan                 | 逐次的从 observable 获取订阅的值，执行函数              |\n| debounceTime         | 消抖时间                                                |\n| distinct             | 去重                                                    |\n| distinctUntilChanged | 去重，只和最近的上一个的值进行比较                      |\n| repeat               | 重复次数或者无限                                        |\n| retryWhen            | 一个回调，接受一个由 error 组成的 Observable 并且会循环 |\n| switch               | 数组的 flatten                                          |\n","slug":"RXJS学习","published":1,"updated":"2022-04-11T11:33:49.503Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy6ah000gp4vl6e8xf8du","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h1 id=\"RxJS-学习\"><a href=\"#RxJS-学习\" class=\"headerlink\" title=\"RxJS 学习\"></a>RxJS 学习</h1><p>Reactive 响应式编程是一种思维模式，并且针对各种语言都有其各自的实现，如：RxJava、RxGo、RxJS 等等。</p>\n<p>在前端领域 Reactive 响应式使用的比较多的 RxJS，比如在<strong>Angular</strong>和<strong>Nestjs</strong>等框架中就有内置 RxJS。</p>\n<p>RxJS 是 Reactive Extensions for JavaScript 的缩写，起源于 Reactive Extensions，是一个基于可观测数据流 Stream 结合观察者模式和迭代器模式的一种异步编程的应用库。</p>\n<p>官网声称可以讲 Rxjs 理解为处理事件的“Lodash”<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20220411193345.png\"></p>\n<span id=\"more\"></span>\n\n<h2 id=\"认识-Observable-和-Observe\"><a href=\"#认识-Observable-和-Observe\" class=\"headerlink\" title=\"认识 Observable 和 Observe\"></a><strong>认识 Observable 和 Observe</strong></h2><p>首先我们需要说一下简单的观察者模式 Observe</p>\n<p>其实我们最简单的点击事件就是一种观察者模式</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">clickHandler</span>(<span class=\"params\">event</span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;user click!&quot;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">document</span>.<span class=\"property\">body</span>.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&quot;click&quot;</span>, clickHandler);</span><br></pre></td></tr></table></figure>\n\n<p>我们也可以简单的手写一个类来模拟。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Producer</span> &#123;</span><br><span class=\"line\">  <span class=\"title function_\">constructor</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">listeners</span> = [];</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"title function_\">addListener</span>(<span class=\"params\">listener</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> listener === <span class=\"string\">&quot;function&quot;</span>) &#123;</span><br><span class=\"line\">      <span class=\"variable language_\">this</span>.<span class=\"property\">listeners</span>.<span class=\"title function_\">push</span>(listener);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Error</span>(<span class=\"string\">&quot;listener 必須是 function&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"title function_\">removeListener</span>(<span class=\"params\">listener</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">listeners</span>.<span class=\"title function_\">splice</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">listeners</span>.<span class=\"title function_\">indexOf</span>(listener), <span class=\"number\">1</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"title function_\">notify</span>(<span class=\"params\">message</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">listeners</span>.<span class=\"title function_\">forEach</span>(<span class=\"function\">(<span class=\"params\">listener</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"title function_\">listener</span>(message);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>我们将数据放在数组中，需要的时候在遍历调用</p>\n<p>还有一种是迭代器模式</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> iterator = arr[<span class=\"title class_\">Symbol</span>.<span class=\"property\">iterator</span>]();</span><br><span class=\"line\"></span><br><span class=\"line\">iterator.<span class=\"title function_\">next</span>();</span><br><span class=\"line\"><span class=\"comment\">// &#123; value: 1, done: false &#125;</span></span><br><span class=\"line\">iterator.<span class=\"title function_\">next</span>();</span><br><span class=\"line\"><span class=\"comment\">// &#123; value: 2, done: false &#125;</span></span><br><span class=\"line\">iterator.<span class=\"title function_\">next</span>();</span><br><span class=\"line\"><span class=\"comment\">// &#123; value: 3, done: false &#125;</span></span><br><span class=\"line\">iterator.<span class=\"title function_\">next</span>();</span><br><span class=\"line\"><span class=\"comment\">// &#123; value: undefined, done: true &#125;</span></span><br></pre></td></tr></table></figure>\n\n<p>而<strong>Observable</strong>具有以上两者的通性，都是渐进式的获取值<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20220411193200.png\"></p>\n<p><strong>Observable 就像是一个序列，里面的元素会随着时间推送</strong></p>\n<h2 id=\"创建-Observable\"><a href=\"#创建-Observable\" class=\"headerlink\" title=\"创建 Observable\"></a><strong>创建 Observable</strong></h2><p>create</p>\n<ul>\n<li><p>create</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> observable = <span class=\"title class_\">Rx</span>.<span class=\"property\">Observable</span>.<span class=\"title function_\">create</span>(<span class=\"keyword\">function</span> (<span class=\"params\">observer</span>) &#123;</span><br><span class=\"line\">  observer.<span class=\"title function_\">next</span>(<span class=\"string\">&quot;Jerry&quot;</span>);</span><br><span class=\"line\">  observer.<span class=\"title function_\">next</span>(<span class=\"string\">&quot;anna&quot;</span>);</span><br><span class=\"line\">  <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    observer.<span class=\"title function_\">next</span>(<span class=\"string\">&quot;RxJS 30 Days!&quot;</span>);</span><br><span class=\"line\">  &#125;, <span class=\"number\">30</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;observable: &quot;</span>, observable);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;start&quot;</span>);</span><br><span class=\"line\">observable.<span class=\"title function_\">subscribe</span>(&#123;</span><br><span class=\"line\">  <span class=\"attr\">next</span>: <span class=\"keyword\">function</span> (<span class=\"params\">value</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(value);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">complete</span>: <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;complete!&quot;</span>);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">error</span>: <span class=\"keyword\">function</span> (<span class=\"params\">error</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(error);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;end&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<p>of</p>\n<ul>\n<li>of<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> source = <span class=\"title class_\">Rx</span>.<span class=\"property\">Observable</span>.<span class=\"title function_\">of</span>(<span class=\"string\">&quot;jerry&quot;</span>, <span class=\"string\">&quot;Anna&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<p>from 把类数组的值转换为 observable</p>\n<ul>\n<li>from<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Set, WeakSet, Iterator</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"string\">&quot;jerry&quot;</span>, <span class=\"string\">&quot;Anna&quot;</span>, <span class=\"number\">2017</span>, <span class=\"number\">2016</span>, <span class=\"string\">&quot;30 days&quot;</span>];</span><br><span class=\"line\"><span class=\"keyword\">var</span> source = <span class=\"title class_\">Rx</span>.<span class=\"property\">Observable</span>.<span class=\"title function_\">from</span>(arr);</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<p>empty 没有做任何事</p>\n<ul>\n<li>empty<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> source = <span class=\"title class_\">Rx</span>.<span class=\"property\">Observable</span>.<span class=\"title function_\">empty</span>();</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<p><em>never</em></p>\n<ul>\n<li>never 都不会发生，它只是一个可以观察到的存在<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> source = <span class=\"title class_\">Rx</span>.<span class=\"property\">Observable</span>.<span class=\"title function_\">never</span>();</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<p>throw 抛出错误</p>\n<ul>\n<li>throw<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> source = <span class=\"title class_\">Rx</span>.<span class=\"property\">Observable</span>.<span class=\"keyword\">throw</span>(<span class=\"string\">&quot;Oop!&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<p>timer 间隔输出数字</p>\n<ul>\n<li>timer<br>两个参数，第一个参数表示第一个输出的延迟时间；第二个参数表示后序输出的间隔时间，没有的话就只输出一个数字</li>\n</ul>\n<p>interval 间隔输出数字</p>\n<p>fromEvent 将事件转换成 observable 序列</p>\n<p>fromPromise 将*<strong>*promise**</strong>转换成 observable 序列</p>\n<p>Rxjs 提供了一些纯函数作为工具函数，叫做 Operator。</p>\n<p>Rxjs 的 operator 可以和数组的一些方法类比起来学习</p>\n<table>\n<thead>\n<tr>\n<th>RxJS</th>\n<th>类比学习</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>map</td>\n<td>和数组 map 一样，对每一项执行函数并返回</td>\n</tr>\n<tr>\n<td>concat</td>\n<td>和数组 concat 类似，做 observable 的拼接</td>\n</tr>\n<tr>\n<td>take</td>\n<td>和数组 slice 类似，去除 n 个，直接输入数字</td>\n</tr>\n<tr>\n<td>skip</td>\n<td>跳过 n 个</td>\n</tr>\n<tr>\n<td>takeLast</td>\n<td>取后面 n 个</td>\n</tr>\n<tr>\n<td>last</td>\n<td>最后一个</td>\n</tr>\n<tr>\n<td>merge</td>\n<td>对各个 observable 送出的值做”或“处理</td>\n</tr>\n<tr>\n<td>combineLatest</td>\n<td>取得各个 observable 最后送出的值</td>\n</tr>\n<tr>\n<td>zip</td>\n<td>分别在推出第 n 个数的时候触发 同时</td>\n</tr>\n<tr>\n<td>scan</td>\n<td>逐次的从 observable 获取订阅的值，执行函数</td>\n</tr>\n<tr>\n<td>debounceTime</td>\n<td>消抖时间</td>\n</tr>\n<tr>\n<td>distinct</td>\n<td>去重</td>\n</tr>\n<tr>\n<td>distinctUntilChanged</td>\n<td>去重，只和最近的上一个的值进行比较</td>\n</tr>\n<tr>\n<td>repeat</td>\n<td>重复次数或者无限</td>\n</tr>\n<tr>\n<td>retryWhen</td>\n<td>一个回调，接受一个由 error 组成的 Observable 并且会循环</td>\n</tr>\n<tr>\n<td>switch</td>\n<td>数组的 flatten</td>\n</tr>\n</tbody></table>\n","site":{"data":{}},"length":2852,"excerpt":"<h1 id=\"RxJS-学习\"><a href=\"#RxJS-学习\" class=\"headerlink\" title=\"RxJS 学习\"></a>RxJS 学习</h1><p>Reactive 响应式编程是一种思维模式，并且针对各种语言都有其各自的实现，如：RxJava、RxGo、RxJS 等等。</p>\n<p>在前端领域 Reactive 响应式使用的比较多的 RxJS，比如在<strong>Angular</strong>和<strong>Nestjs</strong>等框架中就有内置 RxJS。</p>\n<p>RxJS 是 Reactive Extensions for JavaScript 的缩写，起源于 Reactive Extensions，是一个基于可观测数据流 Stream 结合观察者模式和迭代器模式的一种异步编程的应用库。</p>\n<p>官网声称可以讲 Rxjs 理解为处理事件的“Lodash”<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20220411193345.png\"></p>","more":"<h2 id=\"认识-Observable-和-Observe\"><a href=\"#认识-Observable-和-Observe\" class=\"headerlink\" title=\"认识 Observable 和 Observe\"></a><strong>认识 Observable 和 Observe</strong></h2><p>首先我们需要说一下简单的观察者模式 Observe</p>\n<p>其实我们最简单的点击事件就是一种观察者模式</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">clickHandler</span>(<span class=\"params\">event</span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;user click!&quot;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">document</span>.<span class=\"property\">body</span>.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&quot;click&quot;</span>, clickHandler);</span><br></pre></td></tr></table></figure>\n\n<p>我们也可以简单的手写一个类来模拟。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Producer</span> &#123;</span><br><span class=\"line\">  <span class=\"title function_\">constructor</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">listeners</span> = [];</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"title function_\">addListener</span>(<span class=\"params\">listener</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> listener === <span class=\"string\">&quot;function&quot;</span>) &#123;</span><br><span class=\"line\">      <span class=\"variable language_\">this</span>.<span class=\"property\">listeners</span>.<span class=\"title function_\">push</span>(listener);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Error</span>(<span class=\"string\">&quot;listener 必須是 function&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"title function_\">removeListener</span>(<span class=\"params\">listener</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">listeners</span>.<span class=\"title function_\">splice</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">listeners</span>.<span class=\"title function_\">indexOf</span>(listener), <span class=\"number\">1</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"title function_\">notify</span>(<span class=\"params\">message</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">listeners</span>.<span class=\"title function_\">forEach</span>(<span class=\"function\">(<span class=\"params\">listener</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"title function_\">listener</span>(message);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>我们将数据放在数组中，需要的时候在遍历调用</p>\n<p>还有一种是迭代器模式</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> iterator = arr[<span class=\"title class_\">Symbol</span>.<span class=\"property\">iterator</span>]();</span><br><span class=\"line\"></span><br><span class=\"line\">iterator.<span class=\"title function_\">next</span>();</span><br><span class=\"line\"><span class=\"comment\">// &#123; value: 1, done: false &#125;</span></span><br><span class=\"line\">iterator.<span class=\"title function_\">next</span>();</span><br><span class=\"line\"><span class=\"comment\">// &#123; value: 2, done: false &#125;</span></span><br><span class=\"line\">iterator.<span class=\"title function_\">next</span>();</span><br><span class=\"line\"><span class=\"comment\">// &#123; value: 3, done: false &#125;</span></span><br><span class=\"line\">iterator.<span class=\"title function_\">next</span>();</span><br><span class=\"line\"><span class=\"comment\">// &#123; value: undefined, done: true &#125;</span></span><br></pre></td></tr></table></figure>\n\n<p>而<strong>Observable</strong>具有以上两者的通性，都是渐进式的获取值<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20220411193200.png\"></p>\n<p><strong>Observable 就像是一个序列，里面的元素会随着时间推送</strong></p>\n<h2 id=\"创建-Observable\"><a href=\"#创建-Observable\" class=\"headerlink\" title=\"创建 Observable\"></a><strong>创建 Observable</strong></h2><p>create</p>\n<ul>\n<li><p>create</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> observable = <span class=\"title class_\">Rx</span>.<span class=\"property\">Observable</span>.<span class=\"title function_\">create</span>(<span class=\"keyword\">function</span> (<span class=\"params\">observer</span>) &#123;</span><br><span class=\"line\">  observer.<span class=\"title function_\">next</span>(<span class=\"string\">&quot;Jerry&quot;</span>);</span><br><span class=\"line\">  observer.<span class=\"title function_\">next</span>(<span class=\"string\">&quot;anna&quot;</span>);</span><br><span class=\"line\">  <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    observer.<span class=\"title function_\">next</span>(<span class=\"string\">&quot;RxJS 30 Days!&quot;</span>);</span><br><span class=\"line\">  &#125;, <span class=\"number\">30</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;observable: &quot;</span>, observable);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;start&quot;</span>);</span><br><span class=\"line\">observable.<span class=\"title function_\">subscribe</span>(&#123;</span><br><span class=\"line\">  <span class=\"attr\">next</span>: <span class=\"keyword\">function</span> (<span class=\"params\">value</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(value);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">complete</span>: <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;complete!&quot;</span>);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">error</span>: <span class=\"keyword\">function</span> (<span class=\"params\">error</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(error);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;end&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<p>of</p>\n<ul>\n<li>of<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> source = <span class=\"title class_\">Rx</span>.<span class=\"property\">Observable</span>.<span class=\"title function_\">of</span>(<span class=\"string\">&quot;jerry&quot;</span>, <span class=\"string\">&quot;Anna&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<p>from 把类数组的值转换为 observable</p>\n<ul>\n<li>from<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Set, WeakSet, Iterator</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"string\">&quot;jerry&quot;</span>, <span class=\"string\">&quot;Anna&quot;</span>, <span class=\"number\">2017</span>, <span class=\"number\">2016</span>, <span class=\"string\">&quot;30 days&quot;</span>];</span><br><span class=\"line\"><span class=\"keyword\">var</span> source = <span class=\"title class_\">Rx</span>.<span class=\"property\">Observable</span>.<span class=\"title function_\">from</span>(arr);</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<p>empty 没有做任何事</p>\n<ul>\n<li>empty<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> source = <span class=\"title class_\">Rx</span>.<span class=\"property\">Observable</span>.<span class=\"title function_\">empty</span>();</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<p><em>never</em></p>\n<ul>\n<li>never 都不会发生，它只是一个可以观察到的存在<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> source = <span class=\"title class_\">Rx</span>.<span class=\"property\">Observable</span>.<span class=\"title function_\">never</span>();</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<p>throw 抛出错误</p>\n<ul>\n<li>throw<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> source = <span class=\"title class_\">Rx</span>.<span class=\"property\">Observable</span>.<span class=\"keyword\">throw</span>(<span class=\"string\">&quot;Oop!&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<p>timer 间隔输出数字</p>\n<ul>\n<li>timer<br>两个参数，第一个参数表示第一个输出的延迟时间；第二个参数表示后序输出的间隔时间，没有的话就只输出一个数字</li>\n</ul>\n<p>interval 间隔输出数字</p>\n<p>fromEvent 将事件转换成 observable 序列</p>\n<p>fromPromise 将*<strong>*promise**</strong>转换成 observable 序列</p>\n<p>Rxjs 提供了一些纯函数作为工具函数，叫做 Operator。</p>\n<p>Rxjs 的 operator 可以和数组的一些方法类比起来学习</p>\n<table>\n<thead>\n<tr>\n<th>RxJS</th>\n<th>类比学习</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>map</td>\n<td>和数组 map 一样，对每一项执行函数并返回</td>\n</tr>\n<tr>\n<td>concat</td>\n<td>和数组 concat 类似，做 observable 的拼接</td>\n</tr>\n<tr>\n<td>take</td>\n<td>和数组 slice 类似，去除 n 个，直接输入数字</td>\n</tr>\n<tr>\n<td>skip</td>\n<td>跳过 n 个</td>\n</tr>\n<tr>\n<td>takeLast</td>\n<td>取后面 n 个</td>\n</tr>\n<tr>\n<td>last</td>\n<td>最后一个</td>\n</tr>\n<tr>\n<td>merge</td>\n<td>对各个 observable 送出的值做”或“处理</td>\n</tr>\n<tr>\n<td>combineLatest</td>\n<td>取得各个 observable 最后送出的值</td>\n</tr>\n<tr>\n<td>zip</td>\n<td>分别在推出第 n 个数的时候触发 同时</td>\n</tr>\n<tr>\n<td>scan</td>\n<td>逐次的从 observable 获取订阅的值，执行函数</td>\n</tr>\n<tr>\n<td>debounceTime</td>\n<td>消抖时间</td>\n</tr>\n<tr>\n<td>distinct</td>\n<td>去重</td>\n</tr>\n<tr>\n<td>distinctUntilChanged</td>\n<td>去重，只和最近的上一个的值进行比较</td>\n</tr>\n<tr>\n<td>repeat</td>\n<td>重复次数或者无限</td>\n</tr>\n<tr>\n<td>retryWhen</td>\n<td>一个回调，接受一个由 error 组成的 Observable 并且会循环</td>\n</tr>\n<tr>\n<td>switch</td>\n<td>数组的 flatten</td>\n</tr>\n</tbody></table>"},{"title":"Github在线IDE初体验","abbrlink":"73c1c21d","translate_title":"github-online-ide-first-experience","date":"2020-10-14T13:21:27.000Z","_content":"\n之前就有听说 Github 将推出在线 IDE，一搜索发现很多结果。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201014212657.png)\n\n现在 Github 的在线 IDE 发布一段时间了，官方命名为：[Github Codespaces](https://github.com/features/codespaces)（点击可以申请），今天我们就来体验一下。\n\n<!-- more -->\n\n## 基础体验\n\n在这里，我就拿本博客的[仓库](https://github.com/kitety/blog)来简单体验一下 Github Codespaces。\n\n### 创建 IDE\n\n在 Clone 的按钮选择`Open With Codespaces`\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-14/1602682721438-image.png)\n进入之后会列出已有的 IDE 列表，没有的话点击下面的新建就是了。\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-14/1602682784043-image.png)\n\n### 进入 IDE\n\n开始进入是在初始化，然后就是同步一些配置，会发现在 Vscode 的配置和插件扩展都会被同步过来（当然，前提是你本地的 VSC 和自己的 Github 绑定起来，并且同步配置）。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-14/1602682883142-image.png)\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-14/1602683153389-image.png)\n**并且可以看到，IDE 可以自动识别 package.json 安装依赖，进来就自动安装好了。**\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-14/1602682955735-image.png)\n\n点击查看日志还可以查看初始化的日志。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-14/1602683024095-image.png)\n\n### 基本使用\n\n#### 预装基础环境\n\n简单的几行代码 我们可以发现 IDE 已经预装了 node、docker、npm、git、python 等等基础开发环境。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-14/1602690279501-image.png)\n\n#### 启动项目\n\n首先 **全局安装 Hexo**`yarn global add hexo`，再启动项目`yarn d`.\n\n因为 github 的环境在外面，因此安装速度还是很快的，纵享丝滑。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-14/1602690553256-image.png)\n\n**外部端口的打开**\n\n如果我们的页面需要启动本地端口，IDE 也会提示出来有外部端口。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-14/1602690647172-image.png)\n\n我们也可以在`Remote Explorer`看到全部的端口映射情况\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-15/1602694549227-image.png)\n\n我们点击在浏览器打开，然后就可以看到页面了。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-15/1602694402020-image.png)\n\n当我们修改之后，在侧边栏至直接提交就是了，简单快捷。也不用任何的设置。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-15/1602694872590-image.png)\n\n## 更多好玩的\n\n我们的项目不仅仅是前端项目，也有可能是后端 Server，这里我就用一个[后端 Server](https://github.com/kitety/likeReddit)来简单演示一下。\n\n### 安装依赖跑起来\n\n- 全局安装 nodemon\n- 进入 server 目录安装依赖\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015152911.png)\n很明显报错，因为我们的 server 需要连接 PostgreSQL，而我们没有安装，因此报错。\n\n### 错误的安装方法\n\n找到一篇[教程](https://www.runoob.com/postgresql/linux-install-postgresql.html)，照着代码跑起来。\n\n```bash\nsudo apt-get update\nsudo apt-get install postgresql postgresql-client\n# 创建一个数据库超级用户 postgres\nsudo -i -u postgres\n```\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015153252.png)\n最后，我们会卡在这里，因为我们不知道 codespace 的密码，因此安装失败\n\n### docker 出马\n\n我们可以观察到 codespace 已经为我们安装了 docker，而且在现在相当流行容器化部署，上面的那种安装方式也不够优雅。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015153359.png)\n\n因此运行命令，安装 postgresql\n\n```bash\ndocker run -p 5432:5432 -v /home/docker/postgresql/data:/var/lib/postgresql/data -e POSTGRES_PASSWORD=123456 -e TZ=PRC -d --name=some-postgres postgres\n//-p端口映射\n//-v将数据存到宿主服务器\n//-e POSTGRES_PASSWORD 密码（默认用户名postgres）\n//-e TZ=PRC时区，中国\n//-d后台运行\n//--name容器名称\n```\n\n运行之后，找不到镜像会自动去拉取镜像\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015153646.png)\n查看下状态\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015153710.png)\n现在重启 server，发现已经可以连接上了。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015153818.png)\n\n### 端口\n\n我们可以在`Forwarded Ports`增加端口转发\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015153909.png)\n简单演示一下 get 请求，并且是即时的，修改之后可以通过域名来访问。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015154129.png)\n顺便说一句，如果我们在代码中写好 url 地址，就可以直接用鼠标在命令行打开对应端口，网址也会被进行替换。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015154329.png)\n\n### 注意\n\n但是也需要注意，如果我们用 postman 去请求就无法正常请求结果。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015154656.png)\n如果我们访问`/graphql`,请求就会提示`Server cannot be reached`和一些跨域错误。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015154819.png)\n\n## 总结\n\n### 优点\n\n俗话说，工欲善其事必先利其器。\n\n编程更重要的是一种思想，而编码更重要的是去表达思想。\n\n如果我们将配置环境，机器选择的的步骤省下来，让自己更加专注于思想表达，专注于编码的话，这样会让我们事半功倍。而现在 Github IDE 就可以看成 VSC 的网页版。如果你将 VSC 的配置同步到 Github 账户的话，你打开在线 IDE 的时候就会直接同步配置，你会很快上手。\n\n除此之外，Github 的里面预装各种环境，让你不再苦恼于环境安装，而且所处的网络环境也很棒，各种库、配置下载起来也是很快，我想这对我们的帮助也是很大的。比如再也不用纠结`node-sass`下载不下等尴尬场景。\n\n**遇到紧急的事情，一个浏览器就可以让你专注开发，这难道不香吗？**\n\n### 不足\n\n虽然 Github 在线 IDE 有很多优点,但是还是有一些不足，肯定不能和 VSC 真机比拟。比如一些接口`/graphql`，就没有本地真机开发的那么爽。除此之外，真机的 VSC 就有很多辅助扩展。比如 PicGo 来实现图片上传到 Github 做图床，在浏览器 IDE 里面经过测试是跑不通的。\n\n因为每个人所处的网络环境不同，不用高级姿势访问有可能会出现链接断开的情况，这倒是有点硬伤。🤣\n\n## 结语\n\n之前听过“阿里 云电脑”，加上现在 5G 的逐渐普及，说不定未来大家需要的只是一个显示器，可以完成学习、工作和娱乐，配置全部都在远端。听起来天方夜谭，说不定在未来就会实现。\n\n一个新兴事物的出来，肯定引起人们的好奇和质疑。仔细想想 Github 被微软收购之后，先后推出了个人无限私有仓库，免费使用 Github Actions，再有 Github Codespaces。而微软也先后推出 TS、VSC 等市场举足轻重的开源项目。我所看到是开源界的发展和繁荣，也希望未来越来越好。\n\n撒花！\n","source":"_posts/Github在线IDE初体验.md","raw":"---\ntitle: Github在线IDE初体验\ntags:\n  - Github\nabbrlink: 73c1c21d\ntranslate_title: github-online-ide-first-experience\ndate: 2020-10-14 21:21:27\n---\n\n之前就有听说 Github 将推出在线 IDE，一搜索发现很多结果。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201014212657.png)\n\n现在 Github 的在线 IDE 发布一段时间了，官方命名为：[Github Codespaces](https://github.com/features/codespaces)（点击可以申请），今天我们就来体验一下。\n\n<!-- more -->\n\n## 基础体验\n\n在这里，我就拿本博客的[仓库](https://github.com/kitety/blog)来简单体验一下 Github Codespaces。\n\n### 创建 IDE\n\n在 Clone 的按钮选择`Open With Codespaces`\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-14/1602682721438-image.png)\n进入之后会列出已有的 IDE 列表，没有的话点击下面的新建就是了。\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-14/1602682784043-image.png)\n\n### 进入 IDE\n\n开始进入是在初始化，然后就是同步一些配置，会发现在 Vscode 的配置和插件扩展都会被同步过来（当然，前提是你本地的 VSC 和自己的 Github 绑定起来，并且同步配置）。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-14/1602682883142-image.png)\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-14/1602683153389-image.png)\n**并且可以看到，IDE 可以自动识别 package.json 安装依赖，进来就自动安装好了。**\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-14/1602682955735-image.png)\n\n点击查看日志还可以查看初始化的日志。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-14/1602683024095-image.png)\n\n### 基本使用\n\n#### 预装基础环境\n\n简单的几行代码 我们可以发现 IDE 已经预装了 node、docker、npm、git、python 等等基础开发环境。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-14/1602690279501-image.png)\n\n#### 启动项目\n\n首先 **全局安装 Hexo**`yarn global add hexo`，再启动项目`yarn d`.\n\n因为 github 的环境在外面，因此安装速度还是很快的，纵享丝滑。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-14/1602690553256-image.png)\n\n**外部端口的打开**\n\n如果我们的页面需要启动本地端口，IDE 也会提示出来有外部端口。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-14/1602690647172-image.png)\n\n我们也可以在`Remote Explorer`看到全部的端口映射情况\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-15/1602694549227-image.png)\n\n我们点击在浏览器打开，然后就可以看到页面了。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-15/1602694402020-image.png)\n\n当我们修改之后，在侧边栏至直接提交就是了，简单快捷。也不用任何的设置。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-15/1602694872590-image.png)\n\n## 更多好玩的\n\n我们的项目不仅仅是前端项目，也有可能是后端 Server，这里我就用一个[后端 Server](https://github.com/kitety/likeReddit)来简单演示一下。\n\n### 安装依赖跑起来\n\n- 全局安装 nodemon\n- 进入 server 目录安装依赖\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015152911.png)\n很明显报错，因为我们的 server 需要连接 PostgreSQL，而我们没有安装，因此报错。\n\n### 错误的安装方法\n\n找到一篇[教程](https://www.runoob.com/postgresql/linux-install-postgresql.html)，照着代码跑起来。\n\n```bash\nsudo apt-get update\nsudo apt-get install postgresql postgresql-client\n# 创建一个数据库超级用户 postgres\nsudo -i -u postgres\n```\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015153252.png)\n最后，我们会卡在这里，因为我们不知道 codespace 的密码，因此安装失败\n\n### docker 出马\n\n我们可以观察到 codespace 已经为我们安装了 docker，而且在现在相当流行容器化部署，上面的那种安装方式也不够优雅。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015153359.png)\n\n因此运行命令，安装 postgresql\n\n```bash\ndocker run -p 5432:5432 -v /home/docker/postgresql/data:/var/lib/postgresql/data -e POSTGRES_PASSWORD=123456 -e TZ=PRC -d --name=some-postgres postgres\n//-p端口映射\n//-v将数据存到宿主服务器\n//-e POSTGRES_PASSWORD 密码（默认用户名postgres）\n//-e TZ=PRC时区，中国\n//-d后台运行\n//--name容器名称\n```\n\n运行之后，找不到镜像会自动去拉取镜像\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015153646.png)\n查看下状态\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015153710.png)\n现在重启 server，发现已经可以连接上了。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015153818.png)\n\n### 端口\n\n我们可以在`Forwarded Ports`增加端口转发\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015153909.png)\n简单演示一下 get 请求，并且是即时的，修改之后可以通过域名来访问。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015154129.png)\n顺便说一句，如果我们在代码中写好 url 地址，就可以直接用鼠标在命令行打开对应端口，网址也会被进行替换。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015154329.png)\n\n### 注意\n\n但是也需要注意，如果我们用 postman 去请求就无法正常请求结果。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015154656.png)\n如果我们访问`/graphql`,请求就会提示`Server cannot be reached`和一些跨域错误。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015154819.png)\n\n## 总结\n\n### 优点\n\n俗话说，工欲善其事必先利其器。\n\n编程更重要的是一种思想，而编码更重要的是去表达思想。\n\n如果我们将配置环境，机器选择的的步骤省下来，让自己更加专注于思想表达，专注于编码的话，这样会让我们事半功倍。而现在 Github IDE 就可以看成 VSC 的网页版。如果你将 VSC 的配置同步到 Github 账户的话，你打开在线 IDE 的时候就会直接同步配置，你会很快上手。\n\n除此之外，Github 的里面预装各种环境，让你不再苦恼于环境安装，而且所处的网络环境也很棒，各种库、配置下载起来也是很快，我想这对我们的帮助也是很大的。比如再也不用纠结`node-sass`下载不下等尴尬场景。\n\n**遇到紧急的事情，一个浏览器就可以让你专注开发，这难道不香吗？**\n\n### 不足\n\n虽然 Github 在线 IDE 有很多优点,但是还是有一些不足，肯定不能和 VSC 真机比拟。比如一些接口`/graphql`，就没有本地真机开发的那么爽。除此之外，真机的 VSC 就有很多辅助扩展。比如 PicGo 来实现图片上传到 Github 做图床，在浏览器 IDE 里面经过测试是跑不通的。\n\n因为每个人所处的网络环境不同，不用高级姿势访问有可能会出现链接断开的情况，这倒是有点硬伤。🤣\n\n## 结语\n\n之前听过“阿里 云电脑”，加上现在 5G 的逐渐普及，说不定未来大家需要的只是一个显示器，可以完成学习、工作和娱乐，配置全部都在远端。听起来天方夜谭，说不定在未来就会实现。\n\n一个新兴事物的出来，肯定引起人们的好奇和质疑。仔细想想 Github 被微软收购之后，先后推出了个人无限私有仓库，免费使用 Github Actions，再有 Github Codespaces。而微软也先后推出 TS、VSC 等市场举足轻重的开源项目。我所看到是开源界的发展和繁荣，也希望未来越来越好。\n\n撒花！\n","slug":"Github在线IDE初体验","published":1,"updated":"2021-09-29T07:53:51.814Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy6ai000ip4vl3c5o9wwm","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>之前就有听说 Github 将推出在线 IDE，一搜索发现很多结果。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201014212657.png\"></p>\n<p>现在 Github 的在线 IDE 发布一段时间了，官方命名为：<a href=\"https://github.com/features/codespaces\">Github Codespaces</a>（点击可以申请），今天我们就来体验一下。</p>\n<span id=\"more\"></span>\n\n<h2 id=\"基础体验\"><a href=\"#基础体验\" class=\"headerlink\" title=\"基础体验\"></a>基础体验</h2><p>在这里，我就拿本博客的<a href=\"https://github.com/kitety/blog\">仓库</a>来简单体验一下 Github Codespaces。</p>\n<h3 id=\"创建-IDE\"><a href=\"#创建-IDE\" class=\"headerlink\" title=\"创建 IDE\"></a>创建 IDE</h3><p>在 Clone 的按钮选择<code>Open With Codespaces</code><br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-14/1602682721438-image.png\" alt=\"image\"><br>进入之后会列出已有的 IDE 列表，没有的话点击下面的新建就是了。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-14/1602682784043-image.png\" alt=\"image\"></p>\n<h3 id=\"进入-IDE\"><a href=\"#进入-IDE\" class=\"headerlink\" title=\"进入 IDE\"></a>进入 IDE</h3><p>开始进入是在初始化，然后就是同步一些配置，会发现在 Vscode 的配置和插件扩展都会被同步过来（当然，前提是你本地的 VSC 和自己的 Github 绑定起来，并且同步配置）。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-14/1602682883142-image.png\" alt=\"image\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-14/1602683153389-image.png\" alt=\"image\"><br><strong>并且可以看到，IDE 可以自动识别 package.json 安装依赖，进来就自动安装好了。</strong><br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-14/1602682955735-image.png\" alt=\"image\"></p>\n<p>点击查看日志还可以查看初始化的日志。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-14/1602683024095-image.png\" alt=\"image\"></p>\n<h3 id=\"基本使用\"><a href=\"#基本使用\" class=\"headerlink\" title=\"基本使用\"></a>基本使用</h3><h4 id=\"预装基础环境\"><a href=\"#预装基础环境\" class=\"headerlink\" title=\"预装基础环境\"></a>预装基础环境</h4><p>简单的几行代码 我们可以发现 IDE 已经预装了 node、docker、npm、git、python 等等基础开发环境。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-14/1602690279501-image.png\" alt=\"image\"></p>\n<h4 id=\"启动项目\"><a href=\"#启动项目\" class=\"headerlink\" title=\"启动项目\"></a>启动项目</h4><p>首先 <strong>全局安装 Hexo</strong><code>yarn global add hexo</code>，再启动项目<code>yarn d</code>.</p>\n<p>因为 github 的环境在外面，因此安装速度还是很快的，纵享丝滑。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-14/1602690553256-image.png\" alt=\"image\"></p>\n<p><strong>外部端口的打开</strong></p>\n<p>如果我们的页面需要启动本地端口，IDE 也会提示出来有外部端口。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-14/1602690647172-image.png\" alt=\"image\"></p>\n<p>我们也可以在<code>Remote Explorer</code>看到全部的端口映射情况</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-15/1602694549227-image.png\"></p>\n<p>我们点击在浏览器打开，然后就可以看到页面了。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-15/1602694402020-image.png\"></p>\n<p>当我们修改之后，在侧边栏至直接提交就是了，简单快捷。也不用任何的设置。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-15/1602694872590-image.png\"></p>\n<h2 id=\"更多好玩的\"><a href=\"#更多好玩的\" class=\"headerlink\" title=\"更多好玩的\"></a>更多好玩的</h2><p>我们的项目不仅仅是前端项目，也有可能是后端 Server，这里我就用一个<a href=\"https://github.com/kitety/likeReddit\">后端 Server</a>来简单演示一下。</p>\n<h3 id=\"安装依赖跑起来\"><a href=\"#安装依赖跑起来\" class=\"headerlink\" title=\"安装依赖跑起来\"></a>安装依赖跑起来</h3><ul>\n<li>全局安装 nodemon</li>\n<li>进入 server 目录安装依赖</li>\n</ul>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015152911.png\"><br>很明显报错，因为我们的 server 需要连接 PostgreSQL，而我们没有安装，因此报错。</p>\n<h3 id=\"错误的安装方法\"><a href=\"#错误的安装方法\" class=\"headerlink\" title=\"错误的安装方法\"></a>错误的安装方法</h3><p>找到一篇<a href=\"https://www.runoob.com/postgresql/linux-install-postgresql.html\">教程</a>，照着代码跑起来。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get update</span><br><span class=\"line\">sudo apt-get install postgresql postgresql-client</span><br><span class=\"line\"><span class=\"comment\"># 创建一个数据库超级用户 postgres</span></span><br><span class=\"line\">sudo -i -u postgres</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015153252.png\"><br>最后，我们会卡在这里，因为我们不知道 codespace 的密码，因此安装失败</p>\n<h3 id=\"docker-出马\"><a href=\"#docker-出马\" class=\"headerlink\" title=\"docker 出马\"></a>docker 出马</h3><p>我们可以观察到 codespace 已经为我们安装了 docker，而且在现在相当流行容器化部署，上面的那种安装方式也不够优雅。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015153359.png\"></p>\n<p>因此运行命令，安装 postgresql</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -p 5432:5432 -v /home/docker/postgresql/data:/var/lib/postgresql/data -e POSTGRES_PASSWORD=123456 -e TZ=PRC -d --name=some-postgres postgres</span><br><span class=\"line\">//-p端口映射</span><br><span class=\"line\">//-v将数据存到宿主服务器</span><br><span class=\"line\">//-e POSTGRES_PASSWORD 密码（默认用户名postgres）</span><br><span class=\"line\">//-e TZ=PRC时区，中国</span><br><span class=\"line\">//-d后台运行</span><br><span class=\"line\">//--name容器名称</span><br></pre></td></tr></table></figure>\n\n<p>运行之后，找不到镜像会自动去拉取镜像<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015153646.png\"><br>查看下状态<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015153710.png\"><br>现在重启 server，发现已经可以连接上了。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015153818.png\"></p>\n<h3 id=\"端口\"><a href=\"#端口\" class=\"headerlink\" title=\"端口\"></a>端口</h3><p>我们可以在<code>Forwarded Ports</code>增加端口转发<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015153909.png\"><br>简单演示一下 get 请求，并且是即时的，修改之后可以通过域名来访问。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015154129.png\"><br>顺便说一句，如果我们在代码中写好 url 地址，就可以直接用鼠标在命令行打开对应端口，网址也会被进行替换。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015154329.png\"></p>\n<h3 id=\"注意\"><a href=\"#注意\" class=\"headerlink\" title=\"注意\"></a>注意</h3><p>但是也需要注意，如果我们用 postman 去请求就无法正常请求结果。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015154656.png\"><br>如果我们访问<code>/graphql</code>,请求就会提示<code>Server cannot be reached</code>和一些跨域错误。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015154819.png\"></p>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><h3 id=\"优点\"><a href=\"#优点\" class=\"headerlink\" title=\"优点\"></a>优点</h3><p>俗话说，工欲善其事必先利其器。</p>\n<p>编程更重要的是一种思想，而编码更重要的是去表达思想。</p>\n<p>如果我们将配置环境，机器选择的的步骤省下来，让自己更加专注于思想表达，专注于编码的话，这样会让我们事半功倍。而现在 Github IDE 就可以看成 VSC 的网页版。如果你将 VSC 的配置同步到 Github 账户的话，你打开在线 IDE 的时候就会直接同步配置，你会很快上手。</p>\n<p>除此之外，Github 的里面预装各种环境，让你不再苦恼于环境安装，而且所处的网络环境也很棒，各种库、配置下载起来也是很快，我想这对我们的帮助也是很大的。比如再也不用纠结<code>node-sass</code>下载不下等尴尬场景。</p>\n<p><strong>遇到紧急的事情，一个浏览器就可以让你专注开发，这难道不香吗？</strong></p>\n<h3 id=\"不足\"><a href=\"#不足\" class=\"headerlink\" title=\"不足\"></a>不足</h3><p>虽然 Github 在线 IDE 有很多优点,但是还是有一些不足，肯定不能和 VSC 真机比拟。比如一些接口<code>/graphql</code>，就没有本地真机开发的那么爽。除此之外，真机的 VSC 就有很多辅助扩展。比如 PicGo 来实现图片上传到 Github 做图床，在浏览器 IDE 里面经过测试是跑不通的。</p>\n<p>因为每个人所处的网络环境不同，不用高级姿势访问有可能会出现链接断开的情况，这倒是有点硬伤。🤣</p>\n<h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p>之前听过“阿里 云电脑”，加上现在 5G 的逐渐普及，说不定未来大家需要的只是一个显示器，可以完成学习、工作和娱乐，配置全部都在远端。听起来天方夜谭，说不定在未来就会实现。</p>\n<p>一个新兴事物的出来，肯定引起人们的好奇和质疑。仔细想想 Github 被微软收购之后，先后推出了个人无限私有仓库，免费使用 Github Actions，再有 Github Codespaces。而微软也先后推出 TS、VSC 等市场举足轻重的开源项目。我所看到是开源界的发展和繁荣，也希望未来越来越好。</p>\n<p>撒花！</p>\n","site":{"data":{}},"length":2205,"excerpt":"<p>之前就有听说 Github 将推出在线 IDE，一搜索发现很多结果。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201014212657.png\"></p>\n<p>现在 Github 的在线 IDE 发布一段时间了，官方命名为：<a href=\"https://github.com/features/codespaces\">Github Codespaces</a>（点击可以申请），今天我们就来体验一下。</p>","more":"<h2 id=\"基础体验\"><a href=\"#基础体验\" class=\"headerlink\" title=\"基础体验\"></a>基础体验</h2><p>在这里，我就拿本博客的<a href=\"https://github.com/kitety/blog\">仓库</a>来简单体验一下 Github Codespaces。</p>\n<h3 id=\"创建-IDE\"><a href=\"#创建-IDE\" class=\"headerlink\" title=\"创建 IDE\"></a>创建 IDE</h3><p>在 Clone 的按钮选择<code>Open With Codespaces</code><br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-14/1602682721438-image.png\" alt=\"image\"><br>进入之后会列出已有的 IDE 列表，没有的话点击下面的新建就是了。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-14/1602682784043-image.png\" alt=\"image\"></p>\n<h3 id=\"进入-IDE\"><a href=\"#进入-IDE\" class=\"headerlink\" title=\"进入 IDE\"></a>进入 IDE</h3><p>开始进入是在初始化，然后就是同步一些配置，会发现在 Vscode 的配置和插件扩展都会被同步过来（当然，前提是你本地的 VSC 和自己的 Github 绑定起来，并且同步配置）。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-14/1602682883142-image.png\" alt=\"image\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-14/1602683153389-image.png\" alt=\"image\"><br><strong>并且可以看到，IDE 可以自动识别 package.json 安装依赖，进来就自动安装好了。</strong><br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-14/1602682955735-image.png\" alt=\"image\"></p>\n<p>点击查看日志还可以查看初始化的日志。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-14/1602683024095-image.png\" alt=\"image\"></p>\n<h3 id=\"基本使用\"><a href=\"#基本使用\" class=\"headerlink\" title=\"基本使用\"></a>基本使用</h3><h4 id=\"预装基础环境\"><a href=\"#预装基础环境\" class=\"headerlink\" title=\"预装基础环境\"></a>预装基础环境</h4><p>简单的几行代码 我们可以发现 IDE 已经预装了 node、docker、npm、git、python 等等基础开发环境。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-14/1602690279501-image.png\" alt=\"image\"></p>\n<h4 id=\"启动项目\"><a href=\"#启动项目\" class=\"headerlink\" title=\"启动项目\"></a>启动项目</h4><p>首先 <strong>全局安装 Hexo</strong><code>yarn global add hexo</code>，再启动项目<code>yarn d</code>.</p>\n<p>因为 github 的环境在外面，因此安装速度还是很快的，纵享丝滑。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-14/1602690553256-image.png\" alt=\"image\"></p>\n<p><strong>外部端口的打开</strong></p>\n<p>如果我们的页面需要启动本地端口，IDE 也会提示出来有外部端口。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-14/1602690647172-image.png\" alt=\"image\"></p>\n<p>我们也可以在<code>Remote Explorer</code>看到全部的端口映射情况</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-15/1602694549227-image.png\"></p>\n<p>我们点击在浏览器打开，然后就可以看到页面了。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-15/1602694402020-image.png\"></p>\n<p>当我们修改之后，在侧边栏至直接提交就是了，简单快捷。也不用任何的设置。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-15/1602694872590-image.png\"></p>\n<h2 id=\"更多好玩的\"><a href=\"#更多好玩的\" class=\"headerlink\" title=\"更多好玩的\"></a>更多好玩的</h2><p>我们的项目不仅仅是前端项目，也有可能是后端 Server，这里我就用一个<a href=\"https://github.com/kitety/likeReddit\">后端 Server</a>来简单演示一下。</p>\n<h3 id=\"安装依赖跑起来\"><a href=\"#安装依赖跑起来\" class=\"headerlink\" title=\"安装依赖跑起来\"></a>安装依赖跑起来</h3><ul>\n<li>全局安装 nodemon</li>\n<li>进入 server 目录安装依赖</li>\n</ul>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015152911.png\"><br>很明显报错，因为我们的 server 需要连接 PostgreSQL，而我们没有安装，因此报错。</p>\n<h3 id=\"错误的安装方法\"><a href=\"#错误的安装方法\" class=\"headerlink\" title=\"错误的安装方法\"></a>错误的安装方法</h3><p>找到一篇<a href=\"https://www.runoob.com/postgresql/linux-install-postgresql.html\">教程</a>，照着代码跑起来。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get update</span><br><span class=\"line\">sudo apt-get install postgresql postgresql-client</span><br><span class=\"line\"><span class=\"comment\"># 创建一个数据库超级用户 postgres</span></span><br><span class=\"line\">sudo -i -u postgres</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015153252.png\"><br>最后，我们会卡在这里，因为我们不知道 codespace 的密码，因此安装失败</p>\n<h3 id=\"docker-出马\"><a href=\"#docker-出马\" class=\"headerlink\" title=\"docker 出马\"></a>docker 出马</h3><p>我们可以观察到 codespace 已经为我们安装了 docker，而且在现在相当流行容器化部署，上面的那种安装方式也不够优雅。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015153359.png\"></p>\n<p>因此运行命令，安装 postgresql</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -p 5432:5432 -v /home/docker/postgresql/data:/var/lib/postgresql/data -e POSTGRES_PASSWORD=123456 -e TZ=PRC -d --name=some-postgres postgres</span><br><span class=\"line\">//-p端口映射</span><br><span class=\"line\">//-v将数据存到宿主服务器</span><br><span class=\"line\">//-e POSTGRES_PASSWORD 密码（默认用户名postgres）</span><br><span class=\"line\">//-e TZ=PRC时区，中国</span><br><span class=\"line\">//-d后台运行</span><br><span class=\"line\">//--name容器名称</span><br></pre></td></tr></table></figure>\n\n<p>运行之后，找不到镜像会自动去拉取镜像<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015153646.png\"><br>查看下状态<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015153710.png\"><br>现在重启 server，发现已经可以连接上了。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015153818.png\"></p>\n<h3 id=\"端口\"><a href=\"#端口\" class=\"headerlink\" title=\"端口\"></a>端口</h3><p>我们可以在<code>Forwarded Ports</code>增加端口转发<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015153909.png\"><br>简单演示一下 get 请求，并且是即时的，修改之后可以通过域名来访问。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015154129.png\"><br>顺便说一句，如果我们在代码中写好 url 地址，就可以直接用鼠标在命令行打开对应端口，网址也会被进行替换。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015154329.png\"></p>\n<h3 id=\"注意\"><a href=\"#注意\" class=\"headerlink\" title=\"注意\"></a>注意</h3><p>但是也需要注意，如果我们用 postman 去请求就无法正常请求结果。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015154656.png\"><br>如果我们访问<code>/graphql</code>,请求就会提示<code>Server cannot be reached</code>和一些跨域错误。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201015154819.png\"></p>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><h3 id=\"优点\"><a href=\"#优点\" class=\"headerlink\" title=\"优点\"></a>优点</h3><p>俗话说，工欲善其事必先利其器。</p>\n<p>编程更重要的是一种思想，而编码更重要的是去表达思想。</p>\n<p>如果我们将配置环境，机器选择的的步骤省下来，让自己更加专注于思想表达，专注于编码的话，这样会让我们事半功倍。而现在 Github IDE 就可以看成 VSC 的网页版。如果你将 VSC 的配置同步到 Github 账户的话，你打开在线 IDE 的时候就会直接同步配置，你会很快上手。</p>\n<p>除此之外，Github 的里面预装各种环境，让你不再苦恼于环境安装，而且所处的网络环境也很棒，各种库、配置下载起来也是很快，我想这对我们的帮助也是很大的。比如再也不用纠结<code>node-sass</code>下载不下等尴尬场景。</p>\n<p><strong>遇到紧急的事情，一个浏览器就可以让你专注开发，这难道不香吗？</strong></p>\n<h3 id=\"不足\"><a href=\"#不足\" class=\"headerlink\" title=\"不足\"></a>不足</h3><p>虽然 Github 在线 IDE 有很多优点,但是还是有一些不足，肯定不能和 VSC 真机比拟。比如一些接口<code>/graphql</code>，就没有本地真机开发的那么爽。除此之外，真机的 VSC 就有很多辅助扩展。比如 PicGo 来实现图片上传到 Github 做图床，在浏览器 IDE 里面经过测试是跑不通的。</p>\n<p>因为每个人所处的网络环境不同，不用高级姿势访问有可能会出现链接断开的情况，这倒是有点硬伤。🤣</p>\n<h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p>之前听过“阿里 云电脑”，加上现在 5G 的逐渐普及，说不定未来大家需要的只是一个显示器，可以完成学习、工作和娱乐，配置全部都在远端。听起来天方夜谭，说不定在未来就会实现。</p>\n<p>一个新兴事物的出来，肯定引起人们的好奇和质疑。仔细想想 Github 被微软收购之后，先后推出了个人无限私有仓库，免费使用 Github Actions，再有 Github Codespaces。而微软也先后推出 TS、VSC 等市场举足轻重的开源项目。我所看到是开源界的发展和繁荣，也希望未来越来越好。</p>\n<p>撒花！</p>"},{"title":"TS学习及type-challenges实操","abbrlink":"c1f75643","translate_title":"ts-learning-and-typechallenges-practice","date":"2020-09-22T04:48:14.000Z","_content":"\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200922125418.png)\n之前朋友分享过一个仓库叫做[type-challenges](https://github.com/type-challenges/type-challenges)，里面的内容类似于用 TS 来“做题”，简而言之就是类型编程。\n\n因为我之前也学习过 TypeScript，在工作也使用过，因此想借此机会巩固一番。\n\n> 温故而知新，可以为师矣。\n\n<!-- more -->\n\n## 学习经历\n\n想起刚开始学习系统 TS 的时候还是 2019 年的 4 月份，那个时候已经在公司用了将近四个月的 TS 了。然后七月份进入第二家公司，发现公司也有使用 TS 开发项目的打算，然后我也准备了两次简单的分享。\n\n到现在也算是使用了一年半吧，感觉这个写起来真的是舒服，掌握了解决类型报错的问题之后，心中还是很有成就感的。\n\n### 一些笔记和资料\n\n- [自己学习写的 demo](https://github.com/kitety/typescript-study-demo)\n- [第一次分享 ppt](https://docs.google.com/presentation/d/14ivFX3OkPUpxbUObSsctKF4oAmbaAb5obHWZasXRjto/edit?usp=sharing)\n- [第二次分享文档](https://docs.google.com/document/d/1XnAOlL6DQkgLPRFFtxvjwYtDkYG314_Sk-9TCAvsRMQ/edit?usp=sharing)\n- [TS 中文文档](https://www.tslang.cn/docs/handbook/basic-types.html)\n- [TS 入门教程](https://ts.xcatliu.com/)\n- [高级类型](https://juejin.im/post/6844904068096196621)\n- [深入理解 TypeScript](https://jkchao.github.io/typescript-book-chinese/)\n\n## 未完待续\n","source":"_posts/TS之type-challenges实操.md","raw":"---\ntitle: TS学习及type-challenges实操\nabbrlink: c1f75643\ntags:\n  - TypeScript\ntranslate_title: ts-learning-and-typechallenges-practice\ndate: 2020-09-22 12:48:14\n---\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200922125418.png)\n之前朋友分享过一个仓库叫做[type-challenges](https://github.com/type-challenges/type-challenges)，里面的内容类似于用 TS 来“做题”，简而言之就是类型编程。\n\n因为我之前也学习过 TypeScript，在工作也使用过，因此想借此机会巩固一番。\n\n> 温故而知新，可以为师矣。\n\n<!-- more -->\n\n## 学习经历\n\n想起刚开始学习系统 TS 的时候还是 2019 年的 4 月份，那个时候已经在公司用了将近四个月的 TS 了。然后七月份进入第二家公司，发现公司也有使用 TS 开发项目的打算，然后我也准备了两次简单的分享。\n\n到现在也算是使用了一年半吧，感觉这个写起来真的是舒服，掌握了解决类型报错的问题之后，心中还是很有成就感的。\n\n### 一些笔记和资料\n\n- [自己学习写的 demo](https://github.com/kitety/typescript-study-demo)\n- [第一次分享 ppt](https://docs.google.com/presentation/d/14ivFX3OkPUpxbUObSsctKF4oAmbaAb5obHWZasXRjto/edit?usp=sharing)\n- [第二次分享文档](https://docs.google.com/document/d/1XnAOlL6DQkgLPRFFtxvjwYtDkYG314_Sk-9TCAvsRMQ/edit?usp=sharing)\n- [TS 中文文档](https://www.tslang.cn/docs/handbook/basic-types.html)\n- [TS 入门教程](https://ts.xcatliu.com/)\n- [高级类型](https://juejin.im/post/6844904068096196621)\n- [深入理解 TypeScript](https://jkchao.github.io/typescript-book-chinese/)\n\n## 未完待续\n","slug":"TS之type-challenges实操","published":1,"updated":"2021-09-29T07:53:51.815Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy6ap000kp4vl0d61hp8l","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200922125418.png\"><br>之前朋友分享过一个仓库叫做<a href=\"https://github.com/type-challenges/type-challenges\">type-challenges</a>，里面的内容类似于用 TS 来“做题”，简而言之就是类型编程。</p>\n<p>因为我之前也学习过 TypeScript，在工作也使用过，因此想借此机会巩固一番。</p>\n<blockquote>\n<p>温故而知新，可以为师矣。</p>\n</blockquote>\n<span id=\"more\"></span>\n\n<h2 id=\"学习经历\"><a href=\"#学习经历\" class=\"headerlink\" title=\"学习经历\"></a>学习经历</h2><p>想起刚开始学习系统 TS 的时候还是 2019 年的 4 月份，那个时候已经在公司用了将近四个月的 TS 了。然后七月份进入第二家公司，发现公司也有使用 TS 开发项目的打算，然后我也准备了两次简单的分享。</p>\n<p>到现在也算是使用了一年半吧，感觉这个写起来真的是舒服，掌握了解决类型报错的问题之后，心中还是很有成就感的。</p>\n<h3 id=\"一些笔记和资料\"><a href=\"#一些笔记和资料\" class=\"headerlink\" title=\"一些笔记和资料\"></a>一些笔记和资料</h3><ul>\n<li><a href=\"https://github.com/kitety/typescript-study-demo\">自己学习写的 demo</a></li>\n<li><a href=\"https://docs.google.com/presentation/d/14ivFX3OkPUpxbUObSsctKF4oAmbaAb5obHWZasXRjto/edit?usp=sharing\">第一次分享 ppt</a></li>\n<li><a href=\"https://docs.google.com/document/d/1XnAOlL6DQkgLPRFFtxvjwYtDkYG314_Sk-9TCAvsRMQ/edit?usp=sharing\">第二次分享文档</a></li>\n<li><a href=\"https://www.tslang.cn/docs/handbook/basic-types.html\">TS 中文文档</a></li>\n<li><a href=\"https://ts.xcatliu.com/\">TS 入门教程</a></li>\n<li><a href=\"https://juejin.im/post/6844904068096196621\">高级类型</a></li>\n<li><a href=\"https://jkchao.github.io/typescript-book-chinese/\">深入理解 TypeScript</a></li>\n</ul>\n<h2 id=\"未完待续\"><a href=\"#未完待续\" class=\"headerlink\" title=\"未完待续\"></a>未完待续</h2>","site":{"data":{}},"length":325,"excerpt":"<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200922125418.png\"><br>之前朋友分享过一个仓库叫做<a href=\"https://github.com/type-challenges/type-challenges\">type-challenges</a>，里面的内容类似于用 TS 来“做题”，简而言之就是类型编程。</p>\n<p>因为我之前也学习过 TypeScript，在工作也使用过，因此想借此机会巩固一番。</p>\n<blockquote>\n<p>温故而知新，可以为师矣。</p>\n</blockquote>","more":"<h2 id=\"学习经历\"><a href=\"#学习经历\" class=\"headerlink\" title=\"学习经历\"></a>学习经历</h2><p>想起刚开始学习系统 TS 的时候还是 2019 年的 4 月份，那个时候已经在公司用了将近四个月的 TS 了。然后七月份进入第二家公司，发现公司也有使用 TS 开发项目的打算，然后我也准备了两次简单的分享。</p>\n<p>到现在也算是使用了一年半吧，感觉这个写起来真的是舒服，掌握了解决类型报错的问题之后，心中还是很有成就感的。</p>\n<h3 id=\"一些笔记和资料\"><a href=\"#一些笔记和资料\" class=\"headerlink\" title=\"一些笔记和资料\"></a>一些笔记和资料</h3><ul>\n<li><a href=\"https://github.com/kitety/typescript-study-demo\">自己学习写的 demo</a></li>\n<li><a href=\"https://docs.google.com/presentation/d/14ivFX3OkPUpxbUObSsctKF4oAmbaAb5obHWZasXRjto/edit?usp=sharing\">第一次分享 ppt</a></li>\n<li><a href=\"https://docs.google.com/document/d/1XnAOlL6DQkgLPRFFtxvjwYtDkYG314_Sk-9TCAvsRMQ/edit?usp=sharing\">第二次分享文档</a></li>\n<li><a href=\"https://www.tslang.cn/docs/handbook/basic-types.html\">TS 中文文档</a></li>\n<li><a href=\"https://ts.xcatliu.com/\">TS 入门教程</a></li>\n<li><a href=\"https://juejin.im/post/6844904068096196621\">高级类型</a></li>\n<li><a href=\"https://jkchao.github.io/typescript-book-chinese/\">深入理解 TypeScript</a></li>\n</ul>\n<h2 id=\"未完待续\"><a href=\"#未完待续\" class=\"headerlink\" title=\"未完待续\"></a>未完待续</h2>"},{"title":"实现自己的React之渲染Class Component","abbrlink":"9d7d5067","translate_title":"realize-your-own-react-rendering-class-component","date":"2020-11-05T14:25:17.000Z","_content":"\n## 前言\n\n之前我们已经实现了字符串和数字、原生 DOM 的渲染，接下来我们将渲染 Class Component。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-11-5/1604586613544-image.png)\n\n<!-- more -->\n\n## 原理分析\n\n在 React 15 中，更新主要是由 Class Component 的 setState 执行更新的，然后更新的子元素再依次更新。而更新涉及到 DOM diff，我们将在后面的文章讲述。现在，我们先讲讲 Class Component 的渲染。\n\n### 思路分析\n\n在 React 中我们会这样写一个类。其中包含了一个 componentWillMount 等生命周期，handleClick 等内部方法，render 函数等，其中 render 函数 return 的才是我们真正渲染的元素，handleClick 函数调用会触发 setState 更新。\n\n```jsx\nclass Counter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { number: 1 };\n  }\n  componentWillMount() {\n    console.log(\"Counter componentWillMount\");\n  }\n  componentDidMount() {\n    console.log(\"Counter componentDidMount\");\n  }\n  handleClick = () => {\n    this.setState({ number: this.state.number + 1 });\n  };\n\n  render() {\n    return (\n      <div\n        onClick={() => {\n          console.log(1);\n        }}\n        style={{ backgroundColor: \"red\" }}\n      >\n        你好{this.props.name}\n        <span class=\"test\" id=\"thisisaspan\">\n          数字是：{this.state.number}\n        </span>\n        <button onClick={this.handleClick}>+</button>\n      </div>\n    );\n  }\n}\n```\n\n我们最终渲染的代码如下\n\n```js\nconst ele = React.createElement(Counter, { name: \"haha\" });\n```\n\n经过 babel 转换和在[CRA 项目中](https://codesandbox.io/s/cool-cloud-vfbkc?file=/src/App.js)打印 Class Component，我们可以看到下面的结果。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-11-5/1604587310842-image.png)\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-11-5/1604587472964-image.png)\n从上面两张图我们看到，这个组件会经过 React.creareElement 渲染，这个和我们的渲染原生 DOM 的方式的调用是一样的。回忆我们讲的渲染原生 DOM，区别就在于原生 DOM 经 React.creareElement 返回的对象的 type 是字符串，**这次返回的 type 是个函数，其实也就是个类**，类也是函数。\n\n### 步骤理解\n\n我们这次渲染 Class Component，区别就是调用 React.creareElement 返回的对象的 type 属性数个函数（也是个类）。我们拿到这样一个类之后，发现 render 方法返回的就是渲染的元素，因此我们实例化这个类，执行 render 方法拿到了我们渲染的元素。拿到的元素之后，他可能是原生 DOM、Class Component 或者字符串数字，因此我们要不断的递归调用 createUnit 生成 unit，调用 getmarkUp 自己去转换直到渲染出字符串。\n除此之外，React 中写类我们要继承 React.Component ，那么我们至少要新建这个类。还有我们在处理 class 函数的时候，要注意到还有生命周期，我们要在合适的时候调用。\n\n因此我们可以整理出这幅顺序图\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-11-5/1604589129707-image.png)\n\n我们简单理一下步骤\n\n- 创建 React.Componet 类\n- 在 createUnit 添加判断\n- 创建 CompositeUnit\n- 添加 getMarkup 方法处理 Class Component\n\n  - 实例化类\n  - 执行 render 方法拿到子元素\n  - 递归渲染子元素\n  - 在各个阶段执行生命周期\n\n- 全部挂载，触发 componentDidMount\n\n## 动手实现\n\n### React.Componet 类\n\n我们创建 component.js，然后在里面添加代码\n\n```js\n// src\\react\\component.js\n// 初始化这个类\nclass Component {\n  constructor(props) {\n    this.props = props;\n  }\n}\nexport { Component };\n```\n\n然后还要在 react/index.js 引入这个 Component。\n\n### 在 createUnit 判断\n\n我们在渲染 Class 的时候，仍然是经过了 React.createElement 返回，我们可以和原生 DOM 类似来判断。\n\n```js\n// src\\react\\unit.js\nfunction createUnit (element) {\n  if (['number', 'string'].includes(typeof element)) {\n    return new TextUint(element)\n  } else if (element instanceof Element && ['string'].includes(typeof element.type)) {\n    return new NativeUint(element)\n+  } else if (element instanceof Element && ['function'].includes(typeof element.type)) {\n+    return new CompositeUnit(element)\n+  }\n}\n```\n\n我们判断 element 是不是 Element 的实例，同时判断 element.type 的类型是不是函数，都满足的话我们就进入创建复合单元 CompositeUnit。\n\n### 创建 CompositeUnit 类\n\n```js\n// src\\react\\unit.js\nclass CompositeUnit extends Unit {}\n```\n\n### 添加 getMarkUp 方法\n\n我们添加 getMarkup 方法，接下来我们来讲解代码\n\n```js\n// src\\react\\unit.js\nclass CompositeUnit extends Unit {\n  /**\n   *\n   * @param {*} reactId 传入id\n   * @return {*} 返回一个字符串\n   */\n  getMarkUp(reactId) {\n    // this上存id\n    this._reactId = reactId;\n    // type=Component=Counter props: { name: 'haha' }\n    // 取出类和props\n    let { type: Component, props } = this._currentElement;\n    // 实例化 后面还会用到\n    // 赋值到this的部分暂且可以忽略\n    let componentInstance = (this._componentInstance = new Component(props));\n    // 让组件的实例的currentUnit等于当前的unit\n    // 赋值到this的部分暂且可以忽略\n    componentInstance.currentUnit = this;\n    // 渲染前要componentWillMount\n    componentInstance.componentWillMount &&\n      componentInstance.componentWillMount();\n    // 调render方法 得到渲染的元素\n    let renderElement = componentInstance.render();\n    // 得到render的元素创建对应的unit\n    let renderedInstance = (this._renderedInstance = createUnit(renderElement));\n    // 调用方法 返回字符串\n    let renderedMarkup = renderedInstance.getMarkUp(reactId);\n    // 绑定componentDidMount事件\n    $(document).on(\"mounted\", () => {\n      componentInstance.componentDidMount &&\n        componentInstance.componentDidMount();\n    });\n    // 最后返回字符串\n    return renderedMarkup;\n  }\n}\n```\n\n#### 子元素处理\n\n得到 render 的元素创建对应的 unit。因为不知道 render 返回的元素是什么类型，字符串、原生 DOM、class 都有可能，因此直接调用封装好的工厂函数，工厂函数里面统一分情况处理，需要递归就递归。这个已经封装好了的，直接使用。\n\n#### 生命周期\n\n对于以下的代码\n\n```js\n\nclass  extends React.Component{\n  render(){\n  \treturn <div/>\n  }\n}\nclass Counter2 extends React.Component{\n  render(){\n  \treturn <div><Counter1/></div>\n  }\n}\n\n```\n\n```bash\n\n\n执行顺序如下\n//ComWillMount2\n   <div>--Counter2\n     //ComWillMount1\n        <div></div>--Counter1\n     //ComDidMount1\n   </div>\n//ComDidMount2\n顺序 ComWillMount2 - ComWillMount1 - ComDidMount1 - ComDidMount2\n```\n\n简单说来就是父子间先 willmount，但是子组件先 didmount。所以 willmount 在子元素处理之前调用，didmount 在子元素处理之后绑定事件\n\n#### 触发 ComponentDidMount\n\n我们在获取 render 元素的字符串之后，再在 document 上面绑定 didmount 事件，依次处理完之后，在**最后渲染**阶段 trigger mounted 事件来触发。触发的顺序和绑定的顺序一样的，这样就实现了 ComponentDidMount 的顺序执行。\n\n### 最后渲染\n\n```js\n// 最后在render中完成使命\nlet unit = createUnit(element);\nlet markUp = unit.getMarkUp(React.rootIndex); // 返回HTML标记\n$(container).html(markUp);\n// 触发在document上的事件\n$(document).trigger(\"mounted\");\n```\n\n### 渲染结果\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201106234204.png)\n\n## 结语\n\n本节代码地址：[代码地址](https://github.com/kitety/my-react-15.x/tree/aac6872c1376b79e303baf4d17bdbfc2d44366cd)\n我们现在实现了 Class Componet 组件的渲染，结合以前的文章实现了字符串、数字、原生 DOM、Class 的渲染了。可能有人想问不是还有函数是组件吗？我们来做个简单的分析。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201106234658.png)\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201106234750.png)\n\n从上面的两张图可以看到，你会发现函数式组件和 class 组件很像甚至更为简单，拿到函数之后传递参数执行即可。主要就是判断是 class 还是是函数，这里的函数指的是仅仅是函数。我们可以简单使用[这个答案](https://stackoverflow.com/a/29094209)来判断，这里就不详细书写了。\n\n我们点击按钮想触发事件，发现会报错。这也正常我们还没有写更新。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201106235140.png)\n\n在下面的文章我们会写 diff 更新，大家一起期待吧！\n","source":"_posts/React-4.md","raw":"---\ntitle: 实现自己的React之渲染Class Component\nabbrlink: 9d7d5067\ntranslate_title: realize-your-own-react-rendering-class-component\ndate: 2020-11-05 22:25:17\ntags:\n---\n\n## 前言\n\n之前我们已经实现了字符串和数字、原生 DOM 的渲染，接下来我们将渲染 Class Component。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-11-5/1604586613544-image.png)\n\n<!-- more -->\n\n## 原理分析\n\n在 React 15 中，更新主要是由 Class Component 的 setState 执行更新的，然后更新的子元素再依次更新。而更新涉及到 DOM diff，我们将在后面的文章讲述。现在，我们先讲讲 Class Component 的渲染。\n\n### 思路分析\n\n在 React 中我们会这样写一个类。其中包含了一个 componentWillMount 等生命周期，handleClick 等内部方法，render 函数等，其中 render 函数 return 的才是我们真正渲染的元素，handleClick 函数调用会触发 setState 更新。\n\n```jsx\nclass Counter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { number: 1 };\n  }\n  componentWillMount() {\n    console.log(\"Counter componentWillMount\");\n  }\n  componentDidMount() {\n    console.log(\"Counter componentDidMount\");\n  }\n  handleClick = () => {\n    this.setState({ number: this.state.number + 1 });\n  };\n\n  render() {\n    return (\n      <div\n        onClick={() => {\n          console.log(1);\n        }}\n        style={{ backgroundColor: \"red\" }}\n      >\n        你好{this.props.name}\n        <span class=\"test\" id=\"thisisaspan\">\n          数字是：{this.state.number}\n        </span>\n        <button onClick={this.handleClick}>+</button>\n      </div>\n    );\n  }\n}\n```\n\n我们最终渲染的代码如下\n\n```js\nconst ele = React.createElement(Counter, { name: \"haha\" });\n```\n\n经过 babel 转换和在[CRA 项目中](https://codesandbox.io/s/cool-cloud-vfbkc?file=/src/App.js)打印 Class Component，我们可以看到下面的结果。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-11-5/1604587310842-image.png)\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-11-5/1604587472964-image.png)\n从上面两张图我们看到，这个组件会经过 React.creareElement 渲染，这个和我们的渲染原生 DOM 的方式的调用是一样的。回忆我们讲的渲染原生 DOM，区别就在于原生 DOM 经 React.creareElement 返回的对象的 type 是字符串，**这次返回的 type 是个函数，其实也就是个类**，类也是函数。\n\n### 步骤理解\n\n我们这次渲染 Class Component，区别就是调用 React.creareElement 返回的对象的 type 属性数个函数（也是个类）。我们拿到这样一个类之后，发现 render 方法返回的就是渲染的元素，因此我们实例化这个类，执行 render 方法拿到了我们渲染的元素。拿到的元素之后，他可能是原生 DOM、Class Component 或者字符串数字，因此我们要不断的递归调用 createUnit 生成 unit，调用 getmarkUp 自己去转换直到渲染出字符串。\n除此之外，React 中写类我们要继承 React.Component ，那么我们至少要新建这个类。还有我们在处理 class 函数的时候，要注意到还有生命周期，我们要在合适的时候调用。\n\n因此我们可以整理出这幅顺序图\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-11-5/1604589129707-image.png)\n\n我们简单理一下步骤\n\n- 创建 React.Componet 类\n- 在 createUnit 添加判断\n- 创建 CompositeUnit\n- 添加 getMarkup 方法处理 Class Component\n\n  - 实例化类\n  - 执行 render 方法拿到子元素\n  - 递归渲染子元素\n  - 在各个阶段执行生命周期\n\n- 全部挂载，触发 componentDidMount\n\n## 动手实现\n\n### React.Componet 类\n\n我们创建 component.js，然后在里面添加代码\n\n```js\n// src\\react\\component.js\n// 初始化这个类\nclass Component {\n  constructor(props) {\n    this.props = props;\n  }\n}\nexport { Component };\n```\n\n然后还要在 react/index.js 引入这个 Component。\n\n### 在 createUnit 判断\n\n我们在渲染 Class 的时候，仍然是经过了 React.createElement 返回，我们可以和原生 DOM 类似来判断。\n\n```js\n// src\\react\\unit.js\nfunction createUnit (element) {\n  if (['number', 'string'].includes(typeof element)) {\n    return new TextUint(element)\n  } else if (element instanceof Element && ['string'].includes(typeof element.type)) {\n    return new NativeUint(element)\n+  } else if (element instanceof Element && ['function'].includes(typeof element.type)) {\n+    return new CompositeUnit(element)\n+  }\n}\n```\n\n我们判断 element 是不是 Element 的实例，同时判断 element.type 的类型是不是函数，都满足的话我们就进入创建复合单元 CompositeUnit。\n\n### 创建 CompositeUnit 类\n\n```js\n// src\\react\\unit.js\nclass CompositeUnit extends Unit {}\n```\n\n### 添加 getMarkUp 方法\n\n我们添加 getMarkup 方法，接下来我们来讲解代码\n\n```js\n// src\\react\\unit.js\nclass CompositeUnit extends Unit {\n  /**\n   *\n   * @param {*} reactId 传入id\n   * @return {*} 返回一个字符串\n   */\n  getMarkUp(reactId) {\n    // this上存id\n    this._reactId = reactId;\n    // type=Component=Counter props: { name: 'haha' }\n    // 取出类和props\n    let { type: Component, props } = this._currentElement;\n    // 实例化 后面还会用到\n    // 赋值到this的部分暂且可以忽略\n    let componentInstance = (this._componentInstance = new Component(props));\n    // 让组件的实例的currentUnit等于当前的unit\n    // 赋值到this的部分暂且可以忽略\n    componentInstance.currentUnit = this;\n    // 渲染前要componentWillMount\n    componentInstance.componentWillMount &&\n      componentInstance.componentWillMount();\n    // 调render方法 得到渲染的元素\n    let renderElement = componentInstance.render();\n    // 得到render的元素创建对应的unit\n    let renderedInstance = (this._renderedInstance = createUnit(renderElement));\n    // 调用方法 返回字符串\n    let renderedMarkup = renderedInstance.getMarkUp(reactId);\n    // 绑定componentDidMount事件\n    $(document).on(\"mounted\", () => {\n      componentInstance.componentDidMount &&\n        componentInstance.componentDidMount();\n    });\n    // 最后返回字符串\n    return renderedMarkup;\n  }\n}\n```\n\n#### 子元素处理\n\n得到 render 的元素创建对应的 unit。因为不知道 render 返回的元素是什么类型，字符串、原生 DOM、class 都有可能，因此直接调用封装好的工厂函数，工厂函数里面统一分情况处理，需要递归就递归。这个已经封装好了的，直接使用。\n\n#### 生命周期\n\n对于以下的代码\n\n```js\n\nclass  extends React.Component{\n  render(){\n  \treturn <div/>\n  }\n}\nclass Counter2 extends React.Component{\n  render(){\n  \treturn <div><Counter1/></div>\n  }\n}\n\n```\n\n```bash\n\n\n执行顺序如下\n//ComWillMount2\n   <div>--Counter2\n     //ComWillMount1\n        <div></div>--Counter1\n     //ComDidMount1\n   </div>\n//ComDidMount2\n顺序 ComWillMount2 - ComWillMount1 - ComDidMount1 - ComDidMount2\n```\n\n简单说来就是父子间先 willmount，但是子组件先 didmount。所以 willmount 在子元素处理之前调用，didmount 在子元素处理之后绑定事件\n\n#### 触发 ComponentDidMount\n\n我们在获取 render 元素的字符串之后，再在 document 上面绑定 didmount 事件，依次处理完之后，在**最后渲染**阶段 trigger mounted 事件来触发。触发的顺序和绑定的顺序一样的，这样就实现了 ComponentDidMount 的顺序执行。\n\n### 最后渲染\n\n```js\n// 最后在render中完成使命\nlet unit = createUnit(element);\nlet markUp = unit.getMarkUp(React.rootIndex); // 返回HTML标记\n$(container).html(markUp);\n// 触发在document上的事件\n$(document).trigger(\"mounted\");\n```\n\n### 渲染结果\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201106234204.png)\n\n## 结语\n\n本节代码地址：[代码地址](https://github.com/kitety/my-react-15.x/tree/aac6872c1376b79e303baf4d17bdbfc2d44366cd)\n我们现在实现了 Class Componet 组件的渲染，结合以前的文章实现了字符串、数字、原生 DOM、Class 的渲染了。可能有人想问不是还有函数是组件吗？我们来做个简单的分析。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201106234658.png)\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201106234750.png)\n\n从上面的两张图可以看到，你会发现函数式组件和 class 组件很像甚至更为简单，拿到函数之后传递参数执行即可。主要就是判断是 class 还是是函数，这里的函数指的是仅仅是函数。我们可以简单使用[这个答案](https://stackoverflow.com/a/29094209)来判断，这里就不详细书写了。\n\n我们点击按钮想触发事件，发现会报错。这也正常我们还没有写更新。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201106235140.png)\n\n在下面的文章我们会写 diff 更新，大家一起期待吧！\n","slug":"React-4","published":1,"updated":"2021-09-29T07:53:51.814Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy6ar000mp4vl086s6k93","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>之前我们已经实现了字符串和数字、原生 DOM 的渲染，接下来我们将渲染 Class Component。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-11-5/1604586613544-image.png\"></p>\n<span id=\"more\"></span>\n\n<h2 id=\"原理分析\"><a href=\"#原理分析\" class=\"headerlink\" title=\"原理分析\"></a>原理分析</h2><p>在 React 15 中，更新主要是由 Class Component 的 setState 执行更新的，然后更新的子元素再依次更新。而更新涉及到 DOM diff，我们将在后面的文章讲述。现在，我们先讲讲 Class Component 的渲染。</p>\n<h3 id=\"思路分析\"><a href=\"#思路分析\" class=\"headerlink\" title=\"思路分析\"></a>思路分析</h3><p>在 React 中我们会这样写一个类。其中包含了一个 componentWillMount 等生命周期，handleClick 等内部方法，render 函数等，其中 render 函数 return 的才是我们真正渲染的元素，handleClick 函数调用会触发 setState 更新。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Counter</span> <span class=\"keyword\">extends</span> <span class=\"title class_ inherited__\">React.Component</span> &#123;</span><br><span class=\"line\">  <span class=\"title function_\">constructor</span>(<span class=\"params\">props</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">super</span>(props);</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">state</span> = &#123; <span class=\"attr\">number</span>: <span class=\"number\">1</span> &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"title function_\">componentWillMount</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;Counter componentWillMount&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"title function_\">componentDidMount</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;Counter componentDidMount&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  handleClick = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"title function_\">setState</span>(&#123; <span class=\"attr\">number</span>: <span class=\"variable language_\">this</span>.<span class=\"property\">state</span>.<span class=\"property\">number</span> + <span class=\"number\">1</span> &#125;);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"title function_\">render</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">        <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-xml\">          console.log(1);</span></span><br><span class=\"line\"><span class=\"language-xml\">        &#125;&#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">        style=&#123;&#123; backgroundColor: &quot;red&quot; &#125;&#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">      &gt;</span></span><br><span class=\"line\"><span class=\"language-xml\">        你好&#123;this.props.name&#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">        <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;test&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;thisisaspan&quot;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">          数字是：&#123;this.state.number&#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">        <span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">        <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;this.handleClick&#125;</span>&gt;</span>+<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>我们最终渲染的代码如下</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> ele = <span class=\"title class_\">React</span>.<span class=\"title function_\">createElement</span>(<span class=\"title class_\">Counter</span>, &#123; <span class=\"attr\">name</span>: <span class=\"string\">&quot;haha&quot;</span> &#125;);</span><br></pre></td></tr></table></figure>\n\n<p>经过 babel 转换和在<a href=\"https://codesandbox.io/s/cool-cloud-vfbkc?file=/src/App.js\">CRA 项目中</a>打印 Class Component，我们可以看到下面的结果。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-11-5/1604587310842-image.png\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-11-5/1604587472964-image.png\"><br>从上面两张图我们看到，这个组件会经过 React.creareElement 渲染，这个和我们的渲染原生 DOM 的方式的调用是一样的。回忆我们讲的渲染原生 DOM，区别就在于原生 DOM 经 React.creareElement 返回的对象的 type 是字符串，<strong>这次返回的 type 是个函数，其实也就是个类</strong>，类也是函数。</p>\n<h3 id=\"步骤理解\"><a href=\"#步骤理解\" class=\"headerlink\" title=\"步骤理解\"></a>步骤理解</h3><p>我们这次渲染 Class Component，区别就是调用 React.creareElement 返回的对象的 type 属性数个函数（也是个类）。我们拿到这样一个类之后，发现 render 方法返回的就是渲染的元素，因此我们实例化这个类，执行 render 方法拿到了我们渲染的元素。拿到的元素之后，他可能是原生 DOM、Class Component 或者字符串数字，因此我们要不断的递归调用 createUnit 生成 unit，调用 getmarkUp 自己去转换直到渲染出字符串。<br>除此之外，React 中写类我们要继承 React.Component ，那么我们至少要新建这个类。还有我们在处理 class 函数的时候，要注意到还有生命周期，我们要在合适的时候调用。</p>\n<p>因此我们可以整理出这幅顺序图</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-11-5/1604589129707-image.png\"></p>\n<p>我们简单理一下步骤</p>\n<ul>\n<li><p>创建 React.Componet 类</p>\n</li>\n<li><p>在 createUnit 添加判断</p>\n</li>\n<li><p>创建 CompositeUnit</p>\n</li>\n<li><p>添加 getMarkup 方法处理 Class Component</p>\n<ul>\n<li>实例化类</li>\n<li>执行 render 方法拿到子元素</li>\n<li>递归渲染子元素</li>\n<li>在各个阶段执行生命周期</li>\n</ul>\n</li>\n<li><p>全部挂载，触发 componentDidMount</p>\n</li>\n</ul>\n<h2 id=\"动手实现\"><a href=\"#动手实现\" class=\"headerlink\" title=\"动手实现\"></a>动手实现</h2><h3 id=\"React-Componet-类\"><a href=\"#React-Componet-类\" class=\"headerlink\" title=\"React.Componet 类\"></a>React.Componet 类</h3><p>我们创建 component.js，然后在里面添加代码</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// src\\react\\component.js</span></span><br><span class=\"line\"><span class=\"comment\">// 初始化这个类</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Component</span> &#123;</span><br><span class=\"line\">  <span class=\"title function_\">constructor</span>(<span class=\"params\">props</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">props</span> = props;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123; <span class=\"title class_\">Component</span> &#125;;</span><br></pre></td></tr></table></figure>\n\n<p>然后还要在 react/index.js 引入这个 Component。</p>\n<h3 id=\"在-createUnit-判断\"><a href=\"#在-createUnit-判断\" class=\"headerlink\" title=\"在 createUnit 判断\"></a>在 createUnit 判断</h3><p>我们在渲染 Class 的时候，仍然是经过了 React.createElement 返回，我们可以和原生 DOM 类似来判断。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// src\\react\\unit.js</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">createUnit</span> (element) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> ([<span class=\"string\">&#x27;number&#x27;</span>, <span class=\"string\">&#x27;string&#x27;</span>].<span class=\"title function_\">includes</span>(<span class=\"keyword\">typeof</span> element)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">TextUint</span>(element)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (element <span class=\"keyword\">instanceof</span> <span class=\"title class_\">Element</span> &amp;&amp; [<span class=\"string\">&#x27;string&#x27;</span>].<span class=\"title function_\">includes</span>(<span class=\"keyword\">typeof</span> element.<span class=\"property\">type</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">NativeUint</span>(element)</span><br><span class=\"line\">+  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (element <span class=\"keyword\">instanceof</span> <span class=\"title class_\">Element</span> &amp;&amp; [<span class=\"string\">&#x27;function&#x27;</span>].<span class=\"title function_\">includes</span>(<span class=\"keyword\">typeof</span> element.<span class=\"property\">type</span>)) &#123;</span><br><span class=\"line\">+    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">CompositeUnit</span>(element)</span><br><span class=\"line\">+  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>我们判断 element 是不是 Element 的实例，同时判断 element.type 的类型是不是函数，都满足的话我们就进入创建复合单元 CompositeUnit。</p>\n<h3 id=\"创建-CompositeUnit-类\"><a href=\"#创建-CompositeUnit-类\" class=\"headerlink\" title=\"创建 CompositeUnit 类\"></a>创建 CompositeUnit 类</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// src\\react\\unit.js</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">CompositeUnit</span> <span class=\"keyword\">extends</span> <span class=\"title class_ inherited__\">Unit</span> &#123;&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"添加-getMarkUp-方法\"><a href=\"#添加-getMarkUp-方法\" class=\"headerlink\" title=\"添加 getMarkUp 方法\"></a>添加 getMarkUp 方法</h3><p>我们添加 getMarkup 方法，接下来我们来讲解代码</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// src\\react\\unit.js</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">CompositeUnit</span> <span class=\"keyword\">extends</span> <span class=\"title class_ inherited__\">Unit</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param</span> &#123;<span class=\"type\">*</span>&#125; reactId 传入id</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@return</span> &#123;<span class=\"type\">*</span>&#125; 返回一个字符串</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"title function_\">getMarkUp</span>(<span class=\"params\">reactId</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// this上存id</span></span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">_reactId</span> = reactId;</span><br><span class=\"line\">    <span class=\"comment\">// type=Component=Counter props: &#123; name: &#x27;haha&#x27; &#125;</span></span><br><span class=\"line\">    <span class=\"comment\">// 取出类和props</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> &#123; <span class=\"attr\">type</span>: <span class=\"title class_\">Component</span>, props &#125; = <span class=\"variable language_\">this</span>.<span class=\"property\">_currentElement</span>;</span><br><span class=\"line\">    <span class=\"comment\">// 实例化 后面还会用到</span></span><br><span class=\"line\">    <span class=\"comment\">// 赋值到this的部分暂且可以忽略</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> componentInstance = (<span class=\"variable language_\">this</span>.<span class=\"property\">_componentInstance</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Component</span>(props));</span><br><span class=\"line\">    <span class=\"comment\">// 让组件的实例的currentUnit等于当前的unit</span></span><br><span class=\"line\">    <span class=\"comment\">// 赋值到this的部分暂且可以忽略</span></span><br><span class=\"line\">    componentInstance.<span class=\"property\">currentUnit</span> = <span class=\"variable language_\">this</span>;</span><br><span class=\"line\">    <span class=\"comment\">// 渲染前要componentWillMount</span></span><br><span class=\"line\">    componentInstance.<span class=\"property\">componentWillMount</span> &amp;&amp;</span><br><span class=\"line\">      componentInstance.<span class=\"title function_\">componentWillMount</span>();</span><br><span class=\"line\">    <span class=\"comment\">// 调render方法 得到渲染的元素</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> renderElement = componentInstance.<span class=\"title function_\">render</span>();</span><br><span class=\"line\">    <span class=\"comment\">// 得到render的元素创建对应的unit</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> renderedInstance = (<span class=\"variable language_\">this</span>.<span class=\"property\">_renderedInstance</span> = <span class=\"title function_\">createUnit</span>(renderElement));</span><br><span class=\"line\">    <span class=\"comment\">// 调用方法 返回字符串</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> renderedMarkup = renderedInstance.<span class=\"title function_\">getMarkUp</span>(reactId);</span><br><span class=\"line\">    <span class=\"comment\">// 绑定componentDidMount事件</span></span><br><span class=\"line\">    $(<span class=\"variable language_\">document</span>).<span class=\"title function_\">on</span>(<span class=\"string\">&quot;mounted&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      componentInstance.<span class=\"property\">componentDidMount</span> &amp;&amp;</span><br><span class=\"line\">        componentInstance.<span class=\"title function_\">componentDidMount</span>();</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    <span class=\"comment\">// 最后返回字符串</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> renderedMarkup;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"子元素处理\"><a href=\"#子元素处理\" class=\"headerlink\" title=\"子元素处理\"></a>子元素处理</h4><p>得到 render 的元素创建对应的 unit。因为不知道 render 返回的元素是什么类型，字符串、原生 DOM、class 都有可能，因此直接调用封装好的工厂函数，工厂函数里面统一分情况处理，需要递归就递归。这个已经封装好了的，直接使用。</p>\n<h4 id=\"生命周期\"><a href=\"#生命周期\" class=\"headerlink\" title=\"生命周期\"></a>生命周期</h4><p>对于以下的代码</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span>  <span class=\"title class_\">extends</span> <span class=\"title class_\">React</span>.<span class=\"property\">Component</span>&#123;</span><br><span class=\"line\">  <span class=\"title function_\">render</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">  \t<span class=\"keyword\">return</span> <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>/&gt;</span></span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Counter2</span> <span class=\"keyword\">extends</span> <span class=\"title class_ inherited__\">React.Component</span>&#123;</span><br><span class=\"line\">  <span class=\"title function_\">render</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">  \t<span class=\"keyword\">return</span> <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">Counter1</span>/&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">执行顺序如下</span><br><span class=\"line\">//ComWillMount2</span><br><span class=\"line\">   &lt;div&gt;--Counter2</span><br><span class=\"line\">     //ComWillMount1</span><br><span class=\"line\">        &lt;div&gt;&lt;/div&gt;--Counter1</span><br><span class=\"line\">     //ComDidMount1</span><br><span class=\"line\">   &lt;/div&gt;</span><br><span class=\"line\">//ComDidMount2</span><br><span class=\"line\">顺序 ComWillMount2 - ComWillMount1 - ComDidMount1 - ComDidMount2</span><br></pre></td></tr></table></figure>\n\n<p>简单说来就是父子间先 willmount，但是子组件先 didmount。所以 willmount 在子元素处理之前调用，didmount 在子元素处理之后绑定事件</p>\n<h4 id=\"触发-ComponentDidMount\"><a href=\"#触发-ComponentDidMount\" class=\"headerlink\" title=\"触发 ComponentDidMount\"></a>触发 ComponentDidMount</h4><p>我们在获取 render 元素的字符串之后，再在 document 上面绑定 didmount 事件，依次处理完之后，在<strong>最后渲染</strong>阶段 trigger mounted 事件来触发。触发的顺序和绑定的顺序一样的，这样就实现了 ComponentDidMount 的顺序执行。</p>\n<h3 id=\"最后渲染\"><a href=\"#最后渲染\" class=\"headerlink\" title=\"最后渲染\"></a>最后渲染</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 最后在render中完成使命</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> unit = <span class=\"title function_\">createUnit</span>(element);</span><br><span class=\"line\"><span class=\"keyword\">let</span> markUp = unit.<span class=\"title function_\">getMarkUp</span>(<span class=\"title class_\">React</span>.<span class=\"property\">rootIndex</span>); <span class=\"comment\">// 返回HTML标记</span></span><br><span class=\"line\">$(container).<span class=\"title function_\">html</span>(markUp);</span><br><span class=\"line\"><span class=\"comment\">// 触发在document上的事件</span></span><br><span class=\"line\">$(<span class=\"variable language_\">document</span>).<span class=\"title function_\">trigger</span>(<span class=\"string\">&quot;mounted&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"渲染结果\"><a href=\"#渲染结果\" class=\"headerlink\" title=\"渲染结果\"></a>渲染结果</h3><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201106234204.png\"></p>\n<h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p>本节代码地址：<a href=\"https://github.com/kitety/my-react-15.x/tree/aac6872c1376b79e303baf4d17bdbfc2d44366cd\">代码地址</a><br>我们现在实现了 Class Componet 组件的渲染，结合以前的文章实现了字符串、数字、原生 DOM、Class 的渲染了。可能有人想问不是还有函数是组件吗？我们来做个简单的分析。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201106234658.png\"><br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201106234750.png\"></p>\n<p>从上面的两张图可以看到，你会发现函数式组件和 class 组件很像甚至更为简单，拿到函数之后传递参数执行即可。主要就是判断是 class 还是是函数，这里的函数指的是仅仅是函数。我们可以简单使用<a href=\"https://stackoverflow.com/a/29094209\">这个答案</a>来判断，这里就不详细书写了。</p>\n<p>我们点击按钮想触发事件，发现会报错。这也正常我们还没有写更新。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201106235140.png\"></p>\n<p>在下面的文章我们会写 diff 更新，大家一起期待吧！</p>\n","site":{"data":{}},"length":5085,"excerpt":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>之前我们已经实现了字符串和数字、原生 DOM 的渲染，接下来我们将渲染 Class Component。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-11-5/1604586613544-image.png\"></p>","more":"<h2 id=\"原理分析\"><a href=\"#原理分析\" class=\"headerlink\" title=\"原理分析\"></a>原理分析</h2><p>在 React 15 中，更新主要是由 Class Component 的 setState 执行更新的，然后更新的子元素再依次更新。而更新涉及到 DOM diff，我们将在后面的文章讲述。现在，我们先讲讲 Class Component 的渲染。</p>\n<h3 id=\"思路分析\"><a href=\"#思路分析\" class=\"headerlink\" title=\"思路分析\"></a>思路分析</h3><p>在 React 中我们会这样写一个类。其中包含了一个 componentWillMount 等生命周期，handleClick 等内部方法，render 函数等，其中 render 函数 return 的才是我们真正渲染的元素，handleClick 函数调用会触发 setState 更新。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Counter</span> <span class=\"keyword\">extends</span> <span class=\"title class_ inherited__\">React.Component</span> &#123;</span><br><span class=\"line\">  <span class=\"title function_\">constructor</span>(<span class=\"params\">props</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">super</span>(props);</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">state</span> = &#123; <span class=\"attr\">number</span>: <span class=\"number\">1</span> &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"title function_\">componentWillMount</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;Counter componentWillMount&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"title function_\">componentDidMount</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;Counter componentDidMount&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  handleClick = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"title function_\">setState</span>(&#123; <span class=\"attr\">number</span>: <span class=\"variable language_\">this</span>.<span class=\"property\">state</span>.<span class=\"property\">number</span> + <span class=\"number\">1</span> &#125;);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"title function_\">render</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">        <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-xml\">          console.log(1);</span></span><br><span class=\"line\"><span class=\"language-xml\">        &#125;&#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">        style=&#123;&#123; backgroundColor: &quot;red&quot; &#125;&#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">      &gt;</span></span><br><span class=\"line\"><span class=\"language-xml\">        你好&#123;this.props.name&#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">        <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;test&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;thisisaspan&quot;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">          数字是：&#123;this.state.number&#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">        <span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">        <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;this.handleClick&#125;</span>&gt;</span>+<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>我们最终渲染的代码如下</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> ele = <span class=\"title class_\">React</span>.<span class=\"title function_\">createElement</span>(<span class=\"title class_\">Counter</span>, &#123; <span class=\"attr\">name</span>: <span class=\"string\">&quot;haha&quot;</span> &#125;);</span><br></pre></td></tr></table></figure>\n\n<p>经过 babel 转换和在<a href=\"https://codesandbox.io/s/cool-cloud-vfbkc?file=/src/App.js\">CRA 项目中</a>打印 Class Component，我们可以看到下面的结果。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-11-5/1604587310842-image.png\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-11-5/1604587472964-image.png\"><br>从上面两张图我们看到，这个组件会经过 React.creareElement 渲染，这个和我们的渲染原生 DOM 的方式的调用是一样的。回忆我们讲的渲染原生 DOM，区别就在于原生 DOM 经 React.creareElement 返回的对象的 type 是字符串，<strong>这次返回的 type 是个函数，其实也就是个类</strong>，类也是函数。</p>\n<h3 id=\"步骤理解\"><a href=\"#步骤理解\" class=\"headerlink\" title=\"步骤理解\"></a>步骤理解</h3><p>我们这次渲染 Class Component，区别就是调用 React.creareElement 返回的对象的 type 属性数个函数（也是个类）。我们拿到这样一个类之后，发现 render 方法返回的就是渲染的元素，因此我们实例化这个类，执行 render 方法拿到了我们渲染的元素。拿到的元素之后，他可能是原生 DOM、Class Component 或者字符串数字，因此我们要不断的递归调用 createUnit 生成 unit，调用 getmarkUp 自己去转换直到渲染出字符串。<br>除此之外，React 中写类我们要继承 React.Component ，那么我们至少要新建这个类。还有我们在处理 class 函数的时候，要注意到还有生命周期，我们要在合适的时候调用。</p>\n<p>因此我们可以整理出这幅顺序图</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-11-5/1604589129707-image.png\"></p>\n<p>我们简单理一下步骤</p>\n<ul>\n<li><p>创建 React.Componet 类</p>\n</li>\n<li><p>在 createUnit 添加判断</p>\n</li>\n<li><p>创建 CompositeUnit</p>\n</li>\n<li><p>添加 getMarkup 方法处理 Class Component</p>\n<ul>\n<li>实例化类</li>\n<li>执行 render 方法拿到子元素</li>\n<li>递归渲染子元素</li>\n<li>在各个阶段执行生命周期</li>\n</ul>\n</li>\n<li><p>全部挂载，触发 componentDidMount</p>\n</li>\n</ul>\n<h2 id=\"动手实现\"><a href=\"#动手实现\" class=\"headerlink\" title=\"动手实现\"></a>动手实现</h2><h3 id=\"React-Componet-类\"><a href=\"#React-Componet-类\" class=\"headerlink\" title=\"React.Componet 类\"></a>React.Componet 类</h3><p>我们创建 component.js，然后在里面添加代码</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// src\\react\\component.js</span></span><br><span class=\"line\"><span class=\"comment\">// 初始化这个类</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Component</span> &#123;</span><br><span class=\"line\">  <span class=\"title function_\">constructor</span>(<span class=\"params\">props</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">props</span> = props;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123; <span class=\"title class_\">Component</span> &#125;;</span><br></pre></td></tr></table></figure>\n\n<p>然后还要在 react/index.js 引入这个 Component。</p>\n<h3 id=\"在-createUnit-判断\"><a href=\"#在-createUnit-判断\" class=\"headerlink\" title=\"在 createUnit 判断\"></a>在 createUnit 判断</h3><p>我们在渲染 Class 的时候，仍然是经过了 React.createElement 返回，我们可以和原生 DOM 类似来判断。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// src\\react\\unit.js</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">createUnit</span> (element) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> ([<span class=\"string\">&#x27;number&#x27;</span>, <span class=\"string\">&#x27;string&#x27;</span>].<span class=\"title function_\">includes</span>(<span class=\"keyword\">typeof</span> element)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">TextUint</span>(element)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (element <span class=\"keyword\">instanceof</span> <span class=\"title class_\">Element</span> &amp;&amp; [<span class=\"string\">&#x27;string&#x27;</span>].<span class=\"title function_\">includes</span>(<span class=\"keyword\">typeof</span> element.<span class=\"property\">type</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">NativeUint</span>(element)</span><br><span class=\"line\">+  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (element <span class=\"keyword\">instanceof</span> <span class=\"title class_\">Element</span> &amp;&amp; [<span class=\"string\">&#x27;function&#x27;</span>].<span class=\"title function_\">includes</span>(<span class=\"keyword\">typeof</span> element.<span class=\"property\">type</span>)) &#123;</span><br><span class=\"line\">+    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">CompositeUnit</span>(element)</span><br><span class=\"line\">+  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>我们判断 element 是不是 Element 的实例，同时判断 element.type 的类型是不是函数，都满足的话我们就进入创建复合单元 CompositeUnit。</p>\n<h3 id=\"创建-CompositeUnit-类\"><a href=\"#创建-CompositeUnit-类\" class=\"headerlink\" title=\"创建 CompositeUnit 类\"></a>创建 CompositeUnit 类</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// src\\react\\unit.js</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">CompositeUnit</span> <span class=\"keyword\">extends</span> <span class=\"title class_ inherited__\">Unit</span> &#123;&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"添加-getMarkUp-方法\"><a href=\"#添加-getMarkUp-方法\" class=\"headerlink\" title=\"添加 getMarkUp 方法\"></a>添加 getMarkUp 方法</h3><p>我们添加 getMarkup 方法，接下来我们来讲解代码</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// src\\react\\unit.js</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">CompositeUnit</span> <span class=\"keyword\">extends</span> <span class=\"title class_ inherited__\">Unit</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param</span> &#123;<span class=\"type\">*</span>&#125; reactId 传入id</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@return</span> &#123;<span class=\"type\">*</span>&#125; 返回一个字符串</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"title function_\">getMarkUp</span>(<span class=\"params\">reactId</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// this上存id</span></span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">_reactId</span> = reactId;</span><br><span class=\"line\">    <span class=\"comment\">// type=Component=Counter props: &#123; name: &#x27;haha&#x27; &#125;</span></span><br><span class=\"line\">    <span class=\"comment\">// 取出类和props</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> &#123; <span class=\"attr\">type</span>: <span class=\"title class_\">Component</span>, props &#125; = <span class=\"variable language_\">this</span>.<span class=\"property\">_currentElement</span>;</span><br><span class=\"line\">    <span class=\"comment\">// 实例化 后面还会用到</span></span><br><span class=\"line\">    <span class=\"comment\">// 赋值到this的部分暂且可以忽略</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> componentInstance = (<span class=\"variable language_\">this</span>.<span class=\"property\">_componentInstance</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Component</span>(props));</span><br><span class=\"line\">    <span class=\"comment\">// 让组件的实例的currentUnit等于当前的unit</span></span><br><span class=\"line\">    <span class=\"comment\">// 赋值到this的部分暂且可以忽略</span></span><br><span class=\"line\">    componentInstance.<span class=\"property\">currentUnit</span> = <span class=\"variable language_\">this</span>;</span><br><span class=\"line\">    <span class=\"comment\">// 渲染前要componentWillMount</span></span><br><span class=\"line\">    componentInstance.<span class=\"property\">componentWillMount</span> &amp;&amp;</span><br><span class=\"line\">      componentInstance.<span class=\"title function_\">componentWillMount</span>();</span><br><span class=\"line\">    <span class=\"comment\">// 调render方法 得到渲染的元素</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> renderElement = componentInstance.<span class=\"title function_\">render</span>();</span><br><span class=\"line\">    <span class=\"comment\">// 得到render的元素创建对应的unit</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> renderedInstance = (<span class=\"variable language_\">this</span>.<span class=\"property\">_renderedInstance</span> = <span class=\"title function_\">createUnit</span>(renderElement));</span><br><span class=\"line\">    <span class=\"comment\">// 调用方法 返回字符串</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> renderedMarkup = renderedInstance.<span class=\"title function_\">getMarkUp</span>(reactId);</span><br><span class=\"line\">    <span class=\"comment\">// 绑定componentDidMount事件</span></span><br><span class=\"line\">    $(<span class=\"variable language_\">document</span>).<span class=\"title function_\">on</span>(<span class=\"string\">&quot;mounted&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      componentInstance.<span class=\"property\">componentDidMount</span> &amp;&amp;</span><br><span class=\"line\">        componentInstance.<span class=\"title function_\">componentDidMount</span>();</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    <span class=\"comment\">// 最后返回字符串</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> renderedMarkup;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"子元素处理\"><a href=\"#子元素处理\" class=\"headerlink\" title=\"子元素处理\"></a>子元素处理</h4><p>得到 render 的元素创建对应的 unit。因为不知道 render 返回的元素是什么类型，字符串、原生 DOM、class 都有可能，因此直接调用封装好的工厂函数，工厂函数里面统一分情况处理，需要递归就递归。这个已经封装好了的，直接使用。</p>\n<h4 id=\"生命周期\"><a href=\"#生命周期\" class=\"headerlink\" title=\"生命周期\"></a>生命周期</h4><p>对于以下的代码</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span>  <span class=\"title class_\">extends</span> <span class=\"title class_\">React</span>.<span class=\"property\">Component</span>&#123;</span><br><span class=\"line\">  <span class=\"title function_\">render</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">  \t<span class=\"keyword\">return</span> <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>/&gt;</span></span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Counter2</span> <span class=\"keyword\">extends</span> <span class=\"title class_ inherited__\">React.Component</span>&#123;</span><br><span class=\"line\">  <span class=\"title function_\">render</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">  \t<span class=\"keyword\">return</span> <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">Counter1</span>/&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">执行顺序如下</span><br><span class=\"line\">//ComWillMount2</span><br><span class=\"line\">   &lt;div&gt;--Counter2</span><br><span class=\"line\">     //ComWillMount1</span><br><span class=\"line\">        &lt;div&gt;&lt;/div&gt;--Counter1</span><br><span class=\"line\">     //ComDidMount1</span><br><span class=\"line\">   &lt;/div&gt;</span><br><span class=\"line\">//ComDidMount2</span><br><span class=\"line\">顺序 ComWillMount2 - ComWillMount1 - ComDidMount1 - ComDidMount2</span><br></pre></td></tr></table></figure>\n\n<p>简单说来就是父子间先 willmount，但是子组件先 didmount。所以 willmount 在子元素处理之前调用，didmount 在子元素处理之后绑定事件</p>\n<h4 id=\"触发-ComponentDidMount\"><a href=\"#触发-ComponentDidMount\" class=\"headerlink\" title=\"触发 ComponentDidMount\"></a>触发 ComponentDidMount</h4><p>我们在获取 render 元素的字符串之后，再在 document 上面绑定 didmount 事件，依次处理完之后，在<strong>最后渲染</strong>阶段 trigger mounted 事件来触发。触发的顺序和绑定的顺序一样的，这样就实现了 ComponentDidMount 的顺序执行。</p>\n<h3 id=\"最后渲染\"><a href=\"#最后渲染\" class=\"headerlink\" title=\"最后渲染\"></a>最后渲染</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 最后在render中完成使命</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> unit = <span class=\"title function_\">createUnit</span>(element);</span><br><span class=\"line\"><span class=\"keyword\">let</span> markUp = unit.<span class=\"title function_\">getMarkUp</span>(<span class=\"title class_\">React</span>.<span class=\"property\">rootIndex</span>); <span class=\"comment\">// 返回HTML标记</span></span><br><span class=\"line\">$(container).<span class=\"title function_\">html</span>(markUp);</span><br><span class=\"line\"><span class=\"comment\">// 触发在document上的事件</span></span><br><span class=\"line\">$(<span class=\"variable language_\">document</span>).<span class=\"title function_\">trigger</span>(<span class=\"string\">&quot;mounted&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"渲染结果\"><a href=\"#渲染结果\" class=\"headerlink\" title=\"渲染结果\"></a>渲染结果</h3><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201106234204.png\"></p>\n<h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p>本节代码地址：<a href=\"https://github.com/kitety/my-react-15.x/tree/aac6872c1376b79e303baf4d17bdbfc2d44366cd\">代码地址</a><br>我们现在实现了 Class Componet 组件的渲染，结合以前的文章实现了字符串、数字、原生 DOM、Class 的渲染了。可能有人想问不是还有函数是组件吗？我们来做个简单的分析。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201106234658.png\"><br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201106234750.png\"></p>\n<p>从上面的两张图可以看到，你会发现函数式组件和 class 组件很像甚至更为简单，拿到函数之后传递参数执行即可。主要就是判断是 class 还是是函数，这里的函数指的是仅仅是函数。我们可以简单使用<a href=\"https://stackoverflow.com/a/29094209\">这个答案</a>来判断，这里就不详细书写了。</p>\n<p>我们点击按钮想触发事件，发现会报错。这也正常我们还没有写更新。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201106235140.png\"></p>\n<p>在下面的文章我们会写 diff 更新，大家一起期待吧！</p>"},{"title":"VSCODE JS调试技巧","abbrlink":"cc3b8a8b","translate_title":"vscode-js-debugging-skills","date":"2020-12-16T03:46:52.000Z","_content":"\n## 前言\n\n我们在编码过程中，会经常遇到调试的场景。VSCODE 是我经常使用的编辑器，接下来我就将简单记录几种 VSCODE 调试的方式，如果想看完整的 VSCODE 调试内容请前往[官方地址](https://code.visualstudio.com/docs/editor/debugging)。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608099048983-image.png)\n\n<!-- more -->\n\n## 场景\n\n### 单文件 JS 调试\n\n#### 直接调试\n\n假如我有个单文件，我们在左侧可以打好断点，我们想直接调试，我们直接`F5`就会让选择调试环境，这里我们选择`NODE`环境就可以开始调试。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608099600518-image.png)\n\n然后在左侧侧边栏可以查看运行变量，watch 值，调用栈，执行的脚本，断点信息等等；在底部的 `debug console` 也可以查看输出信息。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608099760624-image.png)\n\n#### 配置文件方式\n\n对于一些项目文件，我们有固定的入口，我们可以将其写入配置文件，省去每次都打开指定文件和选择环境等操作。\n\n选择 debug 侧边栏，点击`create a launch.json file`即可，生成文件的详细信息可以去[官方文档指定章节](https://go.microsoft.com/fwlink/?linkid=830387)查看。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608100220601-image.png)\n简单的配置文件如下：\n\n```json\n{\n  // 更多信息: https://go.microsoft.com/fwlink/?linkid=830387\n  \"version\": \"0.2.0\",\n  \"configurations\": [\n    {\n      \"type\": \"node\",\n      \"request\": \"launch\", // launch 新进程 attach 附加到当前进程\n      \"name\": \"Launch Program\",\n      \"skipFiles\": [\"<node_internals>/**\"],\n      \"program\": \"${workspaceFolder}\\\\mdlint.js\" // 运行文件\n    }\n  ]\n}\n```\n\n关于`program`这个字段，我们可以如下变量字段：\n\n- workspaceFolder 工作目录，可以自己拼接路径，默认寻找 index.\\*等文件\n- file 当前打开并且激活的文件\n\n### 项目调试\n\n上述为单文件，但是一些脚手架该怎么调试呢，比如`webpack`等。比如现在我有一个[umi 的项目](https://github.com/kitety/Actual_Combat_Demos/tree/master/15-umi3)，我想调试 umi 的运行过程这要怎么做呢。\n\n### npm script 脚本方式\n\n比如在项目中我们想使用`umi dev`进行开发，我们可以在 npm scripts 中添加命令：\n\n```bash\n  \"scripts\": {\n    \"dev\": \"umi dev\",\n  }\n```\n\n而我们就可以利用这个脚本开始调试。\n\n#### 打断点\n\n开始调试之前我们就需要先打好断点，我们在执行 npm 脚本的时候，先会查看当前目录的`node_modules`的 bin 中得命令（当前找不到会往上面找，直到全局），再找到对应的文件执行。我们就可以用这种方式去打断点。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608104025324-image.png)\n\n#### launch.json\n\n我们生成 `launch.json`，点击添加配置，选择`Launch via NPM`就可以生成对应的配置，\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608104176834-image.png)\n点击生成模板代码，我们更改 runtimeArgs 第二个参数为定义在 scripts 中对应的脚本就可以了。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608104265528-image.png)\n\n修改保存之后直接 F5 就可以运行并且进入断点了。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608104411921-image.png)\n\n### 命令行方式\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608104823254-image.png)\n\n上述的方式也有一定的局限性，比如我们这个 umi 的例子，他会在运行的时候会产生**子进程**，这样我们无法断点调试子进程了，因此就有了命令行的方式。\n\n#### --inspect-brk [详细](https://nodejs.org/en/docs/guides/debugging-getting-started/)\n\n简单理解可以为审查断点，他会启用一个代理，默认为 9229 端口，也可以设置端口，他会在代码的开始位置进行断点。\n\n#### 设置脚本\n\n```json\n\"scripts\": {\n//默认9229端口，指定执行文件位置和传入的参数\n    \"debug\": \"node --inspect-brk=9229 ./node_modules/umi/bin/umi.js dev\"\n  },\n```\n\n#### 修改 launhc.json\n\n我们选择`Attach to Remote Program`\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608105497851-image.png)\n选择之后生成的字段比较多，我们保留`name`,`port`,`request`,`type`几个字段即可,其中 port 设置为脚本中设置的端口号。\n\n```bash\n{\n\n  \"version\": \"0.2.0\",\n  \"configurations\": [\n    {\n      \"name\": \"Attach to Remote\",\n      \"port\": 9229,\n      \"request\": \"attach\",\n      \"type\": \"node\"\n    }\n  ]\n}\n\n```\n\n#### 开始调试\n\n步骤如下：\n\n- yarn debug 开放监听端口\n  ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608105771810-image.png)\n- F5 启用调试进入断点\n  ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608105814771-image.png)\n\n我们这次使用的是命令行的方式，umi 在开启子进程的时候也会暴露对应的端口以便调试。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608106070629-image.png)\n执行结束之后，发现子进程已经开启了，我们就要连接到这个新开的 9230 子进程。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608106336580-image.png)\n\n#### 修改端口\n\n我们此时点击调试栏的最右侧的断开连接，修改 launch.json 的 port 为新的端口号 9230，开启调试。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608106437374-image.png)\n而此时，我们才算正式进入到了子进程的断点调试之中。\n\n## 结语\n\n以上，简单总结了使用 VSCODE 调试文件、项目方式，具体情况可以根据实际的环境来选择。\n","source":"_posts/VSCODE-JS调试技巧.md","raw":"---\ntitle: VSCODE JS调试技巧\ntags:\n  - DEBUG\n  - VSCODE\nabbrlink: cc3b8a8b\ntranslate_title: vscode-js-debugging-skills\ndate: 2020-12-16 11:46:52\n---\n\n## 前言\n\n我们在编码过程中，会经常遇到调试的场景。VSCODE 是我经常使用的编辑器，接下来我就将简单记录几种 VSCODE 调试的方式，如果想看完整的 VSCODE 调试内容请前往[官方地址](https://code.visualstudio.com/docs/editor/debugging)。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608099048983-image.png)\n\n<!-- more -->\n\n## 场景\n\n### 单文件 JS 调试\n\n#### 直接调试\n\n假如我有个单文件，我们在左侧可以打好断点，我们想直接调试，我们直接`F5`就会让选择调试环境，这里我们选择`NODE`环境就可以开始调试。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608099600518-image.png)\n\n然后在左侧侧边栏可以查看运行变量，watch 值，调用栈，执行的脚本，断点信息等等；在底部的 `debug console` 也可以查看输出信息。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608099760624-image.png)\n\n#### 配置文件方式\n\n对于一些项目文件，我们有固定的入口，我们可以将其写入配置文件，省去每次都打开指定文件和选择环境等操作。\n\n选择 debug 侧边栏，点击`create a launch.json file`即可，生成文件的详细信息可以去[官方文档指定章节](https://go.microsoft.com/fwlink/?linkid=830387)查看。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608100220601-image.png)\n简单的配置文件如下：\n\n```json\n{\n  // 更多信息: https://go.microsoft.com/fwlink/?linkid=830387\n  \"version\": \"0.2.0\",\n  \"configurations\": [\n    {\n      \"type\": \"node\",\n      \"request\": \"launch\", // launch 新进程 attach 附加到当前进程\n      \"name\": \"Launch Program\",\n      \"skipFiles\": [\"<node_internals>/**\"],\n      \"program\": \"${workspaceFolder}\\\\mdlint.js\" // 运行文件\n    }\n  ]\n}\n```\n\n关于`program`这个字段，我们可以如下变量字段：\n\n- workspaceFolder 工作目录，可以自己拼接路径，默认寻找 index.\\*等文件\n- file 当前打开并且激活的文件\n\n### 项目调试\n\n上述为单文件，但是一些脚手架该怎么调试呢，比如`webpack`等。比如现在我有一个[umi 的项目](https://github.com/kitety/Actual_Combat_Demos/tree/master/15-umi3)，我想调试 umi 的运行过程这要怎么做呢。\n\n### npm script 脚本方式\n\n比如在项目中我们想使用`umi dev`进行开发，我们可以在 npm scripts 中添加命令：\n\n```bash\n  \"scripts\": {\n    \"dev\": \"umi dev\",\n  }\n```\n\n而我们就可以利用这个脚本开始调试。\n\n#### 打断点\n\n开始调试之前我们就需要先打好断点，我们在执行 npm 脚本的时候，先会查看当前目录的`node_modules`的 bin 中得命令（当前找不到会往上面找，直到全局），再找到对应的文件执行。我们就可以用这种方式去打断点。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608104025324-image.png)\n\n#### launch.json\n\n我们生成 `launch.json`，点击添加配置，选择`Launch via NPM`就可以生成对应的配置，\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608104176834-image.png)\n点击生成模板代码，我们更改 runtimeArgs 第二个参数为定义在 scripts 中对应的脚本就可以了。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608104265528-image.png)\n\n修改保存之后直接 F5 就可以运行并且进入断点了。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608104411921-image.png)\n\n### 命令行方式\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608104823254-image.png)\n\n上述的方式也有一定的局限性，比如我们这个 umi 的例子，他会在运行的时候会产生**子进程**，这样我们无法断点调试子进程了，因此就有了命令行的方式。\n\n#### --inspect-brk [详细](https://nodejs.org/en/docs/guides/debugging-getting-started/)\n\n简单理解可以为审查断点，他会启用一个代理，默认为 9229 端口，也可以设置端口，他会在代码的开始位置进行断点。\n\n#### 设置脚本\n\n```json\n\"scripts\": {\n//默认9229端口，指定执行文件位置和传入的参数\n    \"debug\": \"node --inspect-brk=9229 ./node_modules/umi/bin/umi.js dev\"\n  },\n```\n\n#### 修改 launhc.json\n\n我们选择`Attach to Remote Program`\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608105497851-image.png)\n选择之后生成的字段比较多，我们保留`name`,`port`,`request`,`type`几个字段即可,其中 port 设置为脚本中设置的端口号。\n\n```bash\n{\n\n  \"version\": \"0.2.0\",\n  \"configurations\": [\n    {\n      \"name\": \"Attach to Remote\",\n      \"port\": 9229,\n      \"request\": \"attach\",\n      \"type\": \"node\"\n    }\n  ]\n}\n\n```\n\n#### 开始调试\n\n步骤如下：\n\n- yarn debug 开放监听端口\n  ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608105771810-image.png)\n- F5 启用调试进入断点\n  ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608105814771-image.png)\n\n我们这次使用的是命令行的方式，umi 在开启子进程的时候也会暴露对应的端口以便调试。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608106070629-image.png)\n执行结束之后，发现子进程已经开启了，我们就要连接到这个新开的 9230 子进程。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608106336580-image.png)\n\n#### 修改端口\n\n我们此时点击调试栏的最右侧的断开连接，修改 launch.json 的 port 为新的端口号 9230，开启调试。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608106437374-image.png)\n而此时，我们才算正式进入到了子进程的断点调试之中。\n\n## 结语\n\n以上，简单总结了使用 VSCODE 调试文件、项目方式，具体情况可以根据实际的环境来选择。\n","slug":"VSCODE-JS调试技巧","published":1,"updated":"2021-09-29T07:53:51.815Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy6at000op4vlhc72a8d9","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>我们在编码过程中，会经常遇到调试的场景。VSCODE 是我经常使用的编辑器，接下来我就将简单记录几种 VSCODE 调试的方式，如果想看完整的 VSCODE 调试内容请前往<a href=\"https://code.visualstudio.com/docs/editor/debugging\">官方地址</a>。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608099048983-image.png\"></p>\n<span id=\"more\"></span>\n\n<h2 id=\"场景\"><a href=\"#场景\" class=\"headerlink\" title=\"场景\"></a>场景</h2><h3 id=\"单文件-JS-调试\"><a href=\"#单文件-JS-调试\" class=\"headerlink\" title=\"单文件 JS 调试\"></a>单文件 JS 调试</h3><h4 id=\"直接调试\"><a href=\"#直接调试\" class=\"headerlink\" title=\"直接调试\"></a>直接调试</h4><p>假如我有个单文件，我们在左侧可以打好断点，我们想直接调试，我们直接<code>F5</code>就会让选择调试环境，这里我们选择<code>NODE</code>环境就可以开始调试。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608099600518-image.png\"></p>\n<p>然后在左侧侧边栏可以查看运行变量，watch 值，调用栈，执行的脚本，断点信息等等；在底部的 <code>debug console</code> 也可以查看输出信息。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608099760624-image.png\"></p>\n<h4 id=\"配置文件方式\"><a href=\"#配置文件方式\" class=\"headerlink\" title=\"配置文件方式\"></a>配置文件方式</h4><p>对于一些项目文件，我们有固定的入口，我们可以将其写入配置文件，省去每次都打开指定文件和选择环境等操作。</p>\n<p>选择 debug 侧边栏，点击<code>create a launch.json file</code>即可，生成文件的详细信息可以去<a href=\"https://go.microsoft.com/fwlink/?linkid=830387\">官方文档指定章节</a>查看。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608100220601-image.png\"><br>简单的配置文件如下：</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"comment\">// 更多信息: https://go.microsoft.com/fwlink/?linkid=830387</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;version&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;0.2.0&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;configurations&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;node&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;request&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;launch&quot;</span><span class=\"punctuation\">,</span> <span class=\"comment\">// launch 新进程 attach 附加到当前进程</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Launch Program&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;skipFiles&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"string\">&quot;&lt;node_internals&gt;/**&quot;</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;program&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;$&#123;workspaceFolder&#125;\\\\mdlint.js&quot;</span> <span class=\"comment\">// 运行文件</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">  <span class=\"punctuation\">]</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p>关于<code>program</code>这个字段，我们可以如下变量字段：</p>\n<ul>\n<li>workspaceFolder 工作目录，可以自己拼接路径，默认寻找 index.*等文件</li>\n<li>file 当前打开并且激活的文件</li>\n</ul>\n<h3 id=\"项目调试\"><a href=\"#项目调试\" class=\"headerlink\" title=\"项目调试\"></a>项目调试</h3><p>上述为单文件，但是一些脚手架该怎么调试呢，比如<code>webpack</code>等。比如现在我有一个<a href=\"https://github.com/kitety/Actual_Combat_Demos/tree/master/15-umi3\">umi 的项目</a>，我想调试 umi 的运行过程这要怎么做呢。</p>\n<h3 id=\"npm-script-脚本方式\"><a href=\"#npm-script-脚本方式\" class=\"headerlink\" title=\"npm script 脚本方式\"></a>npm script 脚本方式</h3><p>比如在项目中我们想使用<code>umi dev</code>进行开发，我们可以在 npm scripts 中添加命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">&quot;scripts&quot;</span>: &#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;dev&quot;</span>: <span class=\"string\">&quot;umi dev&quot;</span>,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>而我们就可以利用这个脚本开始调试。</p>\n<h4 id=\"打断点\"><a href=\"#打断点\" class=\"headerlink\" title=\"打断点\"></a>打断点</h4><p>开始调试之前我们就需要先打好断点，我们在执行 npm 脚本的时候，先会查看当前目录的<code>node_modules</code>的 bin 中得命令（当前找不到会往上面找，直到全局），再找到对应的文件执行。我们就可以用这种方式去打断点。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608104025324-image.png\"></p>\n<h4 id=\"launch-json\"><a href=\"#launch-json\" class=\"headerlink\" title=\"launch.json\"></a>launch.json</h4><p>我们生成 <code>launch.json</code>，点击添加配置，选择<code>Launch via NPM</code>就可以生成对应的配置，<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608104176834-image.png\"><br>点击生成模板代码，我们更改 runtimeArgs 第二个参数为定义在 scripts 中对应的脚本就可以了。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608104265528-image.png\"></p>\n<p>修改保存之后直接 F5 就可以运行并且进入断点了。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608104411921-image.png\"></p>\n<h3 id=\"命令行方式\"><a href=\"#命令行方式\" class=\"headerlink\" title=\"命令行方式\"></a>命令行方式</h3><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608104823254-image.png\"></p>\n<p>上述的方式也有一定的局限性，比如我们这个 umi 的例子，他会在运行的时候会产生<strong>子进程</strong>，这样我们无法断点调试子进程了，因此就有了命令行的方式。</p>\n<h4 id=\"–inspect-brk-详细\"><a href=\"#–inspect-brk-详细\" class=\"headerlink\" title=\"–inspect-brk 详细\"></a>–inspect-brk <a href=\"https://nodejs.org/en/docs/guides/debugging-getting-started/\">详细</a></h4><p>简单理解可以为审查断点，他会启用一个代理，默认为 9229 端口，也可以设置端口，他会在代码的开始位置进行断点。</p>\n<h4 id=\"设置脚本\"><a href=\"#设置脚本\" class=\"headerlink\" title=\"设置脚本\"></a>设置脚本</h4><figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">&quot;scripts&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\"><span class=\"comment\">//默认9229端口，指定执行文件位置和传入的参数</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;debug&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;node --inspect-brk=9229 ./node_modules/umi/bin/umi.js dev&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"修改-launhc-json\"><a href=\"#修改-launhc-json\" class=\"headerlink\" title=\"修改 launhc.json\"></a>修改 launhc.json</h4><p>我们选择<code>Attach to Remote Program</code><br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608105497851-image.png\"><br>选择之后生成的字段比较多，我们保留<code>name</code>,<code>port</code>,<code>request</code>,<code>type</code>几个字段即可,其中 port 设置为脚本中设置的端口号。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"string\">&quot;version&quot;</span>: <span class=\"string\">&quot;0.2.0&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;configurations&quot;</span>: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;Attach to Remote&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;port&quot;</span>: 9229,</span><br><span class=\"line\">      <span class=\"string\">&quot;request&quot;</span>: <span class=\"string\">&quot;attach&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;type&quot;</span>: <span class=\"string\">&quot;node&quot;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"开始调试\"><a href=\"#开始调试\" class=\"headerlink\" title=\"开始调试\"></a>开始调试</h4><p>步骤如下：</p>\n<ul>\n<li>yarn debug 开放监听端口<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608105771810-image.png\"></li>\n<li>F5 启用调试进入断点<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608105814771-image.png\"></li>\n</ul>\n<p>我们这次使用的是命令行的方式，umi 在开启子进程的时候也会暴露对应的端口以便调试。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608106070629-image.png\"><br>执行结束之后，发现子进程已经开启了，我们就要连接到这个新开的 9230 子进程。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608106336580-image.png\"></p>\n<h4 id=\"修改端口\"><a href=\"#修改端口\" class=\"headerlink\" title=\"修改端口\"></a>修改端口</h4><p>我们此时点击调试栏的最右侧的断开连接，修改 launch.json 的 port 为新的端口号 9230，开启调试。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608106437374-image.png\"><br>而此时，我们才算正式进入到了子进程的断点调试之中。</p>\n<h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p>以上，简单总结了使用 VSCODE 调试文件、项目方式，具体情况可以根据实际的环境来选择。</p>\n","site":{"data":{}},"length":2218,"excerpt":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>我们在编码过程中，会经常遇到调试的场景。VSCODE 是我经常使用的编辑器，接下来我就将简单记录几种 VSCODE 调试的方式，如果想看完整的 VSCODE 调试内容请前往<a href=\"https://code.visualstudio.com/docs/editor/debugging\">官方地址</a>。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608099048983-image.png\"></p>","more":"<h2 id=\"场景\"><a href=\"#场景\" class=\"headerlink\" title=\"场景\"></a>场景</h2><h3 id=\"单文件-JS-调试\"><a href=\"#单文件-JS-调试\" class=\"headerlink\" title=\"单文件 JS 调试\"></a>单文件 JS 调试</h3><h4 id=\"直接调试\"><a href=\"#直接调试\" class=\"headerlink\" title=\"直接调试\"></a>直接调试</h4><p>假如我有个单文件，我们在左侧可以打好断点，我们想直接调试，我们直接<code>F5</code>就会让选择调试环境，这里我们选择<code>NODE</code>环境就可以开始调试。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608099600518-image.png\"></p>\n<p>然后在左侧侧边栏可以查看运行变量，watch 值，调用栈，执行的脚本，断点信息等等；在底部的 <code>debug console</code> 也可以查看输出信息。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608099760624-image.png\"></p>\n<h4 id=\"配置文件方式\"><a href=\"#配置文件方式\" class=\"headerlink\" title=\"配置文件方式\"></a>配置文件方式</h4><p>对于一些项目文件，我们有固定的入口，我们可以将其写入配置文件，省去每次都打开指定文件和选择环境等操作。</p>\n<p>选择 debug 侧边栏，点击<code>create a launch.json file</code>即可，生成文件的详细信息可以去<a href=\"https://go.microsoft.com/fwlink/?linkid=830387\">官方文档指定章节</a>查看。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608100220601-image.png\"><br>简单的配置文件如下：</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"comment\">// 更多信息: https://go.microsoft.com/fwlink/?linkid=830387</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;version&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;0.2.0&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;configurations&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;node&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;request&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;launch&quot;</span><span class=\"punctuation\">,</span> <span class=\"comment\">// launch 新进程 attach 附加到当前进程</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Launch Program&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;skipFiles&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"string\">&quot;&lt;node_internals&gt;/**&quot;</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;program&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;$&#123;workspaceFolder&#125;\\\\mdlint.js&quot;</span> <span class=\"comment\">// 运行文件</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">  <span class=\"punctuation\">]</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p>关于<code>program</code>这个字段，我们可以如下变量字段：</p>\n<ul>\n<li>workspaceFolder 工作目录，可以自己拼接路径，默认寻找 index.*等文件</li>\n<li>file 当前打开并且激活的文件</li>\n</ul>\n<h3 id=\"项目调试\"><a href=\"#项目调试\" class=\"headerlink\" title=\"项目调试\"></a>项目调试</h3><p>上述为单文件，但是一些脚手架该怎么调试呢，比如<code>webpack</code>等。比如现在我有一个<a href=\"https://github.com/kitety/Actual_Combat_Demos/tree/master/15-umi3\">umi 的项目</a>，我想调试 umi 的运行过程这要怎么做呢。</p>\n<h3 id=\"npm-script-脚本方式\"><a href=\"#npm-script-脚本方式\" class=\"headerlink\" title=\"npm script 脚本方式\"></a>npm script 脚本方式</h3><p>比如在项目中我们想使用<code>umi dev</code>进行开发，我们可以在 npm scripts 中添加命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">&quot;scripts&quot;</span>: &#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;dev&quot;</span>: <span class=\"string\">&quot;umi dev&quot;</span>,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>而我们就可以利用这个脚本开始调试。</p>\n<h4 id=\"打断点\"><a href=\"#打断点\" class=\"headerlink\" title=\"打断点\"></a>打断点</h4><p>开始调试之前我们就需要先打好断点，我们在执行 npm 脚本的时候，先会查看当前目录的<code>node_modules</code>的 bin 中得命令（当前找不到会往上面找，直到全局），再找到对应的文件执行。我们就可以用这种方式去打断点。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608104025324-image.png\"></p>\n<h4 id=\"launch-json\"><a href=\"#launch-json\" class=\"headerlink\" title=\"launch.json\"></a>launch.json</h4><p>我们生成 <code>launch.json</code>，点击添加配置，选择<code>Launch via NPM</code>就可以生成对应的配置，<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608104176834-image.png\"><br>点击生成模板代码，我们更改 runtimeArgs 第二个参数为定义在 scripts 中对应的脚本就可以了。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608104265528-image.png\"></p>\n<p>修改保存之后直接 F5 就可以运行并且进入断点了。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608104411921-image.png\"></p>\n<h3 id=\"命令行方式\"><a href=\"#命令行方式\" class=\"headerlink\" title=\"命令行方式\"></a>命令行方式</h3><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608104823254-image.png\"></p>\n<p>上述的方式也有一定的局限性，比如我们这个 umi 的例子，他会在运行的时候会产生<strong>子进程</strong>，这样我们无法断点调试子进程了，因此就有了命令行的方式。</p>\n<h4 id=\"–inspect-brk-详细\"><a href=\"#–inspect-brk-详细\" class=\"headerlink\" title=\"–inspect-brk 详细\"></a>–inspect-brk <a href=\"https://nodejs.org/en/docs/guides/debugging-getting-started/\">详细</a></h4><p>简单理解可以为审查断点，他会启用一个代理，默认为 9229 端口，也可以设置端口，他会在代码的开始位置进行断点。</p>\n<h4 id=\"设置脚本\"><a href=\"#设置脚本\" class=\"headerlink\" title=\"设置脚本\"></a>设置脚本</h4><figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">&quot;scripts&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\"><span class=\"comment\">//默认9229端口，指定执行文件位置和传入的参数</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;debug&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;node --inspect-brk=9229 ./node_modules/umi/bin/umi.js dev&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"修改-launhc-json\"><a href=\"#修改-launhc-json\" class=\"headerlink\" title=\"修改 launhc.json\"></a>修改 launhc.json</h4><p>我们选择<code>Attach to Remote Program</code><br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608105497851-image.png\"><br>选择之后生成的字段比较多，我们保留<code>name</code>,<code>port</code>,<code>request</code>,<code>type</code>几个字段即可,其中 port 设置为脚本中设置的端口号。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"string\">&quot;version&quot;</span>: <span class=\"string\">&quot;0.2.0&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;configurations&quot;</span>: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;Attach to Remote&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;port&quot;</span>: 9229,</span><br><span class=\"line\">      <span class=\"string\">&quot;request&quot;</span>: <span class=\"string\">&quot;attach&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;type&quot;</span>: <span class=\"string\">&quot;node&quot;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"开始调试\"><a href=\"#开始调试\" class=\"headerlink\" title=\"开始调试\"></a>开始调试</h4><p>步骤如下：</p>\n<ul>\n<li>yarn debug 开放监听端口<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608105771810-image.png\"></li>\n<li>F5 启用调试进入断点<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608105814771-image.png\"></li>\n</ul>\n<p>我们这次使用的是命令行的方式，umi 在开启子进程的时候也会暴露对应的端口以便调试。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608106070629-image.png\"><br>执行结束之后，发现子进程已经开启了，我们就要连接到这个新开的 9230 子进程。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608106336580-image.png\"></p>\n<h4 id=\"修改端口\"><a href=\"#修改端口\" class=\"headerlink\" title=\"修改端口\"></a>修改端口</h4><p>我们此时点击调试栏的最右侧的断开连接，修改 launch.json 的 port 为新的端口号 9230，开启调试。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-16/1608106437374-image.png\"><br>而此时，我们才算正式进入到了子进程的断点调试之中。</p>\n<h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p>以上，简单总结了使用 VSCODE 调试文件、项目方式，具体情况可以根据实际的环境来选择。</p>"},{"title":"JS箭头函数三连问：为何用、怎么用、何时用","abbrlink":"b1d6e1fd","translate_title":"three-consecutive-questions-about-js-arrow-functions-why-how-and-when","date":"2020-03-22T01:42:08.000Z","_content":"在现代JS中最让人期待的特性就是关于箭头函数，用`=>`来标识。箭头函数有两个主要的优点：其一是非常简明的语法，另外就是直观的作用域和`this`的绑定。\n\n因为这些优点，箭头函数比起其他形式的函数声明更加受欢迎。比如，受欢迎的`airbnb eslint configuration库`会强制使用JavaScript箭头函数创建匿名函数。\n\n然而，就像世间万物一样，箭头函数有一些优点也有一些“缺点”，这就需要在使用的时候做一些权衡了。\n\n学习如何权衡是使用好箭头函数的关键。在这篇文章中我们将回顾箭头函数是怎样工作的，然后深入探讨，实际代码中箭头函数是如何改进我们代码的，以及一些箭头函数不推荐的情况。\n<!-- more -->\n什么才是箭头函数\n---\n\nJS的箭头函数大概就像python中的`lambda(python定义匿名函数的关键字)`和ruby中的`blocks(类似于闭包)`一样。\n这些匿名函数都有他们特殊的语法：首先接收一定数目的参数，然后在定义它们的函数的作用域或就近作用域中执行。\n\n接下来我们将详细探讨这些。\n\n箭头函数的语法\n---\n箭头函数有一个大体的结构，同时也有很多的特殊情况可以简化。\n核心的结构如下：\n```javascript\n(argument1, argument2, ... argumentN) => {\n    // function body\n}\n```\n\n在括号里面有一系列的参数，接着跟着一个箭头符号`=>`，最后是函数体。这跟传统的函数很相像，只是我们省略了`function`关键字，并且添加了一个`=>`在参数后面。\n\n并且，这里也有很多种情况，让箭头函数结构变得更加的简洁。\n\n首先，如果函数体里面是一个单独的表达式，你可以省略大括号直接将表达式写在一行，并且表达式的结果也将会被函数直接返回。比如：\n```javascript\nconst add = (a, b) => a + b;\n```\n其次，如果这传入的是一个单独的参数，你也可省略参数部分的括号。比如：\n\n```javascript\nconst getFirst = array => array[0];\n```\n如你所见，这样就看起来更加的简洁了，我们也将在后面说明更多的特性。\n\n高级语法\n---\n如果你了解这些高级语法之后将十分受用。\n\n首先，如果你尝试在一行书写函数，但是返回的值却是一个对象内容，你原想这样写：\n```javascript\n(name, description) => {name: name, description: description};\n```\n而问题就是这样的语法会引起歧义，会误以为你在写一个函数的函数体。\n如果想返回的是单个的对象，请用括号包装该对象：\n```JavaScript\n(name, description) => ({name: name, description: description});\n```\n封闭的上下文作用域\n---\n不像其他形式的函数，箭头函数并没有他们自己的执行上下文。实际上，这就意味着代码中的`this`和`arguments`都是继承自他们的父函数。\n\n比如，比较下面箭头函数和传统函数的区别：\n```javascript\nconst test = {\n  name: 'test object',\n  createAnonFunction: function() {\n    return function() {\n      console.log(this.name);\n      console.log(arguments);\n    };\n  },\n  createArrowFunction: function() {\n    return () => {\n      console.log(this.name);\n      console.log(arguments);\n    };\n  }\n};\n```\n我们有一个有两个方法的对象，每个方法都返回了一个匿名函数。区别在于第一个方法里面用了传统的函数表达式，后面的用了箭头函数表达式。如果我们在传入同样的参数运行，我们得到了两个不同的结果。\n```javascript\nconst anon = test.createAnonFunction('hello', 'world');\n//返回匿名函数\nconst arrow = test.createArrowFunction('hello', 'world');\nanon();\n//undefined\n//{}\n// this->window\narrow();\n//test object\n//object { '0': 'hello', '1': 'world' }\n//this->test\n```\n\n第一个匿名函数有自己的上下文（指向并非test对象），当你调用的时候没有参考的`this.name`的属性，（注意：现在`this`指向`window`），也没有创建它时调用的参数。另一个，箭头函数与创建它的函数有相同的上下文，让其可以访问参数arguments和对象。\n\n箭头函数改进您的代码\n---\n传统`lambda`函数的主要用例之一，就是将函数用于数组的遍历，现在用JavaScript箭头函数实现。\n比如你有一个有值的数组，你想去`map`遍历每一项，这时箭头函数是非常推荐的：\n```javascript\nconst words = ['hello', 'WORLD', 'Whatever'];\nconst downcasedWords = words.map(word => word.toLowerCase());\n```\n一个及其常见的例子就是返回一个对象的某个值：\n\n```javascript\nconst names = objects.map(object => object.name);\n```\n类似的，当用`forEach`来替换传统`for`循环的时候，实际上箭头函数会直观的保持`this`来自于父一级\n```javascript\nthis.examples.forEach(example => {\n  this.runExample(example);\n});\n```\nPromise和Promise链\n---\n当在编写异步程序的时候，箭头函数也会让代码更加直观和简洁。\n\nPromise可以更简单的编写异步程序。虽然你乐意去使用`async/await`，你也需要好好理解`promise`,因为这是他们的基础。\n\n使用promise，仍然需要定义你的代码执行完成之后的回调函数。\n这是箭头函数的理想位置，特别是如果您生成的函数是有状态的，同时想引用对象中的某些内容。\n```javascript\nthis.doSomethingAsync().then((result) => {\n  this.storeResult(result);\n});\n```\n\n对象转换\n---\n箭头函数的另一个常见而且十分有用的地方就是用于封装的对象转换。\n例如在Vue.js中，有一种通用模式，就是使用`mapState`将Vuex存储的各个部分，直接包含到Vue组件中。\n这涉及到定义一套`mappers`，用于从原对象到完整的转换输出，这在组件问题中实十分有必要的。\n这一系列简单的转换,使用箭头函数是最合适不过的。比如：\n```javascript\nexport default {\n  computed: {\n    ...mapState({\n      results: state => state.results,\n      users: state => state.users,\n    });\n  }\n}\n```\n你不应该使用箭头函数的情景\n---\n这里有许多箭头函数不推荐的场景，这种情况之下不仅没有帮助，而且还会造成不必要的麻烦。\n\n首先就是对象中的方法。这里有一个函数上下文的例子，对于我们理解很有帮助。\n曾经流行一种趋势，用`class`类的语法和箭头函数，为其自动绑定方法。比如:事件方法可以使用，但是仍然绑定在class类中。\n看起来就像下面的例子:\n```javascript\nclass Counter {\n  counter = 0;\n  handleClick = () => {\n    this.counter++;\n  }\n}\n```\n在这种方法中,如果被一个点击事件函数调用了，它虽然不是`Counter`的上下文中，它仍旧可以访问实例的数据，这种方式的缺点不言而喻。\n\n用这种方式的确提供了一种绑定函数的快捷方式，但是函数的表达形式多种多样，相当不直观。如果你尝试在原型使用这种对象，这将不利于测试，同时也会产生很多问题。\n相反，推荐用一种常规的绑定方式，如有必要可以绑定在实例的构造函数中:\n```javascript\nclass Counter {\n  counter = 0;\n  handleClick() {\n    this.counter++;\n  }\n  constructor() {\n    this.handleClick = this.handleClick.bind(this);\n  }\n}\n```\n深层调用\n---\n另一种使用箭头函数会让你头疼的地方，就是你去用很多函数的组合调用，尤其是函数的深层调用。\n简单的理由跟匿名函数一样，堆栈的追踪很复杂。\n\n如果你的函数仅仅在一层之下，而不是深层的迭代，这倒不是什么问题。但是如果你将函数定义为箭头函数，并且在他们之间来回调用，当你调试bug的时候你将被代码困惑，甚至得到如下的错误信息：\n```javascript\n{anonymous}()\n{anonymous}()\n{anonymous}()\n{anonymous}()\n{anonymous}()\n//anonymous 匿名\n```\n有动态上下文的函数\n---\n还有最有一种箭头函数会让你困惑的情形，就是`this`是动态绑定的时候。\n如果你在以下情形使用箭头函数，那么this的动态绑定不会如期工作，并且你也会困惑这些代码为什么不像预期那样工作，也会给你之后工作的人造成麻烦。\n一些典型的例子：\n- 事件的调用函数，this指向当前的目标属性\n- 在jquery中，大多数时候this指向的是当前被选择的元素\n- 在vue中，`methods `和`computed`中的`this`指向的是vue的组件。\n\n当然你也可以在上面的情形之下谨慎的使用箭头函数。但特别是在`jquery`和`vue`的情况下, 这通常会干扰正常功能, 并使您感到困惑：为什么看起来跟别人代码一样的代码就是不工作。\n\n总结\n---\n箭头函数是JS语言中十分特别的属性，并且使很多情形中代码更加的变化莫测。尽管如此，就像其他的语言特性，他们有各自的优缺点。因此我们使用它应该仅仅是作为一种工具，而不是无脑的简单的全部替换为箭头函数。\n\n**本文只是个人兴趣翻译，如有错误之处还望各位斧正。文章版权属于原文作者。**\n>原文地址：https://codeburst.io/javascript-arrow-functions-how-why-when-and-when-not-to-use-them-fb8c2de9dbdc\n\n\n\n\n","source":"_posts/array-function.md","raw":"---\ntitle: JS箭头函数三连问：为何用、怎么用、何时用\ntags:\n  - 翻译\n  - 前端\nabbrlink: b1d6e1fd\ntranslate_title: three-consecutive-questions-about-js-arrow-functions-why-how-and-when\ndate: 2020-03-22 09:42:08\n---\n在现代JS中最让人期待的特性就是关于箭头函数，用`=>`来标识。箭头函数有两个主要的优点：其一是非常简明的语法，另外就是直观的作用域和`this`的绑定。\n\n因为这些优点，箭头函数比起其他形式的函数声明更加受欢迎。比如，受欢迎的`airbnb eslint configuration库`会强制使用JavaScript箭头函数创建匿名函数。\n\n然而，就像世间万物一样，箭头函数有一些优点也有一些“缺点”，这就需要在使用的时候做一些权衡了。\n\n学习如何权衡是使用好箭头函数的关键。在这篇文章中我们将回顾箭头函数是怎样工作的，然后深入探讨，实际代码中箭头函数是如何改进我们代码的，以及一些箭头函数不推荐的情况。\n<!-- more -->\n什么才是箭头函数\n---\n\nJS的箭头函数大概就像python中的`lambda(python定义匿名函数的关键字)`和ruby中的`blocks(类似于闭包)`一样。\n这些匿名函数都有他们特殊的语法：首先接收一定数目的参数，然后在定义它们的函数的作用域或就近作用域中执行。\n\n接下来我们将详细探讨这些。\n\n箭头函数的语法\n---\n箭头函数有一个大体的结构，同时也有很多的特殊情况可以简化。\n核心的结构如下：\n```javascript\n(argument1, argument2, ... argumentN) => {\n    // function body\n}\n```\n\n在括号里面有一系列的参数，接着跟着一个箭头符号`=>`，最后是函数体。这跟传统的函数很相像，只是我们省略了`function`关键字，并且添加了一个`=>`在参数后面。\n\n并且，这里也有很多种情况，让箭头函数结构变得更加的简洁。\n\n首先，如果函数体里面是一个单独的表达式，你可以省略大括号直接将表达式写在一行，并且表达式的结果也将会被函数直接返回。比如：\n```javascript\nconst add = (a, b) => a + b;\n```\n其次，如果这传入的是一个单独的参数，你也可省略参数部分的括号。比如：\n\n```javascript\nconst getFirst = array => array[0];\n```\n如你所见，这样就看起来更加的简洁了，我们也将在后面说明更多的特性。\n\n高级语法\n---\n如果你了解这些高级语法之后将十分受用。\n\n首先，如果你尝试在一行书写函数，但是返回的值却是一个对象内容，你原想这样写：\n```javascript\n(name, description) => {name: name, description: description};\n```\n而问题就是这样的语法会引起歧义，会误以为你在写一个函数的函数体。\n如果想返回的是单个的对象，请用括号包装该对象：\n```JavaScript\n(name, description) => ({name: name, description: description});\n```\n封闭的上下文作用域\n---\n不像其他形式的函数，箭头函数并没有他们自己的执行上下文。实际上，这就意味着代码中的`this`和`arguments`都是继承自他们的父函数。\n\n比如，比较下面箭头函数和传统函数的区别：\n```javascript\nconst test = {\n  name: 'test object',\n  createAnonFunction: function() {\n    return function() {\n      console.log(this.name);\n      console.log(arguments);\n    };\n  },\n  createArrowFunction: function() {\n    return () => {\n      console.log(this.name);\n      console.log(arguments);\n    };\n  }\n};\n```\n我们有一个有两个方法的对象，每个方法都返回了一个匿名函数。区别在于第一个方法里面用了传统的函数表达式，后面的用了箭头函数表达式。如果我们在传入同样的参数运行，我们得到了两个不同的结果。\n```javascript\nconst anon = test.createAnonFunction('hello', 'world');\n//返回匿名函数\nconst arrow = test.createArrowFunction('hello', 'world');\nanon();\n//undefined\n//{}\n// this->window\narrow();\n//test object\n//object { '0': 'hello', '1': 'world' }\n//this->test\n```\n\n第一个匿名函数有自己的上下文（指向并非test对象），当你调用的时候没有参考的`this.name`的属性，（注意：现在`this`指向`window`），也没有创建它时调用的参数。另一个，箭头函数与创建它的函数有相同的上下文，让其可以访问参数arguments和对象。\n\n箭头函数改进您的代码\n---\n传统`lambda`函数的主要用例之一，就是将函数用于数组的遍历，现在用JavaScript箭头函数实现。\n比如你有一个有值的数组，你想去`map`遍历每一项，这时箭头函数是非常推荐的：\n```javascript\nconst words = ['hello', 'WORLD', 'Whatever'];\nconst downcasedWords = words.map(word => word.toLowerCase());\n```\n一个及其常见的例子就是返回一个对象的某个值：\n\n```javascript\nconst names = objects.map(object => object.name);\n```\n类似的，当用`forEach`来替换传统`for`循环的时候，实际上箭头函数会直观的保持`this`来自于父一级\n```javascript\nthis.examples.forEach(example => {\n  this.runExample(example);\n});\n```\nPromise和Promise链\n---\n当在编写异步程序的时候，箭头函数也会让代码更加直观和简洁。\n\nPromise可以更简单的编写异步程序。虽然你乐意去使用`async/await`，你也需要好好理解`promise`,因为这是他们的基础。\n\n使用promise，仍然需要定义你的代码执行完成之后的回调函数。\n这是箭头函数的理想位置，特别是如果您生成的函数是有状态的，同时想引用对象中的某些内容。\n```javascript\nthis.doSomethingAsync().then((result) => {\n  this.storeResult(result);\n});\n```\n\n对象转换\n---\n箭头函数的另一个常见而且十分有用的地方就是用于封装的对象转换。\n例如在Vue.js中，有一种通用模式，就是使用`mapState`将Vuex存储的各个部分，直接包含到Vue组件中。\n这涉及到定义一套`mappers`，用于从原对象到完整的转换输出，这在组件问题中实十分有必要的。\n这一系列简单的转换,使用箭头函数是最合适不过的。比如：\n```javascript\nexport default {\n  computed: {\n    ...mapState({\n      results: state => state.results,\n      users: state => state.users,\n    });\n  }\n}\n```\n你不应该使用箭头函数的情景\n---\n这里有许多箭头函数不推荐的场景，这种情况之下不仅没有帮助，而且还会造成不必要的麻烦。\n\n首先就是对象中的方法。这里有一个函数上下文的例子，对于我们理解很有帮助。\n曾经流行一种趋势，用`class`类的语法和箭头函数，为其自动绑定方法。比如:事件方法可以使用，但是仍然绑定在class类中。\n看起来就像下面的例子:\n```javascript\nclass Counter {\n  counter = 0;\n  handleClick = () => {\n    this.counter++;\n  }\n}\n```\n在这种方法中,如果被一个点击事件函数调用了，它虽然不是`Counter`的上下文中，它仍旧可以访问实例的数据，这种方式的缺点不言而喻。\n\n用这种方式的确提供了一种绑定函数的快捷方式，但是函数的表达形式多种多样，相当不直观。如果你尝试在原型使用这种对象，这将不利于测试，同时也会产生很多问题。\n相反，推荐用一种常规的绑定方式，如有必要可以绑定在实例的构造函数中:\n```javascript\nclass Counter {\n  counter = 0;\n  handleClick() {\n    this.counter++;\n  }\n  constructor() {\n    this.handleClick = this.handleClick.bind(this);\n  }\n}\n```\n深层调用\n---\n另一种使用箭头函数会让你头疼的地方，就是你去用很多函数的组合调用，尤其是函数的深层调用。\n简单的理由跟匿名函数一样，堆栈的追踪很复杂。\n\n如果你的函数仅仅在一层之下，而不是深层的迭代，这倒不是什么问题。但是如果你将函数定义为箭头函数，并且在他们之间来回调用，当你调试bug的时候你将被代码困惑，甚至得到如下的错误信息：\n```javascript\n{anonymous}()\n{anonymous}()\n{anonymous}()\n{anonymous}()\n{anonymous}()\n//anonymous 匿名\n```\n有动态上下文的函数\n---\n还有最有一种箭头函数会让你困惑的情形，就是`this`是动态绑定的时候。\n如果你在以下情形使用箭头函数，那么this的动态绑定不会如期工作，并且你也会困惑这些代码为什么不像预期那样工作，也会给你之后工作的人造成麻烦。\n一些典型的例子：\n- 事件的调用函数，this指向当前的目标属性\n- 在jquery中，大多数时候this指向的是当前被选择的元素\n- 在vue中，`methods `和`computed`中的`this`指向的是vue的组件。\n\n当然你也可以在上面的情形之下谨慎的使用箭头函数。但特别是在`jquery`和`vue`的情况下, 这通常会干扰正常功能, 并使您感到困惑：为什么看起来跟别人代码一样的代码就是不工作。\n\n总结\n---\n箭头函数是JS语言中十分特别的属性，并且使很多情形中代码更加的变化莫测。尽管如此，就像其他的语言特性，他们有各自的优缺点。因此我们使用它应该仅仅是作为一种工具，而不是无脑的简单的全部替换为箭头函数。\n\n**本文只是个人兴趣翻译，如有错误之处还望各位斧正。文章版权属于原文作者。**\n>原文地址：https://codeburst.io/javascript-arrow-functions-how-why-when-and-when-not-to-use-them-fb8c2de9dbdc\n\n\n\n\n","slug":"array-function","published":1,"updated":"2021-09-29T07:53:51.816Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy6at000qp4vlhfmbf597","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>在现代JS中最让人期待的特性就是关于箭头函数，用<code>=&gt;</code>来标识。箭头函数有两个主要的优点：其一是非常简明的语法，另外就是直观的作用域和<code>this</code>的绑定。</p>\n<p>因为这些优点，箭头函数比起其他形式的函数声明更加受欢迎。比如，受欢迎的<code>airbnb eslint configuration库</code>会强制使用JavaScript箭头函数创建匿名函数。</p>\n<p>然而，就像世间万物一样，箭头函数有一些优点也有一些“缺点”，这就需要在使用的时候做一些权衡了。</p>\n<p>学习如何权衡是使用好箭头函数的关键。在这篇文章中我们将回顾箭头函数是怎样工作的，然后深入探讨，实际代码中箭头函数是如何改进我们代码的，以及一些箭头函数不推荐的情况。</p>\n<span id=\"more\"></span>\n<h2 id=\"什么才是箭头函数\"><a href=\"#什么才是箭头函数\" class=\"headerlink\" title=\"什么才是箭头函数\"></a>什么才是箭头函数</h2><p>JS的箭头函数大概就像python中的<code>lambda(python定义匿名函数的关键字)</code>和ruby中的<code>blocks(类似于闭包)</code>一样。<br>这些匿名函数都有他们特殊的语法：首先接收一定数目的参数，然后在定义它们的函数的作用域或就近作用域中执行。</p>\n<p>接下来我们将详细探讨这些。</p>\n<h2 id=\"箭头函数的语法\"><a href=\"#箭头函数的语法\" class=\"headerlink\" title=\"箭头函数的语法\"></a>箭头函数的语法</h2><p>箭头函数有一个大体的结构，同时也有很多的特殊情况可以简化。<br>核心的结构如下：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(argument1, argument2, ... argumentN) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"comment\">// function body</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>在括号里面有一系列的参数，接着跟着一个箭头符号<code>=&gt;</code>，最后是函数体。这跟传统的函数很相像，只是我们省略了<code>function</code>关键字，并且添加了一个<code>=&gt;</code>在参数后面。</p>\n<p>并且，这里也有很多种情况，让箭头函数结构变得更加的简洁。</p>\n<p>首先，如果函数体里面是一个单独的表达式，你可以省略大括号直接将表达式写在一行，并且表达式的结果也将会被函数直接返回。比如：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">add</span> = (<span class=\"params\">a, b</span>) =&gt; a + b;</span><br></pre></td></tr></table></figure>\n<p>其次，如果这传入的是一个单独的参数，你也可省略参数部分的括号。比如：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">getFirst</span> = array =&gt; array[<span class=\"number\">0</span>];</span><br></pre></td></tr></table></figure>\n<p>如你所见，这样就看起来更加的简洁了，我们也将在后面说明更多的特性。</p>\n<h2 id=\"高级语法\"><a href=\"#高级语法\" class=\"headerlink\" title=\"高级语法\"></a>高级语法</h2><p>如果你了解这些高级语法之后将十分受用。</p>\n<p>首先，如果你尝试在一行书写函数，但是返回的值却是一个对象内容，你原想这样写：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(name, description) =&gt; &#123;<span class=\"attr\">name</span>: name, <span class=\"attr\">description</span>: description&#125;;</span><br></pre></td></tr></table></figure>\n<p>而问题就是这样的语法会引起歧义，会误以为你在写一个函数的函数体。<br>如果想返回的是单个的对象，请用括号包装该对象：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(name, description) =&gt; (&#123;<span class=\"attr\">name</span>: name, <span class=\"attr\">description</span>: description&#125;);</span><br></pre></td></tr></table></figure>\n<h2 id=\"封闭的上下文作用域\"><a href=\"#封闭的上下文作用域\" class=\"headerlink\" title=\"封闭的上下文作用域\"></a>封闭的上下文作用域</h2><p>不像其他形式的函数，箭头函数并没有他们自己的执行上下文。实际上，这就意味着代码中的<code>this</code>和<code>arguments</code>都是继承自他们的父函数。</p>\n<p>比如，比较下面箭头函数和传统函数的区别：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> test = &#123;</span><br><span class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">&#x27;test object&#x27;</span>,</span><br><span class=\"line\">  <span class=\"attr\">createAnonFunction</span>: <span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">      <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">name</span>);</span><br><span class=\"line\">      <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">arguments</span>);</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">createArrowFunction</span>: <span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">name</span>);</span><br><span class=\"line\">      <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">arguments</span>);</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>我们有一个有两个方法的对象，每个方法都返回了一个匿名函数。区别在于第一个方法里面用了传统的函数表达式，后面的用了箭头函数表达式。如果我们在传入同样的参数运行，我们得到了两个不同的结果。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> anon = test.<span class=\"title function_\">createAnonFunction</span>(<span class=\"string\">&#x27;hello&#x27;</span>, <span class=\"string\">&#x27;world&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">//返回匿名函数</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> arrow = test.<span class=\"title function_\">createArrowFunction</span>(<span class=\"string\">&#x27;hello&#x27;</span>, <span class=\"string\">&#x27;world&#x27;</span>);</span><br><span class=\"line\"><span class=\"title function_\">anon</span>();</span><br><span class=\"line\"><span class=\"comment\">//undefined</span></span><br><span class=\"line\"><span class=\"comment\">//&#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">// this-&gt;window</span></span><br><span class=\"line\"><span class=\"title function_\">arrow</span>();</span><br><span class=\"line\"><span class=\"comment\">//test object</span></span><br><span class=\"line\"><span class=\"comment\">//object &#123; &#x27;0&#x27;: &#x27;hello&#x27;, &#x27;1&#x27;: &#x27;world&#x27; &#125;</span></span><br><span class=\"line\"><span class=\"comment\">//this-&gt;test</span></span><br></pre></td></tr></table></figure>\n\n<p>第一个匿名函数有自己的上下文（指向并非test对象），当你调用的时候没有参考的<code>this.name</code>的属性，（注意：现在<code>this</code>指向<code>window</code>），也没有创建它时调用的参数。另一个，箭头函数与创建它的函数有相同的上下文，让其可以访问参数arguments和对象。</p>\n<h2 id=\"箭头函数改进您的代码\"><a href=\"#箭头函数改进您的代码\" class=\"headerlink\" title=\"箭头函数改进您的代码\"></a>箭头函数改进您的代码</h2><p>传统<code>lambda</code>函数的主要用例之一，就是将函数用于数组的遍历，现在用JavaScript箭头函数实现。<br>比如你有一个有值的数组，你想去<code>map</code>遍历每一项，这时箭头函数是非常推荐的：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> words = [<span class=\"string\">&#x27;hello&#x27;</span>, <span class=\"string\">&#x27;WORLD&#x27;</span>, <span class=\"string\">&#x27;Whatever&#x27;</span>];</span><br><span class=\"line\"><span class=\"keyword\">const</span> downcasedWords = words.<span class=\"title function_\">map</span>(<span class=\"function\"><span class=\"params\">word</span> =&gt;</span> word.<span class=\"title function_\">toLowerCase</span>());</span><br></pre></td></tr></table></figure>\n<p>一个及其常见的例子就是返回一个对象的某个值：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> names = objects.<span class=\"title function_\">map</span>(<span class=\"function\"><span class=\"params\">object</span> =&gt;</span> object.<span class=\"property\">name</span>);</span><br></pre></td></tr></table></figure>\n<p>类似的，当用<code>forEach</code>来替换传统<code>for</code>循环的时候，实际上箭头函数会直观的保持<code>this</code>来自于父一级</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">this</span>.<span class=\"property\">examples</span>.<span class=\"title function_\">forEach</span>(<span class=\"function\"><span class=\"params\">example</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"title function_\">runExample</span>(example);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h2 id=\"Promise和Promise链\"><a href=\"#Promise和Promise链\" class=\"headerlink\" title=\"Promise和Promise链\"></a>Promise和Promise链</h2><p>当在编写异步程序的时候，箭头函数也会让代码更加直观和简洁。</p>\n<p>Promise可以更简单的编写异步程序。虽然你乐意去使用<code>async/await</code>，你也需要好好理解<code>promise</code>,因为这是他们的基础。</p>\n<p>使用promise，仍然需要定义你的代码执行完成之后的回调函数。<br>这是箭头函数的理想位置，特别是如果您生成的函数是有状态的，同时想引用对象中的某些内容。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">this</span>.<span class=\"title function_\">doSomethingAsync</span>().<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">result</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"title function_\">storeResult</span>(result);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"对象转换\"><a href=\"#对象转换\" class=\"headerlink\" title=\"对象转换\"></a>对象转换</h2><p>箭头函数的另一个常见而且十分有用的地方就是用于封装的对象转换。<br>例如在Vue.js中，有一种通用模式，就是使用<code>mapState</code>将Vuex存储的各个部分，直接包含到Vue组件中。<br>这涉及到定义一套<code>mappers</code>，用于从原对象到完整的转换输出，这在组件问题中实十分有必要的。<br>这一系列简单的转换,使用箭头函数是最合适不过的。比如：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  <span class=\"attr\">computed</span>: &#123;</span><br><span class=\"line\">    ...<span class=\"title function_\">mapState</span>(&#123;</span><br><span class=\"line\">      <span class=\"attr\">results</span>: <span class=\"function\"><span class=\"params\">state</span> =&gt;</span> state.<span class=\"property\">results</span>,</span><br><span class=\"line\">      <span class=\"attr\">users</span>: <span class=\"function\"><span class=\"params\">state</span> =&gt;</span> state.<span class=\"property\">users</span>,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"你不应该使用箭头函数的情景\"><a href=\"#你不应该使用箭头函数的情景\" class=\"headerlink\" title=\"你不应该使用箭头函数的情景\"></a>你不应该使用箭头函数的情景</h2><p>这里有许多箭头函数不推荐的场景，这种情况之下不仅没有帮助，而且还会造成不必要的麻烦。</p>\n<p>首先就是对象中的方法。这里有一个函数上下文的例子，对于我们理解很有帮助。<br>曾经流行一种趋势，用<code>class</code>类的语法和箭头函数，为其自动绑定方法。比如:事件方法可以使用，但是仍然绑定在class类中。<br>看起来就像下面的例子:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Counter</span> &#123;</span><br><span class=\"line\">  counter = <span class=\"number\">0</span>;</span><br><span class=\"line\">  handleClick = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">counter</span>++;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>在这种方法中,如果被一个点击事件函数调用了，它虽然不是<code>Counter</code>的上下文中，它仍旧可以访问实例的数据，这种方式的缺点不言而喻。</p>\n<p>用这种方式的确提供了一种绑定函数的快捷方式，但是函数的表达形式多种多样，相当不直观。如果你尝试在原型使用这种对象，这将不利于测试，同时也会产生很多问题。<br>相反，推荐用一种常规的绑定方式，如有必要可以绑定在实例的构造函数中:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Counter</span> &#123;</span><br><span class=\"line\">  counter = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"title function_\">handleClick</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">counter</span>++;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"title function_\">constructor</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">handleClick</span> = <span class=\"variable language_\">this</span>.<span class=\"property\">handleClick</span>.<span class=\"title function_\">bind</span>(<span class=\"variable language_\">this</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"深层调用\"><a href=\"#深层调用\" class=\"headerlink\" title=\"深层调用\"></a>深层调用</h2><p>另一种使用箭头函数会让你头疼的地方，就是你去用很多函数的组合调用，尤其是函数的深层调用。<br>简单的理由跟匿名函数一样，堆栈的追踪很复杂。</p>\n<p>如果你的函数仅仅在一层之下，而不是深层的迭代，这倒不是什么问题。但是如果你将函数定义为箭头函数，并且在他们之间来回调用，当你调试bug的时候你将被代码困惑，甚至得到如下的错误信息：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;anonymous&#125;()</span><br><span class=\"line\">&#123;anonymous&#125;()</span><br><span class=\"line\">&#123;anonymous&#125;()</span><br><span class=\"line\">&#123;anonymous&#125;()</span><br><span class=\"line\">&#123;anonymous&#125;()</span><br><span class=\"line\"><span class=\"comment\">//anonymous 匿名</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"有动态上下文的函数\"><a href=\"#有动态上下文的函数\" class=\"headerlink\" title=\"有动态上下文的函数\"></a>有动态上下文的函数</h2><p>还有最有一种箭头函数会让你困惑的情形，就是<code>this</code>是动态绑定的时候。<br>如果你在以下情形使用箭头函数，那么this的动态绑定不会如期工作，并且你也会困惑这些代码为什么不像预期那样工作，也会给你之后工作的人造成麻烦。<br>一些典型的例子：</p>\n<ul>\n<li>事件的调用函数，this指向当前的目标属性</li>\n<li>在jquery中，大多数时候this指向的是当前被选择的元素</li>\n<li>在vue中，<code>methods </code>和<code>computed</code>中的<code>this</code>指向的是vue的组件。</li>\n</ul>\n<p>当然你也可以在上面的情形之下谨慎的使用箭头函数。但特别是在<code>jquery</code>和<code>vue</code>的情况下, 这通常会干扰正常功能, 并使您感到困惑：为什么看起来跟别人代码一样的代码就是不工作。</p>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><p>箭头函数是JS语言中十分特别的属性，并且使很多情形中代码更加的变化莫测。尽管如此，就像其他的语言特性，他们有各自的优缺点。因此我们使用它应该仅仅是作为一种工具，而不是无脑的简单的全部替换为箭头函数。</p>\n<p><strong>本文只是个人兴趣翻译，如有错误之处还望各位斧正。文章版权属于原文作者。</strong></p>\n<blockquote>\n<p>原文地址：<a href=\"https://codeburst.io/javascript-arrow-functions-how-why-when-and-when-not-to-use-them-fb8c2de9dbdc\">https://codeburst.io/javascript-arrow-functions-how-why-when-and-when-not-to-use-them-fb8c2de9dbdc</a></p>\n</blockquote>\n","site":{"data":{}},"length":4457,"excerpt":"<p>在现代JS中最让人期待的特性就是关于箭头函数，用<code>=&gt;</code>来标识。箭头函数有两个主要的优点：其一是非常简明的语法，另外就是直观的作用域和<code>this</code>的绑定。</p>\n<p>因为这些优点，箭头函数比起其他形式的函数声明更加受欢迎。比如，受欢迎的<code>airbnb eslint configuration库</code>会强制使用JavaScript箭头函数创建匿名函数。</p>\n<p>然而，就像世间万物一样，箭头函数有一些优点也有一些“缺点”，这就需要在使用的时候做一些权衡了。</p>\n<p>学习如何权衡是使用好箭头函数的关键。在这篇文章中我们将回顾箭头函数是怎样工作的，然后深入探讨，实际代码中箭头函数是如何改进我们代码的，以及一些箭头函数不推荐的情况。</p>","more":"<h2 id=\"什么才是箭头函数\"><a href=\"#什么才是箭头函数\" class=\"headerlink\" title=\"什么才是箭头函数\"></a>什么才是箭头函数</h2><p>JS的箭头函数大概就像python中的<code>lambda(python定义匿名函数的关键字)</code>和ruby中的<code>blocks(类似于闭包)</code>一样。<br>这些匿名函数都有他们特殊的语法：首先接收一定数目的参数，然后在定义它们的函数的作用域或就近作用域中执行。</p>\n<p>接下来我们将详细探讨这些。</p>\n<h2 id=\"箭头函数的语法\"><a href=\"#箭头函数的语法\" class=\"headerlink\" title=\"箭头函数的语法\"></a>箭头函数的语法</h2><p>箭头函数有一个大体的结构，同时也有很多的特殊情况可以简化。<br>核心的结构如下：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(argument1, argument2, ... argumentN) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"comment\">// function body</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>在括号里面有一系列的参数，接着跟着一个箭头符号<code>=&gt;</code>，最后是函数体。这跟传统的函数很相像，只是我们省略了<code>function</code>关键字，并且添加了一个<code>=&gt;</code>在参数后面。</p>\n<p>并且，这里也有很多种情况，让箭头函数结构变得更加的简洁。</p>\n<p>首先，如果函数体里面是一个单独的表达式，你可以省略大括号直接将表达式写在一行，并且表达式的结果也将会被函数直接返回。比如：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">add</span> = (<span class=\"params\">a, b</span>) =&gt; a + b;</span><br></pre></td></tr></table></figure>\n<p>其次，如果这传入的是一个单独的参数，你也可省略参数部分的括号。比如：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">getFirst</span> = array =&gt; array[<span class=\"number\">0</span>];</span><br></pre></td></tr></table></figure>\n<p>如你所见，这样就看起来更加的简洁了，我们也将在后面说明更多的特性。</p>\n<h2 id=\"高级语法\"><a href=\"#高级语法\" class=\"headerlink\" title=\"高级语法\"></a>高级语法</h2><p>如果你了解这些高级语法之后将十分受用。</p>\n<p>首先，如果你尝试在一行书写函数，但是返回的值却是一个对象内容，你原想这样写：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(name, description) =&gt; &#123;<span class=\"attr\">name</span>: name, <span class=\"attr\">description</span>: description&#125;;</span><br></pre></td></tr></table></figure>\n<p>而问题就是这样的语法会引起歧义，会误以为你在写一个函数的函数体。<br>如果想返回的是单个的对象，请用括号包装该对象：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(name, description) =&gt; (&#123;<span class=\"attr\">name</span>: name, <span class=\"attr\">description</span>: description&#125;);</span><br></pre></td></tr></table></figure>\n<h2 id=\"封闭的上下文作用域\"><a href=\"#封闭的上下文作用域\" class=\"headerlink\" title=\"封闭的上下文作用域\"></a>封闭的上下文作用域</h2><p>不像其他形式的函数，箭头函数并没有他们自己的执行上下文。实际上，这就意味着代码中的<code>this</code>和<code>arguments</code>都是继承自他们的父函数。</p>\n<p>比如，比较下面箭头函数和传统函数的区别：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> test = &#123;</span><br><span class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">&#x27;test object&#x27;</span>,</span><br><span class=\"line\">  <span class=\"attr\">createAnonFunction</span>: <span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">      <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">name</span>);</span><br><span class=\"line\">      <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">arguments</span>);</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">createArrowFunction</span>: <span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">name</span>);</span><br><span class=\"line\">      <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">arguments</span>);</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>我们有一个有两个方法的对象，每个方法都返回了一个匿名函数。区别在于第一个方法里面用了传统的函数表达式，后面的用了箭头函数表达式。如果我们在传入同样的参数运行，我们得到了两个不同的结果。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> anon = test.<span class=\"title function_\">createAnonFunction</span>(<span class=\"string\">&#x27;hello&#x27;</span>, <span class=\"string\">&#x27;world&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">//返回匿名函数</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> arrow = test.<span class=\"title function_\">createArrowFunction</span>(<span class=\"string\">&#x27;hello&#x27;</span>, <span class=\"string\">&#x27;world&#x27;</span>);</span><br><span class=\"line\"><span class=\"title function_\">anon</span>();</span><br><span class=\"line\"><span class=\"comment\">//undefined</span></span><br><span class=\"line\"><span class=\"comment\">//&#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">// this-&gt;window</span></span><br><span class=\"line\"><span class=\"title function_\">arrow</span>();</span><br><span class=\"line\"><span class=\"comment\">//test object</span></span><br><span class=\"line\"><span class=\"comment\">//object &#123; &#x27;0&#x27;: &#x27;hello&#x27;, &#x27;1&#x27;: &#x27;world&#x27; &#125;</span></span><br><span class=\"line\"><span class=\"comment\">//this-&gt;test</span></span><br></pre></td></tr></table></figure>\n\n<p>第一个匿名函数有自己的上下文（指向并非test对象），当你调用的时候没有参考的<code>this.name</code>的属性，（注意：现在<code>this</code>指向<code>window</code>），也没有创建它时调用的参数。另一个，箭头函数与创建它的函数有相同的上下文，让其可以访问参数arguments和对象。</p>\n<h2 id=\"箭头函数改进您的代码\"><a href=\"#箭头函数改进您的代码\" class=\"headerlink\" title=\"箭头函数改进您的代码\"></a>箭头函数改进您的代码</h2><p>传统<code>lambda</code>函数的主要用例之一，就是将函数用于数组的遍历，现在用JavaScript箭头函数实现。<br>比如你有一个有值的数组，你想去<code>map</code>遍历每一项，这时箭头函数是非常推荐的：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> words = [<span class=\"string\">&#x27;hello&#x27;</span>, <span class=\"string\">&#x27;WORLD&#x27;</span>, <span class=\"string\">&#x27;Whatever&#x27;</span>];</span><br><span class=\"line\"><span class=\"keyword\">const</span> downcasedWords = words.<span class=\"title function_\">map</span>(<span class=\"function\"><span class=\"params\">word</span> =&gt;</span> word.<span class=\"title function_\">toLowerCase</span>());</span><br></pre></td></tr></table></figure>\n<p>一个及其常见的例子就是返回一个对象的某个值：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> names = objects.<span class=\"title function_\">map</span>(<span class=\"function\"><span class=\"params\">object</span> =&gt;</span> object.<span class=\"property\">name</span>);</span><br></pre></td></tr></table></figure>\n<p>类似的，当用<code>forEach</code>来替换传统<code>for</code>循环的时候，实际上箭头函数会直观的保持<code>this</code>来自于父一级</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">this</span>.<span class=\"property\">examples</span>.<span class=\"title function_\">forEach</span>(<span class=\"function\"><span class=\"params\">example</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"title function_\">runExample</span>(example);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h2 id=\"Promise和Promise链\"><a href=\"#Promise和Promise链\" class=\"headerlink\" title=\"Promise和Promise链\"></a>Promise和Promise链</h2><p>当在编写异步程序的时候，箭头函数也会让代码更加直观和简洁。</p>\n<p>Promise可以更简单的编写异步程序。虽然你乐意去使用<code>async/await</code>，你也需要好好理解<code>promise</code>,因为这是他们的基础。</p>\n<p>使用promise，仍然需要定义你的代码执行完成之后的回调函数。<br>这是箭头函数的理想位置，特别是如果您生成的函数是有状态的，同时想引用对象中的某些内容。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">this</span>.<span class=\"title function_\">doSomethingAsync</span>().<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">result</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"title function_\">storeResult</span>(result);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"对象转换\"><a href=\"#对象转换\" class=\"headerlink\" title=\"对象转换\"></a>对象转换</h2><p>箭头函数的另一个常见而且十分有用的地方就是用于封装的对象转换。<br>例如在Vue.js中，有一种通用模式，就是使用<code>mapState</code>将Vuex存储的各个部分，直接包含到Vue组件中。<br>这涉及到定义一套<code>mappers</code>，用于从原对象到完整的转换输出，这在组件问题中实十分有必要的。<br>这一系列简单的转换,使用箭头函数是最合适不过的。比如：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  <span class=\"attr\">computed</span>: &#123;</span><br><span class=\"line\">    ...<span class=\"title function_\">mapState</span>(&#123;</span><br><span class=\"line\">      <span class=\"attr\">results</span>: <span class=\"function\"><span class=\"params\">state</span> =&gt;</span> state.<span class=\"property\">results</span>,</span><br><span class=\"line\">      <span class=\"attr\">users</span>: <span class=\"function\"><span class=\"params\">state</span> =&gt;</span> state.<span class=\"property\">users</span>,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"你不应该使用箭头函数的情景\"><a href=\"#你不应该使用箭头函数的情景\" class=\"headerlink\" title=\"你不应该使用箭头函数的情景\"></a>你不应该使用箭头函数的情景</h2><p>这里有许多箭头函数不推荐的场景，这种情况之下不仅没有帮助，而且还会造成不必要的麻烦。</p>\n<p>首先就是对象中的方法。这里有一个函数上下文的例子，对于我们理解很有帮助。<br>曾经流行一种趋势，用<code>class</code>类的语法和箭头函数，为其自动绑定方法。比如:事件方法可以使用，但是仍然绑定在class类中。<br>看起来就像下面的例子:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Counter</span> &#123;</span><br><span class=\"line\">  counter = <span class=\"number\">0</span>;</span><br><span class=\"line\">  handleClick = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">counter</span>++;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>在这种方法中,如果被一个点击事件函数调用了，它虽然不是<code>Counter</code>的上下文中，它仍旧可以访问实例的数据，这种方式的缺点不言而喻。</p>\n<p>用这种方式的确提供了一种绑定函数的快捷方式，但是函数的表达形式多种多样，相当不直观。如果你尝试在原型使用这种对象，这将不利于测试，同时也会产生很多问题。<br>相反，推荐用一种常规的绑定方式，如有必要可以绑定在实例的构造函数中:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Counter</span> &#123;</span><br><span class=\"line\">  counter = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"title function_\">handleClick</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">counter</span>++;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"title function_\">constructor</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">handleClick</span> = <span class=\"variable language_\">this</span>.<span class=\"property\">handleClick</span>.<span class=\"title function_\">bind</span>(<span class=\"variable language_\">this</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"深层调用\"><a href=\"#深层调用\" class=\"headerlink\" title=\"深层调用\"></a>深层调用</h2><p>另一种使用箭头函数会让你头疼的地方，就是你去用很多函数的组合调用，尤其是函数的深层调用。<br>简单的理由跟匿名函数一样，堆栈的追踪很复杂。</p>\n<p>如果你的函数仅仅在一层之下，而不是深层的迭代，这倒不是什么问题。但是如果你将函数定义为箭头函数，并且在他们之间来回调用，当你调试bug的时候你将被代码困惑，甚至得到如下的错误信息：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;anonymous&#125;()</span><br><span class=\"line\">&#123;anonymous&#125;()</span><br><span class=\"line\">&#123;anonymous&#125;()</span><br><span class=\"line\">&#123;anonymous&#125;()</span><br><span class=\"line\">&#123;anonymous&#125;()</span><br><span class=\"line\"><span class=\"comment\">//anonymous 匿名</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"有动态上下文的函数\"><a href=\"#有动态上下文的函数\" class=\"headerlink\" title=\"有动态上下文的函数\"></a>有动态上下文的函数</h2><p>还有最有一种箭头函数会让你困惑的情形，就是<code>this</code>是动态绑定的时候。<br>如果你在以下情形使用箭头函数，那么this的动态绑定不会如期工作，并且你也会困惑这些代码为什么不像预期那样工作，也会给你之后工作的人造成麻烦。<br>一些典型的例子：</p>\n<ul>\n<li>事件的调用函数，this指向当前的目标属性</li>\n<li>在jquery中，大多数时候this指向的是当前被选择的元素</li>\n<li>在vue中，<code>methods </code>和<code>computed</code>中的<code>this</code>指向的是vue的组件。</li>\n</ul>\n<p>当然你也可以在上面的情形之下谨慎的使用箭头函数。但特别是在<code>jquery</code>和<code>vue</code>的情况下, 这通常会干扰正常功能, 并使您感到困惑：为什么看起来跟别人代码一样的代码就是不工作。</p>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><p>箭头函数是JS语言中十分特别的属性，并且使很多情形中代码更加的变化莫测。尽管如此，就像其他的语言特性，他们有各自的优缺点。因此我们使用它应该仅仅是作为一种工具，而不是无脑的简单的全部替换为箭头函数。</p>\n<p><strong>本文只是个人兴趣翻译，如有错误之处还望各位斧正。文章版权属于原文作者。</strong></p>\n<blockquote>\n<p>原文地址：<a href=\"https://codeburst.io/javascript-arrow-functions-how-why-when-and-when-not-to-use-them-fb8c2de9dbdc\">https://codeburst.io/javascript-arrow-functions-how-why-when-and-when-not-to-use-them-fb8c2de9dbdc</a></p>\n</blockquote>"},{"title":"Your connection is not private | 您的连接不是私密连接的解决办法","abbrlink":"610b560b","translate_title":"your-connection-is-not-private-solution","date":"2020-06-19T03:41:33.000Z","_content":"\n随着 Chrome 的升级会推荐使用 https 的模式开发，当我们使用 https 的模式进行开发时让然会出现以下提示：\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175214.png)\n\n<!-- more -->\n\n我们发现点击高级仍旧无法找到可以访问的方式（已经将域名屏蔽）\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175225.png)\n\n## 解决办法\n\n原来在 Chrome 会对`HSTS`进行检查，但是也增加了一个 hack 来**承认有风险的情况**下访问网页，那就是输入**thisisunsafe**。不用管，直接在页面输入，而不是在地址栏，直接输入这一句就可以了。\n\n## 源代码\n\nChrome 相关的的[源代码地址](https://chromium.googlesource.com/chromium/src/+/master/components/security_interstitials/core/browser/resources/interstitial_large.js)\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175237.png)\n也不用管大小写，直接输入就是了。\n\n## 参考\n\n> https://dev.to/gautamkrishnar/quickbits-1-skipping-the-chrome-your-connection-is-not-private-warning-4kp1\n> https://stackoverflow.com/questions/35274659/does-using-badidea-or-thisisunsafe-to-bypass-a-chrome-certificate-hsts-error\n> https://chromium.googlesource.com/chromium/src/+/master/components/security_interstitials/core/browser/resources/interstitial_large.js\n","source":"_posts/Your-connection-is-not-private-解决办法.md","raw":"---\ntitle: Your connection is not private | 您的连接不是私密连接的解决办法\nabbrlink: 610b560b\ntags:\n  - Chrome\ntranslate_title: your-connection-is-not-private-solution\ndate: 2020-06-19 11:41:33\n---\n\n随着 Chrome 的升级会推荐使用 https 的模式开发，当我们使用 https 的模式进行开发时让然会出现以下提示：\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175214.png)\n\n<!-- more -->\n\n我们发现点击高级仍旧无法找到可以访问的方式（已经将域名屏蔽）\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175225.png)\n\n## 解决办法\n\n原来在 Chrome 会对`HSTS`进行检查，但是也增加了一个 hack 来**承认有风险的情况**下访问网页，那就是输入**thisisunsafe**。不用管，直接在页面输入，而不是在地址栏，直接输入这一句就可以了。\n\n## 源代码\n\nChrome 相关的的[源代码地址](https://chromium.googlesource.com/chromium/src/+/master/components/security_interstitials/core/browser/resources/interstitial_large.js)\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175237.png)\n也不用管大小写，直接输入就是了。\n\n## 参考\n\n> https://dev.to/gautamkrishnar/quickbits-1-skipping-the-chrome-your-connection-is-not-private-warning-4kp1\n> https://stackoverflow.com/questions/35274659/does-using-badidea-or-thisisunsafe-to-bypass-a-chrome-certificate-hsts-error\n> https://chromium.googlesource.com/chromium/src/+/master/components/security_interstitials/core/browser/resources/interstitial_large.js\n","slug":"Your-connection-is-not-private-解决办法","published":1,"updated":"2021-09-29T07:53:51.815Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy6av000sp4vlgn72d896","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>随着 Chrome 的升级会推荐使用 https 的模式开发，当我们使用 https 的模式进行开发时让然会出现以下提示：<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175214.png\"></p>\n<span id=\"more\"></span>\n\n<p>我们发现点击高级仍旧无法找到可以访问的方式（已经将域名屏蔽）</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175225.png\"></p>\n<h2 id=\"解决办法\"><a href=\"#解决办法\" class=\"headerlink\" title=\"解决办法\"></a>解决办法</h2><p>原来在 Chrome 会对<code>HSTS</code>进行检查，但是也增加了一个 hack 来<strong>承认有风险的情况</strong>下访问网页，那就是输入<strong>thisisunsafe</strong>。不用管，直接在页面输入，而不是在地址栏，直接输入这一句就可以了。</p>\n<h2 id=\"源代码\"><a href=\"#源代码\" class=\"headerlink\" title=\"源代码\"></a>源代码</h2><p>Chrome 相关的的<a href=\"https://chromium.googlesource.com/chromium/src/+/master/components/security_interstitials/core/browser/resources/interstitial_large.js\">源代码地址</a></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175237.png\"><br>也不用管大小写，直接输入就是了。</p>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><blockquote>\n<p><a href=\"https://dev.to/gautamkrishnar/quickbits-1-skipping-the-chrome-your-connection-is-not-private-warning-4kp1\">https://dev.to/gautamkrishnar/quickbits-1-skipping-the-chrome-your-connection-is-not-private-warning-4kp1</a><br><a href=\"https://stackoverflow.com/questions/35274659/does-using-badidea-or-thisisunsafe-to-bypass-a-chrome-certificate-hsts-error\">https://stackoverflow.com/questions/35274659/does-using-badidea-or-thisisunsafe-to-bypass-a-chrome-certificate-hsts-error</a><br><a href=\"https://chromium.googlesource.com/chromium/src/+/master/components/security_interstitials/core/browser/resources/interstitial_large.js\">https://chromium.googlesource.com/chromium/src/+/master/components/security_interstitials/core/browser/resources/interstitial_large.js</a></p>\n</blockquote>\n","site":{"data":{}},"length":582,"excerpt":"<p>随着 Chrome 的升级会推荐使用 https 的模式开发，当我们使用 https 的模式进行开发时让然会出现以下提示：<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175214.png\"></p>","more":"<p>我们发现点击高级仍旧无法找到可以访问的方式（已经将域名屏蔽）</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175225.png\"></p>\n<h2 id=\"解决办法\"><a href=\"#解决办法\" class=\"headerlink\" title=\"解决办法\"></a>解决办法</h2><p>原来在 Chrome 会对<code>HSTS</code>进行检查，但是也增加了一个 hack 来<strong>承认有风险的情况</strong>下访问网页，那就是输入<strong>thisisunsafe</strong>。不用管，直接在页面输入，而不是在地址栏，直接输入这一句就可以了。</p>\n<h2 id=\"源代码\"><a href=\"#源代码\" class=\"headerlink\" title=\"源代码\"></a>源代码</h2><p>Chrome 相关的的<a href=\"https://chromium.googlesource.com/chromium/src/+/master/components/security_interstitials/core/browser/resources/interstitial_large.js\">源代码地址</a></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175237.png\"><br>也不用管大小写，直接输入就是了。</p>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><blockquote>\n<p><a href=\"https://dev.to/gautamkrishnar/quickbits-1-skipping-the-chrome-your-connection-is-not-private-warning-4kp1\">https://dev.to/gautamkrishnar/quickbits-1-skipping-the-chrome-your-connection-is-not-private-warning-4kp1</a><br><a href=\"https://stackoverflow.com/questions/35274659/does-using-badidea-or-thisisunsafe-to-bypass-a-chrome-certificate-hsts-error\">https://stackoverflow.com/questions/35274659/does-using-badidea-or-thisisunsafe-to-bypass-a-chrome-certificate-hsts-error</a><br><a href=\"https://chromium.googlesource.com/chromium/src/+/master/components/security_interstitials/core/browser/resources/interstitial_large.js\">https://chromium.googlesource.com/chromium/src/+/master/components/security_interstitials/core/browser/resources/interstitial_large.js</a></p>\n</blockquote>"},{"title":"走，再走一波干海子","abbrlink":"4a5b4c21","translate_title":"go-another-wave-of-dry-sea","date":"2020-04-06T03:24:54.000Z","_content":"\n说起干海子，因为我并不玩抖音，也不刷微博，其实我并不了解。但是却不经意间去了两次了，一次是前公司 2019 年 6 月底的团建，还有一次就是昨天和朋友一起去。\n\n![image.png](https://i.loli.net/2020/04/06/VkvcI1nTaeRMB28.png)\n\n<!-- more -->\n\n说起来还是真的挺不好意思，因为原计划的八点出发因为我的迟到不得不推迟，真是迟到害人啊，要改 😂。\n\n一路上心情很忐忑，一是由于迟到了，二是因为这是第二次去，心里面自觉地回想去第一次的场景，想着当时是什么人，什么天气，在哪里拍了照，这次去的话一定要看看两次有什么区别。文中的图片，翠绿的是去年的，有雪的是今年的。\n\n## 旅途\n\n逐渐进入阿坝那边，两边的山也起来了，有的光秃秃，有的长满了树，被植被覆盖着。穿过一条条隧道，山的两面呈现出“阴阳割昏晓”的明暗山体。我想这是在成都和自贡是看不到的。\n\n![image.png](https://i.loli.net/2020/04/06/GopHWdvsmwZY9EK.png)\n\n思绪恍惚间想起了我第一次来这边的时候，那是 2015 年 8 月底，“误打误撞”安排的来这边支教。那时候满脑子的新鲜和好奇，没见过山没见过水，瞪大了眼睛，望着这一切。\n\n![image.png](https://i.loli.net/2020/04/06/mCv8IQJ4nOTklR7.png)\n\n![image.png](https://i.loli.net/2020/04/06/o38eIPV1djM7GfF.png)\n\n回到旅途，车还是在那个熟悉的地点停车整顿一下，我本身就对这个地方有印象，因为这是去的路上第一个可以休息停靠的地方，对于坐了这么久的车的人来说是不会错过的。\n\n急忙的拿出手机，朝向了山谷那边。\n\n夏天的山果真更为翠绿啊，因为昨晚刚下过雨，太阳还没放出来，云也显得有些抑郁，灰蒙蒙的。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923171741.png)\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923171752.png)\n\n路过一隅，发现云也半隐半现地遮盖着山，一半暴露在阳光下面，另一半自觉地躲藏在阴影之中。\n\n![image.png](https://i.loli.net/2020/04/06/NLaqTmrJoIfUZhp.png)\n\n一时，车上传来了呼叫声，既是惊讶又是惊喜，大家纷纷转向这美丽的景色。在那山顶上，是一片片还未消融的雪，皑皑地装饰着山顶。\n\n![image.png](https://i.loli.net/2020/04/06/gD4LRp9lAyJKzeh.png)\n\n其实我是见过这般雪的，印象是 2016 年的开春，到这边滑雪，看到山顶上还静静躺着白雪，还有一缕缕蒸腾的白汽换换飘向天空，随风飘荡。总看不厌，也看不烦。就像之前支教的学校的门口的大山一样，厚重又不失庄严。我想，这再美不过了。\n\n到了这边，因为山路比较窄，我们换成小车继续前行，大家的心情更加期待了。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923171817.png)\n\n想起去年，我们大家是大包垒小包，自己背着露营的装备，从这里开始正式徒步前行，一人接一人，远远看去，仿佛一条长龙在慢慢蠕动着......\n\n![image.png](https://i.loli.net/2020/04/06/wEmRI2dv6sCZ8HU.png)\n\n## 上山\n\n当小车到达山脚的时候，我们的徒步才正式开始。下车回头一望，只见这景色俨然没有了昔日的苍翠欲滴，山体被一种棕绿打底，山顶则还还残留着点点白雪（从图中的小路可以看出来这的确是同一群山）。\n\n![image.png](https://i.loli.net/2020/04/06/Q8vCw1XHtgZbm2u.png)\n\n![image.png](https://i.loli.net/2020/04/06/QthHp7IMkrCLSA4.png)\n\n沿着石阶走两步，向后一望果真是银装素裹，分外妖娆。近处是阳光照射，远处是白雪裹树，天上的云也奔涌着，仿佛就是冬天一样。\n\n![image.png](https://i.loli.net/2020/04/06/aZctfBD4EoXGV7y.png)\n\n![image.png](https://i.loli.net/2020/04/06/eEiFqUnPvGlIjpR.png)\n\n上山的路两边都是郁郁葱葱的小树林，此时也褪去绿叶，只留下枯黄枝丫，显得略微萧条，不再茂盛。\n\n![image.png](https://i.loli.net/2020/04/06/M2JR7wziDBCgKEc.png)\n\n![image.png](https://i.loli.net/2020/04/06/fGqLtiAndOzZI2Q.png)\n\n再沿着路往上走，还有一些残留的积雪还在这里，大家都在开始玩雪了。有个小朋友还抱了一大坨雪来做了一个小雪人，大家新奇且兴奋，都簇拥上来，争先恐后驻足拍照。\n\n![image.png](https://i.loli.net/2020/04/06/YTqjBihLFRM4pcy.png)\n\n越往上走，视野越开阔，无须多言，银装素裹，此时正应吟诗一首：\n\n> 北国风光，千里冰封，万里雪飘。望长城内外，惟余莽莽；大河上下，顿失滔滔。山舞银蛇，原驰蜡象，欲与天公试比高。须晴日，看红装素裹，分外妖娆。\n\n虽然余雪不多，但是我想也应景了。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923171902.png)\n\n近处的地方还覆盖着一层雪，薄薄的一层。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923171913.png)\n\n来听听踩上去的声音\n\n<div style=\"width:100%;height:0px;position:relative;padding-bottom:56.327%;margin-bottom:12px;\"><iframe src=\"https://streamja.com/embed/3n0Rq\" frameborder=\"0\" width=\"100%\" height=\"100%\" allowfullscreen style=\"width:100%;height:100%;position:absolute;\"></iframe></div>\n\n这里的树木，都没有叶子，光秃秃的指着天空，沐浴着阳光。\n\n多走两步，在山上一处平台驻足，此时的景色真的可谓是似曾相识。\n\n![image.png](https://i.loli.net/2020/04/06/kcCgPIQTphOyNGo.png)\n\n![image.png](https://i.loli.net/2020/04/06/SabZIuX8Akt91jl.png)\n\n去年是多么的茂盛，今年就显得贫瘠，没有生机。前后一对比，顿时一股苍凉涌入心中。\n\n突然想着之前去徒步回去之后写的[心理学之茶哥分享：前端包管理工具整理](https://juejin.im/post/5d18d2fd6fb9a07eee5ee343)，就是用的这边的山脉图。\n\n![](https://ftp.bmp.ovh/imgs/2020/04/57aadf62b1874abd.jpg)\n\n## 山顶\n\n抵达山顶，风超级大。我们立马放下包裹，开始欣赏这山顶的景色。\n\n![image.png](https://i.loli.net/2020/04/06/1U7zKxF2CMIJcDB.png)\n\n![image.png](https://i.loli.net/2020/04/06/wEfKbAmDhtVMsyl.png)\n\n这么辽阔宽广，好想自己是一只鸟，可以在这里无忧无虑的飞，没有那么多问题思考，也不知道自己是谁。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172002.png)\n\n![image.png](https://i.loli.net/2020/04/06/M4qOjzUL1gB6JGC.png)\n\n我也激动的拍下了自己的照片，回到家和去年的照片对比起来：\n\n![image.png](https://i.loli.net/2020/04/06/pg58lSHaVFbewnj.png)\n\n![image.png](https://i.loli.net/2020/04/06/WVnCfH6c72gop3T.png)\n\n因为那里有秋千，去年拍了，因此今年也不能落下。看看我沉浸在自己的世界的样子吧！🤣\n\n<div style=\"width:100%;height:0px;position:relative;padding-bottom:56.327%;margin-bottom:12px;\"><iframe src=\"https://streamja.com/embed/B4BWn\" frameborder=\"0\" width=\"100%\" height=\"100%\" allowfullscreen style=\"width:100%;height:100%;position:absolute;\"></iframe></div>\n\n## 下山\n\n然后就是下山了，这一路都是石板路，已经不再是去年的泥巴路和石板路掺杂着，走到山脚，回首望去，仿佛青山幽幽，回到了去年的时光。\n\n![image.png](https://i.loli.net/2020/04/06/gVtvXjnEpTH5hfG.png)\n\n## 最后\n\n写到这里，不知不觉已经下午三点了。\n\n整理着，觉得思绪很多，不禁感叹时间过得好快。看着往日的青青苍翠，今天的萧条苍凉，而这都快一年了。一年里发生的事情很多，人走人留，都在悄悄变化着，而自己是否有所改变来对得起这一年时间。\n\n我觉得最糟糕的就是没有改变，昨天什么样，今天还是什么样，明天还是什么样。没有改变就没有进步，没有进步怎么对得起这段时间呢？我已经是一个大人了啊。\n\n用一个在这个年纪该有的眼光来审视这个世界吧！\n","source":"_posts/again-ganhaizi.md","raw":"---\ntitle: 走，再走一波干海子\ntags:\n  - 干海子\nabbrlink: 4a5b4c21\ntranslate_title: go-another-wave-of-dry-sea\ndate: 2020-04-06 11:24:54\n---\n\n说起干海子，因为我并不玩抖音，也不刷微博，其实我并不了解。但是却不经意间去了两次了，一次是前公司 2019 年 6 月底的团建，还有一次就是昨天和朋友一起去。\n\n![image.png](https://i.loli.net/2020/04/06/VkvcI1nTaeRMB28.png)\n\n<!-- more -->\n\n说起来还是真的挺不好意思，因为原计划的八点出发因为我的迟到不得不推迟，真是迟到害人啊，要改 😂。\n\n一路上心情很忐忑，一是由于迟到了，二是因为这是第二次去，心里面自觉地回想去第一次的场景，想着当时是什么人，什么天气，在哪里拍了照，这次去的话一定要看看两次有什么区别。文中的图片，翠绿的是去年的，有雪的是今年的。\n\n## 旅途\n\n逐渐进入阿坝那边，两边的山也起来了，有的光秃秃，有的长满了树，被植被覆盖着。穿过一条条隧道，山的两面呈现出“阴阳割昏晓”的明暗山体。我想这是在成都和自贡是看不到的。\n\n![image.png](https://i.loli.net/2020/04/06/GopHWdvsmwZY9EK.png)\n\n思绪恍惚间想起了我第一次来这边的时候，那是 2015 年 8 月底，“误打误撞”安排的来这边支教。那时候满脑子的新鲜和好奇，没见过山没见过水，瞪大了眼睛，望着这一切。\n\n![image.png](https://i.loli.net/2020/04/06/mCv8IQJ4nOTklR7.png)\n\n![image.png](https://i.loli.net/2020/04/06/o38eIPV1djM7GfF.png)\n\n回到旅途，车还是在那个熟悉的地点停车整顿一下，我本身就对这个地方有印象，因为这是去的路上第一个可以休息停靠的地方，对于坐了这么久的车的人来说是不会错过的。\n\n急忙的拿出手机，朝向了山谷那边。\n\n夏天的山果真更为翠绿啊，因为昨晚刚下过雨，太阳还没放出来，云也显得有些抑郁，灰蒙蒙的。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923171741.png)\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923171752.png)\n\n路过一隅，发现云也半隐半现地遮盖着山，一半暴露在阳光下面，另一半自觉地躲藏在阴影之中。\n\n![image.png](https://i.loli.net/2020/04/06/NLaqTmrJoIfUZhp.png)\n\n一时，车上传来了呼叫声，既是惊讶又是惊喜，大家纷纷转向这美丽的景色。在那山顶上，是一片片还未消融的雪，皑皑地装饰着山顶。\n\n![image.png](https://i.loli.net/2020/04/06/gD4LRp9lAyJKzeh.png)\n\n其实我是见过这般雪的，印象是 2016 年的开春，到这边滑雪，看到山顶上还静静躺着白雪，还有一缕缕蒸腾的白汽换换飘向天空，随风飘荡。总看不厌，也看不烦。就像之前支教的学校的门口的大山一样，厚重又不失庄严。我想，这再美不过了。\n\n到了这边，因为山路比较窄，我们换成小车继续前行，大家的心情更加期待了。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923171817.png)\n\n想起去年，我们大家是大包垒小包，自己背着露营的装备，从这里开始正式徒步前行，一人接一人，远远看去，仿佛一条长龙在慢慢蠕动着......\n\n![image.png](https://i.loli.net/2020/04/06/wEmRI2dv6sCZ8HU.png)\n\n## 上山\n\n当小车到达山脚的时候，我们的徒步才正式开始。下车回头一望，只见这景色俨然没有了昔日的苍翠欲滴，山体被一种棕绿打底，山顶则还还残留着点点白雪（从图中的小路可以看出来这的确是同一群山）。\n\n![image.png](https://i.loli.net/2020/04/06/Q8vCw1XHtgZbm2u.png)\n\n![image.png](https://i.loli.net/2020/04/06/QthHp7IMkrCLSA4.png)\n\n沿着石阶走两步，向后一望果真是银装素裹，分外妖娆。近处是阳光照射，远处是白雪裹树，天上的云也奔涌着，仿佛就是冬天一样。\n\n![image.png](https://i.loli.net/2020/04/06/aZctfBD4EoXGV7y.png)\n\n![image.png](https://i.loli.net/2020/04/06/eEiFqUnPvGlIjpR.png)\n\n上山的路两边都是郁郁葱葱的小树林，此时也褪去绿叶，只留下枯黄枝丫，显得略微萧条，不再茂盛。\n\n![image.png](https://i.loli.net/2020/04/06/M2JR7wziDBCgKEc.png)\n\n![image.png](https://i.loli.net/2020/04/06/fGqLtiAndOzZI2Q.png)\n\n再沿着路往上走，还有一些残留的积雪还在这里，大家都在开始玩雪了。有个小朋友还抱了一大坨雪来做了一个小雪人，大家新奇且兴奋，都簇拥上来，争先恐后驻足拍照。\n\n![image.png](https://i.loli.net/2020/04/06/YTqjBihLFRM4pcy.png)\n\n越往上走，视野越开阔，无须多言，银装素裹，此时正应吟诗一首：\n\n> 北国风光，千里冰封，万里雪飘。望长城内外，惟余莽莽；大河上下，顿失滔滔。山舞银蛇，原驰蜡象，欲与天公试比高。须晴日，看红装素裹，分外妖娆。\n\n虽然余雪不多，但是我想也应景了。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923171902.png)\n\n近处的地方还覆盖着一层雪，薄薄的一层。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923171913.png)\n\n来听听踩上去的声音\n\n<div style=\"width:100%;height:0px;position:relative;padding-bottom:56.327%;margin-bottom:12px;\"><iframe src=\"https://streamja.com/embed/3n0Rq\" frameborder=\"0\" width=\"100%\" height=\"100%\" allowfullscreen style=\"width:100%;height:100%;position:absolute;\"></iframe></div>\n\n这里的树木，都没有叶子，光秃秃的指着天空，沐浴着阳光。\n\n多走两步，在山上一处平台驻足，此时的景色真的可谓是似曾相识。\n\n![image.png](https://i.loli.net/2020/04/06/kcCgPIQTphOyNGo.png)\n\n![image.png](https://i.loli.net/2020/04/06/SabZIuX8Akt91jl.png)\n\n去年是多么的茂盛，今年就显得贫瘠，没有生机。前后一对比，顿时一股苍凉涌入心中。\n\n突然想着之前去徒步回去之后写的[心理学之茶哥分享：前端包管理工具整理](https://juejin.im/post/5d18d2fd6fb9a07eee5ee343)，就是用的这边的山脉图。\n\n![](https://ftp.bmp.ovh/imgs/2020/04/57aadf62b1874abd.jpg)\n\n## 山顶\n\n抵达山顶，风超级大。我们立马放下包裹，开始欣赏这山顶的景色。\n\n![image.png](https://i.loli.net/2020/04/06/1U7zKxF2CMIJcDB.png)\n\n![image.png](https://i.loli.net/2020/04/06/wEfKbAmDhtVMsyl.png)\n\n这么辽阔宽广，好想自己是一只鸟，可以在这里无忧无虑的飞，没有那么多问题思考，也不知道自己是谁。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172002.png)\n\n![image.png](https://i.loli.net/2020/04/06/M4qOjzUL1gB6JGC.png)\n\n我也激动的拍下了自己的照片，回到家和去年的照片对比起来：\n\n![image.png](https://i.loli.net/2020/04/06/pg58lSHaVFbewnj.png)\n\n![image.png](https://i.loli.net/2020/04/06/WVnCfH6c72gop3T.png)\n\n因为那里有秋千，去年拍了，因此今年也不能落下。看看我沉浸在自己的世界的样子吧！🤣\n\n<div style=\"width:100%;height:0px;position:relative;padding-bottom:56.327%;margin-bottom:12px;\"><iframe src=\"https://streamja.com/embed/B4BWn\" frameborder=\"0\" width=\"100%\" height=\"100%\" allowfullscreen style=\"width:100%;height:100%;position:absolute;\"></iframe></div>\n\n## 下山\n\n然后就是下山了，这一路都是石板路，已经不再是去年的泥巴路和石板路掺杂着，走到山脚，回首望去，仿佛青山幽幽，回到了去年的时光。\n\n![image.png](https://i.loli.net/2020/04/06/gVtvXjnEpTH5hfG.png)\n\n## 最后\n\n写到这里，不知不觉已经下午三点了。\n\n整理着，觉得思绪很多，不禁感叹时间过得好快。看着往日的青青苍翠，今天的萧条苍凉，而这都快一年了。一年里发生的事情很多，人走人留，都在悄悄变化着，而自己是否有所改变来对得起这一年时间。\n\n我觉得最糟糕的就是没有改变，昨天什么样，今天还是什么样，明天还是什么样。没有改变就没有进步，没有进步怎么对得起这段时间呢？我已经是一个大人了啊。\n\n用一个在这个年纪该有的眼光来审视这个世界吧！\n","slug":"again-ganhaizi","published":1,"updated":"2021-09-29T07:53:51.816Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy6aw000up4vl4kssfutt","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>说起干海子，因为我并不玩抖音，也不刷微博，其实我并不了解。但是却不经意间去了两次了，一次是前公司 2019 年 6 月底的团建，还有一次就是昨天和朋友一起去。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://i.loli.net/2020/04/06/VkvcI1nTaeRMB28.png\" alt=\"image.png\"></p>\n<span id=\"more\"></span>\n\n<p>说起来还是真的挺不好意思，因为原计划的八点出发因为我的迟到不得不推迟，真是迟到害人啊，要改 😂。</p>\n<p>一路上心情很忐忑，一是由于迟到了，二是因为这是第二次去，心里面自觉地回想去第一次的场景，想着当时是什么人，什么天气，在哪里拍了照，这次去的话一定要看看两次有什么区别。文中的图片，翠绿的是去年的，有雪的是今年的。</p>\n<h2 id=\"旅途\"><a href=\"#旅途\" class=\"headerlink\" title=\"旅途\"></a>旅途</h2><p>逐渐进入阿坝那边，两边的山也起来了，有的光秃秃，有的长满了树，被植被覆盖着。穿过一条条隧道，山的两面呈现出“阴阳割昏晓”的明暗山体。我想这是在成都和自贡是看不到的。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://i.loli.net/2020/04/06/GopHWdvsmwZY9EK.png\" alt=\"image.png\"></p>\n<p>思绪恍惚间想起了我第一次来这边的时候，那是 2015 年 8 月底，“误打误撞”安排的来这边支教。那时候满脑子的新鲜和好奇，没见过山没见过水，瞪大了眼睛，望着这一切。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://i.loli.net/2020/04/06/mCv8IQJ4nOTklR7.png\" alt=\"image.png\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://i.loli.net/2020/04/06/o38eIPV1djM7GfF.png\" alt=\"image.png\"></p>\n<p>回到旅途，车还是在那个熟悉的地点停车整顿一下，我本身就对这个地方有印象，因为这是去的路上第一个可以休息停靠的地方，对于坐了这么久的车的人来说是不会错过的。</p>\n<p>急忙的拿出手机，朝向了山谷那边。</p>\n<p>夏天的山果真更为翠绿啊，因为昨晚刚下过雨，太阳还没放出来，云也显得有些抑郁，灰蒙蒙的。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923171741.png\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923171752.png\"></p>\n<p>路过一隅，发现云也半隐半现地遮盖着山，一半暴露在阳光下面，另一半自觉地躲藏在阴影之中。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://i.loli.net/2020/04/06/NLaqTmrJoIfUZhp.png\" alt=\"image.png\"></p>\n<p>一时，车上传来了呼叫声，既是惊讶又是惊喜，大家纷纷转向这美丽的景色。在那山顶上，是一片片还未消融的雪，皑皑地装饰着山顶。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://i.loli.net/2020/04/06/gD4LRp9lAyJKzeh.png\" alt=\"image.png\"></p>\n<p>其实我是见过这般雪的，印象是 2016 年的开春，到这边滑雪，看到山顶上还静静躺着白雪，还有一缕缕蒸腾的白汽换换飘向天空，随风飘荡。总看不厌，也看不烦。就像之前支教的学校的门口的大山一样，厚重又不失庄严。我想，这再美不过了。</p>\n<p>到了这边，因为山路比较窄，我们换成小车继续前行，大家的心情更加期待了。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923171817.png\"></p>\n<p>想起去年，我们大家是大包垒小包，自己背着露营的装备，从这里开始正式徒步前行，一人接一人，远远看去，仿佛一条长龙在慢慢蠕动着……</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://i.loli.net/2020/04/06/wEmRI2dv6sCZ8HU.png\" alt=\"image.png\"></p>\n<h2 id=\"上山\"><a href=\"#上山\" class=\"headerlink\" title=\"上山\"></a>上山</h2><p>当小车到达山脚的时候，我们的徒步才正式开始。下车回头一望，只见这景色俨然没有了昔日的苍翠欲滴，山体被一种棕绿打底，山顶则还还残留着点点白雪（从图中的小路可以看出来这的确是同一群山）。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://i.loli.net/2020/04/06/Q8vCw1XHtgZbm2u.png\" alt=\"image.png\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://i.loli.net/2020/04/06/QthHp7IMkrCLSA4.png\" alt=\"image.png\"></p>\n<p>沿着石阶走两步，向后一望果真是银装素裹，分外妖娆。近处是阳光照射，远处是白雪裹树，天上的云也奔涌着，仿佛就是冬天一样。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://i.loli.net/2020/04/06/aZctfBD4EoXGV7y.png\" alt=\"image.png\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://i.loli.net/2020/04/06/eEiFqUnPvGlIjpR.png\" alt=\"image.png\"></p>\n<p>上山的路两边都是郁郁葱葱的小树林，此时也褪去绿叶，只留下枯黄枝丫，显得略微萧条，不再茂盛。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://i.loli.net/2020/04/06/M2JR7wziDBCgKEc.png\" alt=\"image.png\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://i.loli.net/2020/04/06/fGqLtiAndOzZI2Q.png\" alt=\"image.png\"></p>\n<p>再沿着路往上走，还有一些残留的积雪还在这里，大家都在开始玩雪了。有个小朋友还抱了一大坨雪来做了一个小雪人，大家新奇且兴奋，都簇拥上来，争先恐后驻足拍照。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://i.loli.net/2020/04/06/YTqjBihLFRM4pcy.png\" alt=\"image.png\"></p>\n<p>越往上走，视野越开阔，无须多言，银装素裹，此时正应吟诗一首：</p>\n<blockquote>\n<p>北国风光，千里冰封，万里雪飘。望长城内外，惟余莽莽；大河上下，顿失滔滔。山舞银蛇，原驰蜡象，欲与天公试比高。须晴日，看红装素裹，分外妖娆。</p>\n</blockquote>\n<p>虽然余雪不多，但是我想也应景了。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923171902.png\"></p>\n<p>近处的地方还覆盖着一层雪，薄薄的一层。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923171913.png\"></p>\n<p>来听听踩上去的声音</p>\n<div style=\"width:100%;height:0px;position:relative;padding-bottom:56.327%;margin-bottom:12px;\"><iframe src=\"https://streamja.com/embed/3n0Rq\" frameborder=\"0\" width=\"100%\" height=\"100%\" allowfullscreen style=\"width:100%;height:100%;position:absolute;\"></iframe></div>\n\n<p>这里的树木，都没有叶子，光秃秃的指着天空，沐浴着阳光。</p>\n<p>多走两步，在山上一处平台驻足，此时的景色真的可谓是似曾相识。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://i.loli.net/2020/04/06/kcCgPIQTphOyNGo.png\" alt=\"image.png\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://i.loli.net/2020/04/06/SabZIuX8Akt91jl.png\" alt=\"image.png\"></p>\n<p>去年是多么的茂盛，今年就显得贫瘠，没有生机。前后一对比，顿时一股苍凉涌入心中。</p>\n<p>突然想着之前去徒步回去之后写的<a href=\"https://juejin.im/post/5d18d2fd6fb9a07eee5ee343\">心理学之茶哥分享：前端包管理工具整理</a>，就是用的这边的山脉图。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://ftp.bmp.ovh/imgs/2020/04/57aadf62b1874abd.jpg\"></p>\n<h2 id=\"山顶\"><a href=\"#山顶\" class=\"headerlink\" title=\"山顶\"></a>山顶</h2><p>抵达山顶，风超级大。我们立马放下包裹，开始欣赏这山顶的景色。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://i.loli.net/2020/04/06/1U7zKxF2CMIJcDB.png\" alt=\"image.png\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://i.loli.net/2020/04/06/wEfKbAmDhtVMsyl.png\" alt=\"image.png\"></p>\n<p>这么辽阔宽广，好想自己是一只鸟，可以在这里无忧无虑的飞，没有那么多问题思考，也不知道自己是谁。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172002.png\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://i.loli.net/2020/04/06/M4qOjzUL1gB6JGC.png\" alt=\"image.png\"></p>\n<p>我也激动的拍下了自己的照片，回到家和去年的照片对比起来：</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://i.loli.net/2020/04/06/pg58lSHaVFbewnj.png\" alt=\"image.png\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://i.loli.net/2020/04/06/WVnCfH6c72gop3T.png\" alt=\"image.png\"></p>\n<p>因为那里有秋千，去年拍了，因此今年也不能落下。看看我沉浸在自己的世界的样子吧！🤣</p>\n<div style=\"width:100%;height:0px;position:relative;padding-bottom:56.327%;margin-bottom:12px;\"><iframe src=\"https://streamja.com/embed/B4BWn\" frameborder=\"0\" width=\"100%\" height=\"100%\" allowfullscreen style=\"width:100%;height:100%;position:absolute;\"></iframe></div>\n\n<h2 id=\"下山\"><a href=\"#下山\" class=\"headerlink\" title=\"下山\"></a>下山</h2><p>然后就是下山了，这一路都是石板路，已经不再是去年的泥巴路和石板路掺杂着，走到山脚，回首望去，仿佛青山幽幽，回到了去年的时光。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://i.loli.net/2020/04/06/gVtvXjnEpTH5hfG.png\" alt=\"image.png\"></p>\n<h2 id=\"最后\"><a href=\"#最后\" class=\"headerlink\" title=\"最后\"></a>最后</h2><p>写到这里，不知不觉已经下午三点了。</p>\n<p>整理着，觉得思绪很多，不禁感叹时间过得好快。看着往日的青青苍翠，今天的萧条苍凉，而这都快一年了。一年里发生的事情很多，人走人留，都在悄悄变化着，而自己是否有所改变来对得起这一年时间。</p>\n<p>我觉得最糟糕的就是没有改变，昨天什么样，今天还是什么样，明天还是什么样。没有改变就没有进步，没有进步怎么对得起这段时间呢？我已经是一个大人了啊。</p>\n<p>用一个在这个年纪该有的眼光来审视这个世界吧！</p>\n","site":{"data":{}},"length":1811,"excerpt":"<p>说起干海子，因为我并不玩抖音，也不刷微博，其实我并不了解。但是却不经意间去了两次了，一次是前公司 2019 年 6 月底的团建，还有一次就是昨天和朋友一起去。</p>\n<p><img src=\"https://i.loli.net/2020/04/06/VkvcI1nTaeRMB28.png\" alt=\"image.png\"></p>","more":"<p>说起来还是真的挺不好意思，因为原计划的八点出发因为我的迟到不得不推迟，真是迟到害人啊，要改 😂。</p>\n<p>一路上心情很忐忑，一是由于迟到了，二是因为这是第二次去，心里面自觉地回想去第一次的场景，想着当时是什么人，什么天气，在哪里拍了照，这次去的话一定要看看两次有什么区别。文中的图片，翠绿的是去年的，有雪的是今年的。</p>\n<h2 id=\"旅途\"><a href=\"#旅途\" class=\"headerlink\" title=\"旅途\"></a>旅途</h2><p>逐渐进入阿坝那边，两边的山也起来了，有的光秃秃，有的长满了树，被植被覆盖着。穿过一条条隧道，山的两面呈现出“阴阳割昏晓”的明暗山体。我想这是在成都和自贡是看不到的。</p>\n<p><img src=\"https://i.loli.net/2020/04/06/GopHWdvsmwZY9EK.png\" alt=\"image.png\"></p>\n<p>思绪恍惚间想起了我第一次来这边的时候，那是 2015 年 8 月底，“误打误撞”安排的来这边支教。那时候满脑子的新鲜和好奇，没见过山没见过水，瞪大了眼睛，望着这一切。</p>\n<p><img src=\"https://i.loli.net/2020/04/06/mCv8IQJ4nOTklR7.png\" alt=\"image.png\"></p>\n<p><img src=\"https://i.loli.net/2020/04/06/o38eIPV1djM7GfF.png\" alt=\"image.png\"></p>\n<p>回到旅途，车还是在那个熟悉的地点停车整顿一下，我本身就对这个地方有印象，因为这是去的路上第一个可以休息停靠的地方，对于坐了这么久的车的人来说是不会错过的。</p>\n<p>急忙的拿出手机，朝向了山谷那边。</p>\n<p>夏天的山果真更为翠绿啊，因为昨晚刚下过雨，太阳还没放出来，云也显得有些抑郁，灰蒙蒙的。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923171741.png\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923171752.png\"></p>\n<p>路过一隅，发现云也半隐半现地遮盖着山，一半暴露在阳光下面，另一半自觉地躲藏在阴影之中。</p>\n<p><img src=\"https://i.loli.net/2020/04/06/NLaqTmrJoIfUZhp.png\" alt=\"image.png\"></p>\n<p>一时，车上传来了呼叫声，既是惊讶又是惊喜，大家纷纷转向这美丽的景色。在那山顶上，是一片片还未消融的雪，皑皑地装饰着山顶。</p>\n<p><img src=\"https://i.loli.net/2020/04/06/gD4LRp9lAyJKzeh.png\" alt=\"image.png\"></p>\n<p>其实我是见过这般雪的，印象是 2016 年的开春，到这边滑雪，看到山顶上还静静躺着白雪，还有一缕缕蒸腾的白汽换换飘向天空，随风飘荡。总看不厌，也看不烦。就像之前支教的学校的门口的大山一样，厚重又不失庄严。我想，这再美不过了。</p>\n<p>到了这边，因为山路比较窄，我们换成小车继续前行，大家的心情更加期待了。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923171817.png\"></p>\n<p>想起去年，我们大家是大包垒小包，自己背着露营的装备，从这里开始正式徒步前行，一人接一人，远远看去，仿佛一条长龙在慢慢蠕动着……</p>\n<p><img src=\"https://i.loli.net/2020/04/06/wEmRI2dv6sCZ8HU.png\" alt=\"image.png\"></p>\n<h2 id=\"上山\"><a href=\"#上山\" class=\"headerlink\" title=\"上山\"></a>上山</h2><p>当小车到达山脚的时候，我们的徒步才正式开始。下车回头一望，只见这景色俨然没有了昔日的苍翠欲滴，山体被一种棕绿打底，山顶则还还残留着点点白雪（从图中的小路可以看出来这的确是同一群山）。</p>\n<p><img src=\"https://i.loli.net/2020/04/06/Q8vCw1XHtgZbm2u.png\" alt=\"image.png\"></p>\n<p><img src=\"https://i.loli.net/2020/04/06/QthHp7IMkrCLSA4.png\" alt=\"image.png\"></p>\n<p>沿着石阶走两步，向后一望果真是银装素裹，分外妖娆。近处是阳光照射，远处是白雪裹树，天上的云也奔涌着，仿佛就是冬天一样。</p>\n<p><img src=\"https://i.loli.net/2020/04/06/aZctfBD4EoXGV7y.png\" alt=\"image.png\"></p>\n<p><img src=\"https://i.loli.net/2020/04/06/eEiFqUnPvGlIjpR.png\" alt=\"image.png\"></p>\n<p>上山的路两边都是郁郁葱葱的小树林，此时也褪去绿叶，只留下枯黄枝丫，显得略微萧条，不再茂盛。</p>\n<p><img src=\"https://i.loli.net/2020/04/06/M2JR7wziDBCgKEc.png\" alt=\"image.png\"></p>\n<p><img src=\"https://i.loli.net/2020/04/06/fGqLtiAndOzZI2Q.png\" alt=\"image.png\"></p>\n<p>再沿着路往上走，还有一些残留的积雪还在这里，大家都在开始玩雪了。有个小朋友还抱了一大坨雪来做了一个小雪人，大家新奇且兴奋，都簇拥上来，争先恐后驻足拍照。</p>\n<p><img src=\"https://i.loli.net/2020/04/06/YTqjBihLFRM4pcy.png\" alt=\"image.png\"></p>\n<p>越往上走，视野越开阔，无须多言，银装素裹，此时正应吟诗一首：</p>\n<blockquote>\n<p>北国风光，千里冰封，万里雪飘。望长城内外，惟余莽莽；大河上下，顿失滔滔。山舞银蛇，原驰蜡象，欲与天公试比高。须晴日，看红装素裹，分外妖娆。</p>\n</blockquote>\n<p>虽然余雪不多，但是我想也应景了。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923171902.png\"></p>\n<p>近处的地方还覆盖着一层雪，薄薄的一层。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923171913.png\"></p>\n<p>来听听踩上去的声音</p>\n<div style=\"width:100%;height:0px;position:relative;padding-bottom:56.327%;margin-bottom:12px;\"><iframe src=\"https://streamja.com/embed/3n0Rq\" frameborder=\"0\" width=\"100%\" height=\"100%\" allowfullscreen style=\"width:100%;height:100%;position:absolute;\"></iframe></div>\n\n<p>这里的树木，都没有叶子，光秃秃的指着天空，沐浴着阳光。</p>\n<p>多走两步，在山上一处平台驻足，此时的景色真的可谓是似曾相识。</p>\n<p><img src=\"https://i.loli.net/2020/04/06/kcCgPIQTphOyNGo.png\" alt=\"image.png\"></p>\n<p><img src=\"https://i.loli.net/2020/04/06/SabZIuX8Akt91jl.png\" alt=\"image.png\"></p>\n<p>去年是多么的茂盛，今年就显得贫瘠，没有生机。前后一对比，顿时一股苍凉涌入心中。</p>\n<p>突然想着之前去徒步回去之后写的<a href=\"https://juejin.im/post/5d18d2fd6fb9a07eee5ee343\">心理学之茶哥分享：前端包管理工具整理</a>，就是用的这边的山脉图。</p>\n<p><img src=\"https://ftp.bmp.ovh/imgs/2020/04/57aadf62b1874abd.jpg\"></p>\n<h2 id=\"山顶\"><a href=\"#山顶\" class=\"headerlink\" title=\"山顶\"></a>山顶</h2><p>抵达山顶，风超级大。我们立马放下包裹，开始欣赏这山顶的景色。</p>\n<p><img src=\"https://i.loli.net/2020/04/06/1U7zKxF2CMIJcDB.png\" alt=\"image.png\"></p>\n<p><img src=\"https://i.loli.net/2020/04/06/wEfKbAmDhtVMsyl.png\" alt=\"image.png\"></p>\n<p>这么辽阔宽广，好想自己是一只鸟，可以在这里无忧无虑的飞，没有那么多问题思考，也不知道自己是谁。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923172002.png\"></p>\n<p><img src=\"https://i.loli.net/2020/04/06/M4qOjzUL1gB6JGC.png\" alt=\"image.png\"></p>\n<p>我也激动的拍下了自己的照片，回到家和去年的照片对比起来：</p>\n<p><img src=\"https://i.loli.net/2020/04/06/pg58lSHaVFbewnj.png\" alt=\"image.png\"></p>\n<p><img src=\"https://i.loli.net/2020/04/06/WVnCfH6c72gop3T.png\" alt=\"image.png\"></p>\n<p>因为那里有秋千，去年拍了，因此今年也不能落下。看看我沉浸在自己的世界的样子吧！🤣</p>\n<div style=\"width:100%;height:0px;position:relative;padding-bottom:56.327%;margin-bottom:12px;\"><iframe src=\"https://streamja.com/embed/B4BWn\" frameborder=\"0\" width=\"100%\" height=\"100%\" allowfullscreen style=\"width:100%;height:100%;position:absolute;\"></iframe></div>\n\n<h2 id=\"下山\"><a href=\"#下山\" class=\"headerlink\" title=\"下山\"></a>下山</h2><p>然后就是下山了，这一路都是石板路，已经不再是去年的泥巴路和石板路掺杂着，走到山脚，回首望去，仿佛青山幽幽，回到了去年的时光。</p>\n<p><img src=\"https://i.loli.net/2020/04/06/gVtvXjnEpTH5hfG.png\" alt=\"image.png\"></p>\n<h2 id=\"最后\"><a href=\"#最后\" class=\"headerlink\" title=\"最后\"></a>最后</h2><p>写到这里，不知不觉已经下午三点了。</p>\n<p>整理着，觉得思绪很多，不禁感叹时间过得好快。看着往日的青青苍翠，今天的萧条苍凉，而这都快一年了。一年里发生的事情很多，人走人留，都在悄悄变化着，而自己是否有所改变来对得起这一年时间。</p>\n<p>我觉得最糟糕的就是没有改变，昨天什么样，今天还是什么样，明天还是什么样。没有改变就没有进步，没有进步怎么对得起这段时间呢？我已经是一个大人了啊。</p>\n<p>用一个在这个年纪该有的眼光来审视这个世界吧！</p>"},{"title":"CICD实战之Jenkins搭建","abbrlink":"bc65362f","translate_title":"cicd-actual-combat-jenkins-construction","date":"2020-07-25T08:29:10.000Z","_content":"\n## 目的\n\n学习 Jenkins 的搭建\n\n## 准备工作\n\n- 机器：vmware 虚拟机安装的 centos 的最小版本[教程](https://blog.csdn.net/babyxue/article/details/80970526)\n- 终端：zsh[教程](https://www.jianshu.com/p/556ff130fc65)，安装了 autojump、zsh-autosuggestion 以及 zsh-syntax-highlighting 插件[教程](https://www.zrahh.com/archives/167.html)\n- 使用的 xshell 连接 vmware，方便熟悉[教程](https://my.oschina.net/u/4306931/blog/3226337)\n- yum 源阿里源\n\n最终终端图\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600929878617-image.png)\n\n<!-- more -->\n\n## 正式开始\n\n### docker\n\n#### docker 介绍\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600929893064-image.png)\n\n现在都流行容器化部署，想了解 docker 的点[维基百科](https://zh.wikipedia.org/wiki/Docker)和[菜鸟教程](https://www.runoob.com/docker/docker-tutorial.html)\n\n#### docker 安装\n\n```bash\n// 安装依赖\nyum install -y yum-utils device-mapper-persistent-data lvm2\nyum-config-manager --add-repo https://download.docker.com/\nyum-config-manager --enable docker-ce-nightly #要每日构建版本的 Docker\nyum-config-manager --enable docker-ce-test\nyum install docker-ce docker-ce-cli containerd.io\n```\n\n你也可以使用阿里源进行安装\n\n```bash\n// 安装依赖\nyum install -y yum-utils device-mapper-persistent-data lvm2\nsudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\nyum install docker-ce\n```\n\n安装成功再 `docker -v`查看\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600929914636-image.png)\n\n#### 基本命令\n\n```bash\nsystemctl start docker 启动\nsystemctl enable docker 建立连接\n```\n\n#### 配置阿里云源\n\n拉取 Docker 镜像时，一般默认会去`Docker`官方源拉取镜像，为了优化速度我们更换为[阿里云镜像仓库](https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors)源进行镜像下载加速。\n\n在对应`/etc/docker/daemon.json`添加内容就是了\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600929928364-image.png)\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600929936276-image.png)\n\n```bash\nsudo mkdir -p /etc/docker\nsudo tee /etc/docker/daemon.json <<-'EOF'\n{\n  \"registry-mirrors\": [\"https://lgt83q7k.mirror.aliyuncs.com\"]\n}\nEOF\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n```\n\n### 安装 Jenkins\n\nJenkins 是一款由 Java 编写的开源的持续集成工具。在与 Oracle 发生争执后，项目从 Hudson 项目复刻。 Jenkins 提供了软件开发的持续集成服务。[维基百科](<https://zh.wikipedia.org/zh-cn/Jenkins_(%E8%BD%AF%E4%BB%B6)>)\n\n#### 安装防火墙\n\n```bash\nyum install firewalld systemd -y\nservice firewalld start //启动防火墙\nfirewall-cmd --permanent --add-service=http\n\nfirewall-cmd --permanent --add-rich-rule=\"rule family=\"ipv4\" source address=\"172.16.0.0/16\" accept\"\nsystemctl reload firewalld\n```\n\n关于:\n\n- Systemd:[Systemd 入门教程：命令篇](http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.html)\n- firewalld:[firewall 简单使用](https://blog.csdn.net/s_p_j/article/details/80979450)\n- ip 的那个地方，我是使用的是的本地虚拟机，因此我配置的本地虚拟机的\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600929958983-image.png)\n\n**必须配置**，否则会之后的 docker 启动服务失败\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600929979697-image.png)\n\n#### docker in docker\n\n##### 简介\n\nDocker 采用的是 C/S（即 Client/Server）架构。我们在执行 `docker xxx` 等命令时，其实是使用 Client 在和`docker engine` 在进行通信。\n\n我们在安装 Docker CE 时，会生成一个`systemd service`服务。这个服务启动时，就是 `Docker Engine` 服务。默认情况下，Docker 守护进程会生成一个` socket（/var/run/docker.sock）`文件来进行本地进程通信，因此只能在本地使用 docker 客户端或者使用 Docker API 进行操作。\n\n> \\*.sock 文件：sock 文件是 UNIX 域套接字，它可以通过文件系统（而非网络地址）进行寻址和访问。\n> 因此，只要把宿主机的 Docker 套接字通过 Docker 数据卷挂载到容器内部，就能实现在容器内使用 Docker 命令（如下图）。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600929989131-image.png)\n\n**使用方式**：`docker run ... -v /var/run/docker.sock:/var/run/docker.sock`\n\n### 创建 Dockerfile\n\n在/usr/dockerdemo1 建立一个 Dockerfile\n\n内容\n\n```\nFROM jenkins/jenkins\nUSER root\n# 清除了基础镜像设置的源，切换成阿里云源\nRUN echo '' > /etc/apt/sources.list.d/jessie-backports.list \\\n  && echo \"deb http://mirrors.aliyun.com/debian jessie main contrib non-free\" > /etc/apt/sources.list \\\n  && echo \"deb http://mirrors.aliyun.com/debian jessie-updates main contrib non-free\" >> /etc/apt/sources.list \\\n  && echo \"deb http://mirrors.aliyun.com/debian-security jessie/updates main contrib non-free\" >> /etc/apt/sources.list\n# 更新源并安装缺少的包\nRUN apt-get update && apt-get install -y libltdl7\nARG dockerGid=999\n\nRUN echo \"docker:x:${dockerGid}:jenkins\" >> /etc/group\n```\n\n### 构建镜像\n\n文件创建后，执行`docker build -t local/jenkins .`(名字为:local/jenkins)\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930061853-image.png)\n\n如果提示 Successfully tagged local/jenkins:latest 则构建成功。\n\n此处为第二次构建，第二次构建就会非常快，大概流程如下。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930070420-image.png)\n\n### 创建镜像和容器\n\n我们将 Jenkins 用户目录外挂到宿主机内，先新建一个 `/home/jenkins` 目录，并设置权限：\n\n```\nmkdir /home/jenkins\nchown -R 1000 /home/jenkins/\n```\n\n接下来我们用镜像创建容器并启动：\n\n```\ndocker run -itd --name jenkins -p 8080:8080 -p 50000:50000 \\\n-v /var/run/docker.sock:/var/run/docker.sock \\\n-v /usr/bin/docker:/usr/bin/docker \\\n-v /home/jenkins:/var/jenkins_home \\\n--restart always \\\n--user root local/jenkins\n```\n\n创建成功\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930078755-image.png)\n\n### 启动 Jenkins\n\n#### 设置防火墙\n\n首先我们在防火墙添加 8080 和 50000 端口的放行，并重载防火墙\n\n```\nfirewall-cmd --zone=public --add-port=8080/tcp --permanent\nfirewall-cmd --zone=public --add-port=50000/tcp --permanent\nsystemctl reload firewalld\n```\n\n然后在`宿主机IP:8080`就可以看到界面了\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930091448-image.png)\n\n#### 设置源\n\n设置源提高 Jenkins 插件下载速度。因为后面安装插件需要重启，因此这一步可以先操作，避免后面再重启。\n\n```bash\ndocker exec -it jenkins /bin/bash\nfind / -name 'default.json'\nsed -i 's/http:\\/\\/updates.jenkins-ci.org\\/download/https:\\/\\/mirrors.tuna.tsinghua.edu.cn\\/jenkins/g' /var/jenkins_home/updates/default.json && sed -i 's/http:\\/\\/www.google.com/https:\\/\\/www.baidu.com/g' /var/jenkins_home/updates/default.json\nexit;\n```\n\n#### 初始化完成\n\n初始化完成需要我们输入密码\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930101097-image.png)\n\n我们执行命令\n\n```\ndocker exec -it jenkins /bin/bash //进入命令行\ncat /var/jenkins_home/secrets/initialAdminPassword\n```\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930114355-image.png)\n\n密码输入之后就是进入插件安装\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930124287-image.png)\n\n设置源之后插件安装就很丝滑流畅\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930131849-image.png)\n\n再就是设置管理员了，我这里使用的是：使用 admin 账户继续。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930141714-image.png)\n\n进入就是我们熟悉的界面了\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930151106-image.png)\n\n#### 小试牛刀\n\n左侧新建 Item\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930158573-image.png)\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930168607-image.png)\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930174874-image.png)\n\n输入代码\n\n```\n  docker -v\n  docker pull node:latest\n```\n\n保存再触发立即构建就可以看到效果了。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930183638-image.png)\n\n可以在控制台看到对应的输出就大功告成了。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930190482-image.png)\n\n## 结语\n\n至此，我们已经完整搭建了 Jenkins 环境，作为 CICD 不可少的一部分，也算是有了一个良好的开端。撒花！\n","source":"_posts/cicd2.md","raw":"---\ntitle: CICD实战之Jenkins搭建\ntags:\n  - CICD\nabbrlink: bc65362f\ntranslate_title: cicd-actual-combat-jenkins-construction\ndate: 2020-07-25 16:29:10\n---\n\n## 目的\n\n学习 Jenkins 的搭建\n\n## 准备工作\n\n- 机器：vmware 虚拟机安装的 centos 的最小版本[教程](https://blog.csdn.net/babyxue/article/details/80970526)\n- 终端：zsh[教程](https://www.jianshu.com/p/556ff130fc65)，安装了 autojump、zsh-autosuggestion 以及 zsh-syntax-highlighting 插件[教程](https://www.zrahh.com/archives/167.html)\n- 使用的 xshell 连接 vmware，方便熟悉[教程](https://my.oschina.net/u/4306931/blog/3226337)\n- yum 源阿里源\n\n最终终端图\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600929878617-image.png)\n\n<!-- more -->\n\n## 正式开始\n\n### docker\n\n#### docker 介绍\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600929893064-image.png)\n\n现在都流行容器化部署，想了解 docker 的点[维基百科](https://zh.wikipedia.org/wiki/Docker)和[菜鸟教程](https://www.runoob.com/docker/docker-tutorial.html)\n\n#### docker 安装\n\n```bash\n// 安装依赖\nyum install -y yum-utils device-mapper-persistent-data lvm2\nyum-config-manager --add-repo https://download.docker.com/\nyum-config-manager --enable docker-ce-nightly #要每日构建版本的 Docker\nyum-config-manager --enable docker-ce-test\nyum install docker-ce docker-ce-cli containerd.io\n```\n\n你也可以使用阿里源进行安装\n\n```bash\n// 安装依赖\nyum install -y yum-utils device-mapper-persistent-data lvm2\nsudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\nyum install docker-ce\n```\n\n安装成功再 `docker -v`查看\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600929914636-image.png)\n\n#### 基本命令\n\n```bash\nsystemctl start docker 启动\nsystemctl enable docker 建立连接\n```\n\n#### 配置阿里云源\n\n拉取 Docker 镜像时，一般默认会去`Docker`官方源拉取镜像，为了优化速度我们更换为[阿里云镜像仓库](https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors)源进行镜像下载加速。\n\n在对应`/etc/docker/daemon.json`添加内容就是了\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600929928364-image.png)\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600929936276-image.png)\n\n```bash\nsudo mkdir -p /etc/docker\nsudo tee /etc/docker/daemon.json <<-'EOF'\n{\n  \"registry-mirrors\": [\"https://lgt83q7k.mirror.aliyuncs.com\"]\n}\nEOF\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n```\n\n### 安装 Jenkins\n\nJenkins 是一款由 Java 编写的开源的持续集成工具。在与 Oracle 发生争执后，项目从 Hudson 项目复刻。 Jenkins 提供了软件开发的持续集成服务。[维基百科](<https://zh.wikipedia.org/zh-cn/Jenkins_(%E8%BD%AF%E4%BB%B6)>)\n\n#### 安装防火墙\n\n```bash\nyum install firewalld systemd -y\nservice firewalld start //启动防火墙\nfirewall-cmd --permanent --add-service=http\n\nfirewall-cmd --permanent --add-rich-rule=\"rule family=\"ipv4\" source address=\"172.16.0.0/16\" accept\"\nsystemctl reload firewalld\n```\n\n关于:\n\n- Systemd:[Systemd 入门教程：命令篇](http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.html)\n- firewalld:[firewall 简单使用](https://blog.csdn.net/s_p_j/article/details/80979450)\n- ip 的那个地方，我是使用的是的本地虚拟机，因此我配置的本地虚拟机的\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600929958983-image.png)\n\n**必须配置**，否则会之后的 docker 启动服务失败\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600929979697-image.png)\n\n#### docker in docker\n\n##### 简介\n\nDocker 采用的是 C/S（即 Client/Server）架构。我们在执行 `docker xxx` 等命令时，其实是使用 Client 在和`docker engine` 在进行通信。\n\n我们在安装 Docker CE 时，会生成一个`systemd service`服务。这个服务启动时，就是 `Docker Engine` 服务。默认情况下，Docker 守护进程会生成一个` socket（/var/run/docker.sock）`文件来进行本地进程通信，因此只能在本地使用 docker 客户端或者使用 Docker API 进行操作。\n\n> \\*.sock 文件：sock 文件是 UNIX 域套接字，它可以通过文件系统（而非网络地址）进行寻址和访问。\n> 因此，只要把宿主机的 Docker 套接字通过 Docker 数据卷挂载到容器内部，就能实现在容器内使用 Docker 命令（如下图）。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600929989131-image.png)\n\n**使用方式**：`docker run ... -v /var/run/docker.sock:/var/run/docker.sock`\n\n### 创建 Dockerfile\n\n在/usr/dockerdemo1 建立一个 Dockerfile\n\n内容\n\n```\nFROM jenkins/jenkins\nUSER root\n# 清除了基础镜像设置的源，切换成阿里云源\nRUN echo '' > /etc/apt/sources.list.d/jessie-backports.list \\\n  && echo \"deb http://mirrors.aliyun.com/debian jessie main contrib non-free\" > /etc/apt/sources.list \\\n  && echo \"deb http://mirrors.aliyun.com/debian jessie-updates main contrib non-free\" >> /etc/apt/sources.list \\\n  && echo \"deb http://mirrors.aliyun.com/debian-security jessie/updates main contrib non-free\" >> /etc/apt/sources.list\n# 更新源并安装缺少的包\nRUN apt-get update && apt-get install -y libltdl7\nARG dockerGid=999\n\nRUN echo \"docker:x:${dockerGid}:jenkins\" >> /etc/group\n```\n\n### 构建镜像\n\n文件创建后，执行`docker build -t local/jenkins .`(名字为:local/jenkins)\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930061853-image.png)\n\n如果提示 Successfully tagged local/jenkins:latest 则构建成功。\n\n此处为第二次构建，第二次构建就会非常快，大概流程如下。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930070420-image.png)\n\n### 创建镜像和容器\n\n我们将 Jenkins 用户目录外挂到宿主机内，先新建一个 `/home/jenkins` 目录，并设置权限：\n\n```\nmkdir /home/jenkins\nchown -R 1000 /home/jenkins/\n```\n\n接下来我们用镜像创建容器并启动：\n\n```\ndocker run -itd --name jenkins -p 8080:8080 -p 50000:50000 \\\n-v /var/run/docker.sock:/var/run/docker.sock \\\n-v /usr/bin/docker:/usr/bin/docker \\\n-v /home/jenkins:/var/jenkins_home \\\n--restart always \\\n--user root local/jenkins\n```\n\n创建成功\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930078755-image.png)\n\n### 启动 Jenkins\n\n#### 设置防火墙\n\n首先我们在防火墙添加 8080 和 50000 端口的放行，并重载防火墙\n\n```\nfirewall-cmd --zone=public --add-port=8080/tcp --permanent\nfirewall-cmd --zone=public --add-port=50000/tcp --permanent\nsystemctl reload firewalld\n```\n\n然后在`宿主机IP:8080`就可以看到界面了\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930091448-image.png)\n\n#### 设置源\n\n设置源提高 Jenkins 插件下载速度。因为后面安装插件需要重启，因此这一步可以先操作，避免后面再重启。\n\n```bash\ndocker exec -it jenkins /bin/bash\nfind / -name 'default.json'\nsed -i 's/http:\\/\\/updates.jenkins-ci.org\\/download/https:\\/\\/mirrors.tuna.tsinghua.edu.cn\\/jenkins/g' /var/jenkins_home/updates/default.json && sed -i 's/http:\\/\\/www.google.com/https:\\/\\/www.baidu.com/g' /var/jenkins_home/updates/default.json\nexit;\n```\n\n#### 初始化完成\n\n初始化完成需要我们输入密码\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930101097-image.png)\n\n我们执行命令\n\n```\ndocker exec -it jenkins /bin/bash //进入命令行\ncat /var/jenkins_home/secrets/initialAdminPassword\n```\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930114355-image.png)\n\n密码输入之后就是进入插件安装\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930124287-image.png)\n\n设置源之后插件安装就很丝滑流畅\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930131849-image.png)\n\n再就是设置管理员了，我这里使用的是：使用 admin 账户继续。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930141714-image.png)\n\n进入就是我们熟悉的界面了\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930151106-image.png)\n\n#### 小试牛刀\n\n左侧新建 Item\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930158573-image.png)\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930168607-image.png)\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930174874-image.png)\n\n输入代码\n\n```\n  docker -v\n  docker pull node:latest\n```\n\n保存再触发立即构建就可以看到效果了。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930183638-image.png)\n\n可以在控制台看到对应的输出就大功告成了。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930190482-image.png)\n\n## 结语\n\n至此，我们已经完整搭建了 Jenkins 环境，作为 CICD 不可少的一部分，也算是有了一个良好的开端。撒花！\n","slug":"cicd2","published":1,"updated":"2021-09-29T07:53:51.817Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy6ax000xp4vlar1k337v","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"目的\"><a href=\"#目的\" class=\"headerlink\" title=\"目的\"></a>目的</h2><p>学习 Jenkins 的搭建</p>\n<h2 id=\"准备工作\"><a href=\"#准备工作\" class=\"headerlink\" title=\"准备工作\"></a>准备工作</h2><ul>\n<li>机器：vmware 虚拟机安装的 centos 的最小版本<a href=\"https://blog.csdn.net/babyxue/article/details/80970526\">教程</a></li>\n<li>终端：zsh<a href=\"https://www.jianshu.com/p/556ff130fc65\">教程</a>，安装了 autojump、zsh-autosuggestion 以及 zsh-syntax-highlighting 插件<a href=\"https://www.zrahh.com/archives/167.html\">教程</a></li>\n<li>使用的 xshell 连接 vmware，方便熟悉<a href=\"https://my.oschina.net/u/4306931/blog/3226337\">教程</a></li>\n<li>yum 源阿里源</li>\n</ul>\n<p>最终终端图</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600929878617-image.png\" alt=\"image\"></p>\n<span id=\"more\"></span>\n\n<h2 id=\"正式开始\"><a href=\"#正式开始\" class=\"headerlink\" title=\"正式开始\"></a>正式开始</h2><h3 id=\"docker\"><a href=\"#docker\" class=\"headerlink\" title=\"docker\"></a>docker</h3><h4 id=\"docker-介绍\"><a href=\"#docker-介绍\" class=\"headerlink\" title=\"docker 介绍\"></a>docker 介绍</h4><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600929893064-image.png\" alt=\"image\"></p>\n<p>现在都流行容器化部署，想了解 docker 的点<a href=\"https://zh.wikipedia.org/wiki/Docker\">维基百科</a>和<a href=\"https://www.runoob.com/docker/docker-tutorial.html\">菜鸟教程</a></p>\n<h4 id=\"docker-安装\"><a href=\"#docker-安装\" class=\"headerlink\" title=\"docker 安装\"></a>docker 安装</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// 安装依赖</span><br><span class=\"line\">yum install -y yum-utils device-mapper-persistent-data lvm2</span><br><span class=\"line\">yum-config-manager --add-repo https://download.docker.com/</span><br><span class=\"line\">yum-config-manager --<span class=\"built_in\">enable</span> docker-ce-nightly <span class=\"comment\">#要每日构建版本的 Docker</span></span><br><span class=\"line\">yum-config-manager --<span class=\"built_in\">enable</span> docker-ce-test</span><br><span class=\"line\">yum install docker-ce docker-ce-cli containerd.io</span><br></pre></td></tr></table></figure>\n\n<p>你也可以使用阿里源进行安装</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// 安装依赖</span><br><span class=\"line\">yum install -y yum-utils device-mapper-persistent-data lvm2</span><br><span class=\"line\">sudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br><span class=\"line\">yum install docker-ce</span><br></pre></td></tr></table></figure>\n\n<p>安装成功再 <code>docker -v</code>查看</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600929914636-image.png\" alt=\"image\"></p>\n<h4 id=\"基本命令\"><a href=\"#基本命令\" class=\"headerlink\" title=\"基本命令\"></a>基本命令</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl start docker 启动</span><br><span class=\"line\">systemctl <span class=\"built_in\">enable</span> docker 建立连接</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"配置阿里云源\"><a href=\"#配置阿里云源\" class=\"headerlink\" title=\"配置阿里云源\"></a>配置阿里云源</h4><p>拉取 Docker 镜像时，一般默认会去<code>Docker</code>官方源拉取镜像，为了优化速度我们更换为<a href=\"https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors\">阿里云镜像仓库</a>源进行镜像下载加速。</p>\n<p>在对应<code>/etc/docker/daemon.json</code>添加内容就是了</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600929928364-image.png\" alt=\"image\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600929936276-image.png\" alt=\"image\"></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo <span class=\"built_in\">mkdir</span> -p /etc/docker</span><br><span class=\"line\">sudo <span class=\"built_in\">tee</span> /etc/docker/daemon.json &lt;&lt;-<span class=\"string\">&#x27;EOF&#x27;</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;registry-mirrors&quot;</span>: [<span class=\"string\">&quot;https://lgt83q7k.mirror.aliyuncs.com&quot;</span>]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">EOF</span><br><span class=\"line\">sudo systemctl daemon-reload</span><br><span class=\"line\">sudo systemctl restart docker</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"安装-Jenkins\"><a href=\"#安装-Jenkins\" class=\"headerlink\" title=\"安装 Jenkins\"></a>安装 Jenkins</h3><p>Jenkins 是一款由 Java 编写的开源的持续集成工具。在与 Oracle 发生争执后，项目从 Hudson 项目复刻。 Jenkins 提供了软件开发的持续集成服务。<a href=\"https://zh.wikipedia.org/zh-cn/Jenkins_(%E8%BD%AF%E4%BB%B6)\">维基百科</a></p>\n<h4 id=\"安装防火墙\"><a href=\"#安装防火墙\" class=\"headerlink\" title=\"安装防火墙\"></a>安装防火墙</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install firewalld systemd -y</span><br><span class=\"line\">service firewalld start //启动防火墙</span><br><span class=\"line\">firewall-cmd --permanent --add-service=http</span><br><span class=\"line\"></span><br><span class=\"line\">firewall-cmd --permanent --add-rich-rule=<span class=\"string\">&quot;rule family=&quot;</span>ipv4<span class=\"string\">&quot; source address=&quot;</span>172.16.0.0/16<span class=\"string\">&quot; accept&quot;</span></span><br><span class=\"line\">systemctl reload firewalld</span><br></pre></td></tr></table></figure>\n\n<p>关于:</p>\n<ul>\n<li>Systemd:<a href=\"http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.html\">Systemd 入门教程：命令篇</a></li>\n<li>firewalld:<a href=\"https://blog.csdn.net/s_p_j/article/details/80979450\">firewall 简单使用</a></li>\n<li>ip 的那个地方，我是使用的是的本地虚拟机，因此我配置的本地虚拟机的</li>\n</ul>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600929958983-image.png\" alt=\"image\"></p>\n<p><strong>必须配置</strong>，否则会之后的 docker 启动服务失败</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600929979697-image.png\" alt=\"image\"></p>\n<h4 id=\"docker-in-docker\"><a href=\"#docker-in-docker\" class=\"headerlink\" title=\"docker in docker\"></a>docker in docker</h4><h5 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h5><p>Docker 采用的是 C/S（即 Client/Server）架构。我们在执行 <code>docker xxx</code> 等命令时，其实是使用 Client 在和<code>docker engine</code> 在进行通信。</p>\n<p>我们在安装 Docker CE 时，会生成一个<code>systemd service</code>服务。这个服务启动时，就是 <code>Docker Engine</code> 服务。默认情况下，Docker 守护进程会生成一个<code> socket（/var/run/docker.sock）</code>文件来进行本地进程通信，因此只能在本地使用 docker 客户端或者使用 Docker API 进行操作。</p>\n<blockquote>\n<p>*.sock 文件：sock 文件是 UNIX 域套接字，它可以通过文件系统（而非网络地址）进行寻址和访问。<br>因此，只要把宿主机的 Docker 套接字通过 Docker 数据卷挂载到容器内部，就能实现在容器内使用 Docker 命令（如下图）。</p>\n</blockquote>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600929989131-image.png\" alt=\"image\"></p>\n<p><strong>使用方式</strong>：<code>docker run ... -v /var/run/docker.sock:/var/run/docker.sock</code></p>\n<h3 id=\"创建-Dockerfile\"><a href=\"#创建-Dockerfile\" class=\"headerlink\" title=\"创建 Dockerfile\"></a>创建 Dockerfile</h3><p>在/usr/dockerdemo1 建立一个 Dockerfile</p>\n<p>内容</p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">FROM</span> jenkins/jenkins</span><br><span class=\"line\"><span class=\"keyword\">USER</span> root</span><br><span class=\"line\"><span class=\"comment\"># 清除了基础镜像设置的源，切换成阿里云源</span></span><br><span class=\"line\"><span class=\"keyword\">RUN</span><span class=\"language-bash\"> <span class=\"built_in\">echo</span> <span class=\"string\">&#x27;&#x27;</span> &gt; /etc/apt/sources.list.d/jessie-backports.list \\</span></span><br><span class=\"line\"><span class=\"language-bash\">  &amp;&amp; <span class=\"built_in\">echo</span> <span class=\"string\">&quot;deb http://mirrors.aliyun.com/debian jessie main contrib non-free&quot;</span> &gt; /etc/apt/sources.list \\</span></span><br><span class=\"line\"><span class=\"language-bash\">  &amp;&amp; <span class=\"built_in\">echo</span> <span class=\"string\">&quot;deb http://mirrors.aliyun.com/debian jessie-updates main contrib non-free&quot;</span> &gt;&gt; /etc/apt/sources.list \\</span></span><br><span class=\"line\"><span class=\"language-bash\">  &amp;&amp; <span class=\"built_in\">echo</span> <span class=\"string\">&quot;deb http://mirrors.aliyun.com/debian-security jessie/updates main contrib non-free&quot;</span> &gt;&gt; /etc/apt/sources.list</span></span><br><span class=\"line\"><span class=\"comment\"># 更新源并安装缺少的包</span></span><br><span class=\"line\"><span class=\"keyword\">RUN</span><span class=\"language-bash\"> apt-get update &amp;&amp; apt-get install -y libltdl7</span></span><br><span class=\"line\"><span class=\"keyword\">ARG</span> dockerGid=<span class=\"number\">999</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">RUN</span><span class=\"language-bash\"> <span class=\"built_in\">echo</span> <span class=\"string\">&quot;docker:x:<span class=\"variable\">$&#123;dockerGid&#125;</span>:jenkins&quot;</span> &gt;&gt; /etc/group</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"构建镜像\"><a href=\"#构建镜像\" class=\"headerlink\" title=\"构建镜像\"></a>构建镜像</h3><p>文件创建后，执行<code>docker build -t local/jenkins .</code>(名字为:local/jenkins)</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930061853-image.png\" alt=\"image\"></p>\n<p>如果提示 Successfully tagged local/jenkins:latest 则构建成功。</p>\n<p>此处为第二次构建，第二次构建就会非常快，大概流程如下。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930070420-image.png\" alt=\"image\"></p>\n<h3 id=\"创建镜像和容器\"><a href=\"#创建镜像和容器\" class=\"headerlink\" title=\"创建镜像和容器\"></a>创建镜像和容器</h3><p>我们将 Jenkins 用户目录外挂到宿主机内，先新建一个 <code>/home/jenkins</code> 目录，并设置权限：</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir <span class=\"regexp\">/home/</span>jenkins</span><br><span class=\"line\">chown -R <span class=\"number\">1000</span> <span class=\"regexp\">/home/</span>jenkins/</span><br></pre></td></tr></table></figure>\n\n<p>接下来我们用镜像创建容器并启动：</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -itd --name jenkins -p <span class=\"number\">8080</span>:<span class=\"number\">8080</span> -p <span class=\"number\">50000</span>:<span class=\"number\">50000</span> \\</span><br><span class=\"line\">-v <span class=\"regexp\">/var/</span>run<span class=\"regexp\">/docker.sock:/</span>var<span class=\"regexp\">/run/</span>docker.sock \\</span><br><span class=\"line\">-v <span class=\"regexp\">/usr/</span>bin<span class=\"regexp\">/docker:/u</span>sr<span class=\"regexp\">/bin/</span>docker \\</span><br><span class=\"line\">-v <span class=\"regexp\">/home/</span>jenkins:<span class=\"regexp\">/var/</span>jenkins_home \\</span><br><span class=\"line\">--restart always \\</span><br><span class=\"line\">--user root local/jenkins</span><br></pre></td></tr></table></figure>\n\n<p>创建成功</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930078755-image.png\" alt=\"image\"></p>\n<h3 id=\"启动-Jenkins\"><a href=\"#启动-Jenkins\" class=\"headerlink\" title=\"启动 Jenkins\"></a>启动 Jenkins</h3><h4 id=\"设置防火墙\"><a href=\"#设置防火墙\" class=\"headerlink\" title=\"设置防火墙\"></a>设置防火墙</h4><p>首先我们在防火墙添加 8080 和 50000 端口的放行，并重载防火墙</p>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd <span class=\"attribute\">--zone</span>=public <span class=\"attribute\">--add-port</span>=8080/tcp --permanent</span><br><span class=\"line\">firewall-cmd <span class=\"attribute\">--zone</span>=public <span class=\"attribute\">--add-port</span>=50000/tcp --permanent</span><br><span class=\"line\">systemctl reload firewalld</span><br></pre></td></tr></table></figure>\n\n<p>然后在<code>宿主机IP:8080</code>就可以看到界面了</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930091448-image.png\" alt=\"image\"></p>\n<h4 id=\"设置源\"><a href=\"#设置源\" class=\"headerlink\" title=\"设置源\"></a>设置源</h4><p>设置源提高 Jenkins 插件下载速度。因为后面安装插件需要重启，因此这一步可以先操作，避免后面再重启。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker <span class=\"built_in\">exec</span> -it jenkins /bin/bash</span><br><span class=\"line\">find / -name <span class=\"string\">&#x27;default.json&#x27;</span></span><br><span class=\"line\">sed -i <span class=\"string\">&#x27;s/http:\\/\\/updates.jenkins-ci.org\\/download/https:\\/\\/mirrors.tuna.tsinghua.edu.cn\\/jenkins/g&#x27;</span> /var/jenkins_home/updates/default.json &amp;&amp; sed -i <span class=\"string\">&#x27;s/http:\\/\\/www.google.com/https:\\/\\/www.baidu.com/g&#x27;</span> /var/jenkins_home/updates/default.json</span><br><span class=\"line\"><span class=\"built_in\">exit</span>;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"初始化完成\"><a href=\"#初始化完成\" class=\"headerlink\" title=\"初始化完成\"></a>初始化完成</h4><p>初始化完成需要我们输入密码</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930101097-image.png\" alt=\"image\"></p>\n<p>我们执行命令</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker exec -it jenkins <span class=\"regexp\">/bin/</span>bash <span class=\"regexp\">//</span>进入命令行</span><br><span class=\"line\">cat <span class=\"regexp\">/var/</span>jenkins_home<span class=\"regexp\">/secrets/i</span>nitialAdminPassword</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930114355-image.png\" alt=\"image\"></p>\n<p>密码输入之后就是进入插件安装</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930124287-image.png\" alt=\"image\"></p>\n<p>设置源之后插件安装就很丝滑流畅</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930131849-image.png\" alt=\"image\"></p>\n<p>再就是设置管理员了，我这里使用的是：使用 admin 账户继续。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930141714-image.png\" alt=\"image\"></p>\n<p>进入就是我们熟悉的界面了</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930151106-image.png\" alt=\"image\"></p>\n<h4 id=\"小试牛刀\"><a href=\"#小试牛刀\" class=\"headerlink\" title=\"小试牛刀\"></a>小试牛刀</h4><p>左侧新建 Item</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930158573-image.png\" alt=\"image\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930168607-image.png\" alt=\"image\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930174874-image.png\" alt=\"image\"></p>\n<p>输入代码</p>\n<figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker -v</span><br><span class=\"line\">docker pull <span class=\"keyword\">node</span><span class=\"title\">:latest</span></span><br></pre></td></tr></table></figure>\n\n<p>保存再触发立即构建就可以看到效果了。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930183638-image.png\" alt=\"image\"></p>\n<p>可以在控制台看到对应的输出就大功告成了。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930190482-image.png\" alt=\"image\"></p>\n<h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p>至此，我们已经完整搭建了 Jenkins 环境，作为 CICD 不可少的一部分，也算是有了一个良好的开端。撒花！</p>\n","site":{"data":{}},"length":4014,"excerpt":"<h2 id=\"目的\"><a href=\"#目的\" class=\"headerlink\" title=\"目的\"></a>目的</h2><p>学习 Jenkins 的搭建</p>\n<h2 id=\"准备工作\"><a href=\"#准备工作\" class=\"headerlink\" title=\"准备工作\"></a>准备工作</h2><ul>\n<li>机器：vmware 虚拟机安装的 centos 的最小版本<a href=\"https://blog.csdn.net/babyxue/article/details/80970526\">教程</a></li>\n<li>终端：zsh<a href=\"https://www.jianshu.com/p/556ff130fc65\">教程</a>，安装了 autojump、zsh-autosuggestion 以及 zsh-syntax-highlighting 插件<a href=\"https://www.zrahh.com/archives/167.html\">教程</a></li>\n<li>使用的 xshell 连接 vmware，方便熟悉<a href=\"https://my.oschina.net/u/4306931/blog/3226337\">教程</a></li>\n<li>yum 源阿里源</li>\n</ul>\n<p>最终终端图</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600929878617-image.png\" alt=\"image\"></p>","more":"<h2 id=\"正式开始\"><a href=\"#正式开始\" class=\"headerlink\" title=\"正式开始\"></a>正式开始</h2><h3 id=\"docker\"><a href=\"#docker\" class=\"headerlink\" title=\"docker\"></a>docker</h3><h4 id=\"docker-介绍\"><a href=\"#docker-介绍\" class=\"headerlink\" title=\"docker 介绍\"></a>docker 介绍</h4><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600929893064-image.png\" alt=\"image\"></p>\n<p>现在都流行容器化部署，想了解 docker 的点<a href=\"https://zh.wikipedia.org/wiki/Docker\">维基百科</a>和<a href=\"https://www.runoob.com/docker/docker-tutorial.html\">菜鸟教程</a></p>\n<h4 id=\"docker-安装\"><a href=\"#docker-安装\" class=\"headerlink\" title=\"docker 安装\"></a>docker 安装</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// 安装依赖</span><br><span class=\"line\">yum install -y yum-utils device-mapper-persistent-data lvm2</span><br><span class=\"line\">yum-config-manager --add-repo https://download.docker.com/</span><br><span class=\"line\">yum-config-manager --<span class=\"built_in\">enable</span> docker-ce-nightly <span class=\"comment\">#要每日构建版本的 Docker</span></span><br><span class=\"line\">yum-config-manager --<span class=\"built_in\">enable</span> docker-ce-test</span><br><span class=\"line\">yum install docker-ce docker-ce-cli containerd.io</span><br></pre></td></tr></table></figure>\n\n<p>你也可以使用阿里源进行安装</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// 安装依赖</span><br><span class=\"line\">yum install -y yum-utils device-mapper-persistent-data lvm2</span><br><span class=\"line\">sudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br><span class=\"line\">yum install docker-ce</span><br></pre></td></tr></table></figure>\n\n<p>安装成功再 <code>docker -v</code>查看</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600929914636-image.png\" alt=\"image\"></p>\n<h4 id=\"基本命令\"><a href=\"#基本命令\" class=\"headerlink\" title=\"基本命令\"></a>基本命令</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl start docker 启动</span><br><span class=\"line\">systemctl <span class=\"built_in\">enable</span> docker 建立连接</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"配置阿里云源\"><a href=\"#配置阿里云源\" class=\"headerlink\" title=\"配置阿里云源\"></a>配置阿里云源</h4><p>拉取 Docker 镜像时，一般默认会去<code>Docker</code>官方源拉取镜像，为了优化速度我们更换为<a href=\"https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors\">阿里云镜像仓库</a>源进行镜像下载加速。</p>\n<p>在对应<code>/etc/docker/daemon.json</code>添加内容就是了</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600929928364-image.png\" alt=\"image\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600929936276-image.png\" alt=\"image\"></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo <span class=\"built_in\">mkdir</span> -p /etc/docker</span><br><span class=\"line\">sudo <span class=\"built_in\">tee</span> /etc/docker/daemon.json &lt;&lt;-<span class=\"string\">&#x27;EOF&#x27;</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;registry-mirrors&quot;</span>: [<span class=\"string\">&quot;https://lgt83q7k.mirror.aliyuncs.com&quot;</span>]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">EOF</span><br><span class=\"line\">sudo systemctl daemon-reload</span><br><span class=\"line\">sudo systemctl restart docker</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"安装-Jenkins\"><a href=\"#安装-Jenkins\" class=\"headerlink\" title=\"安装 Jenkins\"></a>安装 Jenkins</h3><p>Jenkins 是一款由 Java 编写的开源的持续集成工具。在与 Oracle 发生争执后，项目从 Hudson 项目复刻。 Jenkins 提供了软件开发的持续集成服务。<a href=\"https://zh.wikipedia.org/zh-cn/Jenkins_(%E8%BD%AF%E4%BB%B6)\">维基百科</a></p>\n<h4 id=\"安装防火墙\"><a href=\"#安装防火墙\" class=\"headerlink\" title=\"安装防火墙\"></a>安装防火墙</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install firewalld systemd -y</span><br><span class=\"line\">service firewalld start //启动防火墙</span><br><span class=\"line\">firewall-cmd --permanent --add-service=http</span><br><span class=\"line\"></span><br><span class=\"line\">firewall-cmd --permanent --add-rich-rule=<span class=\"string\">&quot;rule family=&quot;</span>ipv4<span class=\"string\">&quot; source address=&quot;</span>172.16.0.0/16<span class=\"string\">&quot; accept&quot;</span></span><br><span class=\"line\">systemctl reload firewalld</span><br></pre></td></tr></table></figure>\n\n<p>关于:</p>\n<ul>\n<li>Systemd:<a href=\"http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.html\">Systemd 入门教程：命令篇</a></li>\n<li>firewalld:<a href=\"https://blog.csdn.net/s_p_j/article/details/80979450\">firewall 简单使用</a></li>\n<li>ip 的那个地方，我是使用的是的本地虚拟机，因此我配置的本地虚拟机的</li>\n</ul>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600929958983-image.png\" alt=\"image\"></p>\n<p><strong>必须配置</strong>，否则会之后的 docker 启动服务失败</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600929979697-image.png\" alt=\"image\"></p>\n<h4 id=\"docker-in-docker\"><a href=\"#docker-in-docker\" class=\"headerlink\" title=\"docker in docker\"></a>docker in docker</h4><h5 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h5><p>Docker 采用的是 C/S（即 Client/Server）架构。我们在执行 <code>docker xxx</code> 等命令时，其实是使用 Client 在和<code>docker engine</code> 在进行通信。</p>\n<p>我们在安装 Docker CE 时，会生成一个<code>systemd service</code>服务。这个服务启动时，就是 <code>Docker Engine</code> 服务。默认情况下，Docker 守护进程会生成一个<code> socket（/var/run/docker.sock）</code>文件来进行本地进程通信，因此只能在本地使用 docker 客户端或者使用 Docker API 进行操作。</p>\n<blockquote>\n<p>*.sock 文件：sock 文件是 UNIX 域套接字，它可以通过文件系统（而非网络地址）进行寻址和访问。<br>因此，只要把宿主机的 Docker 套接字通过 Docker 数据卷挂载到容器内部，就能实现在容器内使用 Docker 命令（如下图）。</p>\n</blockquote>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600929989131-image.png\" alt=\"image\"></p>\n<p><strong>使用方式</strong>：<code>docker run ... -v /var/run/docker.sock:/var/run/docker.sock</code></p>\n<h3 id=\"创建-Dockerfile\"><a href=\"#创建-Dockerfile\" class=\"headerlink\" title=\"创建 Dockerfile\"></a>创建 Dockerfile</h3><p>在/usr/dockerdemo1 建立一个 Dockerfile</p>\n<p>内容</p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">FROM</span> jenkins/jenkins</span><br><span class=\"line\"><span class=\"keyword\">USER</span> root</span><br><span class=\"line\"><span class=\"comment\"># 清除了基础镜像设置的源，切换成阿里云源</span></span><br><span class=\"line\"><span class=\"keyword\">RUN</span><span class=\"language-bash\"> <span class=\"built_in\">echo</span> <span class=\"string\">&#x27;&#x27;</span> &gt; /etc/apt/sources.list.d/jessie-backports.list \\</span></span><br><span class=\"line\"><span class=\"language-bash\">  &amp;&amp; <span class=\"built_in\">echo</span> <span class=\"string\">&quot;deb http://mirrors.aliyun.com/debian jessie main contrib non-free&quot;</span> &gt; /etc/apt/sources.list \\</span></span><br><span class=\"line\"><span class=\"language-bash\">  &amp;&amp; <span class=\"built_in\">echo</span> <span class=\"string\">&quot;deb http://mirrors.aliyun.com/debian jessie-updates main contrib non-free&quot;</span> &gt;&gt; /etc/apt/sources.list \\</span></span><br><span class=\"line\"><span class=\"language-bash\">  &amp;&amp; <span class=\"built_in\">echo</span> <span class=\"string\">&quot;deb http://mirrors.aliyun.com/debian-security jessie/updates main contrib non-free&quot;</span> &gt;&gt; /etc/apt/sources.list</span></span><br><span class=\"line\"><span class=\"comment\"># 更新源并安装缺少的包</span></span><br><span class=\"line\"><span class=\"keyword\">RUN</span><span class=\"language-bash\"> apt-get update &amp;&amp; apt-get install -y libltdl7</span></span><br><span class=\"line\"><span class=\"keyword\">ARG</span> dockerGid=<span class=\"number\">999</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">RUN</span><span class=\"language-bash\"> <span class=\"built_in\">echo</span> <span class=\"string\">&quot;docker:x:<span class=\"variable\">$&#123;dockerGid&#125;</span>:jenkins&quot;</span> &gt;&gt; /etc/group</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"构建镜像\"><a href=\"#构建镜像\" class=\"headerlink\" title=\"构建镜像\"></a>构建镜像</h3><p>文件创建后，执行<code>docker build -t local/jenkins .</code>(名字为:local/jenkins)</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930061853-image.png\" alt=\"image\"></p>\n<p>如果提示 Successfully tagged local/jenkins:latest 则构建成功。</p>\n<p>此处为第二次构建，第二次构建就会非常快，大概流程如下。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930070420-image.png\" alt=\"image\"></p>\n<h3 id=\"创建镜像和容器\"><a href=\"#创建镜像和容器\" class=\"headerlink\" title=\"创建镜像和容器\"></a>创建镜像和容器</h3><p>我们将 Jenkins 用户目录外挂到宿主机内，先新建一个 <code>/home/jenkins</code> 目录，并设置权限：</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir <span class=\"regexp\">/home/</span>jenkins</span><br><span class=\"line\">chown -R <span class=\"number\">1000</span> <span class=\"regexp\">/home/</span>jenkins/</span><br></pre></td></tr></table></figure>\n\n<p>接下来我们用镜像创建容器并启动：</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -itd --name jenkins -p <span class=\"number\">8080</span>:<span class=\"number\">8080</span> -p <span class=\"number\">50000</span>:<span class=\"number\">50000</span> \\</span><br><span class=\"line\">-v <span class=\"regexp\">/var/</span>run<span class=\"regexp\">/docker.sock:/</span>var<span class=\"regexp\">/run/</span>docker.sock \\</span><br><span class=\"line\">-v <span class=\"regexp\">/usr/</span>bin<span class=\"regexp\">/docker:/u</span>sr<span class=\"regexp\">/bin/</span>docker \\</span><br><span class=\"line\">-v <span class=\"regexp\">/home/</span>jenkins:<span class=\"regexp\">/var/</span>jenkins_home \\</span><br><span class=\"line\">--restart always \\</span><br><span class=\"line\">--user root local/jenkins</span><br></pre></td></tr></table></figure>\n\n<p>创建成功</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930078755-image.png\" alt=\"image\"></p>\n<h3 id=\"启动-Jenkins\"><a href=\"#启动-Jenkins\" class=\"headerlink\" title=\"启动 Jenkins\"></a>启动 Jenkins</h3><h4 id=\"设置防火墙\"><a href=\"#设置防火墙\" class=\"headerlink\" title=\"设置防火墙\"></a>设置防火墙</h4><p>首先我们在防火墙添加 8080 和 50000 端口的放行，并重载防火墙</p>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd <span class=\"attribute\">--zone</span>=public <span class=\"attribute\">--add-port</span>=8080/tcp --permanent</span><br><span class=\"line\">firewall-cmd <span class=\"attribute\">--zone</span>=public <span class=\"attribute\">--add-port</span>=50000/tcp --permanent</span><br><span class=\"line\">systemctl reload firewalld</span><br></pre></td></tr></table></figure>\n\n<p>然后在<code>宿主机IP:8080</code>就可以看到界面了</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930091448-image.png\" alt=\"image\"></p>\n<h4 id=\"设置源\"><a href=\"#设置源\" class=\"headerlink\" title=\"设置源\"></a>设置源</h4><p>设置源提高 Jenkins 插件下载速度。因为后面安装插件需要重启，因此这一步可以先操作，避免后面再重启。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker <span class=\"built_in\">exec</span> -it jenkins /bin/bash</span><br><span class=\"line\">find / -name <span class=\"string\">&#x27;default.json&#x27;</span></span><br><span class=\"line\">sed -i <span class=\"string\">&#x27;s/http:\\/\\/updates.jenkins-ci.org\\/download/https:\\/\\/mirrors.tuna.tsinghua.edu.cn\\/jenkins/g&#x27;</span> /var/jenkins_home/updates/default.json &amp;&amp; sed -i <span class=\"string\">&#x27;s/http:\\/\\/www.google.com/https:\\/\\/www.baidu.com/g&#x27;</span> /var/jenkins_home/updates/default.json</span><br><span class=\"line\"><span class=\"built_in\">exit</span>;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"初始化完成\"><a href=\"#初始化完成\" class=\"headerlink\" title=\"初始化完成\"></a>初始化完成</h4><p>初始化完成需要我们输入密码</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930101097-image.png\" alt=\"image\"></p>\n<p>我们执行命令</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker exec -it jenkins <span class=\"regexp\">/bin/</span>bash <span class=\"regexp\">//</span>进入命令行</span><br><span class=\"line\">cat <span class=\"regexp\">/var/</span>jenkins_home<span class=\"regexp\">/secrets/i</span>nitialAdminPassword</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930114355-image.png\" alt=\"image\"></p>\n<p>密码输入之后就是进入插件安装</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930124287-image.png\" alt=\"image\"></p>\n<p>设置源之后插件安装就很丝滑流畅</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930131849-image.png\" alt=\"image\"></p>\n<p>再就是设置管理员了，我这里使用的是：使用 admin 账户继续。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930141714-image.png\" alt=\"image\"></p>\n<p>进入就是我们熟悉的界面了</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930151106-image.png\" alt=\"image\"></p>\n<h4 id=\"小试牛刀\"><a href=\"#小试牛刀\" class=\"headerlink\" title=\"小试牛刀\"></a>小试牛刀</h4><p>左侧新建 Item</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930158573-image.png\" alt=\"image\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930168607-image.png\" alt=\"image\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930174874-image.png\" alt=\"image\"></p>\n<p>输入代码</p>\n<figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker -v</span><br><span class=\"line\">docker pull <span class=\"keyword\">node</span><span class=\"title\">:latest</span></span><br></pre></td></tr></table></figure>\n\n<p>保存再触发立即构建就可以看到效果了。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930183638-image.png\" alt=\"image\"></p>\n<p>可以在控制台看到对应的输出就大功告成了。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930190482-image.png\" alt=\"image\"></p>\n<h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p>至此，我们已经完整搭建了 Jenkins 环境，作为 CICD 不可少的一部分，也算是有了一个良好的开端。撒花！</p>"},{"title":"CICD实战之基本介绍","abbrlink":"444099e9","translate_title":"basic-introduction-to-cicd-combat","date":"2020-07-24T15:25:19.000Z","_content":"\n## 什么是 CI/CD\n\n在软件工程中，CI / CD 或 CICD 通常是指持续集成以及持续交付或持续部署的组合实践（[具体](https://www.redhat.com/zh/topics/devops/what-is-ci-cd)）。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-28/1609146550365-image.png)\n\n<!-- more -->\n\n## 部署方式的区别\n\n### 传统部署\n\n传统部署方式\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175617.png)\n\n缺点：**人工操作，部署速度慢，易出错，版本管理机制差**\n\n### CI/CD\n\nCI/CD 的根本原则就是实现自动化构建部署，解决人工构建部署带来的**效率低，出错率高**等问题。下面是 CI/CD 的总体流程：\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175633.png)\n\n可以看到一套完整的流程：**代码编写-提交 Git-触发代码扫描-触发 Jenkins-构建镜像到 Hub-服务器拉取镜像部署**\n\n优点：**流程规范、不易出错、效率高**\n\n## 总结\nCI持续集成，伴随的是我们的代码产物每次提交，可能会经过一系列流程才会进入发布阶段，在这些流程中有单元测试，规则校验等可以配置的流程单元，我们把这些单元设置为每次代码产物提交都要经过的任务，保持一定频率的触发，这个整体就是CI。\n\nCD持续部署或者持续交付，我们每次的代码产物为的目的就是新的产品更新迭代，而某些分支的提交、合并等操作应该触发新的产品的输出，整个产品随着代码产物在流水线的运行而不断更新，持续迭代，这就是CD。\n\n\n## 参考资料\n\n> [CI/CD 是什么？如何理解持续集成、持续交付和持续部署](https://www.redhat.com/zh/topics/devops/what-is-ci-cd) \n> \n> [语雀分享](https://www.yuque.com/docs/share/5a58e274-6b1e-4697-b36d-89d5a152f30e)\n","source":"_posts/cicd1.md","raw":"---\ntitle: CICD实战之基本介绍\nabbrlink: \"444099e9\"\ntags:\n  - CICD\ntranslate_title: basic-introduction-to-cicd-combat\ndate: 2020-07-24 23:25:19\n---\n\n## 什么是 CI/CD\n\n在软件工程中，CI / CD 或 CICD 通常是指持续集成以及持续交付或持续部署的组合实践（[具体](https://www.redhat.com/zh/topics/devops/what-is-ci-cd)）。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-28/1609146550365-image.png)\n\n<!-- more -->\n\n## 部署方式的区别\n\n### 传统部署\n\n传统部署方式\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175617.png)\n\n缺点：**人工操作，部署速度慢，易出错，版本管理机制差**\n\n### CI/CD\n\nCI/CD 的根本原则就是实现自动化构建部署，解决人工构建部署带来的**效率低，出错率高**等问题。下面是 CI/CD 的总体流程：\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175633.png)\n\n可以看到一套完整的流程：**代码编写-提交 Git-触发代码扫描-触发 Jenkins-构建镜像到 Hub-服务器拉取镜像部署**\n\n优点：**流程规范、不易出错、效率高**\n\n## 总结\nCI持续集成，伴随的是我们的代码产物每次提交，可能会经过一系列流程才会进入发布阶段，在这些流程中有单元测试，规则校验等可以配置的流程单元，我们把这些单元设置为每次代码产物提交都要经过的任务，保持一定频率的触发，这个整体就是CI。\n\nCD持续部署或者持续交付，我们每次的代码产物为的目的就是新的产品更新迭代，而某些分支的提交、合并等操作应该触发新的产品的输出，整个产品随着代码产物在流水线的运行而不断更新，持续迭代，这就是CD。\n\n\n## 参考资料\n\n> [CI/CD 是什么？如何理解持续集成、持续交付和持续部署](https://www.redhat.com/zh/topics/devops/what-is-ci-cd) \n> \n> [语雀分享](https://www.yuque.com/docs/share/5a58e274-6b1e-4697-b36d-89d5a152f30e)\n","slug":"cicd1","published":1,"updated":"2021-09-29T07:53:51.816Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy6ay000zp4vlhj40bfec","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"什么是-CI-CD\"><a href=\"#什么是-CI-CD\" class=\"headerlink\" title=\"什么是 CI/CD\"></a>什么是 CI/CD</h2><p>在软件工程中，CI / CD 或 CICD 通常是指持续集成以及持续交付或持续部署的组合实践（<a href=\"https://www.redhat.com/zh/topics/devops/what-is-ci-cd\">具体</a>）。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-28/1609146550365-image.png\"></p>\n<span id=\"more\"></span>\n\n<h2 id=\"部署方式的区别\"><a href=\"#部署方式的区别\" class=\"headerlink\" title=\"部署方式的区别\"></a>部署方式的区别</h2><h3 id=\"传统部署\"><a href=\"#传统部署\" class=\"headerlink\" title=\"传统部署\"></a>传统部署</h3><p>传统部署方式<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175617.png\"></p>\n<p>缺点：<strong>人工操作，部署速度慢，易出错，版本管理机制差</strong></p>\n<h3 id=\"CI-CD\"><a href=\"#CI-CD\" class=\"headerlink\" title=\"CI/CD\"></a>CI/CD</h3><p>CI/CD 的根本原则就是实现自动化构建部署，解决人工构建部署带来的<strong>效率低，出错率高</strong>等问题。下面是 CI/CD 的总体流程：</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175633.png\"></p>\n<p>可以看到一套完整的流程：<strong>代码编写-提交 Git-触发代码扫描-触发 Jenkins-构建镜像到 Hub-服务器拉取镜像部署</strong></p>\n<p>优点：<strong>流程规范、不易出错、效率高</strong></p>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><p>CI持续集成，伴随的是我们的代码产物每次提交，可能会经过一系列流程才会进入发布阶段，在这些流程中有单元测试，规则校验等可以配置的流程单元，我们把这些单元设置为每次代码产物提交都要经过的任务，保持一定频率的触发，这个整体就是CI。</p>\n<p>CD持续部署或者持续交付，我们每次的代码产物为的目的就是新的产品更新迭代，而某些分支的提交、合并等操作应该触发新的产品的输出，整个产品随着代码产物在流水线的运行而不断更新，持续迭代，这就是CD。</p>\n<h2 id=\"参考资料\"><a href=\"#参考资料\" class=\"headerlink\" title=\"参考资料\"></a>参考资料</h2><blockquote>\n<p><a href=\"https://www.redhat.com/zh/topics/devops/what-is-ci-cd\">CI/CD 是什么？如何理解持续集成、持续交付和持续部署</a> </p>\n<p><a href=\"https://www.yuque.com/docs/share/5a58e274-6b1e-4697-b36d-89d5a152f30e\">语雀分享</a></p>\n</blockquote>\n","site":{"data":{}},"length":482,"excerpt":"<h2 id=\"什么是-CI-CD\"><a href=\"#什么是-CI-CD\" class=\"headerlink\" title=\"什么是 CI/CD\"></a>什么是 CI/CD</h2><p>在软件工程中，CI / CD 或 CICD 通常是指持续集成以及持续交付或持续部署的组合实践（<a href=\"https://www.redhat.com/zh/topics/devops/what-is-ci-cd\">具体</a>）。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-28/1609146550365-image.png\"></p>","more":"<h2 id=\"部署方式的区别\"><a href=\"#部署方式的区别\" class=\"headerlink\" title=\"部署方式的区别\"></a>部署方式的区别</h2><h3 id=\"传统部署\"><a href=\"#传统部署\" class=\"headerlink\" title=\"传统部署\"></a>传统部署</h3><p>传统部署方式<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175617.png\"></p>\n<p>缺点：<strong>人工操作，部署速度慢，易出错，版本管理机制差</strong></p>\n<h3 id=\"CI-CD\"><a href=\"#CI-CD\" class=\"headerlink\" title=\"CI/CD\"></a>CI/CD</h3><p>CI/CD 的根本原则就是实现自动化构建部署，解决人工构建部署带来的<strong>效率低，出错率高</strong>等问题。下面是 CI/CD 的总体流程：</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923175633.png\"></p>\n<p>可以看到一套完整的流程：<strong>代码编写-提交 Git-触发代码扫描-触发 Jenkins-构建镜像到 Hub-服务器拉取镜像部署</strong></p>\n<p>优点：<strong>流程规范、不易出错、效率高</strong></p>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><p>CI持续集成，伴随的是我们的代码产物每次提交，可能会经过一系列流程才会进入发布阶段，在这些流程中有单元测试，规则校验等可以配置的流程单元，我们把这些单元设置为每次代码产物提交都要经过的任务，保持一定频率的触发，这个整体就是CI。</p>\n<p>CD持续部署或者持续交付，我们每次的代码产物为的目的就是新的产品更新迭代，而某些分支的提交、合并等操作应该触发新的产品的输出，整个产品随着代码产物在流水线的运行而不断更新，持续迭代，这就是CD。</p>\n<h2 id=\"参考资料\"><a href=\"#参考资料\" class=\"headerlink\" title=\"参考资料\"></a>参考资料</h2><blockquote>\n<p><a href=\"https://www.redhat.com/zh/topics/devops/what-is-ci-cd\">CI/CD 是什么？如何理解持续集成、持续交付和持续部署</a> </p>\n<p><a href=\"https://www.yuque.com/docs/share/5a58e274-6b1e-4697-b36d-89d5a152f30e\">语雀分享</a></p>\n</blockquote>"},{"title":"CICD实战之Nginx搭建","abbrlink":"342a6d66","translate_title":"cicd-actual-combat-nginx-construction","date":"2020-07-29T02:50:34.000Z","_content":"\n## 目的\n\n学习 Nginx 的搭建\n\n## 搭建步骤\n\n这次的 Nginx 我们在一台新机器安装\n\n### 安装 docker\n\n[地址](https://kitety.github.io/posts/bc65362f.html#docker-%E4%BB%8B%E7%BB%8D)\n\n#### 配置阿里源\n\n不配置的话速度很慢[地址](https://kitety.github.io/posts/bc65362f.html#%E9%85%8D%E7%BD%AE%E9%98%BF%E9%87%8C%E4%BA%91%E6%BA%90)\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200001.png)\n\n<!-- more -->\n\n### 拉取镜像\n\n```bash\ndocker pull nginx\n```\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200014.png)\n\n### 安装\n\n```bash\nmkdir /home/nginx\ndocker run -itd -p 80:80 --name nginx-test \\\n  -v /home/nginx/html:/usr/share/nginx/html \\\n  -v /home/nginx/logs:/var/log/nginx \\\n  --restart always \\\n  nginx\n```\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200028.png)\n\n简单修改一下\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200037.png)\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200045.png)\n\n## 结语\n\n至此，我们已经完整搭建了 Nginx 环境，下一步我们将联合 Gitlab 和 Jenkins 一起构建，一起期待吧。撒花！\n","source":"_posts/cicd4.md","raw":"---\ntitle: CICD实战之Nginx搭建\nabbrlink: 342a6d66\ntags:\n  - CICD\ntranslate_title: cicd-actual-combat-nginx-construction\ndate: 2020-07-29 10:50:34\n---\n\n## 目的\n\n学习 Nginx 的搭建\n\n## 搭建步骤\n\n这次的 Nginx 我们在一台新机器安装\n\n### 安装 docker\n\n[地址](https://kitety.github.io/posts/bc65362f.html#docker-%E4%BB%8B%E7%BB%8D)\n\n#### 配置阿里源\n\n不配置的话速度很慢[地址](https://kitety.github.io/posts/bc65362f.html#%E9%85%8D%E7%BD%AE%E9%98%BF%E9%87%8C%E4%BA%91%E6%BA%90)\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200001.png)\n\n<!-- more -->\n\n### 拉取镜像\n\n```bash\ndocker pull nginx\n```\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200014.png)\n\n### 安装\n\n```bash\nmkdir /home/nginx\ndocker run -itd -p 80:80 --name nginx-test \\\n  -v /home/nginx/html:/usr/share/nginx/html \\\n  -v /home/nginx/logs:/var/log/nginx \\\n  --restart always \\\n  nginx\n```\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200028.png)\n\n简单修改一下\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200037.png)\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200045.png)\n\n## 结语\n\n至此，我们已经完整搭建了 Nginx 环境，下一步我们将联合 Gitlab 和 Jenkins 一起构建，一起期待吧。撒花！\n","slug":"cicd4","published":1,"updated":"2021-09-29T07:53:51.818Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy6az0010p4vlen6u2rok","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"目的\"><a href=\"#目的\" class=\"headerlink\" title=\"目的\"></a>目的</h2><p>学习 Nginx 的搭建</p>\n<h2 id=\"搭建步骤\"><a href=\"#搭建步骤\" class=\"headerlink\" title=\"搭建步骤\"></a>搭建步骤</h2><p>这次的 Nginx 我们在一台新机器安装</p>\n<h3 id=\"安装-docker\"><a href=\"#安装-docker\" class=\"headerlink\" title=\"安装 docker\"></a>安装 docker</h3><p><a href=\"https://kitety.github.io/posts/bc65362f.html#docker-%E4%BB%8B%E7%BB%8D\">地址</a></p>\n<h4 id=\"配置阿里源\"><a href=\"#配置阿里源\" class=\"headerlink\" title=\"配置阿里源\"></a>配置阿里源</h4><p>不配置的话速度很慢<a href=\"https://kitety.github.io/posts/bc65362f.html#%E9%85%8D%E7%BD%AE%E9%98%BF%E9%87%8C%E4%BA%91%E6%BA%90\">地址</a></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200001.png\"></p>\n<span id=\"more\"></span>\n\n<h3 id=\"拉取镜像\"><a href=\"#拉取镜像\" class=\"headerlink\" title=\"拉取镜像\"></a>拉取镜像</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull nginx</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200014.png\"></p>\n<h3 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">mkdir</span> /home/nginx</span><br><span class=\"line\">docker run -itd -p 80:80 --name nginx-test \\</span><br><span class=\"line\">  -v /home/nginx/html:/usr/share/nginx/html \\</span><br><span class=\"line\">  -v /home/nginx/logs:/var/log/nginx \\</span><br><span class=\"line\">  --restart always \\</span><br><span class=\"line\">  nginx</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200028.png\"></p>\n<p>简单修改一下<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200037.png\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200045.png\"></p>\n<h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p>至此，我们已经完整搭建了 Nginx 环境，下一步我们将联合 Gitlab 和 Jenkins 一起构建，一起期待吧。撒花！</p>\n","site":{"data":{}},"length":301,"excerpt":"<h2 id=\"目的\"><a href=\"#目的\" class=\"headerlink\" title=\"目的\"></a>目的</h2><p>学习 Nginx 的搭建</p>\n<h2 id=\"搭建步骤\"><a href=\"#搭建步骤\" class=\"headerlink\" title=\"搭建步骤\"></a>搭建步骤</h2><p>这次的 Nginx 我们在一台新机器安装</p>\n<h3 id=\"安装-docker\"><a href=\"#安装-docker\" class=\"headerlink\" title=\"安装 docker\"></a>安装 docker</h3><p><a href=\"https://kitety.github.io/posts/bc65362f.html#docker-%E4%BB%8B%E7%BB%8D\">地址</a></p>\n<h4 id=\"配置阿里源\"><a href=\"#配置阿里源\" class=\"headerlink\" title=\"配置阿里源\"></a>配置阿里源</h4><p>不配置的话速度很慢<a href=\"https://kitety.github.io/posts/bc65362f.html#%E9%85%8D%E7%BD%AE%E9%98%BF%E9%87%8C%E4%BA%91%E6%BA%90\">地址</a></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200001.png\"></p>","more":"<h3 id=\"拉取镜像\"><a href=\"#拉取镜像\" class=\"headerlink\" title=\"拉取镜像\"></a>拉取镜像</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull nginx</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200014.png\"></p>\n<h3 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">mkdir</span> /home/nginx</span><br><span class=\"line\">docker run -itd -p 80:80 --name nginx-test \\</span><br><span class=\"line\">  -v /home/nginx/html:/usr/share/nginx/html \\</span><br><span class=\"line\">  -v /home/nginx/logs:/var/log/nginx \\</span><br><span class=\"line\">  --restart always \\</span><br><span class=\"line\">  nginx</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200028.png\"></p>\n<p>简单修改一下<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200037.png\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200045.png\"></p>\n<h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p>至此，我们已经完整搭建了 Nginx 环境，下一步我们将联合 Gitlab 和 Jenkins 一起构建，一起期待吧。撒花！</p>"},{"title":"CICD实战之Jenkins Gitlab 实现前端构建","abbrlink":"d26a2f6b","translate_title":"cicd-actual-combat-jenkins-gitlab-to-achieve-frontend-construction","date":"2020-08-01T08:20:01.000Z","_content":"\n## 目的\n\nJenkins + Gitlab 实现前端构建\n\n## 正式开始\n\n### Jenkins 安装 NodeJS\n\n因为在 Jenkins 构建的时候我们需要去执行一些 shell，需要用到 NodeJS，因此我们先安装 NodeJS。\n\n在这里我们采用插件方式安装。\n\n#### 在 Jenkins 插件管理中心搜索 NodeJS\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930571244-image.png)\n\n<!-- more -->\n\n我这里已经安装了\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930582615-image.png)\n\n没有安装的话应给在可选插件的 Tab,勾选之后选择直接安装即可。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930592193-image.png)\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930598660-image.png)\n\n#### 全局配置\n\n在系统设置--系统工具设置可以为全局配置 NodeJS。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930606080-image.png)\n\n选择好对应的版本之后保存即可。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930617174-image.png)\n\n#### 使用\n\n我们只需要在任务的“配置”中，找到“构建环境”，选中 “Provide Node & npm bin/ folder to PATH” ，选择刚才配置好的 NodeJS 即可。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930630463-image.png)\n\n第一次执行会下载对应的 Node 版本，后续不会下载。\n\n### 开始集成\n\n因为集成构建的时候我们需要 Jenkins 去 Gitlab 拉去代码，因此我们需要用 ssh 的方式去鉴权。\n\n#### 生成公钥私钥\n\nJenkins 拉取，因此要在 Jenkins 上生成，并且将公钥传输到 Gitlab，这样就可以实现鉴权的作用。\n\n```bash\ndocker exec -it jenkins /bin/bash\nssh-keygen -t rsa\n```\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930645747-image.png)\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930652308-image.png)\n\n#### Gitlab 配公钥\n\n将公钥存入即可\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930663266-image.png)\n\n#### Jenkins 配私钥\n\n在系统管理，管理凭证。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930669759-image.png)\n\n在全局添加凭证\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930675896-image.png)\n\n类型为 “SSH Username with private key.”，ID 为此凭据在 Jenkins 的标识符，UserName 为你的 Gitlab 用户名，PrivateKey 为你的服务器私钥。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930684117-image.png)\n\n**配置完之后最好还是重启一下 jenkins 和 gitlab**\n\n至此，Jenkins 配置完毕。\n\n### 小试牛刀，构建一下\n\n#### 新建任务\n\n选择：构建一个自由风格的软件项目，我这里用的 ssh-way\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930692858-image.png)\n\n#### 配置任务\n\n我这里是临时用的一个 Vue-Cli 搭建的项目演示。\n\n进入任务配置，在任源码管理这里选择 Git\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930700725-image.png)\n\n注意\n\n> 仓库地址为 gitlat 的 ssh 方式\n> ![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930709305-image.png)\n\n> 直接复制的地址有两个端口号，要改为 ssh 的 333 端口。[端口为 333 是在之前配置的这个端口号。](https://kitety.github.io/posts/aa4ef8c5.html#%E4%BF%AE%E6%94%B9SSH%E7%AB%AF%E5%8F%A3)\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930718459-image.png)\n\n选择对应的 NodeJS 版本\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930729006-image.png)\n\n构建选择--执行 Shell\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930737265-image.png)\n\n填写基本的 shell\n\n```bash\nnode -v\nnpm -v\nnpm install -g cnpm --registry=https://registry.npm.taobao.org\ncnpm install\nnpm run build\n```\n\n保存再立即构建一波。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930745105-image.png)\n\n看到 Finished: SUCCESS，完美。\n\n### 同步到 Nginx 环境\n\n当我们构建成功之后，我们只需要把 Jenkins 的 dist 目录下面的资源全部拷贝到服务器 Nginx 上面就可以实现更新了。而且没有不会变更配置文件，也不用重启 Nginx。\n\n#### 创建文件夹\n\n为了避免我们后续找不到文件夹，我们就先创建秘钥顺便创建文件夹。\n\n```bash\n// nginx机器\nssh-keygen -t rsa\n```\n\n#### 配置鉴权文件\n\n因为我们已经在 Jenkins 生成过私钥公钥了，我们只需要将这边的文件复制到 Nginx 的`/root/.ssh/authorized_keys`就好了。\n\n```bash\nscp -p /root/.ssh/id_rsa.pub root@192.168.182.4:/root/.ssh/authorized_keys\n```\n\n第一次需要输入密码，后续都不需要了。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930763078-image.png)\n\n#### 发布到 Nginx\n\n原理很简单，将 build 生成的 dist 的全部文件全部都拷贝到 nginx 的 html 的目录下。（Nginx 资源路径具体要看配置）\n\n在之前的 shell 命令中加入以下命令。\n\n```bash\nscp -o \"StrictHostKeyChecking no\" -r dist/* root@192.168.182.4:/home/nginx/html\n```\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930771190-image.png)\n\n#### 修改测试\n\n修改了，提交了，我们构建一下。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930781689-image.png)\n\n构建成功\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930787947-image.png)\n\n完美\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930793990-image.png)\n\n## 结语\n\n至此，我们已经完整搭建了 Jenkins + Gitlab 实现前端构建，搭了这么久的环境终于开始实战了。撒花！\n","source":"_posts/cicd5.md","raw":"---\ntitle: CICD实战之Jenkins Gitlab 实现前端构建\ntags:\n  - CICD\nabbrlink: d26a2f6b\ntranslate_title: cicd-actual-combat-jenkins-gitlab-to-achieve-frontend-construction\ndate: 2020-08-01 16:20:01\n---\n\n## 目的\n\nJenkins + Gitlab 实现前端构建\n\n## 正式开始\n\n### Jenkins 安装 NodeJS\n\n因为在 Jenkins 构建的时候我们需要去执行一些 shell，需要用到 NodeJS，因此我们先安装 NodeJS。\n\n在这里我们采用插件方式安装。\n\n#### 在 Jenkins 插件管理中心搜索 NodeJS\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930571244-image.png)\n\n<!-- more -->\n\n我这里已经安装了\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930582615-image.png)\n\n没有安装的话应给在可选插件的 Tab,勾选之后选择直接安装即可。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930592193-image.png)\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930598660-image.png)\n\n#### 全局配置\n\n在系统设置--系统工具设置可以为全局配置 NodeJS。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930606080-image.png)\n\n选择好对应的版本之后保存即可。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930617174-image.png)\n\n#### 使用\n\n我们只需要在任务的“配置”中，找到“构建环境”，选中 “Provide Node & npm bin/ folder to PATH” ，选择刚才配置好的 NodeJS 即可。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930630463-image.png)\n\n第一次执行会下载对应的 Node 版本，后续不会下载。\n\n### 开始集成\n\n因为集成构建的时候我们需要 Jenkins 去 Gitlab 拉去代码，因此我们需要用 ssh 的方式去鉴权。\n\n#### 生成公钥私钥\n\nJenkins 拉取，因此要在 Jenkins 上生成，并且将公钥传输到 Gitlab，这样就可以实现鉴权的作用。\n\n```bash\ndocker exec -it jenkins /bin/bash\nssh-keygen -t rsa\n```\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930645747-image.png)\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930652308-image.png)\n\n#### Gitlab 配公钥\n\n将公钥存入即可\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930663266-image.png)\n\n#### Jenkins 配私钥\n\n在系统管理，管理凭证。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930669759-image.png)\n\n在全局添加凭证\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930675896-image.png)\n\n类型为 “SSH Username with private key.”，ID 为此凭据在 Jenkins 的标识符，UserName 为你的 Gitlab 用户名，PrivateKey 为你的服务器私钥。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930684117-image.png)\n\n**配置完之后最好还是重启一下 jenkins 和 gitlab**\n\n至此，Jenkins 配置完毕。\n\n### 小试牛刀，构建一下\n\n#### 新建任务\n\n选择：构建一个自由风格的软件项目，我这里用的 ssh-way\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930692858-image.png)\n\n#### 配置任务\n\n我这里是临时用的一个 Vue-Cli 搭建的项目演示。\n\n进入任务配置，在任源码管理这里选择 Git\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930700725-image.png)\n\n注意\n\n> 仓库地址为 gitlat 的 ssh 方式\n> ![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930709305-image.png)\n\n> 直接复制的地址有两个端口号，要改为 ssh 的 333 端口。[端口为 333 是在之前配置的这个端口号。](https://kitety.github.io/posts/aa4ef8c5.html#%E4%BF%AE%E6%94%B9SSH%E7%AB%AF%E5%8F%A3)\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930718459-image.png)\n\n选择对应的 NodeJS 版本\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930729006-image.png)\n\n构建选择--执行 Shell\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930737265-image.png)\n\n填写基本的 shell\n\n```bash\nnode -v\nnpm -v\nnpm install -g cnpm --registry=https://registry.npm.taobao.org\ncnpm install\nnpm run build\n```\n\n保存再立即构建一波。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930745105-image.png)\n\n看到 Finished: SUCCESS，完美。\n\n### 同步到 Nginx 环境\n\n当我们构建成功之后，我们只需要把 Jenkins 的 dist 目录下面的资源全部拷贝到服务器 Nginx 上面就可以实现更新了。而且没有不会变更配置文件，也不用重启 Nginx。\n\n#### 创建文件夹\n\n为了避免我们后续找不到文件夹，我们就先创建秘钥顺便创建文件夹。\n\n```bash\n// nginx机器\nssh-keygen -t rsa\n```\n\n#### 配置鉴权文件\n\n因为我们已经在 Jenkins 生成过私钥公钥了，我们只需要将这边的文件复制到 Nginx 的`/root/.ssh/authorized_keys`就好了。\n\n```bash\nscp -p /root/.ssh/id_rsa.pub root@192.168.182.4:/root/.ssh/authorized_keys\n```\n\n第一次需要输入密码，后续都不需要了。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930763078-image.png)\n\n#### 发布到 Nginx\n\n原理很简单，将 build 生成的 dist 的全部文件全部都拷贝到 nginx 的 html 的目录下。（Nginx 资源路径具体要看配置）\n\n在之前的 shell 命令中加入以下命令。\n\n```bash\nscp -o \"StrictHostKeyChecking no\" -r dist/* root@192.168.182.4:/home/nginx/html\n```\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930771190-image.png)\n\n#### 修改测试\n\n修改了，提交了，我们构建一下。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930781689-image.png)\n\n构建成功\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930787947-image.png)\n\n完美\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930793990-image.png)\n\n## 结语\n\n至此，我们已经完整搭建了 Jenkins + Gitlab 实现前端构建，搭了这么久的环境终于开始实战了。撒花！\n","slug":"cicd5","published":1,"updated":"2021-09-29T07:53:51.818Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy6b40013p4vle544fi3n","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"目的\"><a href=\"#目的\" class=\"headerlink\" title=\"目的\"></a>目的</h2><p>Jenkins + Gitlab 实现前端构建</p>\n<h2 id=\"正式开始\"><a href=\"#正式开始\" class=\"headerlink\" title=\"正式开始\"></a>正式开始</h2><h3 id=\"Jenkins-安装-NodeJS\"><a href=\"#Jenkins-安装-NodeJS\" class=\"headerlink\" title=\"Jenkins 安装 NodeJS\"></a>Jenkins 安装 NodeJS</h3><p>因为在 Jenkins 构建的时候我们需要去执行一些 shell，需要用到 NodeJS，因此我们先安装 NodeJS。</p>\n<p>在这里我们采用插件方式安装。</p>\n<h4 id=\"在-Jenkins-插件管理中心搜索-NodeJS\"><a href=\"#在-Jenkins-插件管理中心搜索-NodeJS\" class=\"headerlink\" title=\"在 Jenkins 插件管理中心搜索 NodeJS\"></a>在 Jenkins 插件管理中心搜索 NodeJS</h4><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930571244-image.png\" alt=\"image\"></p>\n<span id=\"more\"></span>\n\n<p>我这里已经安装了</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930582615-image.png\" alt=\"image\"></p>\n<p>没有安装的话应给在可选插件的 Tab,勾选之后选择直接安装即可。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930592193-image.png\" alt=\"image\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930598660-image.png\" alt=\"image\"></p>\n<h4 id=\"全局配置\"><a href=\"#全局配置\" class=\"headerlink\" title=\"全局配置\"></a>全局配置</h4><p>在系统设置–系统工具设置可以为全局配置 NodeJS。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930606080-image.png\" alt=\"image\"></p>\n<p>选择好对应的版本之后保存即可。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930617174-image.png\" alt=\"image\"></p>\n<h4 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h4><p>我们只需要在任务的“配置”中，找到“构建环境”，选中 “Provide Node &amp; npm bin/ folder to PATH” ，选择刚才配置好的 NodeJS 即可。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930630463-image.png\" alt=\"image\"></p>\n<p>第一次执行会下载对应的 Node 版本，后续不会下载。</p>\n<h3 id=\"开始集成\"><a href=\"#开始集成\" class=\"headerlink\" title=\"开始集成\"></a>开始集成</h3><p>因为集成构建的时候我们需要 Jenkins 去 Gitlab 拉去代码，因此我们需要用 ssh 的方式去鉴权。</p>\n<h4 id=\"生成公钥私钥\"><a href=\"#生成公钥私钥\" class=\"headerlink\" title=\"生成公钥私钥\"></a>生成公钥私钥</h4><p>Jenkins 拉取，因此要在 Jenkins 上生成，并且将公钥传输到 Gitlab，这样就可以实现鉴权的作用。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker <span class=\"built_in\">exec</span> -it jenkins /bin/bash</span><br><span class=\"line\">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930645747-image.png\" alt=\"image\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930652308-image.png\" alt=\"image\"></p>\n<h4 id=\"Gitlab-配公钥\"><a href=\"#Gitlab-配公钥\" class=\"headerlink\" title=\"Gitlab 配公钥\"></a>Gitlab 配公钥</h4><p>将公钥存入即可</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930663266-image.png\" alt=\"image\"></p>\n<h4 id=\"Jenkins-配私钥\"><a href=\"#Jenkins-配私钥\" class=\"headerlink\" title=\"Jenkins 配私钥\"></a>Jenkins 配私钥</h4><p>在系统管理，管理凭证。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930669759-image.png\" alt=\"image\"></p>\n<p>在全局添加凭证</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930675896-image.png\" alt=\"image\"></p>\n<p>类型为 “SSH Username with private key.”，ID 为此凭据在 Jenkins 的标识符，UserName 为你的 Gitlab 用户名，PrivateKey 为你的服务器私钥。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930684117-image.png\" alt=\"image\"></p>\n<p><strong>配置完之后最好还是重启一下 jenkins 和 gitlab</strong></p>\n<p>至此，Jenkins 配置完毕。</p>\n<h3 id=\"小试牛刀，构建一下\"><a href=\"#小试牛刀，构建一下\" class=\"headerlink\" title=\"小试牛刀，构建一下\"></a>小试牛刀，构建一下</h3><h4 id=\"新建任务\"><a href=\"#新建任务\" class=\"headerlink\" title=\"新建任务\"></a>新建任务</h4><p>选择：构建一个自由风格的软件项目，我这里用的 ssh-way</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930692858-image.png\" alt=\"image\"></p>\n<h4 id=\"配置任务\"><a href=\"#配置任务\" class=\"headerlink\" title=\"配置任务\"></a>配置任务</h4><p>我这里是临时用的一个 Vue-Cli 搭建的项目演示。</p>\n<p>进入任务配置，在任源码管理这里选择 Git</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930700725-image.png\" alt=\"image\"></p>\n<p>注意</p>\n<blockquote>\n<p>仓库地址为 gitlat 的 ssh 方式<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930709305-image.png\" alt=\"image\"></p>\n</blockquote>\n<blockquote>\n<p>直接复制的地址有两个端口号，要改为 ssh 的 333 端口。<a href=\"https://kitety.github.io/posts/aa4ef8c5.html#%E4%BF%AE%E6%94%B9SSH%E7%AB%AF%E5%8F%A3\">端口为 333 是在之前配置的这个端口号。</a></p>\n</blockquote>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930718459-image.png\" alt=\"image\"></p>\n<p>选择对应的 NodeJS 版本</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930729006-image.png\" alt=\"image\"></p>\n<p>构建选择–执行 Shell</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930737265-image.png\" alt=\"image\"></p>\n<p>填写基本的 shell</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">node -v</span><br><span class=\"line\">npm -v</span><br><span class=\"line\">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br><span class=\"line\">cnpm install</span><br><span class=\"line\">npm run build</span><br></pre></td></tr></table></figure>\n\n<p>保存再立即构建一波。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930745105-image.png\" alt=\"image\"></p>\n<p>看到 Finished: SUCCESS，完美。</p>\n<h3 id=\"同步到-Nginx-环境\"><a href=\"#同步到-Nginx-环境\" class=\"headerlink\" title=\"同步到 Nginx 环境\"></a>同步到 Nginx 环境</h3><p>当我们构建成功之后，我们只需要把 Jenkins 的 dist 目录下面的资源全部拷贝到服务器 Nginx 上面就可以实现更新了。而且没有不会变更配置文件，也不用重启 Nginx。</p>\n<h4 id=\"创建文件夹\"><a href=\"#创建文件夹\" class=\"headerlink\" title=\"创建文件夹\"></a>创建文件夹</h4><p>为了避免我们后续找不到文件夹，我们就先创建秘钥顺便创建文件夹。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// nginx机器</span><br><span class=\"line\">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"配置鉴权文件\"><a href=\"#配置鉴权文件\" class=\"headerlink\" title=\"配置鉴权文件\"></a>配置鉴权文件</h4><p>因为我们已经在 Jenkins 生成过私钥公钥了，我们只需要将这边的文件复制到 Nginx 的<code>/root/.ssh/authorized_keys</code>就好了。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scp -p /root/.ssh/id_rsa.pub root@192.168.182.4:/root/.ssh/authorized_keys</span><br></pre></td></tr></table></figure>\n\n<p>第一次需要输入密码，后续都不需要了。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930763078-image.png\" alt=\"image\"></p>\n<h4 id=\"发布到-Nginx\"><a href=\"#发布到-Nginx\" class=\"headerlink\" title=\"发布到 Nginx\"></a>发布到 Nginx</h4><p>原理很简单，将 build 生成的 dist 的全部文件全部都拷贝到 nginx 的 html 的目录下。（Nginx 资源路径具体要看配置）</p>\n<p>在之前的 shell 命令中加入以下命令。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scp -o <span class=\"string\">&quot;StrictHostKeyChecking no&quot;</span> -r dist/* root@192.168.182.4:/home/nginx/html</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930771190-image.png\" alt=\"image\"></p>\n<h4 id=\"修改测试\"><a href=\"#修改测试\" class=\"headerlink\" title=\"修改测试\"></a>修改测试</h4><p>修改了，提交了，我们构建一下。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930781689-image.png\" alt=\"image\"></p>\n<p>构建成功</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930787947-image.png\" alt=\"image\"></p>\n<p>完美</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930793990-image.png\" alt=\"image\"></p>\n<h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p>至此，我们已经完整搭建了 Jenkins + Gitlab 实现前端构建，搭了这么久的环境终于开始实战了。撒花！</p>\n","site":{"data":{}},"length":1554,"excerpt":"<h2 id=\"目的\"><a href=\"#目的\" class=\"headerlink\" title=\"目的\"></a>目的</h2><p>Jenkins + Gitlab 实现前端构建</p>\n<h2 id=\"正式开始\"><a href=\"#正式开始\" class=\"headerlink\" title=\"正式开始\"></a>正式开始</h2><h3 id=\"Jenkins-安装-NodeJS\"><a href=\"#Jenkins-安装-NodeJS\" class=\"headerlink\" title=\"Jenkins 安装 NodeJS\"></a>Jenkins 安装 NodeJS</h3><p>因为在 Jenkins 构建的时候我们需要去执行一些 shell，需要用到 NodeJS，因此我们先安装 NodeJS。</p>\n<p>在这里我们采用插件方式安装。</p>\n<h4 id=\"在-Jenkins-插件管理中心搜索-NodeJS\"><a href=\"#在-Jenkins-插件管理中心搜索-NodeJS\" class=\"headerlink\" title=\"在 Jenkins 插件管理中心搜索 NodeJS\"></a>在 Jenkins 插件管理中心搜索 NodeJS</h4><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930571244-image.png\" alt=\"image\"></p>","more":"<p>我这里已经安装了</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930582615-image.png\" alt=\"image\"></p>\n<p>没有安装的话应给在可选插件的 Tab,勾选之后选择直接安装即可。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930592193-image.png\" alt=\"image\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930598660-image.png\" alt=\"image\"></p>\n<h4 id=\"全局配置\"><a href=\"#全局配置\" class=\"headerlink\" title=\"全局配置\"></a>全局配置</h4><p>在系统设置–系统工具设置可以为全局配置 NodeJS。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930606080-image.png\" alt=\"image\"></p>\n<p>选择好对应的版本之后保存即可。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930617174-image.png\" alt=\"image\"></p>\n<h4 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h4><p>我们只需要在任务的“配置”中，找到“构建环境”，选中 “Provide Node &amp; npm bin/ folder to PATH” ，选择刚才配置好的 NodeJS 即可。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930630463-image.png\" alt=\"image\"></p>\n<p>第一次执行会下载对应的 Node 版本，后续不会下载。</p>\n<h3 id=\"开始集成\"><a href=\"#开始集成\" class=\"headerlink\" title=\"开始集成\"></a>开始集成</h3><p>因为集成构建的时候我们需要 Jenkins 去 Gitlab 拉去代码，因此我们需要用 ssh 的方式去鉴权。</p>\n<h4 id=\"生成公钥私钥\"><a href=\"#生成公钥私钥\" class=\"headerlink\" title=\"生成公钥私钥\"></a>生成公钥私钥</h4><p>Jenkins 拉取，因此要在 Jenkins 上生成，并且将公钥传输到 Gitlab，这样就可以实现鉴权的作用。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker <span class=\"built_in\">exec</span> -it jenkins /bin/bash</span><br><span class=\"line\">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930645747-image.png\" alt=\"image\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930652308-image.png\" alt=\"image\"></p>\n<h4 id=\"Gitlab-配公钥\"><a href=\"#Gitlab-配公钥\" class=\"headerlink\" title=\"Gitlab 配公钥\"></a>Gitlab 配公钥</h4><p>将公钥存入即可</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930663266-image.png\" alt=\"image\"></p>\n<h4 id=\"Jenkins-配私钥\"><a href=\"#Jenkins-配私钥\" class=\"headerlink\" title=\"Jenkins 配私钥\"></a>Jenkins 配私钥</h4><p>在系统管理，管理凭证。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930669759-image.png\" alt=\"image\"></p>\n<p>在全局添加凭证</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930675896-image.png\" alt=\"image\"></p>\n<p>类型为 “SSH Username with private key.”，ID 为此凭据在 Jenkins 的标识符，UserName 为你的 Gitlab 用户名，PrivateKey 为你的服务器私钥。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930684117-image.png\" alt=\"image\"></p>\n<p><strong>配置完之后最好还是重启一下 jenkins 和 gitlab</strong></p>\n<p>至此，Jenkins 配置完毕。</p>\n<h3 id=\"小试牛刀，构建一下\"><a href=\"#小试牛刀，构建一下\" class=\"headerlink\" title=\"小试牛刀，构建一下\"></a>小试牛刀，构建一下</h3><h4 id=\"新建任务\"><a href=\"#新建任务\" class=\"headerlink\" title=\"新建任务\"></a>新建任务</h4><p>选择：构建一个自由风格的软件项目，我这里用的 ssh-way</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930692858-image.png\" alt=\"image\"></p>\n<h4 id=\"配置任务\"><a href=\"#配置任务\" class=\"headerlink\" title=\"配置任务\"></a>配置任务</h4><p>我这里是临时用的一个 Vue-Cli 搭建的项目演示。</p>\n<p>进入任务配置，在任源码管理这里选择 Git</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930700725-image.png\" alt=\"image\"></p>\n<p>注意</p>\n<blockquote>\n<p>仓库地址为 gitlat 的 ssh 方式<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930709305-image.png\" alt=\"image\"></p>\n</blockquote>\n<blockquote>\n<p>直接复制的地址有两个端口号，要改为 ssh 的 333 端口。<a href=\"https://kitety.github.io/posts/aa4ef8c5.html#%E4%BF%AE%E6%94%B9SSH%E7%AB%AF%E5%8F%A3\">端口为 333 是在之前配置的这个端口号。</a></p>\n</blockquote>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930718459-image.png\" alt=\"image\"></p>\n<p>选择对应的 NodeJS 版本</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930729006-image.png\" alt=\"image\"></p>\n<p>构建选择–执行 Shell</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930737265-image.png\" alt=\"image\"></p>\n<p>填写基本的 shell</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">node -v</span><br><span class=\"line\">npm -v</span><br><span class=\"line\">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br><span class=\"line\">cnpm install</span><br><span class=\"line\">npm run build</span><br></pre></td></tr></table></figure>\n\n<p>保存再立即构建一波。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930745105-image.png\" alt=\"image\"></p>\n<p>看到 Finished: SUCCESS，完美。</p>\n<h3 id=\"同步到-Nginx-环境\"><a href=\"#同步到-Nginx-环境\" class=\"headerlink\" title=\"同步到 Nginx 环境\"></a>同步到 Nginx 环境</h3><p>当我们构建成功之后，我们只需要把 Jenkins 的 dist 目录下面的资源全部拷贝到服务器 Nginx 上面就可以实现更新了。而且没有不会变更配置文件，也不用重启 Nginx。</p>\n<h4 id=\"创建文件夹\"><a href=\"#创建文件夹\" class=\"headerlink\" title=\"创建文件夹\"></a>创建文件夹</h4><p>为了避免我们后续找不到文件夹，我们就先创建秘钥顺便创建文件夹。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// nginx机器</span><br><span class=\"line\">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"配置鉴权文件\"><a href=\"#配置鉴权文件\" class=\"headerlink\" title=\"配置鉴权文件\"></a>配置鉴权文件</h4><p>因为我们已经在 Jenkins 生成过私钥公钥了，我们只需要将这边的文件复制到 Nginx 的<code>/root/.ssh/authorized_keys</code>就好了。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scp -p /root/.ssh/id_rsa.pub root@192.168.182.4:/root/.ssh/authorized_keys</span><br></pre></td></tr></table></figure>\n\n<p>第一次需要输入密码，后续都不需要了。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930763078-image.png\" alt=\"image\"></p>\n<h4 id=\"发布到-Nginx\"><a href=\"#发布到-Nginx\" class=\"headerlink\" title=\"发布到 Nginx\"></a>发布到 Nginx</h4><p>原理很简单，将 build 生成的 dist 的全部文件全部都拷贝到 nginx 的 html 的目录下。（Nginx 资源路径具体要看配置）</p>\n<p>在之前的 shell 命令中加入以下命令。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scp -o <span class=\"string\">&quot;StrictHostKeyChecking no&quot;</span> -r dist/* root@192.168.182.4:/home/nginx/html</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930771190-image.png\" alt=\"image\"></p>\n<h4 id=\"修改测试\"><a href=\"#修改测试\" class=\"headerlink\" title=\"修改测试\"></a>修改测试</h4><p>修改了，提交了，我们构建一下。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930781689-image.png\" alt=\"image\"></p>\n<p>构建成功</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930787947-image.png\" alt=\"image\"></p>\n<p>完美</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930793990-image.png\" alt=\"image\"></p>\n<h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p>至此，我们已经完整搭建了 Jenkins + Gitlab 实现前端构建，搭了这么久的环境终于开始实战了。撒花！</p>"},{"title":"CICD实战之Nexus制品库的介绍与安装","abbrlink":"da240c4a","translate_title":"introduction-and-installation-of-nexus-product-library-cicd-actual-combat","date":"2020-08-08T15:25:46.000Z","_content":"\n## 目的\n\n学习 Nexus 制品库的介绍与安装\n\n## 介绍\n\n在前面我们写到，制品库是**承接 CI 构建后的产出制品的仓库**，具有版本管理，历史管理，权限校验等功能。\n\n在这里，我们选用 Nexus3 作为制品库。\n\n<!-- more -->\n\n## 正式开始\n\n### 拉取镜像\n\n```bash\ndocker pull sonatype/nexus3\n```\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931105737-image.png)\n\n### 启动容器\n\n新建一个名为 nexus 的文件夹，方便我们存放 Nexus 相关数据，并赋予权限。\n\n```bash\nmkdir /home/nexus && chown -R 200 /home/nexus\n```\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931112564-image.png)\n\n#### 创建容器\n\n```bash\ndocker run -d -p 8081:8081 -p 8082:8082 \\\n--name nexus \\\n-v /home/nexus:/nexus-data \\\n--restart always \\\nsonatype/nexus3\n```\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931118609-image.png)\n\n- Nexus 主服务端口，我们设置为 8081,；但是还需要新分配一个端口为服务端口，这里采用的是 8082\n\n#### 防火墙\n\n将对应端口添加到防火墙\n\n```bash\nfirewall-cmd --zone=public --add-port=8081/tcp --permanent\nfirewall-cmd --zone=public --add-port=8082/tcp --permanent\nsystemctl reload firewalld\n```\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931126380-image.png)\n\n### 访问 Nexus\n\n打开浏览器地址栏，访问 Nexus 的服务地址，这里是 ip:8001。启动时间比较长，可以使用`docker logs -f nexus`查看日志，如果显示以下文字**Started Sonatype Nexus OSS 3.25.1-04**就代表成功\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931136526-image.png)\n\n### 配置 Nexus\n\n我们访问`ip:8001`就可以看到界面了。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931149190-image.png)\n\n#### 登录\n\n我们可以使用`默认账号:admin`登录，默认的密码在`cat /home/nexus/admin.password`可以查看。\n\n注意不包含#号\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931157535-image.png)\n\n当我们初次进入之后会让我们设置一下初始密码，和登录的权限。\n\n#### 匿名访问性\n\n设置密码之后需要设置访问性,**我们在任何没有登录的情况下，拉取（推送）制品到制品库，都算匿名访问。**,在实际生产中是**不安全**的，我们测试可以开启。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931164943-image.png)\n\n#### 创建一个 Docker 私服\n\n点击设置，选择左侧菜单中的 Repositories ，点击 Create repository\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931174237-image.png)\n\n使用搜索 docker 可以快速定位\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931182519-image.png)\n\n**制品库的类型**\n\n- proxy: 此类型制品库原则上 “只下载，不允许用户推送”。可以理解为缓存外网制品的制品库。例如，我们在拉取 nginx 镜像时，如果通过 proxy 类型的制品库，则它会去创建时配置好的外网 docker 镜像源拉取（有点像 cnpm）到自己的制品库，然后给你。第二次拉取，则不会下载。起到 缓存 的作用。\n- hosted：此类型制品库和 proxy 相反，原则上 **只允许用户推送，不允许缓存 。**这是私有库的核心，只存放自己的私有镜像或制品。\n- group：此类型制品库用作以上两种类型的 **集合 **，将上面两个库集合为一个使用。\n\n这里我们采用 hosted 类型，点击创建会看到一些输入框，这里做简单的解释。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931190366-image.png)\n\n同时我们还要设置一下权限，在 Security-Realms 的 Docker Bearer Token Realm 选择到右边的激活状态。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931200624-image.png)\n\n### 小试牛刀-登录\n\n安装至此，我们在另一台机器上试一下。\n\n在这里，我的架构是两台虚拟机，一台是 gitlab 和 jenkins，一台是 nginx 和 Nexus。所以，我们就在 gitlab 的机器上尝试。\n\n#### 配置文件\n\n我们在 gitlab 配置文件，`vim /etc/docker/daemon.json`\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931210306-image.png)\n\n```bash\n\"insecure-registries\" : [\n    \"192.168.182.4:8082\"\n  ]\n\n```\n\n最后记得使用`systemctl restart docker`重启一下\n**注意这里是 json 格式，格式不能错**\n\n#### 登录\n\n登录一下。从图中可以看出。初次登录需要输入账号密码，后续登录就不需要了。\n\n```bash\ndocker login 服务IP:端口\n```\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931223439-image.png)\n\n### 小试牛刀-推送镜像到制品库\n\n我们可以使用 docker push 推送镜像到私服上面。\n\ndocker 在推送一个镜像时，镜像的 Tag (名称:版本号) 必须开头带着镜像库的地址，才可以推送。例如下面两个镜像：\n😡 local/jenkins 不能推送\n😃 **192.168.182.4:8082/local/jenkins** 可以推送。\n\n#### 制作镜像\n\n1.制作一份带镜像库地址的镜像：这个可以做，但是开销太大，需要走一遍制作流程\n\n2.使用 docker tag 命令给已有的镜像打个标签：推荐使用，会将已有的镜像归位某个镜像库内。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931234544-image.png)\n\n```bash\ndocker tag 28c624ccaacf    192.168.182.4:8082/local/jenkins\n```\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931242511-image.png)\n\n#### 推送\n\n```bash\ndocker push 192.168.182.4:8082/local/jenkins\n```\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931252036-image.png)\n\n在仓库可以看到上传的\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931260957-image.png)\n\n## 结语\n\n我们在这部分实现了 docker 私服的搭建和 push，接下来我们将构建代码并且推送到私服。敬请期待吧！\n","source":"_posts/cicd6.md","raw":"---\ntitle: CICD实战之Nexus制品库的介绍与安装\nabbrlink: da240c4a\ntags:\n  - CICD\ntranslate_title: introduction-and-installation-of-nexus-product-library-cicd-actual-combat\ndate: 2020-08-08 23:25:46\n---\n\n## 目的\n\n学习 Nexus 制品库的介绍与安装\n\n## 介绍\n\n在前面我们写到，制品库是**承接 CI 构建后的产出制品的仓库**，具有版本管理，历史管理，权限校验等功能。\n\n在这里，我们选用 Nexus3 作为制品库。\n\n<!-- more -->\n\n## 正式开始\n\n### 拉取镜像\n\n```bash\ndocker pull sonatype/nexus3\n```\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931105737-image.png)\n\n### 启动容器\n\n新建一个名为 nexus 的文件夹，方便我们存放 Nexus 相关数据，并赋予权限。\n\n```bash\nmkdir /home/nexus && chown -R 200 /home/nexus\n```\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931112564-image.png)\n\n#### 创建容器\n\n```bash\ndocker run -d -p 8081:8081 -p 8082:8082 \\\n--name nexus \\\n-v /home/nexus:/nexus-data \\\n--restart always \\\nsonatype/nexus3\n```\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931118609-image.png)\n\n- Nexus 主服务端口，我们设置为 8081,；但是还需要新分配一个端口为服务端口，这里采用的是 8082\n\n#### 防火墙\n\n将对应端口添加到防火墙\n\n```bash\nfirewall-cmd --zone=public --add-port=8081/tcp --permanent\nfirewall-cmd --zone=public --add-port=8082/tcp --permanent\nsystemctl reload firewalld\n```\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931126380-image.png)\n\n### 访问 Nexus\n\n打开浏览器地址栏，访问 Nexus 的服务地址，这里是 ip:8001。启动时间比较长，可以使用`docker logs -f nexus`查看日志，如果显示以下文字**Started Sonatype Nexus OSS 3.25.1-04**就代表成功\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931136526-image.png)\n\n### 配置 Nexus\n\n我们访问`ip:8001`就可以看到界面了。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931149190-image.png)\n\n#### 登录\n\n我们可以使用`默认账号:admin`登录，默认的密码在`cat /home/nexus/admin.password`可以查看。\n\n注意不包含#号\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931157535-image.png)\n\n当我们初次进入之后会让我们设置一下初始密码，和登录的权限。\n\n#### 匿名访问性\n\n设置密码之后需要设置访问性,**我们在任何没有登录的情况下，拉取（推送）制品到制品库，都算匿名访问。**,在实际生产中是**不安全**的，我们测试可以开启。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931164943-image.png)\n\n#### 创建一个 Docker 私服\n\n点击设置，选择左侧菜单中的 Repositories ，点击 Create repository\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931174237-image.png)\n\n使用搜索 docker 可以快速定位\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931182519-image.png)\n\n**制品库的类型**\n\n- proxy: 此类型制品库原则上 “只下载，不允许用户推送”。可以理解为缓存外网制品的制品库。例如，我们在拉取 nginx 镜像时，如果通过 proxy 类型的制品库，则它会去创建时配置好的外网 docker 镜像源拉取（有点像 cnpm）到自己的制品库，然后给你。第二次拉取，则不会下载。起到 缓存 的作用。\n- hosted：此类型制品库和 proxy 相反，原则上 **只允许用户推送，不允许缓存 。**这是私有库的核心，只存放自己的私有镜像或制品。\n- group：此类型制品库用作以上两种类型的 **集合 **，将上面两个库集合为一个使用。\n\n这里我们采用 hosted 类型，点击创建会看到一些输入框，这里做简单的解释。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931190366-image.png)\n\n同时我们还要设置一下权限，在 Security-Realms 的 Docker Bearer Token Realm 选择到右边的激活状态。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931200624-image.png)\n\n### 小试牛刀-登录\n\n安装至此，我们在另一台机器上试一下。\n\n在这里，我的架构是两台虚拟机，一台是 gitlab 和 jenkins，一台是 nginx 和 Nexus。所以，我们就在 gitlab 的机器上尝试。\n\n#### 配置文件\n\n我们在 gitlab 配置文件，`vim /etc/docker/daemon.json`\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931210306-image.png)\n\n```bash\n\"insecure-registries\" : [\n    \"192.168.182.4:8082\"\n  ]\n\n```\n\n最后记得使用`systemctl restart docker`重启一下\n**注意这里是 json 格式，格式不能错**\n\n#### 登录\n\n登录一下。从图中可以看出。初次登录需要输入账号密码，后续登录就不需要了。\n\n```bash\ndocker login 服务IP:端口\n```\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931223439-image.png)\n\n### 小试牛刀-推送镜像到制品库\n\n我们可以使用 docker push 推送镜像到私服上面。\n\ndocker 在推送一个镜像时，镜像的 Tag (名称:版本号) 必须开头带着镜像库的地址，才可以推送。例如下面两个镜像：\n😡 local/jenkins 不能推送\n😃 **192.168.182.4:8082/local/jenkins** 可以推送。\n\n#### 制作镜像\n\n1.制作一份带镜像库地址的镜像：这个可以做，但是开销太大，需要走一遍制作流程\n\n2.使用 docker tag 命令给已有的镜像打个标签：推荐使用，会将已有的镜像归位某个镜像库内。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931234544-image.png)\n\n```bash\ndocker tag 28c624ccaacf    192.168.182.4:8082/local/jenkins\n```\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931242511-image.png)\n\n#### 推送\n\n```bash\ndocker push 192.168.182.4:8082/local/jenkins\n```\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931252036-image.png)\n\n在仓库可以看到上传的\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931260957-image.png)\n\n## 结语\n\n我们在这部分实现了 docker 私服的搭建和 push，接下来我们将构建代码并且推送到私服。敬请期待吧！\n","slug":"cicd6","published":1,"updated":"2021-09-29T07:53:51.819Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy6b50014p4vlgfv353ni","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"目的\"><a href=\"#目的\" class=\"headerlink\" title=\"目的\"></a>目的</h2><p>学习 Nexus 制品库的介绍与安装</p>\n<h2 id=\"介绍\"><a href=\"#介绍\" class=\"headerlink\" title=\"介绍\"></a>介绍</h2><p>在前面我们写到，制品库是<strong>承接 CI 构建后的产出制品的仓库</strong>，具有版本管理，历史管理，权限校验等功能。</p>\n<p>在这里，我们选用 Nexus3 作为制品库。</p>\n<span id=\"more\"></span>\n\n<h2 id=\"正式开始\"><a href=\"#正式开始\" class=\"headerlink\" title=\"正式开始\"></a>正式开始</h2><h3 id=\"拉取镜像\"><a href=\"#拉取镜像\" class=\"headerlink\" title=\"拉取镜像\"></a>拉取镜像</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull sonatype/nexus3</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931105737-image.png\" alt=\"image\"></p>\n<h3 id=\"启动容器\"><a href=\"#启动容器\" class=\"headerlink\" title=\"启动容器\"></a>启动容器</h3><p>新建一个名为 nexus 的文件夹，方便我们存放 Nexus 相关数据，并赋予权限。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">mkdir</span> /home/nexus &amp;&amp; <span class=\"built_in\">chown</span> -R 200 /home/nexus</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931112564-image.png\" alt=\"image\"></p>\n<h4 id=\"创建容器\"><a href=\"#创建容器\" class=\"headerlink\" title=\"创建容器\"></a>创建容器</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -d -p 8081:8081 -p 8082:8082 \\</span><br><span class=\"line\">--name nexus \\</span><br><span class=\"line\">-v /home/nexus:/nexus-data \\</span><br><span class=\"line\">--restart always \\</span><br><span class=\"line\">sonatype/nexus3</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931118609-image.png\" alt=\"image\"></p>\n<ul>\n<li>Nexus 主服务端口，我们设置为 8081,；但是还需要新分配一个端口为服务端口，这里采用的是 8082</li>\n</ul>\n<h4 id=\"防火墙\"><a href=\"#防火墙\" class=\"headerlink\" title=\"防火墙\"></a>防火墙</h4><p>将对应端口添加到防火墙</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --zone=public --add-port=8081/tcp --permanent</span><br><span class=\"line\">firewall-cmd --zone=public --add-port=8082/tcp --permanent</span><br><span class=\"line\">systemctl reload firewalld</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931126380-image.png\" alt=\"image\"></p>\n<h3 id=\"访问-Nexus\"><a href=\"#访问-Nexus\" class=\"headerlink\" title=\"访问 Nexus\"></a>访问 Nexus</h3><p>打开浏览器地址栏，访问 Nexus 的服务地址，这里是 ip:8001。启动时间比较长，可以使用<code>docker logs -f nexus</code>查看日志，如果显示以下文字<strong>Started Sonatype Nexus OSS 3.25.1-04</strong>就代表成功</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931136526-image.png\" alt=\"image\"></p>\n<h3 id=\"配置-Nexus\"><a href=\"#配置-Nexus\" class=\"headerlink\" title=\"配置 Nexus\"></a>配置 Nexus</h3><p>我们访问<code>ip:8001</code>就可以看到界面了。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931149190-image.png\" alt=\"image\"></p>\n<h4 id=\"登录\"><a href=\"#登录\" class=\"headerlink\" title=\"登录\"></a>登录</h4><p>我们可以使用<code>默认账号:admin</code>登录，默认的密码在<code>cat /home/nexus/admin.password</code>可以查看。</p>\n<p>注意不包含#号</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931157535-image.png\" alt=\"image\"></p>\n<p>当我们初次进入之后会让我们设置一下初始密码，和登录的权限。</p>\n<h4 id=\"匿名访问性\"><a href=\"#匿名访问性\" class=\"headerlink\" title=\"匿名访问性\"></a>匿名访问性</h4><p>设置密码之后需要设置访问性,<strong>我们在任何没有登录的情况下，拉取（推送）制品到制品库，都算匿名访问。</strong>,在实际生产中是<strong>不安全</strong>的，我们测试可以开启。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931164943-image.png\" alt=\"image\"></p>\n<h4 id=\"创建一个-Docker-私服\"><a href=\"#创建一个-Docker-私服\" class=\"headerlink\" title=\"创建一个 Docker 私服\"></a>创建一个 Docker 私服</h4><p>点击设置，选择左侧菜单中的 Repositories ，点击 Create repository</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931174237-image.png\" alt=\"image\"></p>\n<p>使用搜索 docker 可以快速定位</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931182519-image.png\" alt=\"image\"></p>\n<p><strong>制品库的类型</strong></p>\n<ul>\n<li>proxy: 此类型制品库原则上 “只下载，不允许用户推送”。可以理解为缓存外网制品的制品库。例如，我们在拉取 nginx 镜像时，如果通过 proxy 类型的制品库，则它会去创建时配置好的外网 docker 镜像源拉取（有点像 cnpm）到自己的制品库，然后给你。第二次拉取，则不会下载。起到 缓存 的作用。</li>\n<li>hosted：此类型制品库和 proxy 相反，原则上 <strong>只允许用户推送，不允许缓存 。</strong>这是私有库的核心，只存放自己的私有镜像或制品。</li>\n<li>group：此类型制品库用作以上两种类型的 **集合 **，将上面两个库集合为一个使用。</li>\n</ul>\n<p>这里我们采用 hosted 类型，点击创建会看到一些输入框，这里做简单的解释。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931190366-image.png\" alt=\"image\"></p>\n<p>同时我们还要设置一下权限，在 Security-Realms 的 Docker Bearer Token Realm 选择到右边的激活状态。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931200624-image.png\" alt=\"image\"></p>\n<h3 id=\"小试牛刀-登录\"><a href=\"#小试牛刀-登录\" class=\"headerlink\" title=\"小试牛刀-登录\"></a>小试牛刀-登录</h3><p>安装至此，我们在另一台机器上试一下。</p>\n<p>在这里，我的架构是两台虚拟机，一台是 gitlab 和 jenkins，一台是 nginx 和 Nexus。所以，我们就在 gitlab 的机器上尝试。</p>\n<h4 id=\"配置文件\"><a href=\"#配置文件\" class=\"headerlink\" title=\"配置文件\"></a>配置文件</h4><p>我们在 gitlab 配置文件，<code>vim /etc/docker/daemon.json</code></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931210306-image.png\" alt=\"image\"></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">&quot;insecure-registries&quot;</span> : [</span><br><span class=\"line\">    <span class=\"string\">&quot;192.168.182.4:8082&quot;</span></span><br><span class=\"line\">  ]</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>最后记得使用<code>systemctl restart docker</code>重启一下<br><strong>注意这里是 json 格式，格式不能错</strong></p>\n<h4 id=\"登录-1\"><a href=\"#登录-1\" class=\"headerlink\" title=\"登录\"></a>登录</h4><p>登录一下。从图中可以看出。初次登录需要输入账号密码，后续登录就不需要了。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker login 服务IP:端口</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931223439-image.png\" alt=\"image\"></p>\n<h3 id=\"小试牛刀-推送镜像到制品库\"><a href=\"#小试牛刀-推送镜像到制品库\" class=\"headerlink\" title=\"小试牛刀-推送镜像到制品库\"></a>小试牛刀-推送镜像到制品库</h3><p>我们可以使用 docker push 推送镜像到私服上面。</p>\n<p>docker 在推送一个镜像时，镜像的 Tag (名称:版本号) 必须开头带着镜像库的地址，才可以推送。例如下面两个镜像：<br>😡 local/jenkins 不能推送<br>😃 <strong>192.168.182.4:8082/local/jenkins</strong> 可以推送。</p>\n<h4 id=\"制作镜像\"><a href=\"#制作镜像\" class=\"headerlink\" title=\"制作镜像\"></a>制作镜像</h4><p>1.制作一份带镜像库地址的镜像：这个可以做，但是开销太大，需要走一遍制作流程</p>\n<p>2.使用 docker tag 命令给已有的镜像打个标签：推荐使用，会将已有的镜像归位某个镜像库内。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931234544-image.png\" alt=\"image\"></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker tag 28c624ccaacf    192.168.182.4:8082/local/jenkins</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931242511-image.png\" alt=\"image\"></p>\n<h4 id=\"推送\"><a href=\"#推送\" class=\"headerlink\" title=\"推送\"></a>推送</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker push 192.168.182.4:8082/local/jenkins</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931252036-image.png\" alt=\"image\"></p>\n<p>在仓库可以看到上传的</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931260957-image.png\" alt=\"image\"></p>\n<h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p>我们在这部分实现了 docker 私服的搭建和 push，接下来我们将构建代码并且推送到私服。敬请期待吧！</p>\n","site":{"data":{}},"length":1984,"excerpt":"<h2 id=\"目的\"><a href=\"#目的\" class=\"headerlink\" title=\"目的\"></a>目的</h2><p>学习 Nexus 制品库的介绍与安装</p>\n<h2 id=\"介绍\"><a href=\"#介绍\" class=\"headerlink\" title=\"介绍\"></a>介绍</h2><p>在前面我们写到，制品库是<strong>承接 CI 构建后的产出制品的仓库</strong>，具有版本管理，历史管理，权限校验等功能。</p>\n<p>在这里，我们选用 Nexus3 作为制品库。</p>","more":"<h2 id=\"正式开始\"><a href=\"#正式开始\" class=\"headerlink\" title=\"正式开始\"></a>正式开始</h2><h3 id=\"拉取镜像\"><a href=\"#拉取镜像\" class=\"headerlink\" title=\"拉取镜像\"></a>拉取镜像</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull sonatype/nexus3</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931105737-image.png\" alt=\"image\"></p>\n<h3 id=\"启动容器\"><a href=\"#启动容器\" class=\"headerlink\" title=\"启动容器\"></a>启动容器</h3><p>新建一个名为 nexus 的文件夹，方便我们存放 Nexus 相关数据，并赋予权限。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">mkdir</span> /home/nexus &amp;&amp; <span class=\"built_in\">chown</span> -R 200 /home/nexus</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931112564-image.png\" alt=\"image\"></p>\n<h4 id=\"创建容器\"><a href=\"#创建容器\" class=\"headerlink\" title=\"创建容器\"></a>创建容器</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -d -p 8081:8081 -p 8082:8082 \\</span><br><span class=\"line\">--name nexus \\</span><br><span class=\"line\">-v /home/nexus:/nexus-data \\</span><br><span class=\"line\">--restart always \\</span><br><span class=\"line\">sonatype/nexus3</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931118609-image.png\" alt=\"image\"></p>\n<ul>\n<li>Nexus 主服务端口，我们设置为 8081,；但是还需要新分配一个端口为服务端口，这里采用的是 8082</li>\n</ul>\n<h4 id=\"防火墙\"><a href=\"#防火墙\" class=\"headerlink\" title=\"防火墙\"></a>防火墙</h4><p>将对应端口添加到防火墙</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --zone=public --add-port=8081/tcp --permanent</span><br><span class=\"line\">firewall-cmd --zone=public --add-port=8082/tcp --permanent</span><br><span class=\"line\">systemctl reload firewalld</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931126380-image.png\" alt=\"image\"></p>\n<h3 id=\"访问-Nexus\"><a href=\"#访问-Nexus\" class=\"headerlink\" title=\"访问 Nexus\"></a>访问 Nexus</h3><p>打开浏览器地址栏，访问 Nexus 的服务地址，这里是 ip:8001。启动时间比较长，可以使用<code>docker logs -f nexus</code>查看日志，如果显示以下文字<strong>Started Sonatype Nexus OSS 3.25.1-04</strong>就代表成功</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931136526-image.png\" alt=\"image\"></p>\n<h3 id=\"配置-Nexus\"><a href=\"#配置-Nexus\" class=\"headerlink\" title=\"配置 Nexus\"></a>配置 Nexus</h3><p>我们访问<code>ip:8001</code>就可以看到界面了。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931149190-image.png\" alt=\"image\"></p>\n<h4 id=\"登录\"><a href=\"#登录\" class=\"headerlink\" title=\"登录\"></a>登录</h4><p>我们可以使用<code>默认账号:admin</code>登录，默认的密码在<code>cat /home/nexus/admin.password</code>可以查看。</p>\n<p>注意不包含#号</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931157535-image.png\" alt=\"image\"></p>\n<p>当我们初次进入之后会让我们设置一下初始密码，和登录的权限。</p>\n<h4 id=\"匿名访问性\"><a href=\"#匿名访问性\" class=\"headerlink\" title=\"匿名访问性\"></a>匿名访问性</h4><p>设置密码之后需要设置访问性,<strong>我们在任何没有登录的情况下，拉取（推送）制品到制品库，都算匿名访问。</strong>,在实际生产中是<strong>不安全</strong>的，我们测试可以开启。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931164943-image.png\" alt=\"image\"></p>\n<h4 id=\"创建一个-Docker-私服\"><a href=\"#创建一个-Docker-私服\" class=\"headerlink\" title=\"创建一个 Docker 私服\"></a>创建一个 Docker 私服</h4><p>点击设置，选择左侧菜单中的 Repositories ，点击 Create repository</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931174237-image.png\" alt=\"image\"></p>\n<p>使用搜索 docker 可以快速定位</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931182519-image.png\" alt=\"image\"></p>\n<p><strong>制品库的类型</strong></p>\n<ul>\n<li>proxy: 此类型制品库原则上 “只下载，不允许用户推送”。可以理解为缓存外网制品的制品库。例如，我们在拉取 nginx 镜像时，如果通过 proxy 类型的制品库，则它会去创建时配置好的外网 docker 镜像源拉取（有点像 cnpm）到自己的制品库，然后给你。第二次拉取，则不会下载。起到 缓存 的作用。</li>\n<li>hosted：此类型制品库和 proxy 相反，原则上 <strong>只允许用户推送，不允许缓存 。</strong>这是私有库的核心，只存放自己的私有镜像或制品。</li>\n<li>group：此类型制品库用作以上两种类型的 **集合 **，将上面两个库集合为一个使用。</li>\n</ul>\n<p>这里我们采用 hosted 类型，点击创建会看到一些输入框，这里做简单的解释。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931190366-image.png\" alt=\"image\"></p>\n<p>同时我们还要设置一下权限，在 Security-Realms 的 Docker Bearer Token Realm 选择到右边的激活状态。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931200624-image.png\" alt=\"image\"></p>\n<h3 id=\"小试牛刀-登录\"><a href=\"#小试牛刀-登录\" class=\"headerlink\" title=\"小试牛刀-登录\"></a>小试牛刀-登录</h3><p>安装至此，我们在另一台机器上试一下。</p>\n<p>在这里，我的架构是两台虚拟机，一台是 gitlab 和 jenkins，一台是 nginx 和 Nexus。所以，我们就在 gitlab 的机器上尝试。</p>\n<h4 id=\"配置文件\"><a href=\"#配置文件\" class=\"headerlink\" title=\"配置文件\"></a>配置文件</h4><p>我们在 gitlab 配置文件，<code>vim /etc/docker/daemon.json</code></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931210306-image.png\" alt=\"image\"></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">&quot;insecure-registries&quot;</span> : [</span><br><span class=\"line\">    <span class=\"string\">&quot;192.168.182.4:8082&quot;</span></span><br><span class=\"line\">  ]</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>最后记得使用<code>systemctl restart docker</code>重启一下<br><strong>注意这里是 json 格式，格式不能错</strong></p>\n<h4 id=\"登录-1\"><a href=\"#登录-1\" class=\"headerlink\" title=\"登录\"></a>登录</h4><p>登录一下。从图中可以看出。初次登录需要输入账号密码，后续登录就不需要了。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker login 服务IP:端口</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931223439-image.png\" alt=\"image\"></p>\n<h3 id=\"小试牛刀-推送镜像到制品库\"><a href=\"#小试牛刀-推送镜像到制品库\" class=\"headerlink\" title=\"小试牛刀-推送镜像到制品库\"></a>小试牛刀-推送镜像到制品库</h3><p>我们可以使用 docker push 推送镜像到私服上面。</p>\n<p>docker 在推送一个镜像时，镜像的 Tag (名称:版本号) 必须开头带着镜像库的地址，才可以推送。例如下面两个镜像：<br>😡 local/jenkins 不能推送<br>😃 <strong>192.168.182.4:8082/local/jenkins</strong> 可以推送。</p>\n<h4 id=\"制作镜像\"><a href=\"#制作镜像\" class=\"headerlink\" title=\"制作镜像\"></a>制作镜像</h4><p>1.制作一份带镜像库地址的镜像：这个可以做，但是开销太大，需要走一遍制作流程</p>\n<p>2.使用 docker tag 命令给已有的镜像打个标签：推荐使用，会将已有的镜像归位某个镜像库内。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931234544-image.png\" alt=\"image\"></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker tag 28c624ccaacf    192.168.182.4:8082/local/jenkins</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931242511-image.png\" alt=\"image\"></p>\n<h4 id=\"推送\"><a href=\"#推送\" class=\"headerlink\" title=\"推送\"></a>推送</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker push 192.168.182.4:8082/local/jenkins</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931252036-image.png\" alt=\"image\"></p>\n<p>在仓库可以看到上传的</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600931260957-image.png\" alt=\"image\"></p>\n<h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p>我们在这部分实现了 docker 私服的搭建和 push，接下来我们将构建代码并且推送到私服。敬请期待吧！</p>"},{"title":"CICD实战之Jenkins构建前端镜像并上传到制品库","abbrlink":"dc1bbeba","translate_title":"cicd-actual-combat-jenkins-builds-a-frontend-image-and-uploads-it-to-the-product-library","date":"2020-08-09T10:41:29.000Z","_content":"\n## 目的\n\n之前的前端构建部署，是通过 scp 传输 dist 的全部文件到指定目录实现部署，这次我们将学习利用 Jenkins 构建 docker 前端镜像并上传到制品库实现部署。\n\n<!-- more -->\n\n## 正式开始\n\n### Jenkins 登录\n\n想使用 Jenkins 推送镜像到制品库，必须先登录制品库。进入 Jenkins 容器，使用 docker login 登录，然后退出即可\n\n```bash\ndocker exec -it jenkins /bin/bash\ndocker login 192.168.182.4:8082\nexit;\n```\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923180106.png)\n\n登录一次之后后续就无需登录。\n\n**注意：登录不上可以多尝试几次**\n\n### Nginx 登录制品库\n\nJenkins 构建并且 push，Nginx 就会触发拉取，因此这边也需要登录。\n\n```bash\nvi /etc/docker/daemon.json\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n# 登录\ndocker login 192.168.182.4:8082\n```\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923180119.png)\n登录一次之后后续就无需登录。\n\n### DockerFile\n\n前端通过 Jenkins 构建 docker 镜像，因此需要添加 DockerFile 文件。\n\nDockerFile 是一个镜像制作过程的步骤描述，新增文件添加一下代码\n\n```bash\nFROM nginx:1.15-alpine\nCOPY dist /usr/share/nginx/html\nWORKDIR /usr/share/nginx/html\n```\n\n- 拉取一个 nginx 1.15-alpine 版本的镜像。\n- 将当前目录下的 dist 文件夹拷贝到镜像的 /usr/share/nginx/html 文件夹。\n- 声明启动容器时，在 /usr/share/nginx/html 下面执行。\n\n### jenkins 配置修改\n\n修改配置\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923180130.png)\n添加以下代码\n\n```bash\nset -e\ntimestamp=`date '+%Y%m%d%H%M%S'`\n\nnode -v\nnpm -v\n\nnpm install -g cnpm --registry=https://registry.npm.taobao.org\n\ncnpm install\n\nnpm run build\n\n# 编译docker镜像\ndocker build -t 192.168.182.4:8082/fe/nginx-fe-$timestamp .\n\n# 推送docker镜像到制品库\ndocker push 192.168.182.4:8082/fe/nginx-fe-$timestamp\n\n# 远程执行命令部署镜像\nssh -o StrictHostKeyChecking=no root@192.168.182.4 \"docker pull 192.168.182.4:8082/fe/nginx-fe-$timestamp && \\\ndocker stop nginx-test && \\\ndocker rm nginx-test && \\\ndocker run -p 80:80 -itd \\\n--name nginx-test \\\n--restart always \\\n192.168.182.4:8082/fe/nginx-fe-$timestamp\"\n```\n\n流程分析\n\n- Jenkins 在命令中用 $-变量名 进行使用。 timestamp=date '+%Y%m%d%H%M%S'，唯一的 docker 命名\n- 依据 DockerFile 打包镜像并且推送\n- Nginx 拉取刚推送的 docker 镜像，停止正在运行的 container，删除之后并且运行当前的镜像。\n\n**上述代码中相关注意事项**\n\n- 制品库的地址：172.16.81.150:8082\n- nginx 的地址：192.168.182.4\n- nginx 的 name：nginx-test![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923180145.png)\n\n## 结语\n\n和之前的构建部署方式中，利用 docker 镜像可以很好地代码回退和迭代更新，实现了版本在生产环境更好的控制。\n","source":"_posts/cicd7.md","raw":"---\ntitle: CICD实战之Jenkins构建前端镜像并上传到制品库\ntags:\n  - CICD\nabbrlink: dc1bbeba\ntranslate_title: >-\n  cicd-actual-combat-jenkins-builds-a-frontend-image-and-uploads-it-to-the-product-library\ndate: 2020-08-09 18:41:29\n---\n\n## 目的\n\n之前的前端构建部署，是通过 scp 传输 dist 的全部文件到指定目录实现部署，这次我们将学习利用 Jenkins 构建 docker 前端镜像并上传到制品库实现部署。\n\n<!-- more -->\n\n## 正式开始\n\n### Jenkins 登录\n\n想使用 Jenkins 推送镜像到制品库，必须先登录制品库。进入 Jenkins 容器，使用 docker login 登录，然后退出即可\n\n```bash\ndocker exec -it jenkins /bin/bash\ndocker login 192.168.182.4:8082\nexit;\n```\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923180106.png)\n\n登录一次之后后续就无需登录。\n\n**注意：登录不上可以多尝试几次**\n\n### Nginx 登录制品库\n\nJenkins 构建并且 push，Nginx 就会触发拉取，因此这边也需要登录。\n\n```bash\nvi /etc/docker/daemon.json\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n# 登录\ndocker login 192.168.182.4:8082\n```\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923180119.png)\n登录一次之后后续就无需登录。\n\n### DockerFile\n\n前端通过 Jenkins 构建 docker 镜像，因此需要添加 DockerFile 文件。\n\nDockerFile 是一个镜像制作过程的步骤描述，新增文件添加一下代码\n\n```bash\nFROM nginx:1.15-alpine\nCOPY dist /usr/share/nginx/html\nWORKDIR /usr/share/nginx/html\n```\n\n- 拉取一个 nginx 1.15-alpine 版本的镜像。\n- 将当前目录下的 dist 文件夹拷贝到镜像的 /usr/share/nginx/html 文件夹。\n- 声明启动容器时，在 /usr/share/nginx/html 下面执行。\n\n### jenkins 配置修改\n\n修改配置\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923180130.png)\n添加以下代码\n\n```bash\nset -e\ntimestamp=`date '+%Y%m%d%H%M%S'`\n\nnode -v\nnpm -v\n\nnpm install -g cnpm --registry=https://registry.npm.taobao.org\n\ncnpm install\n\nnpm run build\n\n# 编译docker镜像\ndocker build -t 192.168.182.4:8082/fe/nginx-fe-$timestamp .\n\n# 推送docker镜像到制品库\ndocker push 192.168.182.4:8082/fe/nginx-fe-$timestamp\n\n# 远程执行命令部署镜像\nssh -o StrictHostKeyChecking=no root@192.168.182.4 \"docker pull 192.168.182.4:8082/fe/nginx-fe-$timestamp && \\\ndocker stop nginx-test && \\\ndocker rm nginx-test && \\\ndocker run -p 80:80 -itd \\\n--name nginx-test \\\n--restart always \\\n192.168.182.4:8082/fe/nginx-fe-$timestamp\"\n```\n\n流程分析\n\n- Jenkins 在命令中用 $-变量名 进行使用。 timestamp=date '+%Y%m%d%H%M%S'，唯一的 docker 命名\n- 依据 DockerFile 打包镜像并且推送\n- Nginx 拉取刚推送的 docker 镜像，停止正在运行的 container，删除之后并且运行当前的镜像。\n\n**上述代码中相关注意事项**\n\n- 制品库的地址：172.16.81.150:8082\n- nginx 的地址：192.168.182.4\n- nginx 的 name：nginx-test![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923180145.png)\n\n## 结语\n\n和之前的构建部署方式中，利用 docker 镜像可以很好地代码回退和迭代更新，实现了版本在生产环境更好的控制。\n","slug":"cicd7","published":1,"updated":"2021-09-29T07:53:51.819Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy6b60016p4vl3x7e2017","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"目的\"><a href=\"#目的\" class=\"headerlink\" title=\"目的\"></a>目的</h2><p>之前的前端构建部署，是通过 scp 传输 dist 的全部文件到指定目录实现部署，这次我们将学习利用 Jenkins 构建 docker 前端镜像并上传到制品库实现部署。</p>\n<span id=\"more\"></span>\n\n<h2 id=\"正式开始\"><a href=\"#正式开始\" class=\"headerlink\" title=\"正式开始\"></a>正式开始</h2><h3 id=\"Jenkins-登录\"><a href=\"#Jenkins-登录\" class=\"headerlink\" title=\"Jenkins 登录\"></a>Jenkins 登录</h3><p>想使用 Jenkins 推送镜像到制品库，必须先登录制品库。进入 Jenkins 容器，使用 docker login 登录，然后退出即可</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker <span class=\"built_in\">exec</span> -it jenkins /bin/bash</span><br><span class=\"line\">docker login 192.168.182.4:8082</span><br><span class=\"line\"><span class=\"built_in\">exit</span>;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923180106.png\"></p>\n<p>登录一次之后后续就无需登录。</p>\n<p><strong>注意：登录不上可以多尝试几次</strong></p>\n<h3 id=\"Nginx-登录制品库\"><a href=\"#Nginx-登录制品库\" class=\"headerlink\" title=\"Nginx 登录制品库\"></a>Nginx 登录制品库</h3><p>Jenkins 构建并且 push，Nginx 就会触发拉取，因此这边也需要登录。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /etc/docker/daemon.json</span><br><span class=\"line\">sudo systemctl daemon-reload</span><br><span class=\"line\">sudo systemctl restart docker</span><br><span class=\"line\"><span class=\"comment\"># 登录</span></span><br><span class=\"line\">docker login 192.168.182.4:8082</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923180119.png\"><br>登录一次之后后续就无需登录。</p>\n<h3 id=\"DockerFile\"><a href=\"#DockerFile\" class=\"headerlink\" title=\"DockerFile\"></a>DockerFile</h3><p>前端通过 Jenkins 构建 docker 镜像，因此需要添加 DockerFile 文件。</p>\n<p>DockerFile 是一个镜像制作过程的步骤描述，新增文件添加一下代码</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">FROM nginx:1.15-alpine</span><br><span class=\"line\">COPY dist /usr/share/nginx/html</span><br><span class=\"line\">WORKDIR /usr/share/nginx/html</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>拉取一个 nginx 1.15-alpine 版本的镜像。</li>\n<li>将当前目录下的 dist 文件夹拷贝到镜像的 /usr/share/nginx/html 文件夹。</li>\n<li>声明启动容器时，在 /usr/share/nginx/html 下面执行。</li>\n</ul>\n<h3 id=\"jenkins-配置修改\"><a href=\"#jenkins-配置修改\" class=\"headerlink\" title=\"jenkins 配置修改\"></a>jenkins 配置修改</h3><p>修改配置<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923180130.png\"><br>添加以下代码</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">set</span> -e</span><br><span class=\"line\">timestamp=`<span class=\"built_in\">date</span> <span class=\"string\">&#x27;+%Y%m%d%H%M%S&#x27;</span>`</span><br><span class=\"line\"></span><br><span class=\"line\">node -v</span><br><span class=\"line\">npm -v</span><br><span class=\"line\"></span><br><span class=\"line\">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br><span class=\"line\"></span><br><span class=\"line\">cnpm install</span><br><span class=\"line\"></span><br><span class=\"line\">npm run build</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 编译docker镜像</span></span><br><span class=\"line\">docker build -t 192.168.182.4:8082/fe/nginx-fe-<span class=\"variable\">$timestamp</span> .</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 推送docker镜像到制品库</span></span><br><span class=\"line\">docker push 192.168.182.4:8082/fe/nginx-fe-<span class=\"variable\">$timestamp</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 远程执行命令部署镜像</span></span><br><span class=\"line\">ssh -o StrictHostKeyChecking=no root@192.168.182.4 <span class=\"string\">&quot;docker pull 192.168.182.4:8082/fe/nginx-fe-<span class=\"variable\">$timestamp</span> &amp;&amp; \\</span></span><br><span class=\"line\"><span class=\"string\">docker stop nginx-test &amp;&amp; \\</span></span><br><span class=\"line\"><span class=\"string\">docker rm nginx-test &amp;&amp; \\</span></span><br><span class=\"line\"><span class=\"string\">docker run -p 80:80 -itd \\</span></span><br><span class=\"line\"><span class=\"string\">--name nginx-test \\</span></span><br><span class=\"line\"><span class=\"string\">--restart always \\</span></span><br><span class=\"line\"><span class=\"string\">192.168.182.4:8082/fe/nginx-fe-<span class=\"variable\">$timestamp</span>&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>流程分析</p>\n<ul>\n<li>Jenkins 在命令中用 $-变量名 进行使用。 timestamp=date ‘+%Y%m%d%H%M%S’，唯一的 docker 命名</li>\n<li>依据 DockerFile 打包镜像并且推送</li>\n<li>Nginx 拉取刚推送的 docker 镜像，停止正在运行的 container，删除之后并且运行当前的镜像。</li>\n</ul>\n<p><strong>上述代码中相关注意事项</strong></p>\n<ul>\n<li>制品库的地址：172.16.81.150:8082</li>\n<li>nginx 的地址：192.168.182.4</li>\n<li>nginx 的 name：nginx-test<img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923180145.png\"></li>\n</ul>\n<h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p>和之前的构建部署方式中，利用 docker 镜像可以很好地代码回退和迭代更新，实现了版本在生产环境更好的控制。</p>\n","site":{"data":{}},"length":1589,"excerpt":"<h2 id=\"目的\"><a href=\"#目的\" class=\"headerlink\" title=\"目的\"></a>目的</h2><p>之前的前端构建部署，是通过 scp 传输 dist 的全部文件到指定目录实现部署，这次我们将学习利用 Jenkins 构建 docker 前端镜像并上传到制品库实现部署。</p>","more":"<h2 id=\"正式开始\"><a href=\"#正式开始\" class=\"headerlink\" title=\"正式开始\"></a>正式开始</h2><h3 id=\"Jenkins-登录\"><a href=\"#Jenkins-登录\" class=\"headerlink\" title=\"Jenkins 登录\"></a>Jenkins 登录</h3><p>想使用 Jenkins 推送镜像到制品库，必须先登录制品库。进入 Jenkins 容器，使用 docker login 登录，然后退出即可</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker <span class=\"built_in\">exec</span> -it jenkins /bin/bash</span><br><span class=\"line\">docker login 192.168.182.4:8082</span><br><span class=\"line\"><span class=\"built_in\">exit</span>;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923180106.png\"></p>\n<p>登录一次之后后续就无需登录。</p>\n<p><strong>注意：登录不上可以多尝试几次</strong></p>\n<h3 id=\"Nginx-登录制品库\"><a href=\"#Nginx-登录制品库\" class=\"headerlink\" title=\"Nginx 登录制品库\"></a>Nginx 登录制品库</h3><p>Jenkins 构建并且 push，Nginx 就会触发拉取，因此这边也需要登录。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /etc/docker/daemon.json</span><br><span class=\"line\">sudo systemctl daemon-reload</span><br><span class=\"line\">sudo systemctl restart docker</span><br><span class=\"line\"><span class=\"comment\"># 登录</span></span><br><span class=\"line\">docker login 192.168.182.4:8082</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923180119.png\"><br>登录一次之后后续就无需登录。</p>\n<h3 id=\"DockerFile\"><a href=\"#DockerFile\" class=\"headerlink\" title=\"DockerFile\"></a>DockerFile</h3><p>前端通过 Jenkins 构建 docker 镜像，因此需要添加 DockerFile 文件。</p>\n<p>DockerFile 是一个镜像制作过程的步骤描述，新增文件添加一下代码</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">FROM nginx:1.15-alpine</span><br><span class=\"line\">COPY dist /usr/share/nginx/html</span><br><span class=\"line\">WORKDIR /usr/share/nginx/html</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>拉取一个 nginx 1.15-alpine 版本的镜像。</li>\n<li>将当前目录下的 dist 文件夹拷贝到镜像的 /usr/share/nginx/html 文件夹。</li>\n<li>声明启动容器时，在 /usr/share/nginx/html 下面执行。</li>\n</ul>\n<h3 id=\"jenkins-配置修改\"><a href=\"#jenkins-配置修改\" class=\"headerlink\" title=\"jenkins 配置修改\"></a>jenkins 配置修改</h3><p>修改配置<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923180130.png\"><br>添加以下代码</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">set</span> -e</span><br><span class=\"line\">timestamp=`<span class=\"built_in\">date</span> <span class=\"string\">&#x27;+%Y%m%d%H%M%S&#x27;</span>`</span><br><span class=\"line\"></span><br><span class=\"line\">node -v</span><br><span class=\"line\">npm -v</span><br><span class=\"line\"></span><br><span class=\"line\">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br><span class=\"line\"></span><br><span class=\"line\">cnpm install</span><br><span class=\"line\"></span><br><span class=\"line\">npm run build</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 编译docker镜像</span></span><br><span class=\"line\">docker build -t 192.168.182.4:8082/fe/nginx-fe-<span class=\"variable\">$timestamp</span> .</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 推送docker镜像到制品库</span></span><br><span class=\"line\">docker push 192.168.182.4:8082/fe/nginx-fe-<span class=\"variable\">$timestamp</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 远程执行命令部署镜像</span></span><br><span class=\"line\">ssh -o StrictHostKeyChecking=no root@192.168.182.4 <span class=\"string\">&quot;docker pull 192.168.182.4:8082/fe/nginx-fe-<span class=\"variable\">$timestamp</span> &amp;&amp; \\</span></span><br><span class=\"line\"><span class=\"string\">docker stop nginx-test &amp;&amp; \\</span></span><br><span class=\"line\"><span class=\"string\">docker rm nginx-test &amp;&amp; \\</span></span><br><span class=\"line\"><span class=\"string\">docker run -p 80:80 -itd \\</span></span><br><span class=\"line\"><span class=\"string\">--name nginx-test \\</span></span><br><span class=\"line\"><span class=\"string\">--restart always \\</span></span><br><span class=\"line\"><span class=\"string\">192.168.182.4:8082/fe/nginx-fe-<span class=\"variable\">$timestamp</span>&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>流程分析</p>\n<ul>\n<li>Jenkins 在命令中用 $-变量名 进行使用。 timestamp=date ‘+%Y%m%d%H%M%S’，唯一的 docker 命名</li>\n<li>依据 DockerFile 打包镜像并且推送</li>\n<li>Nginx 拉取刚推送的 docker 镜像，停止正在运行的 container，删除之后并且运行当前的镜像。</li>\n</ul>\n<p><strong>上述代码中相关注意事项</strong></p>\n<ul>\n<li>制品库的地址：172.16.81.150:8082</li>\n<li>nginx 的地址：192.168.182.4</li>\n<li>nginx 的 name：nginx-test<img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923180145.png\"></li>\n</ul>\n<h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p>和之前的构建部署方式中，利用 docker 镜像可以很好地代码回退和迭代更新，实现了版本在生产环境更好的控制。</p>"},{"title":"请珍惜你的社交信用","abbrlink":"1cc16efe","translate_title":"please-cherish-your-social-credit","date":"2020-09-28T04:59:03.000Z","_content":"\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-28/1601269097209-image.png)\n","source":"_posts/credit.md","raw":"---\ntitle: 请珍惜你的社交信用\nabbrlink: 1cc16efe\ntags:\n  - 心得\ntranslate_title: please-cherish-your-social-credit\ndate: 2020-09-28 12:59:03\n---\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-28/1601269097209-image.png)\n","slug":"credit","published":1,"updated":"2021-09-29T07:53:51.819Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy6b70018p4vl8q4021h1","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-28/1601269097209-image.png\" alt=\"image\"></p>\n","site":{"data":{}},"length":0,"excerpt":"","more":"<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-28/1601269097209-image.png\" alt=\"image\"></p>\n"},{"title":"记录一次前端报错的问题排查","abbrlink":"a628a43c","date":"2021-12-26T14:15:23.000Z","translate_title":"record-a-front-end-error-troubleshooting","_content":"\n## 一、事情起因\n\n开始项目是有两个功能分开进行开发的，后面想着可以一起测试上线，就合并到一起进行构建，当发布到测试环境的时候，报了一个之前从来没有见过的错。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20211226221659.png)\n\n错误所指向的链接地址也不知所云：\n\n1.Uncaught Error: Minified React error #130\n\n2.Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined.\n\n<!-- more -->\n\n## 二、排查流程\n\n### 1.本地复现\n\n我尝试着本地复现，但是本地 dev 环境跑着正常。\n\n### 2.尝试网络搜索\n\n网络搜索得到一篇知乎的文章，大家分别说是文件路径大小写、和 export 与 default export 导出之类的的问题。\n\n心想着可能是 windows 对大小写文件不敏感，我第一步重新用 tsc 进行大小写检查和引用检查，发现没有效果。然后特地使用 wsl 链接 ubuntu Linux 子系统来重新 run dev 跑开发环境，发现一切正常。\n\n### 3.加载 sourcemap\n\n因为本地不能复现错误，就想着看看错误细节，经过向同事请教，用 10.7 调试线上代码里面的方法，加载之后发现还是无法定位到错误的地方。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20211226221752.png)\n\n### 4.本地运行 prod 代码\n\n以上的措施都失效之后，我就想着逐渐屏蔽一部分代码，将合并分支之前的两个分支代码分别部署，发现一个有问题，一个没有问题，但是得到的错误仍旧不能定位。因为涉及的代码量比较多，不可能一一屏蔽再一一部署排查，这对运维资源的浪费也是巨大的。\n\n经过一段时间的折腾，发现还是不行，我就想着如何才能再本地运行 build 之后的代码，开始同事请教之后发现可以使用 --prod 调试使用 prod 构建配置构建出来的代码。\n\n最后，用这条命令运行之后发现可以复现错误，并且一个一个注释定位到了错误的语句。\n\n## 三、问题原因\n\n最后定位的原因竟然是因为这一句有问题\n\n错误定位\n\n```Typescript\n<Dropdown.Button overlay={menu}>文本</Dropdown.Button>\n```\n\n然后我还升级版本，分别写了几种写法，发现有的可以，有的不行\n\n后面向组件库同学反馈，后面这个问题也修复了，问题原因为被 webpack 误 tree shaking 了。\n\n## 四、反思\n\n其实排查这个问题还是花了一点时间，因为开始就是想着网上看类似的问题，后面再自己尝试，这一些列都是比较花时间的。\n\n现在回头看看其实觉得排查的第一步就是应该先复现问题，只有问题复现了才有途径去解决问题。\n\n当时也是被问题迷糊了，出现了问题就应该复现问题，然后才是解决问题。当发现 dev 开发环境不出现问题，而构建出现问题的时候就应该想着用 prod 的模式来跑代码，如果当时可以及时抓住排查问题的关键点的话，可以节省许多时间。\n\n所以时时刻刻要注意正确的排查问题的思路：**出现问题--尝试复现问题--解决问题**。\n\n我想做到这样的话，以后遇到类似的问题也会事半功倍的。\n","source":"_posts/fe-bug.md","raw":"---\ntitle: 记录一次前端报错的问题排查\nabbrlink: a628a43c\ndate: 2021-12-26 22:15:23\ntranslate_title: record-a-front-end-error-troubleshooting\ntags:\n  - 心得\n---\n\n## 一、事情起因\n\n开始项目是有两个功能分开进行开发的，后面想着可以一起测试上线，就合并到一起进行构建，当发布到测试环境的时候，报了一个之前从来没有见过的错。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20211226221659.png)\n\n错误所指向的链接地址也不知所云：\n\n1.Uncaught Error: Minified React error #130\n\n2.Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined.\n\n<!-- more -->\n\n## 二、排查流程\n\n### 1.本地复现\n\n我尝试着本地复现，但是本地 dev 环境跑着正常。\n\n### 2.尝试网络搜索\n\n网络搜索得到一篇知乎的文章，大家分别说是文件路径大小写、和 export 与 default export 导出之类的的问题。\n\n心想着可能是 windows 对大小写文件不敏感，我第一步重新用 tsc 进行大小写检查和引用检查，发现没有效果。然后特地使用 wsl 链接 ubuntu Linux 子系统来重新 run dev 跑开发环境，发现一切正常。\n\n### 3.加载 sourcemap\n\n因为本地不能复现错误，就想着看看错误细节，经过向同事请教，用 10.7 调试线上代码里面的方法，加载之后发现还是无法定位到错误的地方。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20211226221752.png)\n\n### 4.本地运行 prod 代码\n\n以上的措施都失效之后，我就想着逐渐屏蔽一部分代码，将合并分支之前的两个分支代码分别部署，发现一个有问题，一个没有问题，但是得到的错误仍旧不能定位。因为涉及的代码量比较多，不可能一一屏蔽再一一部署排查，这对运维资源的浪费也是巨大的。\n\n经过一段时间的折腾，发现还是不行，我就想着如何才能再本地运行 build 之后的代码，开始同事请教之后发现可以使用 --prod 调试使用 prod 构建配置构建出来的代码。\n\n最后，用这条命令运行之后发现可以复现错误，并且一个一个注释定位到了错误的语句。\n\n## 三、问题原因\n\n最后定位的原因竟然是因为这一句有问题\n\n错误定位\n\n```Typescript\n<Dropdown.Button overlay={menu}>文本</Dropdown.Button>\n```\n\n然后我还升级版本，分别写了几种写法，发现有的可以，有的不行\n\n后面向组件库同学反馈，后面这个问题也修复了，问题原因为被 webpack 误 tree shaking 了。\n\n## 四、反思\n\n其实排查这个问题还是花了一点时间，因为开始就是想着网上看类似的问题，后面再自己尝试，这一些列都是比较花时间的。\n\n现在回头看看其实觉得排查的第一步就是应该先复现问题，只有问题复现了才有途径去解决问题。\n\n当时也是被问题迷糊了，出现了问题就应该复现问题，然后才是解决问题。当发现 dev 开发环境不出现问题，而构建出现问题的时候就应该想着用 prod 的模式来跑代码，如果当时可以及时抓住排查问题的关键点的话，可以节省许多时间。\n\n所以时时刻刻要注意正确的排查问题的思路：**出现问题--尝试复现问题--解决问题**。\n\n我想做到这样的话，以后遇到类似的问题也会事半功倍的。\n","slug":"fe-bug","published":1,"updated":"2022-01-14T06:17:54.709Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy6b9001ap4vl8gaealhx","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"一、事情起因\"><a href=\"#一、事情起因\" class=\"headerlink\" title=\"一、事情起因\"></a>一、事情起因</h2><p>开始项目是有两个功能分开进行开发的，后面想着可以一起测试上线，就合并到一起进行构建，当发布到测试环境的时候，报了一个之前从来没有见过的错。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20211226221659.png\"></p>\n<p>错误所指向的链接地址也不知所云：</p>\n<p>1.Uncaught Error: Minified React error #130</p>\n<p>2.Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined.</p>\n<span id=\"more\"></span>\n\n<h2 id=\"二、排查流程\"><a href=\"#二、排查流程\" class=\"headerlink\" title=\"二、排查流程\"></a>二、排查流程</h2><h3 id=\"1-本地复现\"><a href=\"#1-本地复现\" class=\"headerlink\" title=\"1.本地复现\"></a>1.本地复现</h3><p>我尝试着本地复现，但是本地 dev 环境跑着正常。</p>\n<h3 id=\"2-尝试网络搜索\"><a href=\"#2-尝试网络搜索\" class=\"headerlink\" title=\"2.尝试网络搜索\"></a>2.尝试网络搜索</h3><p>网络搜索得到一篇知乎的文章，大家分别说是文件路径大小写、和 export 与 default export 导出之类的的问题。</p>\n<p>心想着可能是 windows 对大小写文件不敏感，我第一步重新用 tsc 进行大小写检查和引用检查，发现没有效果。然后特地使用 wsl 链接 ubuntu Linux 子系统来重新 run dev 跑开发环境，发现一切正常。</p>\n<h3 id=\"3-加载-sourcemap\"><a href=\"#3-加载-sourcemap\" class=\"headerlink\" title=\"3.加载 sourcemap\"></a>3.加载 sourcemap</h3><p>因为本地不能复现错误，就想着看看错误细节，经过向同事请教，用 10.7 调试线上代码里面的方法，加载之后发现还是无法定位到错误的地方。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20211226221752.png\"></p>\n<h3 id=\"4-本地运行-prod-代码\"><a href=\"#4-本地运行-prod-代码\" class=\"headerlink\" title=\"4.本地运行 prod 代码\"></a>4.本地运行 prod 代码</h3><p>以上的措施都失效之后，我就想着逐渐屏蔽一部分代码，将合并分支之前的两个分支代码分别部署，发现一个有问题，一个没有问题，但是得到的错误仍旧不能定位。因为涉及的代码量比较多，不可能一一屏蔽再一一部署排查，这对运维资源的浪费也是巨大的。</p>\n<p>经过一段时间的折腾，发现还是不行，我就想着如何才能再本地运行 build 之后的代码，开始同事请教之后发现可以使用 –prod 调试使用 prod 构建配置构建出来的代码。</p>\n<p>最后，用这条命令运行之后发现可以复现错误，并且一个一个注释定位到了错误的语句。</p>\n<h2 id=\"三、问题原因\"><a href=\"#三、问题原因\" class=\"headerlink\" title=\"三、问题原因\"></a>三、问题原因</h2><p>最后定位的原因竟然是因为这一句有问题</p>\n<p>错误定位</p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;<span class=\"title class_\">Dropdown</span>.<span class=\"property\">Button</span> overlay=&#123;menu&#125;&gt;文本&lt;/<span class=\"title class_\">Dropdown</span>.<span class=\"property\">Button</span>&gt;</span><br></pre></td></tr></table></figure>\n\n<p>然后我还升级版本，分别写了几种写法，发现有的可以，有的不行</p>\n<p>后面向组件库同学反馈，后面这个问题也修复了，问题原因为被 webpack 误 tree shaking 了。</p>\n<h2 id=\"四、反思\"><a href=\"#四、反思\" class=\"headerlink\" title=\"四、反思\"></a>四、反思</h2><p>其实排查这个问题还是花了一点时间，因为开始就是想着网上看类似的问题，后面再自己尝试，这一些列都是比较花时间的。</p>\n<p>现在回头看看其实觉得排查的第一步就是应该先复现问题，只有问题复现了才有途径去解决问题。</p>\n<p>当时也是被问题迷糊了，出现了问题就应该复现问题，然后才是解决问题。当发现 dev 开发环境不出现问题，而构建出现问题的时候就应该想着用 prod 的模式来跑代码，如果当时可以及时抓住排查问题的关键点的话，可以节省许多时间。</p>\n<p>所以时时刻刻要注意正确的排查问题的思路：<strong>出现问题–尝试复现问题–解决问题</strong>。</p>\n<p>我想做到这样的话，以后遇到类似的问题也会事半功倍的。</p>\n","site":{"data":{}},"length":1225,"excerpt":"<h2 id=\"一、事情起因\"><a href=\"#一、事情起因\" class=\"headerlink\" title=\"一、事情起因\"></a>一、事情起因</h2><p>开始项目是有两个功能分开进行开发的，后面想着可以一起测试上线，就合并到一起进行构建，当发布到测试环境的时候，报了一个之前从来没有见过的错。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20211226221659.png\"></p>\n<p>错误所指向的链接地址也不知所云：</p>\n<p>1.Uncaught Error: Minified React error #130</p>\n<p>2.Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined.</p>","more":"<h2 id=\"二、排查流程\"><a href=\"#二、排查流程\" class=\"headerlink\" title=\"二、排查流程\"></a>二、排查流程</h2><h3 id=\"1-本地复现\"><a href=\"#1-本地复现\" class=\"headerlink\" title=\"1.本地复现\"></a>1.本地复现</h3><p>我尝试着本地复现，但是本地 dev 环境跑着正常。</p>\n<h3 id=\"2-尝试网络搜索\"><a href=\"#2-尝试网络搜索\" class=\"headerlink\" title=\"2.尝试网络搜索\"></a>2.尝试网络搜索</h3><p>网络搜索得到一篇知乎的文章，大家分别说是文件路径大小写、和 export 与 default export 导出之类的的问题。</p>\n<p>心想着可能是 windows 对大小写文件不敏感，我第一步重新用 tsc 进行大小写检查和引用检查，发现没有效果。然后特地使用 wsl 链接 ubuntu Linux 子系统来重新 run dev 跑开发环境，发现一切正常。</p>\n<h3 id=\"3-加载-sourcemap\"><a href=\"#3-加载-sourcemap\" class=\"headerlink\" title=\"3.加载 sourcemap\"></a>3.加载 sourcemap</h3><p>因为本地不能复现错误，就想着看看错误细节，经过向同事请教，用 10.7 调试线上代码里面的方法，加载之后发现还是无法定位到错误的地方。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20211226221752.png\"></p>\n<h3 id=\"4-本地运行-prod-代码\"><a href=\"#4-本地运行-prod-代码\" class=\"headerlink\" title=\"4.本地运行 prod 代码\"></a>4.本地运行 prod 代码</h3><p>以上的措施都失效之后，我就想着逐渐屏蔽一部分代码，将合并分支之前的两个分支代码分别部署，发现一个有问题，一个没有问题，但是得到的错误仍旧不能定位。因为涉及的代码量比较多，不可能一一屏蔽再一一部署排查，这对运维资源的浪费也是巨大的。</p>\n<p>经过一段时间的折腾，发现还是不行，我就想着如何才能再本地运行 build 之后的代码，开始同事请教之后发现可以使用 –prod 调试使用 prod 构建配置构建出来的代码。</p>\n<p>最后，用这条命令运行之后发现可以复现错误，并且一个一个注释定位到了错误的语句。</p>\n<h2 id=\"三、问题原因\"><a href=\"#三、问题原因\" class=\"headerlink\" title=\"三、问题原因\"></a>三、问题原因</h2><p>最后定位的原因竟然是因为这一句有问题</p>\n<p>错误定位</p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;<span class=\"title class_\">Dropdown</span>.<span class=\"property\">Button</span> overlay=&#123;menu&#125;&gt;文本&lt;/<span class=\"title class_\">Dropdown</span>.<span class=\"property\">Button</span>&gt;</span><br></pre></td></tr></table></figure>\n\n<p>然后我还升级版本，分别写了几种写法，发现有的可以，有的不行</p>\n<p>后面向组件库同学反馈，后面这个问题也修复了，问题原因为被 webpack 误 tree shaking 了。</p>\n<h2 id=\"四、反思\"><a href=\"#四、反思\" class=\"headerlink\" title=\"四、反思\"></a>四、反思</h2><p>其实排查这个问题还是花了一点时间，因为开始就是想着网上看类似的问题，后面再自己尝试，这一些列都是比较花时间的。</p>\n<p>现在回头看看其实觉得排查的第一步就是应该先复现问题，只有问题复现了才有途径去解决问题。</p>\n<p>当时也是被问题迷糊了，出现了问题就应该复现问题，然后才是解决问题。当发现 dev 开发环境不出现问题，而构建出现问题的时候就应该想着用 prod 的模式来跑代码，如果当时可以及时抓住排查问题的关键点的话，可以节省许多时间。</p>\n<p>所以时时刻刻要注意正确的排查问题的思路：<strong>出现问题–尝试复现问题–解决问题</strong>。</p>\n<p>我想做到这样的话，以后遇到类似的问题也会事半功倍的。</p>"},{"title":"HTTP协议原理笔记","abbrlink":"44c01e4f","translate_title":"http-protocol-principle-notes","date":"2020-05-25T13:41:08.000Z","_content":"\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200114.png)\n\n## 导学\n\n### 现状\n\n- 现在的 WEB 开发不理解 HTTP\n- HTTP 相当的重要\n- 提升自身价值\n<!-- more -->\n\n### 简单的例子\n\n- 输入 URL 打开网页\n\n- AJAX 获取数据\n\n- img 标签加载图片\n\n- Cache-control 的 public 属性和 private 属性，must-revalidate 属性，no-cache，no-store\n\n- 缓存验证\n\n  - last-modified 和 if-modified-since 配合验证\n\n  - etag 和 if-modified-since 配合验证\n\n  - CORS 跨域\n  - 浏览器输入 URL 后 HTTP 请求返回全过程（下图依据 performance 对象）\n    ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200127.png)\n\n## 网络协议\n\n### 网络模型介绍\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200237.png)\n本文主要讲 HTTP（应用层），HTTP 基于 TCP/IP 协议\n\n#### 底三层\n\n- 物理层：定义物理设备如何传输数据\n\n  硬件、网卡端口、光缆\n\n- 数据链路层：通信的实体间建立数据链路连接\n\n  软件服务通过物理设备创建电路的连接\n\n- 网络层：为数据在节点之间传输创建逻辑链路\n\n  访问百度的寻址的逻辑关系\n\n#### 传输层\n\n- 向用户提供可靠的端到端（End-to-End）服务\n- 传输层向高层屏蔽了下层数据通信的细节\n\n  比如本地与百度服务器之间的连接，两端如何传输数据，传输数据的方式；根据数据的大小来分包、分片，接收端的组装，两者的协议的定义。\n\n#### 应用层\n\nHTTP 就在应用层实现\n\n- 为软件提供了很多服务\n- 构建与 TCP/IP 协议只上\n- 屏蔽了网络传输的相关细节\n\n### HTTP 协议发展历史\n\n#### HTTP 0.9\n\n- 只支持 GET 请求\n- 没有 HEADER 等描述数据的信息\n- 服务器发送完毕关闭 TCP 连接\n\n#### HTTP 1.0\n\n- 增加很多命令（POST,HEADER 等）\n- 增加 status code 和 header\n- 多字符集支持、多部分发送、权限、缓存等等\n\n#### HTTP 1.1\n\n- 持久连接\n\n  1.0 版本一个请求创建一次 TCP 连接，服务端返回了 TCP 连接就关闭，成本较高；持久连接就不用关闭。\n\n- pipeline\n\n  同一个链接发送多个请求，发送的请求在一个连接发送多个，服务端进来的请求需要串行排队\n\n- 增加 host 和其他一些命令\n\n  有了 host，就可以在同一台物理服务器上跑多个不同 WEB 服务\n\n#### HTTP 2\n\n- 所有的数据都是以二进制传输\n\n  之前的方式大部分是字符串，因此数据的分片方式是不同的，HTTP2 中都是帧传输。\n\n- 同一个连接里面发送多个请求不再需要按照顺序\n\n  并行极大提高了效率\n\n- 头信息压缩及推送等提高效率的功能\n\n  HTTP2 解决 HTTP1 中性能低下的问题而设计的。\n\n  - 头信息压缩\n\n  HTTP1 中发送请求和返回请求很多的 HTTP 头都是必须要完整的发送和返回的，而这部分头信息比如 header、content-type、cache-control 这些字段是用**字符串**形式保存的，所以占用一定的**带宽**。而在 HTTP2 中就会对头信息压缩，减少带宽使用。\n\n  - 推送\n\n  常规的客户端为主动方，服务端为被动方。但是在 HTTP2 有推送功能，服务端可以主动发起数据传输。常规的 html 网页是请求 html，再请求其中的资源；HTTP2 的话可以在你请求 html 的时候主动推送资源到客户端，达到并行的效果，提高传输效率。\n\n#### HTTP 三次握手\n\n在客户端和服务器在进行 HTTP 的发送和返回过程中，会建立 TCP connection。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200251.png)\nHTTP 不存在连接的概念，只存在请求和响应的概念。请求和响应都传输数据包，会经过一个传输的通道，在 TCP 就创建了这样一个连接（通道），这个连接会保持在那里，请求是在这个基础之上发送的。在 TCP 连接上可以发送多个 HTTP 请求。\n\n这个模式在不同的版本里面有所差别\n\n- HTTP1.0 TCP 连接在 HTTP 请求创建的时候创建服务端想赢回来之后就会关闭\n- HTTP1.1 可以声明 TCP 连接保持状态，多个 HTTP 请求都通过这个连接。TCP 连接创建的过程中有三次握手消耗，减少开销。\n- HTTP2.0 并发 HTTP 请求。比如：同个用户在请求一个网页的时候只用一个 TCP 连接。\n\n##### 三次握手时序图\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200258.png) 1.客户端发起创建数据包的请求。SYN 标志位：创建请求的数据包，Seq=X\n\n2.服务端接收，开启 TCP SOCKET 端口。返回给客户端：SYN 标志位；ACK:接受到的 Seq+1，为 X+1；Seq：为服务端的 Seq。\n\n3.服务端发送。发送 ACK=y+1，Seq=Z。\n\n三次握手的目的:防止服务端开启无用的连接。网络服务根据网络传输数据的二次校验，是否有必要开启，数据是否丢失等等。规避网络传输过程延时、丢失等导致的服务器开销。\n\n##### 三次握手数据包举例\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200307.png)\n\n#### URI、URL、URN\n\n- URI：统一资源标志符（Identity），用来唯一标识互联网上的信息资源，包含 URL、URN\n- [URL](https://en.wikipedia.org/wiki/URL)：统一资源定位器（Locator）\n  ```js\n  比如：http：//user:pass@host.com:80/path?query=string#hash\n  ```\n  具体的格式如下\n  ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200317.png)\n- URN：永久统一资源定位符，资源移动之后还可以找到，目前还没有什么好的方案\n\n#### HTTP 报文格式\n","source":"_posts/http.md","raw":"---\ntitle: HTTP协议原理笔记\ntags:\n  - HTTP\nabbrlink: 44c01e4f\ntranslate_title: http-protocol-principle-notes\ndate: 2020-05-25 21:41:08\n---\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200114.png)\n\n## 导学\n\n### 现状\n\n- 现在的 WEB 开发不理解 HTTP\n- HTTP 相当的重要\n- 提升自身价值\n<!-- more -->\n\n### 简单的例子\n\n- 输入 URL 打开网页\n\n- AJAX 获取数据\n\n- img 标签加载图片\n\n- Cache-control 的 public 属性和 private 属性，must-revalidate 属性，no-cache，no-store\n\n- 缓存验证\n\n  - last-modified 和 if-modified-since 配合验证\n\n  - etag 和 if-modified-since 配合验证\n\n  - CORS 跨域\n  - 浏览器输入 URL 后 HTTP 请求返回全过程（下图依据 performance 对象）\n    ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200127.png)\n\n## 网络协议\n\n### 网络模型介绍\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200237.png)\n本文主要讲 HTTP（应用层），HTTP 基于 TCP/IP 协议\n\n#### 底三层\n\n- 物理层：定义物理设备如何传输数据\n\n  硬件、网卡端口、光缆\n\n- 数据链路层：通信的实体间建立数据链路连接\n\n  软件服务通过物理设备创建电路的连接\n\n- 网络层：为数据在节点之间传输创建逻辑链路\n\n  访问百度的寻址的逻辑关系\n\n#### 传输层\n\n- 向用户提供可靠的端到端（End-to-End）服务\n- 传输层向高层屏蔽了下层数据通信的细节\n\n  比如本地与百度服务器之间的连接，两端如何传输数据，传输数据的方式；根据数据的大小来分包、分片，接收端的组装，两者的协议的定义。\n\n#### 应用层\n\nHTTP 就在应用层实现\n\n- 为软件提供了很多服务\n- 构建与 TCP/IP 协议只上\n- 屏蔽了网络传输的相关细节\n\n### HTTP 协议发展历史\n\n#### HTTP 0.9\n\n- 只支持 GET 请求\n- 没有 HEADER 等描述数据的信息\n- 服务器发送完毕关闭 TCP 连接\n\n#### HTTP 1.0\n\n- 增加很多命令（POST,HEADER 等）\n- 增加 status code 和 header\n- 多字符集支持、多部分发送、权限、缓存等等\n\n#### HTTP 1.1\n\n- 持久连接\n\n  1.0 版本一个请求创建一次 TCP 连接，服务端返回了 TCP 连接就关闭，成本较高；持久连接就不用关闭。\n\n- pipeline\n\n  同一个链接发送多个请求，发送的请求在一个连接发送多个，服务端进来的请求需要串行排队\n\n- 增加 host 和其他一些命令\n\n  有了 host，就可以在同一台物理服务器上跑多个不同 WEB 服务\n\n#### HTTP 2\n\n- 所有的数据都是以二进制传输\n\n  之前的方式大部分是字符串，因此数据的分片方式是不同的，HTTP2 中都是帧传输。\n\n- 同一个连接里面发送多个请求不再需要按照顺序\n\n  并行极大提高了效率\n\n- 头信息压缩及推送等提高效率的功能\n\n  HTTP2 解决 HTTP1 中性能低下的问题而设计的。\n\n  - 头信息压缩\n\n  HTTP1 中发送请求和返回请求很多的 HTTP 头都是必须要完整的发送和返回的，而这部分头信息比如 header、content-type、cache-control 这些字段是用**字符串**形式保存的，所以占用一定的**带宽**。而在 HTTP2 中就会对头信息压缩，减少带宽使用。\n\n  - 推送\n\n  常规的客户端为主动方，服务端为被动方。但是在 HTTP2 有推送功能，服务端可以主动发起数据传输。常规的 html 网页是请求 html，再请求其中的资源；HTTP2 的话可以在你请求 html 的时候主动推送资源到客户端，达到并行的效果，提高传输效率。\n\n#### HTTP 三次握手\n\n在客户端和服务器在进行 HTTP 的发送和返回过程中，会建立 TCP connection。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200251.png)\nHTTP 不存在连接的概念，只存在请求和响应的概念。请求和响应都传输数据包，会经过一个传输的通道，在 TCP 就创建了这样一个连接（通道），这个连接会保持在那里，请求是在这个基础之上发送的。在 TCP 连接上可以发送多个 HTTP 请求。\n\n这个模式在不同的版本里面有所差别\n\n- HTTP1.0 TCP 连接在 HTTP 请求创建的时候创建服务端想赢回来之后就会关闭\n- HTTP1.1 可以声明 TCP 连接保持状态，多个 HTTP 请求都通过这个连接。TCP 连接创建的过程中有三次握手消耗，减少开销。\n- HTTP2.0 并发 HTTP 请求。比如：同个用户在请求一个网页的时候只用一个 TCP 连接。\n\n##### 三次握手时序图\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200258.png) 1.客户端发起创建数据包的请求。SYN 标志位：创建请求的数据包，Seq=X\n\n2.服务端接收，开启 TCP SOCKET 端口。返回给客户端：SYN 标志位；ACK:接受到的 Seq+1，为 X+1；Seq：为服务端的 Seq。\n\n3.服务端发送。发送 ACK=y+1，Seq=Z。\n\n三次握手的目的:防止服务端开启无用的连接。网络服务根据网络传输数据的二次校验，是否有必要开启，数据是否丢失等等。规避网络传输过程延时、丢失等导致的服务器开销。\n\n##### 三次握手数据包举例\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200307.png)\n\n#### URI、URL、URN\n\n- URI：统一资源标志符（Identity），用来唯一标识互联网上的信息资源，包含 URL、URN\n- [URL](https://en.wikipedia.org/wiki/URL)：统一资源定位器（Locator）\n  ```js\n  比如：http：//user:pass@host.com:80/path?query=string#hash\n  ```\n  具体的格式如下\n  ![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200317.png)\n- URN：永久统一资源定位符，资源移动之后还可以找到，目前还没有什么好的方案\n\n#### HTTP 报文格式\n","slug":"http","published":1,"updated":"2021-09-29T07:53:51.822Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy6ba001cp4vlgtq6h3ll","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200114.png\"></p>\n<h2 id=\"导学\"><a href=\"#导学\" class=\"headerlink\" title=\"导学\"></a>导学</h2><h3 id=\"现状\"><a href=\"#现状\" class=\"headerlink\" title=\"现状\"></a>现状</h3><ul>\n<li>现在的 WEB 开发不理解 HTTP</li>\n<li>HTTP 相当的重要</li>\n<li>提升自身价值<span id=\"more\"></span>\n\n</li>\n</ul>\n<h3 id=\"简单的例子\"><a href=\"#简单的例子\" class=\"headerlink\" title=\"简单的例子\"></a>简单的例子</h3><ul>\n<li><p>输入 URL 打开网页</p>\n</li>\n<li><p>AJAX 获取数据</p>\n</li>\n<li><p>img 标签加载图片</p>\n</li>\n<li><p>Cache-control 的 public 属性和 private 属性，must-revalidate 属性，no-cache，no-store</p>\n</li>\n<li><p>缓存验证</p>\n<ul>\n<li><p>last-modified 和 if-modified-since 配合验证</p>\n</li>\n<li><p>etag 和 if-modified-since 配合验证</p>\n</li>\n<li><p>CORS 跨域</p>\n</li>\n<li><p>浏览器输入 URL 后 HTTP 请求返回全过程（下图依据 performance 对象）<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200127.png\"></p>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"网络协议\"><a href=\"#网络协议\" class=\"headerlink\" title=\"网络协议\"></a>网络协议</h2><h3 id=\"网络模型介绍\"><a href=\"#网络模型介绍\" class=\"headerlink\" title=\"网络模型介绍\"></a>网络模型介绍</h3><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200237.png\"><br>本文主要讲 HTTP（应用层），HTTP 基于 TCP/IP 协议</p>\n<h4 id=\"底三层\"><a href=\"#底三层\" class=\"headerlink\" title=\"底三层\"></a>底三层</h4><ul>\n<li><p>物理层：定义物理设备如何传输数据</p>\n<p>硬件、网卡端口、光缆</p>\n</li>\n<li><p>数据链路层：通信的实体间建立数据链路连接</p>\n<p>软件服务通过物理设备创建电路的连接</p>\n</li>\n<li><p>网络层：为数据在节点之间传输创建逻辑链路</p>\n<p>访问百度的寻址的逻辑关系</p>\n</li>\n</ul>\n<h4 id=\"传输层\"><a href=\"#传输层\" class=\"headerlink\" title=\"传输层\"></a>传输层</h4><ul>\n<li><p>向用户提供可靠的端到端（End-to-End）服务</p>\n</li>\n<li><p>传输层向高层屏蔽了下层数据通信的细节</p>\n<p>比如本地与百度服务器之间的连接，两端如何传输数据，传输数据的方式；根据数据的大小来分包、分片，接收端的组装，两者的协议的定义。</p>\n</li>\n</ul>\n<h4 id=\"应用层\"><a href=\"#应用层\" class=\"headerlink\" title=\"应用层\"></a>应用层</h4><p>HTTP 就在应用层实现</p>\n<ul>\n<li>为软件提供了很多服务</li>\n<li>构建与 TCP/IP 协议只上</li>\n<li>屏蔽了网络传输的相关细节</li>\n</ul>\n<h3 id=\"HTTP-协议发展历史\"><a href=\"#HTTP-协议发展历史\" class=\"headerlink\" title=\"HTTP 协议发展历史\"></a>HTTP 协议发展历史</h3><h4 id=\"HTTP-0-9\"><a href=\"#HTTP-0-9\" class=\"headerlink\" title=\"HTTP 0.9\"></a>HTTP 0.9</h4><ul>\n<li>只支持 GET 请求</li>\n<li>没有 HEADER 等描述数据的信息</li>\n<li>服务器发送完毕关闭 TCP 连接</li>\n</ul>\n<h4 id=\"HTTP-1-0\"><a href=\"#HTTP-1-0\" class=\"headerlink\" title=\"HTTP 1.0\"></a>HTTP 1.0</h4><ul>\n<li>增加很多命令（POST,HEADER 等）</li>\n<li>增加 status code 和 header</li>\n<li>多字符集支持、多部分发送、权限、缓存等等</li>\n</ul>\n<h4 id=\"HTTP-1-1\"><a href=\"#HTTP-1-1\" class=\"headerlink\" title=\"HTTP 1.1\"></a>HTTP 1.1</h4><ul>\n<li><p>持久连接</p>\n<p>1.0 版本一个请求创建一次 TCP 连接，服务端返回了 TCP 连接就关闭，成本较高；持久连接就不用关闭。</p>\n</li>\n<li><p>pipeline</p>\n<p>同一个链接发送多个请求，发送的请求在一个连接发送多个，服务端进来的请求需要串行排队</p>\n</li>\n<li><p>增加 host 和其他一些命令</p>\n<p>有了 host，就可以在同一台物理服务器上跑多个不同 WEB 服务</p>\n</li>\n</ul>\n<h4 id=\"HTTP-2\"><a href=\"#HTTP-2\" class=\"headerlink\" title=\"HTTP 2\"></a>HTTP 2</h4><ul>\n<li><p>所有的数据都是以二进制传输</p>\n<p>之前的方式大部分是字符串，因此数据的分片方式是不同的，HTTP2 中都是帧传输。</p>\n</li>\n<li><p>同一个连接里面发送多个请求不再需要按照顺序</p>\n<p>并行极大提高了效率</p>\n</li>\n<li><p>头信息压缩及推送等提高效率的功能</p>\n<p>HTTP2 解决 HTTP1 中性能低下的问题而设计的。</p>\n<ul>\n<li>头信息压缩</li>\n</ul>\n<p>HTTP1 中发送请求和返回请求很多的 HTTP 头都是必须要完整的发送和返回的，而这部分头信息比如 header、content-type、cache-control 这些字段是用<strong>字符串</strong>形式保存的，所以占用一定的<strong>带宽</strong>。而在 HTTP2 中就会对头信息压缩，减少带宽使用。</p>\n<ul>\n<li>推送</li>\n</ul>\n<p>常规的客户端为主动方，服务端为被动方。但是在 HTTP2 有推送功能，服务端可以主动发起数据传输。常规的 html 网页是请求 html，再请求其中的资源；HTTP2 的话可以在你请求 html 的时候主动推送资源到客户端，达到并行的效果，提高传输效率。</p>\n</li>\n</ul>\n<h4 id=\"HTTP-三次握手\"><a href=\"#HTTP-三次握手\" class=\"headerlink\" title=\"HTTP 三次握手\"></a>HTTP 三次握手</h4><p>在客户端和服务器在进行 HTTP 的发送和返回过程中，会建立 TCP connection。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200251.png\"><br>HTTP 不存在连接的概念，只存在请求和响应的概念。请求和响应都传输数据包，会经过一个传输的通道，在 TCP 就创建了这样一个连接（通道），这个连接会保持在那里，请求是在这个基础之上发送的。在 TCP 连接上可以发送多个 HTTP 请求。</p>\n<p>这个模式在不同的版本里面有所差别</p>\n<ul>\n<li>HTTP1.0 TCP 连接在 HTTP 请求创建的时候创建服务端想赢回来之后就会关闭</li>\n<li>HTTP1.1 可以声明 TCP 连接保持状态，多个 HTTP 请求都通过这个连接。TCP 连接创建的过程中有三次握手消耗，减少开销。</li>\n<li>HTTP2.0 并发 HTTP 请求。比如：同个用户在请求一个网页的时候只用一个 TCP 连接。</li>\n</ul>\n<h5 id=\"三次握手时序图\"><a href=\"#三次握手时序图\" class=\"headerlink\" title=\"三次握手时序图\"></a>三次握手时序图</h5><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200258.png\"> 1.客户端发起创建数据包的请求。SYN 标志位：创建请求的数据包，Seq=X</p>\n<p>2.服务端接收，开启 TCP SOCKET 端口。返回给客户端：SYN 标志位；ACK:接受到的 Seq+1，为 X+1；Seq：为服务端的 Seq。</p>\n<p>3.服务端发送。发送 ACK=y+1，Seq=Z。</p>\n<p>三次握手的目的:防止服务端开启无用的连接。网络服务根据网络传输数据的二次校验，是否有必要开启，数据是否丢失等等。规避网络传输过程延时、丢失等导致的服务器开销。</p>\n<h5 id=\"三次握手数据包举例\"><a href=\"#三次握手数据包举例\" class=\"headerlink\" title=\"三次握手数据包举例\"></a>三次握手数据包举例</h5><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200307.png\"></p>\n<h4 id=\"URI、URL、URN\"><a href=\"#URI、URL、URN\" class=\"headerlink\" title=\"URI、URL、URN\"></a>URI、URL、URN</h4><ul>\n<li>URI：统一资源标志符（Identity），用来唯一标识互联网上的信息资源，包含 URL、URN</li>\n<li><a href=\"https://en.wikipedia.org/wiki/URL\">URL</a>：统一资源定位器（Locator）<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">比如：http：<span class=\"comment\">//user:pass@host.com:80/path?query=string#hash</span></span><br></pre></td></tr></table></figure>\n具体的格式如下<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200317.png\"></li>\n<li>URN：永久统一资源定位符，资源移动之后还可以找到，目前还没有什么好的方案</li>\n</ul>\n<h4 id=\"HTTP-报文格式\"><a href=\"#HTTP-报文格式\" class=\"headerlink\" title=\"HTTP 报文格式\"></a>HTTP 报文格式</h4>","site":{"data":{}},"length":1924,"excerpt":"<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200114.png\"></p>\n<h2 id=\"导学\"><a href=\"#导学\" class=\"headerlink\" title=\"导学\"></a>导学</h2><h3 id=\"现状\"><a href=\"#现状\" class=\"headerlink\" title=\"现状\"></a>现状</h3><ul>\n<li>现在的 WEB 开发不理解 HTTP</li>\n<li>HTTP 相当的重要</li>\n<li>提升自身价值","more":"</li>\n</ul>\n<h3 id=\"简单的例子\"><a href=\"#简单的例子\" class=\"headerlink\" title=\"简单的例子\"></a>简单的例子</h3><ul>\n<li><p>输入 URL 打开网页</p>\n</li>\n<li><p>AJAX 获取数据</p>\n</li>\n<li><p>img 标签加载图片</p>\n</li>\n<li><p>Cache-control 的 public 属性和 private 属性，must-revalidate 属性，no-cache，no-store</p>\n</li>\n<li><p>缓存验证</p>\n<ul>\n<li><p>last-modified 和 if-modified-since 配合验证</p>\n</li>\n<li><p>etag 和 if-modified-since 配合验证</p>\n</li>\n<li><p>CORS 跨域</p>\n</li>\n<li><p>浏览器输入 URL 后 HTTP 请求返回全过程（下图依据 performance 对象）<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200127.png\"></p>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"网络协议\"><a href=\"#网络协议\" class=\"headerlink\" title=\"网络协议\"></a>网络协议</h2><h3 id=\"网络模型介绍\"><a href=\"#网络模型介绍\" class=\"headerlink\" title=\"网络模型介绍\"></a>网络模型介绍</h3><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200237.png\"><br>本文主要讲 HTTP（应用层），HTTP 基于 TCP/IP 协议</p>\n<h4 id=\"底三层\"><a href=\"#底三层\" class=\"headerlink\" title=\"底三层\"></a>底三层</h4><ul>\n<li><p>物理层：定义物理设备如何传输数据</p>\n<p>硬件、网卡端口、光缆</p>\n</li>\n<li><p>数据链路层：通信的实体间建立数据链路连接</p>\n<p>软件服务通过物理设备创建电路的连接</p>\n</li>\n<li><p>网络层：为数据在节点之间传输创建逻辑链路</p>\n<p>访问百度的寻址的逻辑关系</p>\n</li>\n</ul>\n<h4 id=\"传输层\"><a href=\"#传输层\" class=\"headerlink\" title=\"传输层\"></a>传输层</h4><ul>\n<li><p>向用户提供可靠的端到端（End-to-End）服务</p>\n</li>\n<li><p>传输层向高层屏蔽了下层数据通信的细节</p>\n<p>比如本地与百度服务器之间的连接，两端如何传输数据，传输数据的方式；根据数据的大小来分包、分片，接收端的组装，两者的协议的定义。</p>\n</li>\n</ul>\n<h4 id=\"应用层\"><a href=\"#应用层\" class=\"headerlink\" title=\"应用层\"></a>应用层</h4><p>HTTP 就在应用层实现</p>\n<ul>\n<li>为软件提供了很多服务</li>\n<li>构建与 TCP/IP 协议只上</li>\n<li>屏蔽了网络传输的相关细节</li>\n</ul>\n<h3 id=\"HTTP-协议发展历史\"><a href=\"#HTTP-协议发展历史\" class=\"headerlink\" title=\"HTTP 协议发展历史\"></a>HTTP 协议发展历史</h3><h4 id=\"HTTP-0-9\"><a href=\"#HTTP-0-9\" class=\"headerlink\" title=\"HTTP 0.9\"></a>HTTP 0.9</h4><ul>\n<li>只支持 GET 请求</li>\n<li>没有 HEADER 等描述数据的信息</li>\n<li>服务器发送完毕关闭 TCP 连接</li>\n</ul>\n<h4 id=\"HTTP-1-0\"><a href=\"#HTTP-1-0\" class=\"headerlink\" title=\"HTTP 1.0\"></a>HTTP 1.0</h4><ul>\n<li>增加很多命令（POST,HEADER 等）</li>\n<li>增加 status code 和 header</li>\n<li>多字符集支持、多部分发送、权限、缓存等等</li>\n</ul>\n<h4 id=\"HTTP-1-1\"><a href=\"#HTTP-1-1\" class=\"headerlink\" title=\"HTTP 1.1\"></a>HTTP 1.1</h4><ul>\n<li><p>持久连接</p>\n<p>1.0 版本一个请求创建一次 TCP 连接，服务端返回了 TCP 连接就关闭，成本较高；持久连接就不用关闭。</p>\n</li>\n<li><p>pipeline</p>\n<p>同一个链接发送多个请求，发送的请求在一个连接发送多个，服务端进来的请求需要串行排队</p>\n</li>\n<li><p>增加 host 和其他一些命令</p>\n<p>有了 host，就可以在同一台物理服务器上跑多个不同 WEB 服务</p>\n</li>\n</ul>\n<h4 id=\"HTTP-2\"><a href=\"#HTTP-2\" class=\"headerlink\" title=\"HTTP 2\"></a>HTTP 2</h4><ul>\n<li><p>所有的数据都是以二进制传输</p>\n<p>之前的方式大部分是字符串，因此数据的分片方式是不同的，HTTP2 中都是帧传输。</p>\n</li>\n<li><p>同一个连接里面发送多个请求不再需要按照顺序</p>\n<p>并行极大提高了效率</p>\n</li>\n<li><p>头信息压缩及推送等提高效率的功能</p>\n<p>HTTP2 解决 HTTP1 中性能低下的问题而设计的。</p>\n<ul>\n<li>头信息压缩</li>\n</ul>\n<p>HTTP1 中发送请求和返回请求很多的 HTTP 头都是必须要完整的发送和返回的，而这部分头信息比如 header、content-type、cache-control 这些字段是用<strong>字符串</strong>形式保存的，所以占用一定的<strong>带宽</strong>。而在 HTTP2 中就会对头信息压缩，减少带宽使用。</p>\n<ul>\n<li>推送</li>\n</ul>\n<p>常规的客户端为主动方，服务端为被动方。但是在 HTTP2 有推送功能，服务端可以主动发起数据传输。常规的 html 网页是请求 html，再请求其中的资源；HTTP2 的话可以在你请求 html 的时候主动推送资源到客户端，达到并行的效果，提高传输效率。</p>\n</li>\n</ul>\n<h4 id=\"HTTP-三次握手\"><a href=\"#HTTP-三次握手\" class=\"headerlink\" title=\"HTTP 三次握手\"></a>HTTP 三次握手</h4><p>在客户端和服务器在进行 HTTP 的发送和返回过程中，会建立 TCP connection。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200251.png\"><br>HTTP 不存在连接的概念，只存在请求和响应的概念。请求和响应都传输数据包，会经过一个传输的通道，在 TCP 就创建了这样一个连接（通道），这个连接会保持在那里，请求是在这个基础之上发送的。在 TCP 连接上可以发送多个 HTTP 请求。</p>\n<p>这个模式在不同的版本里面有所差别</p>\n<ul>\n<li>HTTP1.0 TCP 连接在 HTTP 请求创建的时候创建服务端想赢回来之后就会关闭</li>\n<li>HTTP1.1 可以声明 TCP 连接保持状态，多个 HTTP 请求都通过这个连接。TCP 连接创建的过程中有三次握手消耗，减少开销。</li>\n<li>HTTP2.0 并发 HTTP 请求。比如：同个用户在请求一个网页的时候只用一个 TCP 连接。</li>\n</ul>\n<h5 id=\"三次握手时序图\"><a href=\"#三次握手时序图\" class=\"headerlink\" title=\"三次握手时序图\"></a>三次握手时序图</h5><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200258.png\"> 1.客户端发起创建数据包的请求。SYN 标志位：创建请求的数据包，Seq=X</p>\n<p>2.服务端接收，开启 TCP SOCKET 端口。返回给客户端：SYN 标志位；ACK:接受到的 Seq+1，为 X+1；Seq：为服务端的 Seq。</p>\n<p>3.服务端发送。发送 ACK=y+1，Seq=Z。</p>\n<p>三次握手的目的:防止服务端开启无用的连接。网络服务根据网络传输数据的二次校验，是否有必要开启，数据是否丢失等等。规避网络传输过程延时、丢失等导致的服务器开销。</p>\n<h5 id=\"三次握手数据包举例\"><a href=\"#三次握手数据包举例\" class=\"headerlink\" title=\"三次握手数据包举例\"></a>三次握手数据包举例</h5><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200307.png\"></p>\n<h4 id=\"URI、URL、URN\"><a href=\"#URI、URL、URN\" class=\"headerlink\" title=\"URI、URL、URN\"></a>URI、URL、URN</h4><ul>\n<li>URI：统一资源标志符（Identity），用来唯一标识互联网上的信息资源，包含 URL、URN</li>\n<li><a href=\"https://en.wikipedia.org/wiki/URL\">URL</a>：统一资源定位器（Locator）<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">比如：http：<span class=\"comment\">//user:pass@host.com:80/path?query=string#hash</span></span><br></pre></td></tr></table></figure>\n具体的格式如下<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200317.png\"></li>\n<li>URN：永久统一资源定位符，资源移动之后还可以找到，目前还没有什么好的方案</li>\n</ul>\n<h4 id=\"HTTP-报文格式\"><a href=\"#HTTP-报文格式\" class=\"headerlink\" title=\"HTTP 报文格式\"></a>HTTP 报文格式</h4>"},{"title":"足球诗人：贺炜经典解说台词语录","abbrlink":"49f3df1b","translate_title":"football-poet-he-weis-classic-commentary-poems","date":"2021-05-11T14:28:10.000Z","_content":"<div style=\"width:100%;height:0px;position:relative;padding-bottom:56.327%;\"><iframe src=\"https://streamja.com/embed/P3vll\" frameborder=\"0\" width=\"100%\" height=\"100%\" allowfullscreen style=\"width:100%;height:100%;position:absolute;\"></iframe></div>\n\n### 贺炜诗意点评德法大战\n\n> 他们会明白莫泊桑的一句话\n> 生活可能不像你想象的那么好\n> 但是也不会像你想象的那么糟\n> 人的脆弱和坚强都超乎了自己的想象\n> 有时候可能脆弱的一句话就泪流满面\n> 有时候你发现自己咬着牙已经走过了很长的路\n\n<!-- more -->\n\n### 贺炜诗意送别西班牙\n\n> 人生当中和成功只是一时的，失败却是主旋律。\n> 但是如何面对失败却把人分成了不同的样子。\n> 有的人会被失败击垮，有的人能够不断地爬起来继续向前。\n> 我想真正的成熟应该并不是追求完美，而是直面自己的缺憾，这才是生活的本质。\n> 罗曼罗兰说过的\n> 这个世上只有一种真正的英雄主义，那就是认清生活的真相，并且仍然热爱它。\n> 西班牙队从头再来吧，\n> 难道向上攀爬的那条路，不是比站在顶峰更让人热血澎湃吗？\n\n### 贺炜送别阿根廷\n\n> 探戈舞曲当中与生俱来的悲情气质和阿根廷队的气质真是有些暗合，挥之不去，就像宿命一样。\n> 不过阿根廷人永远是无休止的朝着心中所爱前进，不断地自我革新，以求更接近自己的目标，这本身就很让人着迷不是吗？\n> 相信很多的阿根廷球迷像他们喜欢的球队一样无怨无悔，你爱上一件事物当然不是爱他的成败，你爱的就是他的气质，对不对？\n> 祝贺德国人，我们也要为阿根廷人鼓掌，任何敢于放弃自我不断革新，为心中的目标不断改变自己的人都值得尊敬！\n\n### 国足 1-5 泰国 贺炜悲情评价\n\n> 好的这个时候来自韩国的主裁判吹响了全场比赛结束的哨音，\n> 2013 年 6 月 15 日，合肥体育中心体育场，中国国家队 1:5 负于泰国国家队。\n> 以上是一句沉痛的结束词。在我结束足球的生涯中，还从来没有如此沉痛的心情过。\n> 我希望这个日子被大家所有人记住，我希望以后会比今天更好。\n> 如果从业者希望以后会更好的话，为这种希望去努力，这样你的人生才会有意义。\n\n### 13 年拜仁夺冠贺炜深情解说\n> 球迷喜欢球队就像是自己的信仰一样\n> 现在有的球迷还能在我们的身边\n> 有的球迷可能已经无法在我们身边\n> 在这个时候如果大家抬头看看星空\n> 我相信还有一科特别闪亮的星星\n> 我们也祝他能够幸福。\n\n## 现在我才发现\n现在我才发现，足球这项运动中有多么大的魅力，原来这其中所包含的情感和哲学，是人这一辈子都需要用心去领悟的。我虽然之前并未玩过足球，但是此时此刻我的心仿佛和他是一起的。\n","source":"_posts/football-poems.md","raw":"---\ntitle: 足球诗人：贺炜经典解说台词语录\nabbrlink: 49f3df1b\ntranslate_title: football-poet-he-weis-classic-commentary-poems\ndate: 2021-05-11 22:28:10\ntags:\n---\n<div style=\"width:100%;height:0px;position:relative;padding-bottom:56.327%;\"><iframe src=\"https://streamja.com/embed/P3vll\" frameborder=\"0\" width=\"100%\" height=\"100%\" allowfullscreen style=\"width:100%;height:100%;position:absolute;\"></iframe></div>\n\n### 贺炜诗意点评德法大战\n\n> 他们会明白莫泊桑的一句话\n> 生活可能不像你想象的那么好\n> 但是也不会像你想象的那么糟\n> 人的脆弱和坚强都超乎了自己的想象\n> 有时候可能脆弱的一句话就泪流满面\n> 有时候你发现自己咬着牙已经走过了很长的路\n\n<!-- more -->\n\n### 贺炜诗意送别西班牙\n\n> 人生当中和成功只是一时的，失败却是主旋律。\n> 但是如何面对失败却把人分成了不同的样子。\n> 有的人会被失败击垮，有的人能够不断地爬起来继续向前。\n> 我想真正的成熟应该并不是追求完美，而是直面自己的缺憾，这才是生活的本质。\n> 罗曼罗兰说过的\n> 这个世上只有一种真正的英雄主义，那就是认清生活的真相，并且仍然热爱它。\n> 西班牙队从头再来吧，\n> 难道向上攀爬的那条路，不是比站在顶峰更让人热血澎湃吗？\n\n### 贺炜送别阿根廷\n\n> 探戈舞曲当中与生俱来的悲情气质和阿根廷队的气质真是有些暗合，挥之不去，就像宿命一样。\n> 不过阿根廷人永远是无休止的朝着心中所爱前进，不断地自我革新，以求更接近自己的目标，这本身就很让人着迷不是吗？\n> 相信很多的阿根廷球迷像他们喜欢的球队一样无怨无悔，你爱上一件事物当然不是爱他的成败，你爱的就是他的气质，对不对？\n> 祝贺德国人，我们也要为阿根廷人鼓掌，任何敢于放弃自我不断革新，为心中的目标不断改变自己的人都值得尊敬！\n\n### 国足 1-5 泰国 贺炜悲情评价\n\n> 好的这个时候来自韩国的主裁判吹响了全场比赛结束的哨音，\n> 2013 年 6 月 15 日，合肥体育中心体育场，中国国家队 1:5 负于泰国国家队。\n> 以上是一句沉痛的结束词。在我结束足球的生涯中，还从来没有如此沉痛的心情过。\n> 我希望这个日子被大家所有人记住，我希望以后会比今天更好。\n> 如果从业者希望以后会更好的话，为这种希望去努力，这样你的人生才会有意义。\n\n### 13 年拜仁夺冠贺炜深情解说\n> 球迷喜欢球队就像是自己的信仰一样\n> 现在有的球迷还能在我们的身边\n> 有的球迷可能已经无法在我们身边\n> 在这个时候如果大家抬头看看星空\n> 我相信还有一科特别闪亮的星星\n> 我们也祝他能够幸福。\n\n## 现在我才发现\n现在我才发现，足球这项运动中有多么大的魅力，原来这其中所包含的情感和哲学，是人这一辈子都需要用心去领悟的。我虽然之前并未玩过足球，但是此时此刻我的心仿佛和他是一起的。\n","slug":"football-poems","published":1,"updated":"2021-09-29T07:53:51.820Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy6bb001fp4vlbax2essc","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><div style=\"width:100%;height:0px;position:relative;padding-bottom:56.327%;\"><iframe src=\"https://streamja.com/embed/P3vll\" frameborder=\"0\" width=\"100%\" height=\"100%\" allowfullscreen style=\"width:100%;height:100%;position:absolute;\"></iframe></div>\n\n<h3 id=\"贺炜诗意点评德法大战\"><a href=\"#贺炜诗意点评德法大战\" class=\"headerlink\" title=\"贺炜诗意点评德法大战\"></a>贺炜诗意点评德法大战</h3><blockquote>\n<p>他们会明白莫泊桑的一句话<br>生活可能不像你想象的那么好<br>但是也不会像你想象的那么糟<br>人的脆弱和坚强都超乎了自己的想象<br>有时候可能脆弱的一句话就泪流满面<br>有时候你发现自己咬着牙已经走过了很长的路</p>\n</blockquote>\n<span id=\"more\"></span>\n\n<h3 id=\"贺炜诗意送别西班牙\"><a href=\"#贺炜诗意送别西班牙\" class=\"headerlink\" title=\"贺炜诗意送别西班牙\"></a>贺炜诗意送别西班牙</h3><blockquote>\n<p>人生当中和成功只是一时的，失败却是主旋律。<br>但是如何面对失败却把人分成了不同的样子。<br>有的人会被失败击垮，有的人能够不断地爬起来继续向前。<br>我想真正的成熟应该并不是追求完美，而是直面自己的缺憾，这才是生活的本质。<br>罗曼罗兰说过的<br>这个世上只有一种真正的英雄主义，那就是认清生活的真相，并且仍然热爱它。<br>西班牙队从头再来吧，<br>难道向上攀爬的那条路，不是比站在顶峰更让人热血澎湃吗？</p>\n</blockquote>\n<h3 id=\"贺炜送别阿根廷\"><a href=\"#贺炜送别阿根廷\" class=\"headerlink\" title=\"贺炜送别阿根廷\"></a>贺炜送别阿根廷</h3><blockquote>\n<p>探戈舞曲当中与生俱来的悲情气质和阿根廷队的气质真是有些暗合，挥之不去，就像宿命一样。<br>不过阿根廷人永远是无休止的朝着心中所爱前进，不断地自我革新，以求更接近自己的目标，这本身就很让人着迷不是吗？<br>相信很多的阿根廷球迷像他们喜欢的球队一样无怨无悔，你爱上一件事物当然不是爱他的成败，你爱的就是他的气质，对不对？<br>祝贺德国人，我们也要为阿根廷人鼓掌，任何敢于放弃自我不断革新，为心中的目标不断改变自己的人都值得尊敬！</p>\n</blockquote>\n<h3 id=\"国足-1-5-泰国-贺炜悲情评价\"><a href=\"#国足-1-5-泰国-贺炜悲情评价\" class=\"headerlink\" title=\"国足 1-5 泰国 贺炜悲情评价\"></a>国足 1-5 泰国 贺炜悲情评价</h3><blockquote>\n<p>好的这个时候来自韩国的主裁判吹响了全场比赛结束的哨音，<br>2013 年 6 月 15 日，合肥体育中心体育场，中国国家队 1:5 负于泰国国家队。<br>以上是一句沉痛的结束词。在我结束足球的生涯中，还从来没有如此沉痛的心情过。<br>我希望这个日子被大家所有人记住，我希望以后会比今天更好。<br>如果从业者希望以后会更好的话，为这种希望去努力，这样你的人生才会有意义。</p>\n</blockquote>\n<h3 id=\"13-年拜仁夺冠贺炜深情解说\"><a href=\"#13-年拜仁夺冠贺炜深情解说\" class=\"headerlink\" title=\"13 年拜仁夺冠贺炜深情解说\"></a>13 年拜仁夺冠贺炜深情解说</h3><blockquote>\n<p>球迷喜欢球队就像是自己的信仰一样<br>现在有的球迷还能在我们的身边<br>有的球迷可能已经无法在我们身边<br>在这个时候如果大家抬头看看星空<br>我相信还有一科特别闪亮的星星<br>我们也祝他能够幸福。</p>\n</blockquote>\n<h2 id=\"现在我才发现\"><a href=\"#现在我才发现\" class=\"headerlink\" title=\"现在我才发现\"></a>现在我才发现</h2><p>现在我才发现，足球这项运动中有多么大的魅力，原来这其中所包含的情感和哲学，是人这一辈子都需要用心去领悟的。我虽然之前并未玩过足球，但是此时此刻我的心仿佛和他是一起的。</p>\n","site":{"data":{}},"length":865,"excerpt":"<div style=\"width:100%;height:0px;position:relative;padding-bottom:56.327%;\"><iframe src=\"https://streamja.com/embed/P3vll\" frameborder=\"0\" width=\"100%\" height=\"100%\" allowfullscreen style=\"width:100%;height:100%;position:absolute;\"></iframe></div>\n\n<h3 id=\"贺炜诗意点评德法大战\"><a href=\"#贺炜诗意点评德法大战\" class=\"headerlink\" title=\"贺炜诗意点评德法大战\"></a>贺炜诗意点评德法大战</h3><blockquote>\n<p>他们会明白莫泊桑的一句话<br>生活可能不像你想象的那么好<br>但是也不会像你想象的那么糟<br>人的脆弱和坚强都超乎了自己的想象<br>有时候可能脆弱的一句话就泪流满面<br>有时候你发现自己咬着牙已经走过了很长的路</p>\n</blockquote>","more":"<h3 id=\"贺炜诗意送别西班牙\"><a href=\"#贺炜诗意送别西班牙\" class=\"headerlink\" title=\"贺炜诗意送别西班牙\"></a>贺炜诗意送别西班牙</h3><blockquote>\n<p>人生当中和成功只是一时的，失败却是主旋律。<br>但是如何面对失败却把人分成了不同的样子。<br>有的人会被失败击垮，有的人能够不断地爬起来继续向前。<br>我想真正的成熟应该并不是追求完美，而是直面自己的缺憾，这才是生活的本质。<br>罗曼罗兰说过的<br>这个世上只有一种真正的英雄主义，那就是认清生活的真相，并且仍然热爱它。<br>西班牙队从头再来吧，<br>难道向上攀爬的那条路，不是比站在顶峰更让人热血澎湃吗？</p>\n</blockquote>\n<h3 id=\"贺炜送别阿根廷\"><a href=\"#贺炜送别阿根廷\" class=\"headerlink\" title=\"贺炜送别阿根廷\"></a>贺炜送别阿根廷</h3><blockquote>\n<p>探戈舞曲当中与生俱来的悲情气质和阿根廷队的气质真是有些暗合，挥之不去，就像宿命一样。<br>不过阿根廷人永远是无休止的朝着心中所爱前进，不断地自我革新，以求更接近自己的目标，这本身就很让人着迷不是吗？<br>相信很多的阿根廷球迷像他们喜欢的球队一样无怨无悔，你爱上一件事物当然不是爱他的成败，你爱的就是他的气质，对不对？<br>祝贺德国人，我们也要为阿根廷人鼓掌，任何敢于放弃自我不断革新，为心中的目标不断改变自己的人都值得尊敬！</p>\n</blockquote>\n<h3 id=\"国足-1-5-泰国-贺炜悲情评价\"><a href=\"#国足-1-5-泰国-贺炜悲情评价\" class=\"headerlink\" title=\"国足 1-5 泰国 贺炜悲情评价\"></a>国足 1-5 泰国 贺炜悲情评价</h3><blockquote>\n<p>好的这个时候来自韩国的主裁判吹响了全场比赛结束的哨音，<br>2013 年 6 月 15 日，合肥体育中心体育场，中国国家队 1:5 负于泰国国家队。<br>以上是一句沉痛的结束词。在我结束足球的生涯中，还从来没有如此沉痛的心情过。<br>我希望这个日子被大家所有人记住，我希望以后会比今天更好。<br>如果从业者希望以后会更好的话，为这种希望去努力，这样你的人生才会有意义。</p>\n</blockquote>\n<h3 id=\"13-年拜仁夺冠贺炜深情解说\"><a href=\"#13-年拜仁夺冠贺炜深情解说\" class=\"headerlink\" title=\"13 年拜仁夺冠贺炜深情解说\"></a>13 年拜仁夺冠贺炜深情解说</h3><blockquote>\n<p>球迷喜欢球队就像是自己的信仰一样<br>现在有的球迷还能在我们的身边<br>有的球迷可能已经无法在我们身边<br>在这个时候如果大家抬头看看星空<br>我相信还有一科特别闪亮的星星<br>我们也祝他能够幸福。</p>\n</blockquote>\n<h2 id=\"现在我才发现\"><a href=\"#现在我才发现\" class=\"headerlink\" title=\"现在我才发现\"></a>现在我才发现</h2><p>现在我才发现，足球这项运动中有多么大的魅力，原来这其中所包含的情感和哲学，是人这一辈子都需要用心去领悟的。我虽然之前并未玩过足球，但是此时此刻我的心仿佛和他是一起的。</p>"},{"title":"CICD实战之Gitlab搭建","abbrlink":"aa4ef8c5","translate_title":"cicd-actual-combat-gitlab-construction","date":"2020-07-26T04:05:29.000Z","_content":"\n## 目的\n\n学习 Gitlab 的搭建\n\n## 正式开始\n\n### 拉取 Gitlab 镜像\n\n```\ndocker pull gitlab/gitlab-ce\n```\n\n我这网速的确感人啊\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930371197-image.png)\n\n<!-- more -->\n\n### 创建 Gitlab 容器\n\n```\nmkdir /home/gitlab #创建Gitlab工作目录\n\ndocker run -itd -p 443:443 \\\n-p 8899:8899 \\\n-p 333:333 \\\n--name gitlab \\\n--restart always \\\n-v /home/gitlab/config:/etc/gitlab \\\n-v /home/gitlab/logs:/var/log/gitlab \\\n-v /home/gitlab/data:/var/opt/gitlab \\\ngitlab/gitlab-ce\n```\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930382739-image.png)\n\n关于：\n\n- --restart: 当 Docker 重启时，容器自动启动，否则就需要使用 docker restart 启动\n- gitlab 端口映射规则：最好内外端口映射一致，gitlab 会根据你的配置文件调整服务端口。如外部访问 8899，内外都配置 8899\n- 一般 Gitlab 有三个端口要使用：ssh，https，主服务地址。\n- ssh 默认是 22，这里我改为了 333，\n\n然后我们在防火墙添加 333 和 8899 端口的放行，并重载防火墙\n\n```bash\nfirewall-cmd --zone=public --add-port=333/tcp --permanent\nfirewall-cmd --zone=public --add-port=8899/tcp --permanent\nsystemctl reload firewalld\n```\n\n我们可以看下现在的运行状况\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930391115-image.png)\n\n### 修改 Gitlab 配置文件\n\n#### 外部路径\n\n```\nvi /home/gitlab/config/gitlab.rb\n```\n\n在文件内增加三条配置：\n\n- external_url: 外部服务访问地址\n- gitlab_rails['gitlab_ssh_host']：SSH 代码拉取地址\n- gitlab_rails['gitlab_shell_ssh_port']：SSH 代码拉取端口\n\n```\nexternal_url 'http://外部访问域名/地址:端口'\ngitlab_rails['gitlab_ssh_host'] = 'SSH外部访问域名/地址'\ngitlab_rails['gitlab_shell_ssh_port'] = SSH端口\n```\n\n我的虚拟机是 192.168.182.3，因此我的填写如下\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930401361-image.png)\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930406859-image.png)\n\n#### 修改 SSH 端口\n\n前面设置的是 333 端口，因此要把默认的 22 端口改为 333 端口。\n\n```\ndocker exec -it gitlab /bin/bash\nvim /assets/sshd_config\nvim /etc/ssh/sshd_config\n```\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930425027-image.png)\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930430871-image.png)\n\n#### 重启 Gitlab\n\n```\ndocker restart gitlab\n```\n\n访问我们的地址端口。如果显示 502 ，则代表正在启动中。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930439978-image.png)\n\n初始化完成就好了\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930448387-image.png)\n\n接下来就是改密码和登录了，登陆之后就进入页面，gitlab 也终于露出了庐山真面目。注意：管理员的账号是**root**。\n\n最后，我们就进入 gitlab 了。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930458016-image.png)\n\n## 结语\n\n至此，我们已经完整搭建了 Gitlab 环境，作为 CICD 不可少的一部分，也算是有了一个良好的开端。撒花！\n","source":"_posts/cicd3.md","raw":"---\ntitle: CICD实战之Gitlab搭建\nabbrlink: aa4ef8c5\ntags:\n  - CICD\ntranslate_title: cicd-actual-combat-gitlab-construction\ndate: 2020-07-26 12:05:29\n---\n\n## 目的\n\n学习 Gitlab 的搭建\n\n## 正式开始\n\n### 拉取 Gitlab 镜像\n\n```\ndocker pull gitlab/gitlab-ce\n```\n\n我这网速的确感人啊\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930371197-image.png)\n\n<!-- more -->\n\n### 创建 Gitlab 容器\n\n```\nmkdir /home/gitlab #创建Gitlab工作目录\n\ndocker run -itd -p 443:443 \\\n-p 8899:8899 \\\n-p 333:333 \\\n--name gitlab \\\n--restart always \\\n-v /home/gitlab/config:/etc/gitlab \\\n-v /home/gitlab/logs:/var/log/gitlab \\\n-v /home/gitlab/data:/var/opt/gitlab \\\ngitlab/gitlab-ce\n```\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930382739-image.png)\n\n关于：\n\n- --restart: 当 Docker 重启时，容器自动启动，否则就需要使用 docker restart 启动\n- gitlab 端口映射规则：最好内外端口映射一致，gitlab 会根据你的配置文件调整服务端口。如外部访问 8899，内外都配置 8899\n- 一般 Gitlab 有三个端口要使用：ssh，https，主服务地址。\n- ssh 默认是 22，这里我改为了 333，\n\n然后我们在防火墙添加 333 和 8899 端口的放行，并重载防火墙\n\n```bash\nfirewall-cmd --zone=public --add-port=333/tcp --permanent\nfirewall-cmd --zone=public --add-port=8899/tcp --permanent\nsystemctl reload firewalld\n```\n\n我们可以看下现在的运行状况\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930391115-image.png)\n\n### 修改 Gitlab 配置文件\n\n#### 外部路径\n\n```\nvi /home/gitlab/config/gitlab.rb\n```\n\n在文件内增加三条配置：\n\n- external_url: 外部服务访问地址\n- gitlab_rails['gitlab_ssh_host']：SSH 代码拉取地址\n- gitlab_rails['gitlab_shell_ssh_port']：SSH 代码拉取端口\n\n```\nexternal_url 'http://外部访问域名/地址:端口'\ngitlab_rails['gitlab_ssh_host'] = 'SSH外部访问域名/地址'\ngitlab_rails['gitlab_shell_ssh_port'] = SSH端口\n```\n\n我的虚拟机是 192.168.182.3，因此我的填写如下\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930401361-image.png)\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930406859-image.png)\n\n#### 修改 SSH 端口\n\n前面设置的是 333 端口，因此要把默认的 22 端口改为 333 端口。\n\n```\ndocker exec -it gitlab /bin/bash\nvim /assets/sshd_config\nvim /etc/ssh/sshd_config\n```\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930425027-image.png)\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930430871-image.png)\n\n#### 重启 Gitlab\n\n```\ndocker restart gitlab\n```\n\n访问我们的地址端口。如果显示 502 ，则代表正在启动中。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930439978-image.png)\n\n初始化完成就好了\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930448387-image.png)\n\n接下来就是改密码和登录了，登陆之后就进入页面，gitlab 也终于露出了庐山真面目。注意：管理员的账号是**root**。\n\n最后，我们就进入 gitlab 了。\n\n![image](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930458016-image.png)\n\n## 结语\n\n至此，我们已经完整搭建了 Gitlab 环境，作为 CICD 不可少的一部分，也算是有了一个良好的开端。撒花！\n","slug":"cicd3","published":1,"updated":"2021-09-29T07:53:51.817Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy6bd001hp4vl0olfdm06","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"目的\"><a href=\"#目的\" class=\"headerlink\" title=\"目的\"></a>目的</h2><p>学习 Gitlab 的搭建</p>\n<h2 id=\"正式开始\"><a href=\"#正式开始\" class=\"headerlink\" title=\"正式开始\"></a>正式开始</h2><h3 id=\"拉取-Gitlab-镜像\"><a href=\"#拉取-Gitlab-镜像\" class=\"headerlink\" title=\"拉取 Gitlab 镜像\"></a>拉取 Gitlab 镜像</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull gitlab/gitlab-ce</span><br></pre></td></tr></table></figure>\n\n<p>我这网速的确感人啊</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930371197-image.png\" alt=\"image\"></p>\n<span id=\"more\"></span>\n\n<h3 id=\"创建-Gitlab-容器\"><a href=\"#创建-Gitlab-容器\" class=\"headerlink\" title=\"创建 Gitlab 容器\"></a>创建 Gitlab 容器</h3><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir <span class=\"regexp\">/home/gi</span>tlab <span class=\"comment\">#创建Gitlab工作目录</span></span><br><span class=\"line\"></span><br><span class=\"line\">docker run -itd -p <span class=\"number\">443</span>:<span class=\"number\">443</span> \\</span><br><span class=\"line\">-p <span class=\"number\">8899</span>:<span class=\"number\">8899</span> \\</span><br><span class=\"line\">-p <span class=\"number\">333</span>:<span class=\"number\">333</span> \\</span><br><span class=\"line\">--name gitlab \\</span><br><span class=\"line\">--restart always \\</span><br><span class=\"line\">-v <span class=\"regexp\">/home/gi</span>tlab<span class=\"regexp\">/config:/</span>etc/gitlab \\</span><br><span class=\"line\">-v <span class=\"regexp\">/home/gi</span>tlab<span class=\"regexp\">/logs:/</span>var<span class=\"regexp\">/log/gi</span>tlab \\</span><br><span class=\"line\">-v <span class=\"regexp\">/home/gi</span>tlab<span class=\"regexp\">/data:/</span>var<span class=\"regexp\">/opt/gi</span>tlab \\</span><br><span class=\"line\">gitlab/gitlab-ce</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930382739-image.png\" alt=\"image\"></p>\n<p>关于：</p>\n<ul>\n<li>–restart: 当 Docker 重启时，容器自动启动，否则就需要使用 docker restart 启动</li>\n<li>gitlab 端口映射规则：最好内外端口映射一致，gitlab 会根据你的配置文件调整服务端口。如外部访问 8899，内外都配置 8899</li>\n<li>一般 Gitlab 有三个端口要使用：ssh，https，主服务地址。</li>\n<li>ssh 默认是 22，这里我改为了 333，</li>\n</ul>\n<p>然后我们在防火墙添加 333 和 8899 端口的放行，并重载防火墙</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --zone=public --add-port=333/tcp --permanent</span><br><span class=\"line\">firewall-cmd --zone=public --add-port=8899/tcp --permanent</span><br><span class=\"line\">systemctl reload firewalld</span><br></pre></td></tr></table></figure>\n\n<p>我们可以看下现在的运行状况</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930391115-image.png\" alt=\"image\"></p>\n<h3 id=\"修改-Gitlab-配置文件\"><a href=\"#修改-Gitlab-配置文件\" class=\"headerlink\" title=\"修改 Gitlab 配置文件\"></a>修改 Gitlab 配置文件</h3><h4 id=\"外部路径\"><a href=\"#外部路径\" class=\"headerlink\" title=\"外部路径\"></a>外部路径</h4><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi <span class=\"regexp\">/home/gi</span>tlab<span class=\"regexp\">/config/gi</span>tlab.rb</span><br></pre></td></tr></table></figure>\n\n<p>在文件内增加三条配置：</p>\n<ul>\n<li>external_url: 外部服务访问地址</li>\n<li>gitlab_rails[‘gitlab_ssh_host’]：SSH 代码拉取地址</li>\n<li>gitlab_rails[‘gitlab_shell_ssh_port’]：SSH 代码拉取端口</li>\n</ul>\n<figure class=\"highlight prolog\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">external_url <span class=\"string\">&#x27;http://外部访问域名/地址:端口&#x27;</span></span><br><span class=\"line\">gitlab_rails[<span class=\"string\">&#x27;gitlab_ssh_host&#x27;</span>] = <span class=\"string\">&#x27;SSH外部访问域名/地址&#x27;</span></span><br><span class=\"line\">gitlab_rails[<span class=\"string\">&#x27;gitlab_shell_ssh_port&#x27;</span>] = <span class=\"symbol\">SSH</span>端口</span><br></pre></td></tr></table></figure>\n\n<p>我的虚拟机是 192.168.182.3，因此我的填写如下</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930401361-image.png\" alt=\"image\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930406859-image.png\" alt=\"image\"></p>\n<h4 id=\"修改-SSH-端口\"><a href=\"#修改-SSH-端口\" class=\"headerlink\" title=\"修改 SSH 端口\"></a>修改 SSH 端口</h4><p>前面设置的是 333 端口，因此要把默认的 22 端口改为 333 端口。</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker exec -it gitlab <span class=\"regexp\">/bin/</span>bash</span><br><span class=\"line\">vim <span class=\"regexp\">/assets/</span>sshd_config</span><br><span class=\"line\">vim <span class=\"regexp\">/etc/</span>ssh/sshd_config</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930425027-image.png\" alt=\"image\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930430871-image.png\" alt=\"image\"></p>\n<h4 id=\"重启-Gitlab\"><a href=\"#重启-Gitlab\" class=\"headerlink\" title=\"重启 Gitlab\"></a>重启 Gitlab</h4><figure class=\"highlight ebnf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">docker restart gitlab</span></span><br></pre></td></tr></table></figure>\n\n<p>访问我们的地址端口。如果显示 502 ，则代表正在启动中。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930439978-image.png\" alt=\"image\"></p>\n<p>初始化完成就好了</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930448387-image.png\" alt=\"image\"></p>\n<p>接下来就是改密码和登录了，登陆之后就进入页面，gitlab 也终于露出了庐山真面目。注意：管理员的账号是<strong>root</strong>。</p>\n<p>最后，我们就进入 gitlab 了。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930458016-image.png\" alt=\"image\"></p>\n<h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p>至此，我们已经完整搭建了 Gitlab 环境，作为 CICD 不可少的一部分，也算是有了一个良好的开端。撒花！</p>\n","site":{"data":{}},"length":1323,"excerpt":"<h2 id=\"目的\"><a href=\"#目的\" class=\"headerlink\" title=\"目的\"></a>目的</h2><p>学习 Gitlab 的搭建</p>\n<h2 id=\"正式开始\"><a href=\"#正式开始\" class=\"headerlink\" title=\"正式开始\"></a>正式开始</h2><h3 id=\"拉取-Gitlab-镜像\"><a href=\"#拉取-Gitlab-镜像\" class=\"headerlink\" title=\"拉取 Gitlab 镜像\"></a>拉取 Gitlab 镜像</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull gitlab/gitlab-ce</span><br></pre></td></tr></table></figure>\n\n<p>我这网速的确感人啊</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930371197-image.png\" alt=\"image\"></p>","more":"<h3 id=\"创建-Gitlab-容器\"><a href=\"#创建-Gitlab-容器\" class=\"headerlink\" title=\"创建 Gitlab 容器\"></a>创建 Gitlab 容器</h3><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir <span class=\"regexp\">/home/gi</span>tlab <span class=\"comment\">#创建Gitlab工作目录</span></span><br><span class=\"line\"></span><br><span class=\"line\">docker run -itd -p <span class=\"number\">443</span>:<span class=\"number\">443</span> \\</span><br><span class=\"line\">-p <span class=\"number\">8899</span>:<span class=\"number\">8899</span> \\</span><br><span class=\"line\">-p <span class=\"number\">333</span>:<span class=\"number\">333</span> \\</span><br><span class=\"line\">--name gitlab \\</span><br><span class=\"line\">--restart always \\</span><br><span class=\"line\">-v <span class=\"regexp\">/home/gi</span>tlab<span class=\"regexp\">/config:/</span>etc/gitlab \\</span><br><span class=\"line\">-v <span class=\"regexp\">/home/gi</span>tlab<span class=\"regexp\">/logs:/</span>var<span class=\"regexp\">/log/gi</span>tlab \\</span><br><span class=\"line\">-v <span class=\"regexp\">/home/gi</span>tlab<span class=\"regexp\">/data:/</span>var<span class=\"regexp\">/opt/gi</span>tlab \\</span><br><span class=\"line\">gitlab/gitlab-ce</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930382739-image.png\" alt=\"image\"></p>\n<p>关于：</p>\n<ul>\n<li>–restart: 当 Docker 重启时，容器自动启动，否则就需要使用 docker restart 启动</li>\n<li>gitlab 端口映射规则：最好内外端口映射一致，gitlab 会根据你的配置文件调整服务端口。如外部访问 8899，内外都配置 8899</li>\n<li>一般 Gitlab 有三个端口要使用：ssh，https，主服务地址。</li>\n<li>ssh 默认是 22，这里我改为了 333，</li>\n</ul>\n<p>然后我们在防火墙添加 333 和 8899 端口的放行，并重载防火墙</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --zone=public --add-port=333/tcp --permanent</span><br><span class=\"line\">firewall-cmd --zone=public --add-port=8899/tcp --permanent</span><br><span class=\"line\">systemctl reload firewalld</span><br></pre></td></tr></table></figure>\n\n<p>我们可以看下现在的运行状况</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930391115-image.png\" alt=\"image\"></p>\n<h3 id=\"修改-Gitlab-配置文件\"><a href=\"#修改-Gitlab-配置文件\" class=\"headerlink\" title=\"修改 Gitlab 配置文件\"></a>修改 Gitlab 配置文件</h3><h4 id=\"外部路径\"><a href=\"#外部路径\" class=\"headerlink\" title=\"外部路径\"></a>外部路径</h4><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi <span class=\"regexp\">/home/gi</span>tlab<span class=\"regexp\">/config/gi</span>tlab.rb</span><br></pre></td></tr></table></figure>\n\n<p>在文件内增加三条配置：</p>\n<ul>\n<li>external_url: 外部服务访问地址</li>\n<li>gitlab_rails[‘gitlab_ssh_host’]：SSH 代码拉取地址</li>\n<li>gitlab_rails[‘gitlab_shell_ssh_port’]：SSH 代码拉取端口</li>\n</ul>\n<figure class=\"highlight prolog\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">external_url <span class=\"string\">&#x27;http://外部访问域名/地址:端口&#x27;</span></span><br><span class=\"line\">gitlab_rails[<span class=\"string\">&#x27;gitlab_ssh_host&#x27;</span>] = <span class=\"string\">&#x27;SSH外部访问域名/地址&#x27;</span></span><br><span class=\"line\">gitlab_rails[<span class=\"string\">&#x27;gitlab_shell_ssh_port&#x27;</span>] = <span class=\"symbol\">SSH</span>端口</span><br></pre></td></tr></table></figure>\n\n<p>我的虚拟机是 192.168.182.3，因此我的填写如下</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930401361-image.png\" alt=\"image\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930406859-image.png\" alt=\"image\"></p>\n<h4 id=\"修改-SSH-端口\"><a href=\"#修改-SSH-端口\" class=\"headerlink\" title=\"修改 SSH 端口\"></a>修改 SSH 端口</h4><p>前面设置的是 333 端口，因此要把默认的 22 端口改为 333 端口。</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker exec -it gitlab <span class=\"regexp\">/bin/</span>bash</span><br><span class=\"line\">vim <span class=\"regexp\">/assets/</span>sshd_config</span><br><span class=\"line\">vim <span class=\"regexp\">/etc/</span>ssh/sshd_config</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930425027-image.png\" alt=\"image\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930430871-image.png\" alt=\"image\"></p>\n<h4 id=\"重启-Gitlab\"><a href=\"#重启-Gitlab\" class=\"headerlink\" title=\"重启 Gitlab\"></a>重启 Gitlab</h4><figure class=\"highlight ebnf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">docker restart gitlab</span></span><br></pre></td></tr></table></figure>\n\n<p>访问我们的地址端口。如果显示 502 ，则代表正在启动中。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930439978-image.png\" alt=\"image\"></p>\n<p>初始化完成就好了</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930448387-image.png\" alt=\"image\"></p>\n<p>接下来就是改密码和登录了，登陆之后就进入页面，gitlab 也终于露出了庐山真面目。注意：管理员的账号是<strong>root</strong>。</p>\n<p>最后，我们就进入 gitlab 了。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-9-24/1600930458016-image.png\" alt=\"image\"></p>\n<h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p>至此，我们已经完整搭建了 Gitlab 环境，作为 CICD 不可少的一部分，也算是有了一个良好的开端。撒花！</p>"},{"title":"hexo添加动态背景","abbrlink":"8201a32f","translate_title":"hexo-add-dynamic-background","date":"2020-09-04T07:07:33.000Z","_content":"\n## 发现\n\n本来想为 hexo 设置背景图片，又不想单调的只有一张图，碰巧发现知乎有个问题：[哪里有获取随机图片的服务接口？](https://www.zhihu.com/question/21168322)，因此就准备加到博客里面，这样也好看一些。\n\n注意这张图的地址是`api`，返回是随机的。\n![](https://unsplash.it/1920/1080/?random)\n\n<!-- more -->\n\n## 资源整理\n\n### 免费的 api\n\n如果有兴趣可以右键打开试试呢\n\n- https://unsplash.it/1920/1080/?random\n- https://api.ixiaowai.cn/gqapi/gqapi.php\n- https://img.xjh.me/random_img.php?type=bg&ctype=nature\n- https://source.unsplash.com/user/erondu/1920x1080\n- http://lorempixel.com/1920/1080/\n- https://picsum.photos/1920/1080\n- https://uploadbeta.com/api/pictures/random/\n- [https://uploadbeta.com/api/pictures/random/?key...](https://uploadbeta.com/api/pictures/random/?key=BingEverydayWallpaperPicture)\n- [https://img.xjh.me/random_img.php](https://img.xjh.me/random_img.php?type=bg&ctype=nature&return=302&device=pc)\n\n### CSS 设置\n我的主题是Hexo的Next主题，我是在`themes\\next\\layout\\_layout.swig`的_layout.swig的body上加了个样式`bosy-class`\n\n然后在`themes\\next\\source\\css\\main.styl`中添加如下样式：\n```CSS\n/* 媒体查询，屏幕太窄了显示背景图片也无用 */\n@media (min-width: 992px){\n  // body 处理\n  .body-class{\n    /* 背景图片的地址 */\n    background: url(https://api.dujin.org/bing/1920.php);\n    /* 不重复 */\n    background-repeat: no-repeat;\n    /* 背景图像的位置固定 */\n    background-attachment: fixed;\n    /* 背景居中 */\n    background-position: 50% 50%;\n    /* 全部覆盖 如果图片小会拉伸，图片大会压缩*/\n    background-size: cover;\n  }\n}\n```\n\n接下来就可以看到背景图片的地址每次都会刷新变化了。\n","source":"_posts/hexo添加动态背景.md","raw":"---\ntitle: hexo添加动态背景\nabbrlink: 8201a32f\ntags:\n  - Hexo\ntranslate_title: hexo-add-dynamic-background\ndate: 2020-09-04 15:07:33\n---\n\n## 发现\n\n本来想为 hexo 设置背景图片，又不想单调的只有一张图，碰巧发现知乎有个问题：[哪里有获取随机图片的服务接口？](https://www.zhihu.com/question/21168322)，因此就准备加到博客里面，这样也好看一些。\n\n注意这张图的地址是`api`，返回是随机的。\n![](https://unsplash.it/1920/1080/?random)\n\n<!-- more -->\n\n## 资源整理\n\n### 免费的 api\n\n如果有兴趣可以右键打开试试呢\n\n- https://unsplash.it/1920/1080/?random\n- https://api.ixiaowai.cn/gqapi/gqapi.php\n- https://img.xjh.me/random_img.php?type=bg&ctype=nature\n- https://source.unsplash.com/user/erondu/1920x1080\n- http://lorempixel.com/1920/1080/\n- https://picsum.photos/1920/1080\n- https://uploadbeta.com/api/pictures/random/\n- [https://uploadbeta.com/api/pictures/random/?key...](https://uploadbeta.com/api/pictures/random/?key=BingEverydayWallpaperPicture)\n- [https://img.xjh.me/random_img.php](https://img.xjh.me/random_img.php?type=bg&ctype=nature&return=302&device=pc)\n\n### CSS 设置\n我的主题是Hexo的Next主题，我是在`themes\\next\\layout\\_layout.swig`的_layout.swig的body上加了个样式`bosy-class`\n\n然后在`themes\\next\\source\\css\\main.styl`中添加如下样式：\n```CSS\n/* 媒体查询，屏幕太窄了显示背景图片也无用 */\n@media (min-width: 992px){\n  // body 处理\n  .body-class{\n    /* 背景图片的地址 */\n    background: url(https://api.dujin.org/bing/1920.php);\n    /* 不重复 */\n    background-repeat: no-repeat;\n    /* 背景图像的位置固定 */\n    background-attachment: fixed;\n    /* 背景居中 */\n    background-position: 50% 50%;\n    /* 全部覆盖 如果图片小会拉伸，图片大会压缩*/\n    background-size: cover;\n  }\n}\n```\n\n接下来就可以看到背景图片的地址每次都会刷新变化了。\n","slug":"hexo添加动态背景","published":1,"updated":"2021-09-29T07:53:51.821Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy6be001ip4vlhbxf2q33","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"发现\"><a href=\"#发现\" class=\"headerlink\" title=\"发现\"></a>发现</h2><p>本来想为 hexo 设置背景图片，又不想单调的只有一张图，碰巧发现知乎有个问题：<a href=\"https://www.zhihu.com/question/21168322\">哪里有获取随机图片的服务接口？</a>，因此就准备加到博客里面，这样也好看一些。</p>\n<p>注意这张图的地址是<code>api</code>，返回是随机的。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://unsplash.it/1920/1080/?random\"></p>\n<span id=\"more\"></span>\n\n<h2 id=\"资源整理\"><a href=\"#资源整理\" class=\"headerlink\" title=\"资源整理\"></a>资源整理</h2><h3 id=\"免费的-api\"><a href=\"#免费的-api\" class=\"headerlink\" title=\"免费的 api\"></a>免费的 api</h3><p>如果有兴趣可以右键打开试试呢</p>\n<ul>\n<li><a href=\"https://unsplash.it/1920/1080/?random\">https://unsplash.it/1920/1080/?random</a></li>\n<li><a href=\"https://api.ixiaowai.cn/gqapi/gqapi.php\">https://api.ixiaowai.cn/gqapi/gqapi.php</a></li>\n<li><a href=\"https://img.xjh.me/random_img.php?type=bg&amp;ctype=nature\">https://img.xjh.me/random_img.php?type=bg&amp;ctype=nature</a></li>\n<li><a href=\"https://source.unsplash.com/user/erondu/1920x1080\">https://source.unsplash.com/user/erondu/1920x1080</a></li>\n<li><a href=\"http://lorempixel.com/1920/1080/\">http://lorempixel.com/1920/1080/</a></li>\n<li><a href=\"https://picsum.photos/1920/1080\">https://picsum.photos/1920/1080</a></li>\n<li><a href=\"https://uploadbeta.com/api/pictures/random/\">https://uploadbeta.com/api/pictures/random/</a></li>\n<li><a href=\"https://uploadbeta.com/api/pictures/random/?key=BingEverydayWallpaperPicture\">https://uploadbeta.com/api/pictures/random/?key…</a></li>\n<li><a href=\"https://img.xjh.me/random_img.php?type=bg&ctype=nature&return=302&device=pc\">https://img.xjh.me/random_img.php</a></li>\n</ul>\n<h3 id=\"CSS-设置\"><a href=\"#CSS-设置\" class=\"headerlink\" title=\"CSS 设置\"></a>CSS 设置</h3><p>我的主题是Hexo的Next主题，我是在<code>themes\\next\\layout\\_layout.swig</code>的_layout.swig的body上加了个样式<code>bosy-class</code></p>\n<p>然后在<code>themes\\next\\source\\css\\main.styl</code>中添加如下样式：</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* 媒体查询，屏幕太窄了显示背景图片也无用 */</span></span><br><span class=\"line\"><span class=\"keyword\">@media</span> (<span class=\"attribute\">min-width</span>: <span class=\"number\">992px</span>)&#123;</span><br><span class=\"line\">  // <span class=\"selector-tag\">body</span> 处理</span><br><span class=\"line\">  <span class=\"selector-class\">.body-class</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/* 背景图片的地址 */</span></span><br><span class=\"line\">    <span class=\"attribute\">background</span>: <span class=\"built_in\">url</span>(<span class=\"string\">https://api.dujin.org/bing/1920.php</span>);</span><br><span class=\"line\">    <span class=\"comment\">/* 不重复 */</span></span><br><span class=\"line\">    <span class=\"attribute\">background-repeat</span>: no-repeat;</span><br><span class=\"line\">    <span class=\"comment\">/* 背景图像的位置固定 */</span></span><br><span class=\"line\">    <span class=\"attribute\">background-attachment</span>: fixed;</span><br><span class=\"line\">    <span class=\"comment\">/* 背景居中 */</span></span><br><span class=\"line\">    <span class=\"attribute\">background-position</span>: <span class=\"number\">50%</span> <span class=\"number\">50%</span>;</span><br><span class=\"line\">    <span class=\"comment\">/* 全部覆盖 如果图片小会拉伸，图片大会压缩*/</span></span><br><span class=\"line\">    <span class=\"attribute\">background-size</span>: cover;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>接下来就可以看到背景图片的地址每次都会刷新变化了。</p>\n","site":{"data":{}},"length":979,"excerpt":"<h2 id=\"发现\"><a href=\"#发现\" class=\"headerlink\" title=\"发现\"></a>发现</h2><p>本来想为 hexo 设置背景图片，又不想单调的只有一张图，碰巧发现知乎有个问题：<a href=\"https://www.zhihu.com/question/21168322\">哪里有获取随机图片的服务接口？</a>，因此就准备加到博客里面，这样也好看一些。</p>\n<p>注意这张图的地址是<code>api</code>，返回是随机的。<br><img src=\"https://unsplash.it/1920/1080/?random\"></p>","more":"<h2 id=\"资源整理\"><a href=\"#资源整理\" class=\"headerlink\" title=\"资源整理\"></a>资源整理</h2><h3 id=\"免费的-api\"><a href=\"#免费的-api\" class=\"headerlink\" title=\"免费的 api\"></a>免费的 api</h3><p>如果有兴趣可以右键打开试试呢</p>\n<ul>\n<li><a href=\"https://unsplash.it/1920/1080/?random\">https://unsplash.it/1920/1080/?random</a></li>\n<li><a href=\"https://api.ixiaowai.cn/gqapi/gqapi.php\">https://api.ixiaowai.cn/gqapi/gqapi.php</a></li>\n<li><a href=\"https://img.xjh.me/random_img.php?type=bg&amp;ctype=nature\">https://img.xjh.me/random_img.php?type=bg&amp;ctype=nature</a></li>\n<li><a href=\"https://source.unsplash.com/user/erondu/1920x1080\">https://source.unsplash.com/user/erondu/1920x1080</a></li>\n<li><a href=\"http://lorempixel.com/1920/1080/\">http://lorempixel.com/1920/1080/</a></li>\n<li><a href=\"https://picsum.photos/1920/1080\">https://picsum.photos/1920/1080</a></li>\n<li><a href=\"https://uploadbeta.com/api/pictures/random/\">https://uploadbeta.com/api/pictures/random/</a></li>\n<li><a href=\"https://uploadbeta.com/api/pictures/random/?key=BingEverydayWallpaperPicture\">https://uploadbeta.com/api/pictures/random/?key…</a></li>\n<li><a href=\"https://img.xjh.me/random_img.php?type=bg&ctype=nature&return=302&device=pc\">https://img.xjh.me/random_img.php</a></li>\n</ul>\n<h3 id=\"CSS-设置\"><a href=\"#CSS-设置\" class=\"headerlink\" title=\"CSS 设置\"></a>CSS 设置</h3><p>我的主题是Hexo的Next主题，我是在<code>themes\\next\\layout\\_layout.swig</code>的_layout.swig的body上加了个样式<code>bosy-class</code></p>\n<p>然后在<code>themes\\next\\source\\css\\main.styl</code>中添加如下样式：</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* 媒体查询，屏幕太窄了显示背景图片也无用 */</span></span><br><span class=\"line\"><span class=\"keyword\">@media</span> (<span class=\"attribute\">min-width</span>: <span class=\"number\">992px</span>)&#123;</span><br><span class=\"line\">  // <span class=\"selector-tag\">body</span> 处理</span><br><span class=\"line\">  <span class=\"selector-class\">.body-class</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/* 背景图片的地址 */</span></span><br><span class=\"line\">    <span class=\"attribute\">background</span>: <span class=\"built_in\">url</span>(<span class=\"string\">https://api.dujin.org/bing/1920.php</span>);</span><br><span class=\"line\">    <span class=\"comment\">/* 不重复 */</span></span><br><span class=\"line\">    <span class=\"attribute\">background-repeat</span>: no-repeat;</span><br><span class=\"line\">    <span class=\"comment\">/* 背景图像的位置固定 */</span></span><br><span class=\"line\">    <span class=\"attribute\">background-attachment</span>: fixed;</span><br><span class=\"line\">    <span class=\"comment\">/* 背景居中 */</span></span><br><span class=\"line\">    <span class=\"attribute\">background-position</span>: <span class=\"number\">50%</span> <span class=\"number\">50%</span>;</span><br><span class=\"line\">    <span class=\"comment\">/* 全部覆盖 如果图片小会拉伸，图片大会压缩*/</span></span><br><span class=\"line\">    <span class=\"attribute\">background-size</span>: cover;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>接下来就可以看到背景图片的地址每次都会刷新变化了。</p>"},{"title":"培养自己的主人翁意识","abbrlink":"f2b706b7","translate_title":"cultivate-your-own-sense-of-ownership","date":"2020-07-02T13:09:11.000Z","_content":"## 缘起\n\n成长和沉淀，听起来是那么的空洞，其实本质还是在于内心的意识和格局的变化。\n\n有时候我们经常抱怨，要是当初就想到这一点就好了；比如：当初应该早一点开始投资基金、股票，早一点阅读一些关于某某方面的书籍等等。我想这不是在于少数，我也不时有这种“马后炮”想法。归其原因，有可能是我们的社交环境造成了思维局限，还有就是自己的处理事情主观能动性。\n\n而今天我想讲的就是一种“主人翁意识”。\n\n<!-- more -->\n\n## 经过\n\n前些日子在做一个需求任务，我已经知道我这部分的具体工作是什么，也已经按部就班的开展了，也知道与我后端的工作是什么。但是需求里面却没有看到后端前去建任务。当时想着，**反正这个部分不是我的任务，因为不是负责，不用管了**。因此就没有后端同事往上面添加任务。\n\n不久，在需求迭代会上，总结前面的工作，才发现后端同事貌似还不知道这件事情，还没有计划工时，还没有排期。然后临时安排人员，计划时间。\n\n这虽然是一个小事情，功能也不算复杂，加紧做了就是了。但是倘若之前我发现了就提出这个任务及时安排人员呢，说不定现在已经做完了。\n\n其实，在这个小细节中就体现了你所处的思考角度。我此时仅仅扮演的是执行者的角度，别人叫我做什么任务我就做什么任务。倘若我再费心一点点，问一下后端，他们就会安排人，也体现了我对这件事情的责任感，整体任务的进度也就不同了。\n\n## 体会\n\n\n\n以一种执行者的角度去工作，一直都是做事情，做什么事情，时间节点是什么。别人不安排我就不用做，别人不说我也不知道。倘若以一种主人翁的角度去做事情，会想的是为什么做，怎么做，怎么去协调资源，最终把事情做好。如果发现了问题就会去协调咨询和安排，因为这个时候已经站在一种管理者的维度了。这样去处理事情，自己扮演的也是一种项目推动者的角色。\n\n这就是主人翁的意识，摆正自己的位置，端正自己的态度，站在自己的上面一层思考问题；这样，一方面推进了任务进度，另一方面也强调了自己在团队中的重要性。在工作中有这样的意识往往也会得到同事和领导的信赖，也是区别于常人一种不错的心理素质。\n\n\n\n\n\n","source":"_posts/master.md","raw":"---\ntitle: 培养自己的主人翁意识\nabbrlink: f2b706b7\ntags:\n  - 心得\ntranslate_title: cultivate-your-own-sense-of-ownership\ndate: 2020-07-02 21:09:11\n---\n## 缘起\n\n成长和沉淀，听起来是那么的空洞，其实本质还是在于内心的意识和格局的变化。\n\n有时候我们经常抱怨，要是当初就想到这一点就好了；比如：当初应该早一点开始投资基金、股票，早一点阅读一些关于某某方面的书籍等等。我想这不是在于少数，我也不时有这种“马后炮”想法。归其原因，有可能是我们的社交环境造成了思维局限，还有就是自己的处理事情主观能动性。\n\n而今天我想讲的就是一种“主人翁意识”。\n\n<!-- more -->\n\n## 经过\n\n前些日子在做一个需求任务，我已经知道我这部分的具体工作是什么，也已经按部就班的开展了，也知道与我后端的工作是什么。但是需求里面却没有看到后端前去建任务。当时想着，**反正这个部分不是我的任务，因为不是负责，不用管了**。因此就没有后端同事往上面添加任务。\n\n不久，在需求迭代会上，总结前面的工作，才发现后端同事貌似还不知道这件事情，还没有计划工时，还没有排期。然后临时安排人员，计划时间。\n\n这虽然是一个小事情，功能也不算复杂，加紧做了就是了。但是倘若之前我发现了就提出这个任务及时安排人员呢，说不定现在已经做完了。\n\n其实，在这个小细节中就体现了你所处的思考角度。我此时仅仅扮演的是执行者的角度，别人叫我做什么任务我就做什么任务。倘若我再费心一点点，问一下后端，他们就会安排人，也体现了我对这件事情的责任感，整体任务的进度也就不同了。\n\n## 体会\n\n\n\n以一种执行者的角度去工作，一直都是做事情，做什么事情，时间节点是什么。别人不安排我就不用做，别人不说我也不知道。倘若以一种主人翁的角度去做事情，会想的是为什么做，怎么做，怎么去协调资源，最终把事情做好。如果发现了问题就会去协调咨询和安排，因为这个时候已经站在一种管理者的维度了。这样去处理事情，自己扮演的也是一种项目推动者的角色。\n\n这就是主人翁的意识，摆正自己的位置，端正自己的态度，站在自己的上面一层思考问题；这样，一方面推进了任务进度，另一方面也强调了自己在团队中的重要性。在工作中有这样的意识往往也会得到同事和领导的信赖，也是区别于常人一种不错的心理素质。\n\n\n\n\n\n","slug":"master","published":1,"updated":"2021-09-29T07:53:51.822Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy6bf001lp4vlaxo63tdk","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"缘起\"><a href=\"#缘起\" class=\"headerlink\" title=\"缘起\"></a>缘起</h2><p>成长和沉淀，听起来是那么的空洞，其实本质还是在于内心的意识和格局的变化。</p>\n<p>有时候我们经常抱怨，要是当初就想到这一点就好了；比如：当初应该早一点开始投资基金、股票，早一点阅读一些关于某某方面的书籍等等。我想这不是在于少数，我也不时有这种“马后炮”想法。归其原因，有可能是我们的社交环境造成了思维局限，还有就是自己的处理事情主观能动性。</p>\n<p>而今天我想讲的就是一种“主人翁意识”。</p>\n<span id=\"more\"></span>\n\n<h2 id=\"经过\"><a href=\"#经过\" class=\"headerlink\" title=\"经过\"></a>经过</h2><p>前些日子在做一个需求任务，我已经知道我这部分的具体工作是什么，也已经按部就班的开展了，也知道与我后端的工作是什么。但是需求里面却没有看到后端前去建任务。当时想着，<strong>反正这个部分不是我的任务，因为不是负责，不用管了</strong>。因此就没有后端同事往上面添加任务。</p>\n<p>不久，在需求迭代会上，总结前面的工作，才发现后端同事貌似还不知道这件事情，还没有计划工时，还没有排期。然后临时安排人员，计划时间。</p>\n<p>这虽然是一个小事情，功能也不算复杂，加紧做了就是了。但是倘若之前我发现了就提出这个任务及时安排人员呢，说不定现在已经做完了。</p>\n<p>其实，在这个小细节中就体现了你所处的思考角度。我此时仅仅扮演的是执行者的角度，别人叫我做什么任务我就做什么任务。倘若我再费心一点点，问一下后端，他们就会安排人，也体现了我对这件事情的责任感，整体任务的进度也就不同了。</p>\n<h2 id=\"体会\"><a href=\"#体会\" class=\"headerlink\" title=\"体会\"></a>体会</h2><p>以一种执行者的角度去工作，一直都是做事情，做什么事情，时间节点是什么。别人不安排我就不用做，别人不说我也不知道。倘若以一种主人翁的角度去做事情，会想的是为什么做，怎么做，怎么去协调资源，最终把事情做好。如果发现了问题就会去协调咨询和安排，因为这个时候已经站在一种管理者的维度了。这样去处理事情，自己扮演的也是一种项目推动者的角色。</p>\n<p>这就是主人翁的意识，摆正自己的位置，端正自己的态度，站在自己的上面一层思考问题；这样，一方面推进了任务进度，另一方面也强调了自己在团队中的重要性。在工作中有这样的意识往往也会得到同事和领导的信赖，也是区别于常人一种不错的心理素质。</p>\n","site":{"data":{}},"length":828,"excerpt":"<h2 id=\"缘起\"><a href=\"#缘起\" class=\"headerlink\" title=\"缘起\"></a>缘起</h2><p>成长和沉淀，听起来是那么的空洞，其实本质还是在于内心的意识和格局的变化。</p>\n<p>有时候我们经常抱怨，要是当初就想到这一点就好了；比如：当初应该早一点开始投资基金、股票，早一点阅读一些关于某某方面的书籍等等。我想这不是在于少数，我也不时有这种“马后炮”想法。归其原因，有可能是我们的社交环境造成了思维局限，还有就是自己的处理事情主观能动性。</p>\n<p>而今天我想讲的就是一种“主人翁意识”。</p>","more":"<h2 id=\"经过\"><a href=\"#经过\" class=\"headerlink\" title=\"经过\"></a>经过</h2><p>前些日子在做一个需求任务，我已经知道我这部分的具体工作是什么，也已经按部就班的开展了，也知道与我后端的工作是什么。但是需求里面却没有看到后端前去建任务。当时想着，<strong>反正这个部分不是我的任务，因为不是负责，不用管了</strong>。因此就没有后端同事往上面添加任务。</p>\n<p>不久，在需求迭代会上，总结前面的工作，才发现后端同事貌似还不知道这件事情，还没有计划工时，还没有排期。然后临时安排人员，计划时间。</p>\n<p>这虽然是一个小事情，功能也不算复杂，加紧做了就是了。但是倘若之前我发现了就提出这个任务及时安排人员呢，说不定现在已经做完了。</p>\n<p>其实，在这个小细节中就体现了你所处的思考角度。我此时仅仅扮演的是执行者的角度，别人叫我做什么任务我就做什么任务。倘若我再费心一点点，问一下后端，他们就会安排人，也体现了我对这件事情的责任感，整体任务的进度也就不同了。</p>\n<h2 id=\"体会\"><a href=\"#体会\" class=\"headerlink\" title=\"体会\"></a>体会</h2><p>以一种执行者的角度去工作，一直都是做事情，做什么事情，时间节点是什么。别人不安排我就不用做，别人不说我也不知道。倘若以一种主人翁的角度去做事情，会想的是为什么做，怎么做，怎么去协调资源，最终把事情做好。如果发现了问题就会去协调咨询和安排，因为这个时候已经站在一种管理者的维度了。这样去处理事情，自己扮演的也是一种项目推动者的角色。</p>\n<p>这就是主人翁的意识，摆正自己的位置，端正自己的态度，站在自己的上面一层思考问题；这样，一方面推进了任务进度，另一方面也强调了自己在团队中的重要性。在工作中有这样的意识往往也会得到同事和领导的信赖，也是区别于常人一种不错的心理素质。</p>"},{"title":"Hello World","abbrlink":"4a17b156","translate_title":"hello-world","date":"2020-03-20T16:00:00.000Z","_content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n<!-- more -->\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n","source":"_posts/hello-world.md","raw":"---\ntitle: Hello World\nabbrlink: 4a17b156\ntranslate_title: hello-world\ndate: 2020-03-21 00:00:00\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n<!-- more -->\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n","slug":"hello-world","published":1,"updated":"2021-09-29T07:53:51.821Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy6bg001np4vld7qv5hax","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n<span id=\"more\"></span>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n","site":{"data":{}},"length":367,"excerpt":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>","more":"<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>"},{"title":"春日的太阳","abbrlink":"9b338b9","translate_title":"spring-sun","date":"2020-03-24T15:44:30.000Z","_content":"> 我们可能不经意间想起\n> 有走过的路\n> 有说过的话\n> 有吃过的饭\n\n\n> 本来谁都不打算告诉的\n> 只是某天阳光照进来\n> 突然间仿佛记起了全部\n> 然后只想告诉给她今天灿烂的太阳\n\n在某一天，太阳出来了。看到这样的景色，我准备了一箩筐话，碎碎念了好多遍，见你之后，轻轻说了句，今天的太阳真好。--2020年2月21日\n","source":"_posts/poems-sunny.md","raw":"---\ntitle: 春日的太阳\ntags:\n  - 小诗\nabbrlink: 9b338b9\ntranslate_title: spring-sun\ndate: 2020-03-24 23:44:30\n---\n> 我们可能不经意间想起\n> 有走过的路\n> 有说过的话\n> 有吃过的饭\n\n\n> 本来谁都不打算告诉的\n> 只是某天阳光照进来\n> 突然间仿佛记起了全部\n> 然后只想告诉给她今天灿烂的太阳\n\n在某一天，太阳出来了。看到这样的景色，我准备了一箩筐话，碎碎念了好多遍，见你之后，轻轻说了句，今天的太阳真好。--2020年2月21日\n","slug":"poems-sunny","published":1,"updated":"2021-09-29T07:53:51.823Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy6bi001qp4vl1vw19ijn","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><blockquote>\n<p>我们可能不经意间想起<br>有走过的路<br>有说过的话<br>有吃过的饭</p>\n</blockquote>\n<blockquote>\n<p>本来谁都不打算告诉的<br>只是某天阳光照进来<br>突然间仿佛记起了全部<br>然后只想告诉给她今天灿烂的太阳</p>\n</blockquote>\n<p>在某一天，太阳出来了。看到这样的景色，我准备了一箩筐话，碎碎念了好多遍，见你之后，轻轻说了句，今天的太阳真好。–2020年2月21日</p>\n","site":{"data":{}},"length":135,"excerpt":"","more":"<blockquote>\n<p>我们可能不经意间想起<br>有走过的路<br>有说过的话<br>有吃过的饭</p>\n</blockquote>\n<blockquote>\n<p>本来谁都不打算告诉的<br>只是某天阳光照进来<br>突然间仿佛记起了全部<br>然后只想告诉给她今天灿烂的太阳</p>\n</blockquote>\n<p>在某一天，太阳出来了。看到这样的景色，我准备了一箩筐话，碎碎念了好多遍，见你之后，轻轻说了句，今天的太阳真好。–2020年2月21日</p>\n"},{"title":"关于画点连线的思考","abbrlink":"4e9a8293","translate_title":"thoughts-on-drawing-dotted-lines","date":"2021-03-20T11:00:23.000Z","_content":"\n## 前言\n\n点和线是平面世界的基础，而画点连线更是基本操作。但是关于画点连线的方法，以及所能带来的思考，也是蛮有意思的。\n\n在这片文章中，我会简单分析画点连线的基本方法。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210404111938.png)\n\n<!-- more -->\n\n## 一起来画画\n\n### 基本的画点连线\n\n在这个章节，我们会创建 `canvas` 并且在上面获取鼠标的点的位置，并且将点放入一个数组存储，用直线连接起来。为了方便操作，我们使用 [PIXI](https://www.pixijs.com/) 这个库来简化操作。\n\n具体的细节步骤如下：\n\n- 首先使用 PIXI 初始化应用，创建一个舞台\n- 然后获取 app.view，在 canvas 上面绑定点击事件\n- 获取点击事件的具体的坐标，在对应位置绘制圆，将其放入数组存储\n- 循环遍历数组，将两点依次连线，绘制出图形。\n\n便可以得出以下的效果\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210327114145.png)\n也可以在下面的环境中测试。\n\n<p class=\"codepen\" data-height=\"600\" data-theme-id=\"dark\" data-default-tab=\"js,result\" data-user=\"kitety\" data-slug-hash=\"xxgVzpW\" data-preview=\"true\" style=\"height: 600px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;\" data-pen-title=\"xxgVzpW\">\n  <span>See the Pen <a href=\"https://codepen.io/kitety/pen/xxgVzpW\">\n  xxgVzpW</a> by kitety (<a href=\"https://codepen.io/kitety\">@kitety</a>)\n  on <a href=\"https://codepen.io\">CodePen</a>.</span>\n</p>\n<script async src=\"https://cpwebassets.codepen.io/assets/embed/ei.js\"></script>\n\n上述的 demo 基本的实现了直线连接，但是表述很生硬，就是一段一段的线段，没有任何的美感。假如我们想要的是折线图，这就已经实现目标了，但是如果我们想要的是有点美感的曲线呢？这应该怎么做呢？这个时候就该我们的贝赛尔曲线登场了。\n\n### 贝赛尔曲线\n\n在[维基百科](https://zh.wikipedia.org/wiki/%E8%B2%9D%E8%8C%B2%E6%9B%B2%E7%B7%9A)中，他是这么解释的：在数学的数值分析领域中，贝塞尔曲线（英语：Bézier curve）是计算机图形学中相当重要的参数曲线。\n\n感觉还是不理解，详细的过程可以参考这篇[文章](https://github.com/hujiulong/blog/issues/1)\n\n本节不是对贝塞尔曲线做专业分析，如果有需要请参考其他网站，本文引用已经列举出来了。\n\n#### 二次贝赛尔曲线\n\n大概的二次贝赛尔曲线就如下图所示：\n![](https://z3.ax1x.com/2021/03/27/6x5yX4.gif)\n二次贝塞尔曲线由三个点 `P0`、`P1`、`P2` 来确定，这些点也叫做控制点。我们需要三个点就可以绘制出一条二次贝赛尔曲线，在 `canvas` 中的对应的方法就是`quadraticCurveTo`这个方法。\n\n#### 高次贝塞尔曲线\n\n随着控制点的个数的增加，可以有三次，四次，N 次贝赛尔曲线，再多就不过多探讨。需要提示一下，绘制三次贝塞尔曲线的方法`bezierCurveTo`。\n\n### 使用贝塞尔曲线绘制平滑曲线\n\n要想绘制贝赛尔曲线，我们最简单的思路就是需要找准起点，控制点，终点。\n\n最简单的就是假如我们有 A、B、C 三个点，我们需要绘制一条看似还算完美的曲线，我们应该怎么去思考呢？\n\n我们会计算出 B 和 C 的中点 B1，以 A 为起点，B 为控制点，B1 为终点，最后将 B1、C 用直线链接。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210327121024.png)\n\n当然这只是三个点的情况，我们如此循环往复就可以绘制足够多的点了。\n\n#### 代码简析\n\n```javascript\nfunction drawLine() {\n  // 绘制之前全部清除\n  for (let ii = 0; ii < ss.length; ii++) {\n    const bezier = ss[ii];\n    app.stage.removeChild(bezier);\n  }\n  ss = [];\n\n  let start = arr[0];\n  if (arr.length === 2) {\n    // 两个点直接连线\n    drawBaseLine(start.pos, arr[1].pos);\n  }\n  if (arr.length >= 3) {\n    for (let i = 1; i < arr.length; i++) {\n      let control = arr[i];\n      let end;\n      if (!arr[i + 1]) {\n        // 后面没有点了，将上一个贝塞尔曲线的终点和当前点连接\n        drawBaseLine(start.pos, arr[i].pos);\n        return;\n      } else {\n        // 将贝赛尔曲线终点设置为两点之间的中点\n        end = getMiddle(arr[i], arr[i + 1]);\n      }\n      //  绘制贝赛尔曲线\n      var bezier = new PIXI.Graphics();\n\n      bezier.lineStyle(4, 0x1a7af8, 1);\n      bezier.moveTo(start.pos.x, start.pos.y);\n      bezier.quadraticCurveTo(\n        control.pos.x,\n        control.pos.y,\n        end.pos.x,\n        end.pos.y\n      );\n      bezier.endFill();\n      start = end;\n      app.stage.addChild(bezier);\n      ss.push(bezier);\n    }\n  }\n}\n```\n\n这样我们就可以尽量绘制出比较平滑的曲线了\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210327123049.png)\n也可以在下面的环境中测试。\n\n<p class=\"codepen\" data-height=\"600\" data-theme-id=\"dark\" data-default-tab=\"js,result\" data-user=\"kitety\" data-slug-hash=\"eYgZjOM\" data-preview=\"true\" style=\"height: 600px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;\" data-pen-title=\"eYgZjOM\">\n  <span>See the Pen <a href=\"https://codepen.io/kitety/pen/eYgZjOM\">\n  eYgZjOM</a> by kitety (<a href=\"https://codepen.io/kitety\">@kitety</a>)\n  on <a href=\"https://codepen.io\">CodePen</a>.</span>\n</p>\n<script async src=\"https://cpwebassets.codepen.io/assets/embed/ei.js\"></script>\n\n上述的代码基本是实现了比较平滑的曲线，但是我们的还是会发现一些问题，就是在绘制的时候会出现画出来的线并没有经过所有点这种情况。而且参考的文章下面也有了类似的思考，一样抛出了这个问题。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210404111818.png)\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210327123211.png)\n看来革命尚未成功，同志仍需努力啊。\n\n### 相似三角形与贝赛尔曲线\n\n其实在处理问题的时候，我们需要将问题简单化。比如在画点连线的过程中，我们很轻易的知道，两点之间肯定是连接直线就是最佳的。在需要曲线的时候，往往是两个点以上，因此我们就先画好三个点的曲线。\n\n#### 切线\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210327135731.png)\n如图，我们为三个点分了三种情况，其实前面两种很明显都是不合理的，都出现了没有必要的弯曲，只有最后一种稍显合理。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210327135938.png)\n我们围绕三种情况 B 点的位置做出切线，发现只有看 k1 和 k2 的斜率几乎一直的时候才是比较合理的曲线，也就是三点中，曲线经过中间一点的切线和另外两点所成的直线平行的时候，这样的曲线才是比较合理的。\n\n#### 贝塞尔切线\n\n而贝赛尔曲线的绘制图如下\n![](https://z3.ax1x.com/2021/03/27/6x5yX4.gif)\n我们截取中间的某个时刻会发现，很明显，贝塞尔曲线的起点和终点（其实也是控制点），他们的切线其实就是和轨迹相切的，这也是贝赛尔曲线的绘制方法，只不过起点和终点对应的就是 `t` 的 `0` 时刻和 `1` 时刻。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210327140837.png)\n\n结论：我们绘制的曲线经过点的切线要和相邻的两点的直线平行，而贝赛尔曲线就是起点和终点平行，我们现在只需要找到其他的控制点绘制贝塞尔曲线即可。\n\n#### 解决问题\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210327141659.png)\n\n根据以上的思考，我们就有了后续的思路，我们分别需要在 AB 之间绘制一条贝赛尔曲线，B 为终点，切线相切；同时还要在 BC 之间绘制贝塞尔曲线，并且 B 点此时作为起点，要和上一条曲线经过 B 点的斜率一致。我们就有了上示的草稿图，并且可以得出一些相似的三角形。\n在当我们有了 A、B、C 三个点的坐标之后，还有对应的相似比 `S1` 和 `S2`，`P1` 和 `P2` 的坐标就是比较简单了。\n\n接下来我们简单分析一下有 ABCDE 五个点的情况。我们五点中，中间的三个点是 BCD,我们都可以根据其各自的相邻两点做出对应的平行切线，并且每个点的切点上都可以找到对应两个点的控制点，根据控制点和各自的起点终点（其实也是控制点），我们可以绘制不同的红色举行的区域，分别可以用二次贝赛尔曲线绘制和三次贝赛尔曲线绘制。两点中有一个控制点的就是二次贝塞尔，比如 AB 之间；有两个控制点的就是三次贝塞尔，比如 BC 之间等。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210327143112.png)\n\n说了这么多我们还没有落实一个数据，就是上面提到的相似比，我们用 S 表示。采用一种简单的情况来做具体的分析\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210331221957.png)\n\n#### 代码简析\n\n```js\n// 数组的两个点的构成的直角三角形的[w，h](w：底边长度，h：高)\nfunction va(arr, i, j) {\n  return [arr[2 * j] - arr[2 * i], arr[2 * j + 1] - arr[2 * i + 1]];\n}\n// 计算arr数组的i和j两个点之间的距离\nfunction distance(arr, i, j) {\n  return Math.sqrt(\n    Math.pow(arr[2 * i] - arr[2 * j], 2) +\n      Math.pow(arr[2 * i + 1] - arr[2 * j + 1], 2)\n  );\n}\nfunction controlPoints(x1, y1, x2, y2, x3, y3) {\n  var t = 0.5; // 常数取得0.5\n  // 返回 w 和 h=>[w,h]\n  var v = va(arguments, 0, 2);\n  var d01 = distance(arguments, 0, 1);\n  var d12 = distance(arguments, 1, 2);\n  // 带入距离比例\n  var d012 = d01 + d12;\n  return [\n    x2 - (v[0] * t * d01) / d012,\n    y2 - (v[1] * t * d01) / d012,\n    x2 + (v[0] * t * d12) / d012,\n    y2 + (v[1] * t * d12) / d012,\n  ];\n}\n\nlet ss = [];\nlet pts = [];\nfunction drawLine2() {\n  // 清楚所有的线段\n  for (let ii = 0; ii < ss.length; ii++) {\n    const bezier = ss[ii];\n    app.stage.removeChild(bezier);\n  }\n  ss = [];\n  pts = [];\n  // 将点转换为位置的一维数组\n  // [{pos:{x1,y1}},{pos:{x2,y2}}]=>[x1,y1,x2,y2]\n  arr\n    .map((i) => i.pos)\n    .forEach((item) => {\n      pts.push(item.x);\n      pts.push(item.y);\n    });\n\n  cps = []; // 控制点的位置\n  // 根据点的位置计算控制点的位置\n  for (var i = 0; i < pts.length - 2; i += 1) {\n    cps = cps.concat(\n      controlPoints(\n        pts[2 * i],\n        pts[2 * i + 1],\n        pts[2 * i + 2],\n        pts[2 * i + 3],\n        pts[2 * i + 4],\n        pts[2 * i + 5]\n      )\n    );\n  }\n\n  let start = arr[0];\n  // 两个点\n  if (arr.length === 2) {\n    drawBaseLine(start.pos, arr[1].pos);\n  }\n  // 多个点\n  console.log(\"pts\", pts, \"cps\", cps);\n  let end;\n  let control;\n  let len = arr.length;\n  if (arr.length >= 3) {\n    start = arr[0];\n    end = arr[1];\n    // 开始的部分为二次贝赛尔曲线\n    var bezier = new PIXI.Graphics();\n    bezier.lineStyle(4, 0x1a7af8, 1);\n    bezier.moveTo(start.pos.x, start.pos.y);\n    bezier.quadraticCurveTo(cps[0], cps[1], pts[2], pts[3]);\n    bezier.endFill();\n    start = end;\n    app.stage.addChild(bezier);\n    ss.push(bezier);\n\n    for (var i = 2; i < len - 1; i += 1) {\n      // 中间部分为三次贝赛尔曲线\n      start = end;\n\n      var bezier = new PIXI.Graphics();\n      bezier.lineStyle(4, 0x1a7af8, 1);\n      bezier.moveTo(start.pos.x, start.pos.y);\n      bezier.bezierCurveTo(\n        cps[(2 * (i - 1) - 1) * 2],\n        cps[(2 * (i - 1) - 1) * 2 + 1],\n        cps[2 * (i - 1) * 2],\n        cps[2 * (i - 1) * 2 + 1],\n        pts[i * 2],\n        pts[i * 2 + 1]\n      );\n      bezier.endFill();\n      end = arr[i];\n      app.stage.addChild(bezier);\n      ss.push(bezier);\n    }\n\n    start = end;\n    // 结束部分为二次贝赛尔曲线\n    var bezier = new PIXI.Graphics();\n    bezier.lineStyle(4, 0x1a7af8, 1);\n    bezier.moveTo(start.pos.x, start.pos.y);\n    bezier.quadraticCurveTo(\n      cps[(2 * (i - 1) - 1) * 2],\n      cps[(2 * (i - 1) - 1) * 2 + 1],\n      pts[i * 2],\n      pts[i * 2 + 1]\n    );\n    bezier.endFill();\n    app.stage.addChild(bezier);\n    ss.push(bezier);\n  }\n}\n```\n\n具体我们可以看看下面的 demo。(相思比`S = t * d01 / d012`)\n\n<p class=\"codepen\" data-height=\"600\" data-theme-id=\"dark\" data-default-tab=\"js,result\" data-user=\"kitety\" data-slug-hash=\"ZELKwyj\" data-preview=\"true\" style=\"height: 600px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;\" data-pen-title=\"ZELKwyj\">\n  <span>See the Pen <a href=\"https://codepen.io/kitety/pen/ZELKwyj\">\n  ZELKwyj</a> by kitety (<a href=\"https://codepen.io/kitety\">@kitety</a>)\n  on <a href=\"https://codepen.io\">CodePen</a>.</span>\n</p>\n<script async src=\"https://cpwebassets.codepen.io/assets/embed/ei.js\"></script>\n\n除此之外我还做了一下测试，分别做出相似比为 0.1、0.5、0.5 加距离乘积、0.8 的相似比对于**同样**的点，得出如下。\n\n点的位置如下，可见不同的相似比画出来的曲线的效果也是不同的。\n\n```js\n[\n  { x: 100, y: 100 },\n  { x: 400, y: 100 },\n  { x: 400, y: 400 },\n  { x: 100, y: 400 },\n];\n```\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210405185248.png)\n\n具体的效果可以参见下面的 demo，相似比过大、过小、为负数等都会有奇特的曲线出现，感兴趣的可以试试。\n\n<p class=\"codepen\" data-height=\"600\" data-theme-id=\"dark\" data-default-tab=\"js,result\" data-user=\"kitety\" data-slug-hash=\"dyNRmbY\" data-preview=\"true\" style=\"height: 600px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;\" data-pen-title=\"dyNRmbY\">\n  <span>See the Pen <a href=\"https://codepen.io/kitety/pen/dyNRmbY\">\n  dyNRmbY</a> by kitety (<a href=\"https://codepen.io/kitety\">@kitety</a>)\n  on <a href=\"https://codepen.io\">CodePen</a>.</span>\n</p>\n<script async src=\"https://cpwebassets.codepen.io/assets/embed/ei.js\"></script>\n可见，使用线段位置与具体常数的乘积效果最好。\n\n## 结语\n\n本篇文章简要分析了使用 canvas 绘制线条的具体方式，循序渐进的讲解了绘制线条，曲线和相似三角形曲线的处理方法，思路也是步步递进。感兴趣的可以在 demo 里面试试效果，尝试更换不同的相似比会有意想不到的效果。\n\n本文也是借鉴了很多前人的思考成果加以思考，参考链接在文章末尾已经列出。\n\n感谢阅读，完结撒花。\n\n## 参考链接\n\n- [how-to-draw-smooth-curve-through-n-points-using-javascript-html5-canvas](https://stackoverflow.com/questions/7054272/how-to-draw-smooth-curve-through-n-points-using-javascript-html5-canvas)\n- [Spline Interpolation](http://scaledinnovation.com/analytics/splines/aboutSplines.html)\n- [canvas 进阶——如何画出平滑的曲线?](https://juejin.cn/post/6844903692747948039)\n- [用 canvas 绘制一个曲线动画——深入理解贝塞尔曲线](https://github.com/hujiulong/blog/issues/1)\n- [怎么理解贝塞尔曲线？](https://www.zhihu.com/question/29565629)\n- [stackoverflow 中的一个demo](https://output.jsbin.com/ApitIxo/2/)\n","source":"_posts/关于画点连线的思考.md","raw":"---\ntitle: 关于画点连线的思考\nabbrlink: 4e9a8293\ntranslate_title: thoughts-on-drawing-dotted-lines\ndate: 2021-03-20 19:00:23\ntags:\n  - 算法\n---\n\n## 前言\n\n点和线是平面世界的基础，而画点连线更是基本操作。但是关于画点连线的方法，以及所能带来的思考，也是蛮有意思的。\n\n在这片文章中，我会简单分析画点连线的基本方法。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210404111938.png)\n\n<!-- more -->\n\n## 一起来画画\n\n### 基本的画点连线\n\n在这个章节，我们会创建 `canvas` 并且在上面获取鼠标的点的位置，并且将点放入一个数组存储，用直线连接起来。为了方便操作，我们使用 [PIXI](https://www.pixijs.com/) 这个库来简化操作。\n\n具体的细节步骤如下：\n\n- 首先使用 PIXI 初始化应用，创建一个舞台\n- 然后获取 app.view，在 canvas 上面绑定点击事件\n- 获取点击事件的具体的坐标，在对应位置绘制圆，将其放入数组存储\n- 循环遍历数组，将两点依次连线，绘制出图形。\n\n便可以得出以下的效果\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210327114145.png)\n也可以在下面的环境中测试。\n\n<p class=\"codepen\" data-height=\"600\" data-theme-id=\"dark\" data-default-tab=\"js,result\" data-user=\"kitety\" data-slug-hash=\"xxgVzpW\" data-preview=\"true\" style=\"height: 600px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;\" data-pen-title=\"xxgVzpW\">\n  <span>See the Pen <a href=\"https://codepen.io/kitety/pen/xxgVzpW\">\n  xxgVzpW</a> by kitety (<a href=\"https://codepen.io/kitety\">@kitety</a>)\n  on <a href=\"https://codepen.io\">CodePen</a>.</span>\n</p>\n<script async src=\"https://cpwebassets.codepen.io/assets/embed/ei.js\"></script>\n\n上述的 demo 基本的实现了直线连接，但是表述很生硬，就是一段一段的线段，没有任何的美感。假如我们想要的是折线图，这就已经实现目标了，但是如果我们想要的是有点美感的曲线呢？这应该怎么做呢？这个时候就该我们的贝赛尔曲线登场了。\n\n### 贝赛尔曲线\n\n在[维基百科](https://zh.wikipedia.org/wiki/%E8%B2%9D%E8%8C%B2%E6%9B%B2%E7%B7%9A)中，他是这么解释的：在数学的数值分析领域中，贝塞尔曲线（英语：Bézier curve）是计算机图形学中相当重要的参数曲线。\n\n感觉还是不理解，详细的过程可以参考这篇[文章](https://github.com/hujiulong/blog/issues/1)\n\n本节不是对贝塞尔曲线做专业分析，如果有需要请参考其他网站，本文引用已经列举出来了。\n\n#### 二次贝赛尔曲线\n\n大概的二次贝赛尔曲线就如下图所示：\n![](https://z3.ax1x.com/2021/03/27/6x5yX4.gif)\n二次贝塞尔曲线由三个点 `P0`、`P1`、`P2` 来确定，这些点也叫做控制点。我们需要三个点就可以绘制出一条二次贝赛尔曲线，在 `canvas` 中的对应的方法就是`quadraticCurveTo`这个方法。\n\n#### 高次贝塞尔曲线\n\n随着控制点的个数的增加，可以有三次，四次，N 次贝赛尔曲线，再多就不过多探讨。需要提示一下，绘制三次贝塞尔曲线的方法`bezierCurveTo`。\n\n### 使用贝塞尔曲线绘制平滑曲线\n\n要想绘制贝赛尔曲线，我们最简单的思路就是需要找准起点，控制点，终点。\n\n最简单的就是假如我们有 A、B、C 三个点，我们需要绘制一条看似还算完美的曲线，我们应该怎么去思考呢？\n\n我们会计算出 B 和 C 的中点 B1，以 A 为起点，B 为控制点，B1 为终点，最后将 B1、C 用直线链接。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210327121024.png)\n\n当然这只是三个点的情况，我们如此循环往复就可以绘制足够多的点了。\n\n#### 代码简析\n\n```javascript\nfunction drawLine() {\n  // 绘制之前全部清除\n  for (let ii = 0; ii < ss.length; ii++) {\n    const bezier = ss[ii];\n    app.stage.removeChild(bezier);\n  }\n  ss = [];\n\n  let start = arr[0];\n  if (arr.length === 2) {\n    // 两个点直接连线\n    drawBaseLine(start.pos, arr[1].pos);\n  }\n  if (arr.length >= 3) {\n    for (let i = 1; i < arr.length; i++) {\n      let control = arr[i];\n      let end;\n      if (!arr[i + 1]) {\n        // 后面没有点了，将上一个贝塞尔曲线的终点和当前点连接\n        drawBaseLine(start.pos, arr[i].pos);\n        return;\n      } else {\n        // 将贝赛尔曲线终点设置为两点之间的中点\n        end = getMiddle(arr[i], arr[i + 1]);\n      }\n      //  绘制贝赛尔曲线\n      var bezier = new PIXI.Graphics();\n\n      bezier.lineStyle(4, 0x1a7af8, 1);\n      bezier.moveTo(start.pos.x, start.pos.y);\n      bezier.quadraticCurveTo(\n        control.pos.x,\n        control.pos.y,\n        end.pos.x,\n        end.pos.y\n      );\n      bezier.endFill();\n      start = end;\n      app.stage.addChild(bezier);\n      ss.push(bezier);\n    }\n  }\n}\n```\n\n这样我们就可以尽量绘制出比较平滑的曲线了\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210327123049.png)\n也可以在下面的环境中测试。\n\n<p class=\"codepen\" data-height=\"600\" data-theme-id=\"dark\" data-default-tab=\"js,result\" data-user=\"kitety\" data-slug-hash=\"eYgZjOM\" data-preview=\"true\" style=\"height: 600px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;\" data-pen-title=\"eYgZjOM\">\n  <span>See the Pen <a href=\"https://codepen.io/kitety/pen/eYgZjOM\">\n  eYgZjOM</a> by kitety (<a href=\"https://codepen.io/kitety\">@kitety</a>)\n  on <a href=\"https://codepen.io\">CodePen</a>.</span>\n</p>\n<script async src=\"https://cpwebassets.codepen.io/assets/embed/ei.js\"></script>\n\n上述的代码基本是实现了比较平滑的曲线，但是我们的还是会发现一些问题，就是在绘制的时候会出现画出来的线并没有经过所有点这种情况。而且参考的文章下面也有了类似的思考，一样抛出了这个问题。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210404111818.png)\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210327123211.png)\n看来革命尚未成功，同志仍需努力啊。\n\n### 相似三角形与贝赛尔曲线\n\n其实在处理问题的时候，我们需要将问题简单化。比如在画点连线的过程中，我们很轻易的知道，两点之间肯定是连接直线就是最佳的。在需要曲线的时候，往往是两个点以上，因此我们就先画好三个点的曲线。\n\n#### 切线\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210327135731.png)\n如图，我们为三个点分了三种情况，其实前面两种很明显都是不合理的，都出现了没有必要的弯曲，只有最后一种稍显合理。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210327135938.png)\n我们围绕三种情况 B 点的位置做出切线，发现只有看 k1 和 k2 的斜率几乎一直的时候才是比较合理的曲线，也就是三点中，曲线经过中间一点的切线和另外两点所成的直线平行的时候，这样的曲线才是比较合理的。\n\n#### 贝塞尔切线\n\n而贝赛尔曲线的绘制图如下\n![](https://z3.ax1x.com/2021/03/27/6x5yX4.gif)\n我们截取中间的某个时刻会发现，很明显，贝塞尔曲线的起点和终点（其实也是控制点），他们的切线其实就是和轨迹相切的，这也是贝赛尔曲线的绘制方法，只不过起点和终点对应的就是 `t` 的 `0` 时刻和 `1` 时刻。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210327140837.png)\n\n结论：我们绘制的曲线经过点的切线要和相邻的两点的直线平行，而贝赛尔曲线就是起点和终点平行，我们现在只需要找到其他的控制点绘制贝塞尔曲线即可。\n\n#### 解决问题\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210327141659.png)\n\n根据以上的思考，我们就有了后续的思路，我们分别需要在 AB 之间绘制一条贝赛尔曲线，B 为终点，切线相切；同时还要在 BC 之间绘制贝塞尔曲线，并且 B 点此时作为起点，要和上一条曲线经过 B 点的斜率一致。我们就有了上示的草稿图，并且可以得出一些相似的三角形。\n在当我们有了 A、B、C 三个点的坐标之后，还有对应的相似比 `S1` 和 `S2`，`P1` 和 `P2` 的坐标就是比较简单了。\n\n接下来我们简单分析一下有 ABCDE 五个点的情况。我们五点中，中间的三个点是 BCD,我们都可以根据其各自的相邻两点做出对应的平行切线，并且每个点的切点上都可以找到对应两个点的控制点，根据控制点和各自的起点终点（其实也是控制点），我们可以绘制不同的红色举行的区域，分别可以用二次贝赛尔曲线绘制和三次贝赛尔曲线绘制。两点中有一个控制点的就是二次贝塞尔，比如 AB 之间；有两个控制点的就是三次贝塞尔，比如 BC 之间等。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210327143112.png)\n\n说了这么多我们还没有落实一个数据，就是上面提到的相似比，我们用 S 表示。采用一种简单的情况来做具体的分析\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210331221957.png)\n\n#### 代码简析\n\n```js\n// 数组的两个点的构成的直角三角形的[w，h](w：底边长度，h：高)\nfunction va(arr, i, j) {\n  return [arr[2 * j] - arr[2 * i], arr[2 * j + 1] - arr[2 * i + 1]];\n}\n// 计算arr数组的i和j两个点之间的距离\nfunction distance(arr, i, j) {\n  return Math.sqrt(\n    Math.pow(arr[2 * i] - arr[2 * j], 2) +\n      Math.pow(arr[2 * i + 1] - arr[2 * j + 1], 2)\n  );\n}\nfunction controlPoints(x1, y1, x2, y2, x3, y3) {\n  var t = 0.5; // 常数取得0.5\n  // 返回 w 和 h=>[w,h]\n  var v = va(arguments, 0, 2);\n  var d01 = distance(arguments, 0, 1);\n  var d12 = distance(arguments, 1, 2);\n  // 带入距离比例\n  var d012 = d01 + d12;\n  return [\n    x2 - (v[0] * t * d01) / d012,\n    y2 - (v[1] * t * d01) / d012,\n    x2 + (v[0] * t * d12) / d012,\n    y2 + (v[1] * t * d12) / d012,\n  ];\n}\n\nlet ss = [];\nlet pts = [];\nfunction drawLine2() {\n  // 清楚所有的线段\n  for (let ii = 0; ii < ss.length; ii++) {\n    const bezier = ss[ii];\n    app.stage.removeChild(bezier);\n  }\n  ss = [];\n  pts = [];\n  // 将点转换为位置的一维数组\n  // [{pos:{x1,y1}},{pos:{x2,y2}}]=>[x1,y1,x2,y2]\n  arr\n    .map((i) => i.pos)\n    .forEach((item) => {\n      pts.push(item.x);\n      pts.push(item.y);\n    });\n\n  cps = []; // 控制点的位置\n  // 根据点的位置计算控制点的位置\n  for (var i = 0; i < pts.length - 2; i += 1) {\n    cps = cps.concat(\n      controlPoints(\n        pts[2 * i],\n        pts[2 * i + 1],\n        pts[2 * i + 2],\n        pts[2 * i + 3],\n        pts[2 * i + 4],\n        pts[2 * i + 5]\n      )\n    );\n  }\n\n  let start = arr[0];\n  // 两个点\n  if (arr.length === 2) {\n    drawBaseLine(start.pos, arr[1].pos);\n  }\n  // 多个点\n  console.log(\"pts\", pts, \"cps\", cps);\n  let end;\n  let control;\n  let len = arr.length;\n  if (arr.length >= 3) {\n    start = arr[0];\n    end = arr[1];\n    // 开始的部分为二次贝赛尔曲线\n    var bezier = new PIXI.Graphics();\n    bezier.lineStyle(4, 0x1a7af8, 1);\n    bezier.moveTo(start.pos.x, start.pos.y);\n    bezier.quadraticCurveTo(cps[0], cps[1], pts[2], pts[3]);\n    bezier.endFill();\n    start = end;\n    app.stage.addChild(bezier);\n    ss.push(bezier);\n\n    for (var i = 2; i < len - 1; i += 1) {\n      // 中间部分为三次贝赛尔曲线\n      start = end;\n\n      var bezier = new PIXI.Graphics();\n      bezier.lineStyle(4, 0x1a7af8, 1);\n      bezier.moveTo(start.pos.x, start.pos.y);\n      bezier.bezierCurveTo(\n        cps[(2 * (i - 1) - 1) * 2],\n        cps[(2 * (i - 1) - 1) * 2 + 1],\n        cps[2 * (i - 1) * 2],\n        cps[2 * (i - 1) * 2 + 1],\n        pts[i * 2],\n        pts[i * 2 + 1]\n      );\n      bezier.endFill();\n      end = arr[i];\n      app.stage.addChild(bezier);\n      ss.push(bezier);\n    }\n\n    start = end;\n    // 结束部分为二次贝赛尔曲线\n    var bezier = new PIXI.Graphics();\n    bezier.lineStyle(4, 0x1a7af8, 1);\n    bezier.moveTo(start.pos.x, start.pos.y);\n    bezier.quadraticCurveTo(\n      cps[(2 * (i - 1) - 1) * 2],\n      cps[(2 * (i - 1) - 1) * 2 + 1],\n      pts[i * 2],\n      pts[i * 2 + 1]\n    );\n    bezier.endFill();\n    app.stage.addChild(bezier);\n    ss.push(bezier);\n  }\n}\n```\n\n具体我们可以看看下面的 demo。(相思比`S = t * d01 / d012`)\n\n<p class=\"codepen\" data-height=\"600\" data-theme-id=\"dark\" data-default-tab=\"js,result\" data-user=\"kitety\" data-slug-hash=\"ZELKwyj\" data-preview=\"true\" style=\"height: 600px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;\" data-pen-title=\"ZELKwyj\">\n  <span>See the Pen <a href=\"https://codepen.io/kitety/pen/ZELKwyj\">\n  ZELKwyj</a> by kitety (<a href=\"https://codepen.io/kitety\">@kitety</a>)\n  on <a href=\"https://codepen.io\">CodePen</a>.</span>\n</p>\n<script async src=\"https://cpwebassets.codepen.io/assets/embed/ei.js\"></script>\n\n除此之外我还做了一下测试，分别做出相似比为 0.1、0.5、0.5 加距离乘积、0.8 的相似比对于**同样**的点，得出如下。\n\n点的位置如下，可见不同的相似比画出来的曲线的效果也是不同的。\n\n```js\n[\n  { x: 100, y: 100 },\n  { x: 400, y: 100 },\n  { x: 400, y: 400 },\n  { x: 100, y: 400 },\n];\n```\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210405185248.png)\n\n具体的效果可以参见下面的 demo，相似比过大、过小、为负数等都会有奇特的曲线出现，感兴趣的可以试试。\n\n<p class=\"codepen\" data-height=\"600\" data-theme-id=\"dark\" data-default-tab=\"js,result\" data-user=\"kitety\" data-slug-hash=\"dyNRmbY\" data-preview=\"true\" style=\"height: 600px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;\" data-pen-title=\"dyNRmbY\">\n  <span>See the Pen <a href=\"https://codepen.io/kitety/pen/dyNRmbY\">\n  dyNRmbY</a> by kitety (<a href=\"https://codepen.io/kitety\">@kitety</a>)\n  on <a href=\"https://codepen.io\">CodePen</a>.</span>\n</p>\n<script async src=\"https://cpwebassets.codepen.io/assets/embed/ei.js\"></script>\n可见，使用线段位置与具体常数的乘积效果最好。\n\n## 结语\n\n本篇文章简要分析了使用 canvas 绘制线条的具体方式，循序渐进的讲解了绘制线条，曲线和相似三角形曲线的处理方法，思路也是步步递进。感兴趣的可以在 demo 里面试试效果，尝试更换不同的相似比会有意想不到的效果。\n\n本文也是借鉴了很多前人的思考成果加以思考，参考链接在文章末尾已经列出。\n\n感谢阅读，完结撒花。\n\n## 参考链接\n\n- [how-to-draw-smooth-curve-through-n-points-using-javascript-html5-canvas](https://stackoverflow.com/questions/7054272/how-to-draw-smooth-curve-through-n-points-using-javascript-html5-canvas)\n- [Spline Interpolation](http://scaledinnovation.com/analytics/splines/aboutSplines.html)\n- [canvas 进阶——如何画出平滑的曲线?](https://juejin.cn/post/6844903692747948039)\n- [用 canvas 绘制一个曲线动画——深入理解贝塞尔曲线](https://github.com/hujiulong/blog/issues/1)\n- [怎么理解贝塞尔曲线？](https://www.zhihu.com/question/29565629)\n- [stackoverflow 中的一个demo](https://output.jsbin.com/ApitIxo/2/)\n","slug":"关于画点连线的思考","published":1,"updated":"2021-09-29T07:53:51.824Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy6bk001sp4vl3l3734e7","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>点和线是平面世界的基础，而画点连线更是基本操作。但是关于画点连线的方法，以及所能带来的思考，也是蛮有意思的。</p>\n<p>在这片文章中，我会简单分析画点连线的基本方法。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210404111938.png\"></p>\n<span id=\"more\"></span>\n\n<h2 id=\"一起来画画\"><a href=\"#一起来画画\" class=\"headerlink\" title=\"一起来画画\"></a>一起来画画</h2><h3 id=\"基本的画点连线\"><a href=\"#基本的画点连线\" class=\"headerlink\" title=\"基本的画点连线\"></a>基本的画点连线</h3><p>在这个章节，我们会创建 <code>canvas</code> 并且在上面获取鼠标的点的位置，并且将点放入一个数组存储，用直线连接起来。为了方便操作，我们使用 <a href=\"https://www.pixijs.com/\">PIXI</a> 这个库来简化操作。</p>\n<p>具体的细节步骤如下：</p>\n<ul>\n<li>首先使用 PIXI 初始化应用，创建一个舞台</li>\n<li>然后获取 app.view，在 canvas 上面绑定点击事件</li>\n<li>获取点击事件的具体的坐标，在对应位置绘制圆，将其放入数组存储</li>\n<li>循环遍历数组，将两点依次连线，绘制出图形。</li>\n</ul>\n<p>便可以得出以下的效果<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210327114145.png\"><br>也可以在下面的环境中测试。</p>\n<p class=\"codepen\" data-height=\"600\" data-theme-id=\"dark\" data-default-tab=\"js,result\" data-user=\"kitety\" data-slug-hash=\"xxgVzpW\" data-preview=\"true\" style=\"height: 600px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;\" data-pen-title=\"xxgVzpW\">\n  <span>See the Pen <a href=\"https://codepen.io/kitety/pen/xxgVzpW\">\n  xxgVzpW</a> by kitety (<a href=\"https://codepen.io/kitety\">@kitety</a>)\n  on <a href=\"https://codepen.io\">CodePen</a>.</span>\n</p>\n<script async src=\"https://cpwebassets.codepen.io/assets/embed/ei.js\"></script>\n\n<p>上述的 demo 基本的实现了直线连接，但是表述很生硬，就是一段一段的线段，没有任何的美感。假如我们想要的是折线图，这就已经实现目标了，但是如果我们想要的是有点美感的曲线呢？这应该怎么做呢？这个时候就该我们的贝赛尔曲线登场了。</p>\n<h3 id=\"贝赛尔曲线\"><a href=\"#贝赛尔曲线\" class=\"headerlink\" title=\"贝赛尔曲线\"></a>贝赛尔曲线</h3><p>在<a href=\"https://zh.wikipedia.org/wiki/%E8%B2%9D%E8%8C%B2%E6%9B%B2%E7%B7%9A\">维基百科</a>中，他是这么解释的：在数学的数值分析领域中，贝塞尔曲线（英语：Bézier curve）是计算机图形学中相当重要的参数曲线。</p>\n<p>感觉还是不理解，详细的过程可以参考这篇<a href=\"https://github.com/hujiulong/blog/issues/1\">文章</a></p>\n<p>本节不是对贝塞尔曲线做专业分析，如果有需要请参考其他网站，本文引用已经列举出来了。</p>\n<h4 id=\"二次贝赛尔曲线\"><a href=\"#二次贝赛尔曲线\" class=\"headerlink\" title=\"二次贝赛尔曲线\"></a>二次贝赛尔曲线</h4><p>大概的二次贝赛尔曲线就如下图所示：<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://z3.ax1x.com/2021/03/27/6x5yX4.gif\"><br>二次贝塞尔曲线由三个点 <code>P0</code>、<code>P1</code>、<code>P2</code> 来确定，这些点也叫做控制点。我们需要三个点就可以绘制出一条二次贝赛尔曲线，在 <code>canvas</code> 中的对应的方法就是<code>quadraticCurveTo</code>这个方法。</p>\n<h4 id=\"高次贝塞尔曲线\"><a href=\"#高次贝塞尔曲线\" class=\"headerlink\" title=\"高次贝塞尔曲线\"></a>高次贝塞尔曲线</h4><p>随着控制点的个数的增加，可以有三次，四次，N 次贝赛尔曲线，再多就不过多探讨。需要提示一下，绘制三次贝塞尔曲线的方法<code>bezierCurveTo</code>。</p>\n<h3 id=\"使用贝塞尔曲线绘制平滑曲线\"><a href=\"#使用贝塞尔曲线绘制平滑曲线\" class=\"headerlink\" title=\"使用贝塞尔曲线绘制平滑曲线\"></a>使用贝塞尔曲线绘制平滑曲线</h3><p>要想绘制贝赛尔曲线，我们最简单的思路就是需要找准起点，控制点，终点。</p>\n<p>最简单的就是假如我们有 A、B、C 三个点，我们需要绘制一条看似还算完美的曲线，我们应该怎么去思考呢？</p>\n<p>我们会计算出 B 和 C 的中点 B1，以 A 为起点，B 为控制点，B1 为终点，最后将 B1、C 用直线链接。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210327121024.png\"></p>\n<p>当然这只是三个点的情况，我们如此循环往复就可以绘制足够多的点了。</p>\n<h4 id=\"代码简析\"><a href=\"#代码简析\" class=\"headerlink\" title=\"代码简析\"></a>代码简析</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">drawLine</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 绘制之前全部清除</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> ii = <span class=\"number\">0</span>; ii &lt; ss.<span class=\"property\">length</span>; ii++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> bezier = ss[ii];</span><br><span class=\"line\">    app.<span class=\"property\">stage</span>.<span class=\"title function_\">removeChild</span>(bezier);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  ss = [];</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> start = arr[<span class=\"number\">0</span>];</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (arr.<span class=\"property\">length</span> === <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 两个点直接连线</span></span><br><span class=\"line\">    <span class=\"title function_\">drawBaseLine</span>(start.<span class=\"property\">pos</span>, arr[<span class=\"number\">1</span>].<span class=\"property\">pos</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (arr.<span class=\"property\">length</span> &gt;= <span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">1</span>; i &lt; arr.<span class=\"property\">length</span>; i++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> control = arr[i];</span><br><span class=\"line\">      <span class=\"keyword\">let</span> end;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!arr[i + <span class=\"number\">1</span>]) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 后面没有点了，将上一个贝塞尔曲线的终点和当前点连接</span></span><br><span class=\"line\">        <span class=\"title function_\">drawBaseLine</span>(start.<span class=\"property\">pos</span>, arr[i].<span class=\"property\">pos</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 将贝赛尔曲线终点设置为两点之间的中点</span></span><br><span class=\"line\">        end = <span class=\"title function_\">getMiddle</span>(arr[i], arr[i + <span class=\"number\">1</span>]);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"comment\">//  绘制贝赛尔曲线</span></span><br><span class=\"line\">      <span class=\"keyword\">var</span> bezier = <span class=\"keyword\">new</span> <span class=\"variable constant_\">PIXI</span>.<span class=\"title class_\">Graphics</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">      bezier.<span class=\"title function_\">lineStyle</span>(<span class=\"number\">4</span>, <span class=\"number\">0x1a7af8</span>, <span class=\"number\">1</span>);</span><br><span class=\"line\">      bezier.<span class=\"title function_\">moveTo</span>(start.<span class=\"property\">pos</span>.<span class=\"property\">x</span>, start.<span class=\"property\">pos</span>.<span class=\"property\">y</span>);</span><br><span class=\"line\">      bezier.<span class=\"title function_\">quadraticCurveTo</span>(</span><br><span class=\"line\">        control.<span class=\"property\">pos</span>.<span class=\"property\">x</span>,</span><br><span class=\"line\">        control.<span class=\"property\">pos</span>.<span class=\"property\">y</span>,</span><br><span class=\"line\">        end.<span class=\"property\">pos</span>.<span class=\"property\">x</span>,</span><br><span class=\"line\">        end.<span class=\"property\">pos</span>.<span class=\"property\">y</span></span><br><span class=\"line\">      );</span><br><span class=\"line\">      bezier.<span class=\"title function_\">endFill</span>();</span><br><span class=\"line\">      start = end;</span><br><span class=\"line\">      app.<span class=\"property\">stage</span>.<span class=\"title function_\">addChild</span>(bezier);</span><br><span class=\"line\">      ss.<span class=\"title function_\">push</span>(bezier);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>这样我们就可以尽量绘制出比较平滑的曲线了<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210327123049.png\"><br>也可以在下面的环境中测试。</p>\n<p class=\"codepen\" data-height=\"600\" data-theme-id=\"dark\" data-default-tab=\"js,result\" data-user=\"kitety\" data-slug-hash=\"eYgZjOM\" data-preview=\"true\" style=\"height: 600px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;\" data-pen-title=\"eYgZjOM\">\n  <span>See the Pen <a href=\"https://codepen.io/kitety/pen/eYgZjOM\">\n  eYgZjOM</a> by kitety (<a href=\"https://codepen.io/kitety\">@kitety</a>)\n  on <a href=\"https://codepen.io\">CodePen</a>.</span>\n</p>\n<script async src=\"https://cpwebassets.codepen.io/assets/embed/ei.js\"></script>\n\n<p>上述的代码基本是实现了比较平滑的曲线，但是我们的还是会发现一些问题，就是在绘制的时候会出现画出来的线并没有经过所有点这种情况。而且参考的文章下面也有了类似的思考，一样抛出了这个问题。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210404111818.png\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210327123211.png\"><br>看来革命尚未成功，同志仍需努力啊。</p>\n<h3 id=\"相似三角形与贝赛尔曲线\"><a href=\"#相似三角形与贝赛尔曲线\" class=\"headerlink\" title=\"相似三角形与贝赛尔曲线\"></a>相似三角形与贝赛尔曲线</h3><p>其实在处理问题的时候，我们需要将问题简单化。比如在画点连线的过程中，我们很轻易的知道，两点之间肯定是连接直线就是最佳的。在需要曲线的时候，往往是两个点以上，因此我们就先画好三个点的曲线。</p>\n<h4 id=\"切线\"><a href=\"#切线\" class=\"headerlink\" title=\"切线\"></a>切线</h4><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210327135731.png\"><br>如图，我们为三个点分了三种情况，其实前面两种很明显都是不合理的，都出现了没有必要的弯曲，只有最后一种稍显合理。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210327135938.png\"><br>我们围绕三种情况 B 点的位置做出切线，发现只有看 k1 和 k2 的斜率几乎一直的时候才是比较合理的曲线，也就是三点中，曲线经过中间一点的切线和另外两点所成的直线平行的时候，这样的曲线才是比较合理的。</p>\n<h4 id=\"贝塞尔切线\"><a href=\"#贝塞尔切线\" class=\"headerlink\" title=\"贝塞尔切线\"></a>贝塞尔切线</h4><p>而贝赛尔曲线的绘制图如下<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://z3.ax1x.com/2021/03/27/6x5yX4.gif\"><br>我们截取中间的某个时刻会发现，很明显，贝塞尔曲线的起点和终点（其实也是控制点），他们的切线其实就是和轨迹相切的，这也是贝赛尔曲线的绘制方法，只不过起点和终点对应的就是 <code>t</code> 的 <code>0</code> 时刻和 <code>1</code> 时刻。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210327140837.png\"></p>\n<p>结论：我们绘制的曲线经过点的切线要和相邻的两点的直线平行，而贝赛尔曲线就是起点和终点平行，我们现在只需要找到其他的控制点绘制贝塞尔曲线即可。</p>\n<h4 id=\"解决问题\"><a href=\"#解决问题\" class=\"headerlink\" title=\"解决问题\"></a>解决问题</h4><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210327141659.png\"></p>\n<p>根据以上的思考，我们就有了后续的思路，我们分别需要在 AB 之间绘制一条贝赛尔曲线，B 为终点，切线相切；同时还要在 BC 之间绘制贝塞尔曲线，并且 B 点此时作为起点，要和上一条曲线经过 B 点的斜率一致。我们就有了上示的草稿图，并且可以得出一些相似的三角形。<br>在当我们有了 A、B、C 三个点的坐标之后，还有对应的相似比 <code>S1</code> 和 <code>S2</code>，<code>P1</code> 和 <code>P2</code> 的坐标就是比较简单了。</p>\n<p>接下来我们简单分析一下有 ABCDE 五个点的情况。我们五点中，中间的三个点是 BCD,我们都可以根据其各自的相邻两点做出对应的平行切线，并且每个点的切点上都可以找到对应两个点的控制点，根据控制点和各自的起点终点（其实也是控制点），我们可以绘制不同的红色举行的区域，分别可以用二次贝赛尔曲线绘制和三次贝赛尔曲线绘制。两点中有一个控制点的就是二次贝塞尔，比如 AB 之间；有两个控制点的就是三次贝塞尔，比如 BC 之间等。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210327143112.png\"></p>\n<p>说了这么多我们还没有落实一个数据，就是上面提到的相似比，我们用 S 表示。采用一种简单的情况来做具体的分析<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210331221957.png\"></p>\n<h4 id=\"代码简析-1\"><a href=\"#代码简析-1\" class=\"headerlink\" title=\"代码简析\"></a>代码简析</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 数组的两个点的构成的直角三角形的[w，h](w：底边长度，h：高)</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">va</span>(<span class=\"params\">arr, i, j</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> [arr[<span class=\"number\">2</span> * j] - arr[<span class=\"number\">2</span> * i], arr[<span class=\"number\">2</span> * j + <span class=\"number\">1</span>] - arr[<span class=\"number\">2</span> * i + <span class=\"number\">1</span>]];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 计算arr数组的i和j两个点之间的距离</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">distance</span>(<span class=\"params\">arr, i, j</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"title class_\">Math</span>.<span class=\"title function_\">sqrt</span>(</span><br><span class=\"line\">    <span class=\"title class_\">Math</span>.<span class=\"title function_\">pow</span>(arr[<span class=\"number\">2</span> * i] - arr[<span class=\"number\">2</span> * j], <span class=\"number\">2</span>) +</span><br><span class=\"line\">      <span class=\"title class_\">Math</span>.<span class=\"title function_\">pow</span>(arr[<span class=\"number\">2</span> * i + <span class=\"number\">1</span>] - arr[<span class=\"number\">2</span> * j + <span class=\"number\">1</span>], <span class=\"number\">2</span>)</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">controlPoints</span>(<span class=\"params\">x1, y1, x2, y2, x3, y3</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> t = <span class=\"number\">0.5</span>; <span class=\"comment\">// 常数取得0.5</span></span><br><span class=\"line\">  <span class=\"comment\">// 返回 w 和 h=&gt;[w,h]</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> v = <span class=\"title function_\">va</span>(<span class=\"variable language_\">arguments</span>, <span class=\"number\">0</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\">  <span class=\"keyword\">var</span> d01 = <span class=\"title function_\">distance</span>(<span class=\"variable language_\">arguments</span>, <span class=\"number\">0</span>, <span class=\"number\">1</span>);</span><br><span class=\"line\">  <span class=\"keyword\">var</span> d12 = <span class=\"title function_\">distance</span>(<span class=\"variable language_\">arguments</span>, <span class=\"number\">1</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\">  <span class=\"comment\">// 带入距离比例</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> d012 = d01 + d12;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> [</span><br><span class=\"line\">    x2 - (v[<span class=\"number\">0</span>] * t * d01) / d012,</span><br><span class=\"line\">    y2 - (v[<span class=\"number\">1</span>] * t * d01) / d012,</span><br><span class=\"line\">    x2 + (v[<span class=\"number\">0</span>] * t * d12) / d012,</span><br><span class=\"line\">    y2 + (v[<span class=\"number\">1</span>] * t * d12) / d012,</span><br><span class=\"line\">  ];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> ss = [];</span><br><span class=\"line\"><span class=\"keyword\">let</span> pts = [];</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">drawLine2</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 清楚所有的线段</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> ii = <span class=\"number\">0</span>; ii &lt; ss.<span class=\"property\">length</span>; ii++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> bezier = ss[ii];</span><br><span class=\"line\">    app.<span class=\"property\">stage</span>.<span class=\"title function_\">removeChild</span>(bezier);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  ss = [];</span><br><span class=\"line\">  pts = [];</span><br><span class=\"line\">  <span class=\"comment\">// 将点转换为位置的一维数组</span></span><br><span class=\"line\">  <span class=\"comment\">// [&#123;pos:&#123;x1,y1&#125;&#125;,&#123;pos:&#123;x2,y2&#125;&#125;]=&gt;[x1,y1,x2,y2]</span></span><br><span class=\"line\">  arr</span><br><span class=\"line\">    .<span class=\"title function_\">map</span>(<span class=\"function\">(<span class=\"params\">i</span>) =&gt;</span> i.<span class=\"property\">pos</span>)</span><br><span class=\"line\">    .<span class=\"title function_\">forEach</span>(<span class=\"function\">(<span class=\"params\">item</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      pts.<span class=\"title function_\">push</span>(item.<span class=\"property\">x</span>);</span><br><span class=\"line\">      pts.<span class=\"title function_\">push</span>(item.<span class=\"property\">y</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  cps = []; <span class=\"comment\">// 控制点的位置</span></span><br><span class=\"line\">  <span class=\"comment\">// 根据点的位置计算控制点的位置</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; pts.<span class=\"property\">length</span> - <span class=\"number\">2</span>; i += <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">    cps = cps.<span class=\"title function_\">concat</span>(</span><br><span class=\"line\">      <span class=\"title function_\">controlPoints</span>(</span><br><span class=\"line\">        pts[<span class=\"number\">2</span> * i],</span><br><span class=\"line\">        pts[<span class=\"number\">2</span> * i + <span class=\"number\">1</span>],</span><br><span class=\"line\">        pts[<span class=\"number\">2</span> * i + <span class=\"number\">2</span>],</span><br><span class=\"line\">        pts[<span class=\"number\">2</span> * i + <span class=\"number\">3</span>],</span><br><span class=\"line\">        pts[<span class=\"number\">2</span> * i + <span class=\"number\">4</span>],</span><br><span class=\"line\">        pts[<span class=\"number\">2</span> * i + <span class=\"number\">5</span>]</span><br><span class=\"line\">      )</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> start = arr[<span class=\"number\">0</span>];</span><br><span class=\"line\">  <span class=\"comment\">// 两个点</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (arr.<span class=\"property\">length</span> === <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">    <span class=\"title function_\">drawBaseLine</span>(start.<span class=\"property\">pos</span>, arr[<span class=\"number\">1</span>].<span class=\"property\">pos</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// 多个点</span></span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;pts&quot;</span>, pts, <span class=\"string\">&quot;cps&quot;</span>, cps);</span><br><span class=\"line\">  <span class=\"keyword\">let</span> end;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> control;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> len = arr.<span class=\"property\">length</span>;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (arr.<span class=\"property\">length</span> &gt;= <span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">    start = arr[<span class=\"number\">0</span>];</span><br><span class=\"line\">    end = arr[<span class=\"number\">1</span>];</span><br><span class=\"line\">    <span class=\"comment\">// 开始的部分为二次贝赛尔曲线</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> bezier = <span class=\"keyword\">new</span> <span class=\"variable constant_\">PIXI</span>.<span class=\"title class_\">Graphics</span>();</span><br><span class=\"line\">    bezier.<span class=\"title function_\">lineStyle</span>(<span class=\"number\">4</span>, <span class=\"number\">0x1a7af8</span>, <span class=\"number\">1</span>);</span><br><span class=\"line\">    bezier.<span class=\"title function_\">moveTo</span>(start.<span class=\"property\">pos</span>.<span class=\"property\">x</span>, start.<span class=\"property\">pos</span>.<span class=\"property\">y</span>);</span><br><span class=\"line\">    bezier.<span class=\"title function_\">quadraticCurveTo</span>(cps[<span class=\"number\">0</span>], cps[<span class=\"number\">1</span>], pts[<span class=\"number\">2</span>], pts[<span class=\"number\">3</span>]);</span><br><span class=\"line\">    bezier.<span class=\"title function_\">endFill</span>();</span><br><span class=\"line\">    start = end;</span><br><span class=\"line\">    app.<span class=\"property\">stage</span>.<span class=\"title function_\">addChild</span>(bezier);</span><br><span class=\"line\">    ss.<span class=\"title function_\">push</span>(bezier);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">2</span>; i &lt; len - <span class=\"number\">1</span>; i += <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 中间部分为三次贝赛尔曲线</span></span><br><span class=\"line\">      start = end;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">var</span> bezier = <span class=\"keyword\">new</span> <span class=\"variable constant_\">PIXI</span>.<span class=\"title class_\">Graphics</span>();</span><br><span class=\"line\">      bezier.<span class=\"title function_\">lineStyle</span>(<span class=\"number\">4</span>, <span class=\"number\">0x1a7af8</span>, <span class=\"number\">1</span>);</span><br><span class=\"line\">      bezier.<span class=\"title function_\">moveTo</span>(start.<span class=\"property\">pos</span>.<span class=\"property\">x</span>, start.<span class=\"property\">pos</span>.<span class=\"property\">y</span>);</span><br><span class=\"line\">      bezier.<span class=\"title function_\">bezierCurveTo</span>(</span><br><span class=\"line\">        cps[(<span class=\"number\">2</span> * (i - <span class=\"number\">1</span>) - <span class=\"number\">1</span>) * <span class=\"number\">2</span>],</span><br><span class=\"line\">        cps[(<span class=\"number\">2</span> * (i - <span class=\"number\">1</span>) - <span class=\"number\">1</span>) * <span class=\"number\">2</span> + <span class=\"number\">1</span>],</span><br><span class=\"line\">        cps[<span class=\"number\">2</span> * (i - <span class=\"number\">1</span>) * <span class=\"number\">2</span>],</span><br><span class=\"line\">        cps[<span class=\"number\">2</span> * (i - <span class=\"number\">1</span>) * <span class=\"number\">2</span> + <span class=\"number\">1</span>],</span><br><span class=\"line\">        pts[i * <span class=\"number\">2</span>],</span><br><span class=\"line\">        pts[i * <span class=\"number\">2</span> + <span class=\"number\">1</span>]</span><br><span class=\"line\">      );</span><br><span class=\"line\">      bezier.<span class=\"title function_\">endFill</span>();</span><br><span class=\"line\">      end = arr[i];</span><br><span class=\"line\">      app.<span class=\"property\">stage</span>.<span class=\"title function_\">addChild</span>(bezier);</span><br><span class=\"line\">      ss.<span class=\"title function_\">push</span>(bezier);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    start = end;</span><br><span class=\"line\">    <span class=\"comment\">// 结束部分为二次贝赛尔曲线</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> bezier = <span class=\"keyword\">new</span> <span class=\"variable constant_\">PIXI</span>.<span class=\"title class_\">Graphics</span>();</span><br><span class=\"line\">    bezier.<span class=\"title function_\">lineStyle</span>(<span class=\"number\">4</span>, <span class=\"number\">0x1a7af8</span>, <span class=\"number\">1</span>);</span><br><span class=\"line\">    bezier.<span class=\"title function_\">moveTo</span>(start.<span class=\"property\">pos</span>.<span class=\"property\">x</span>, start.<span class=\"property\">pos</span>.<span class=\"property\">y</span>);</span><br><span class=\"line\">    bezier.<span class=\"title function_\">quadraticCurveTo</span>(</span><br><span class=\"line\">      cps[(<span class=\"number\">2</span> * (i - <span class=\"number\">1</span>) - <span class=\"number\">1</span>) * <span class=\"number\">2</span>],</span><br><span class=\"line\">      cps[(<span class=\"number\">2</span> * (i - <span class=\"number\">1</span>) - <span class=\"number\">1</span>) * <span class=\"number\">2</span> + <span class=\"number\">1</span>],</span><br><span class=\"line\">      pts[i * <span class=\"number\">2</span>],</span><br><span class=\"line\">      pts[i * <span class=\"number\">2</span> + <span class=\"number\">1</span>]</span><br><span class=\"line\">    );</span><br><span class=\"line\">    bezier.<span class=\"title function_\">endFill</span>();</span><br><span class=\"line\">    app.<span class=\"property\">stage</span>.<span class=\"title function_\">addChild</span>(bezier);</span><br><span class=\"line\">    ss.<span class=\"title function_\">push</span>(bezier);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>具体我们可以看看下面的 demo。(相思比<code>S = t * d01 / d012</code>)</p>\n<p class=\"codepen\" data-height=\"600\" data-theme-id=\"dark\" data-default-tab=\"js,result\" data-user=\"kitety\" data-slug-hash=\"ZELKwyj\" data-preview=\"true\" style=\"height: 600px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;\" data-pen-title=\"ZELKwyj\">\n  <span>See the Pen <a href=\"https://codepen.io/kitety/pen/ZELKwyj\">\n  ZELKwyj</a> by kitety (<a href=\"https://codepen.io/kitety\">@kitety</a>)\n  on <a href=\"https://codepen.io\">CodePen</a>.</span>\n</p>\n<script async src=\"https://cpwebassets.codepen.io/assets/embed/ei.js\"></script>\n\n<p>除此之外我还做了一下测试，分别做出相似比为 0.1、0.5、0.5 加距离乘积、0.8 的相似比对于<strong>同样</strong>的点，得出如下。</p>\n<p>点的位置如下，可见不同的相似比画出来的曲线的效果也是不同的。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[</span><br><span class=\"line\">  &#123; <span class=\"attr\">x</span>: <span class=\"number\">100</span>, <span class=\"attr\">y</span>: <span class=\"number\">100</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">x</span>: <span class=\"number\">400</span>, <span class=\"attr\">y</span>: <span class=\"number\">100</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">x</span>: <span class=\"number\">400</span>, <span class=\"attr\">y</span>: <span class=\"number\">400</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">x</span>: <span class=\"number\">100</span>, <span class=\"attr\">y</span>: <span class=\"number\">400</span> &#125;,</span><br><span class=\"line\">];</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210405185248.png\"></p>\n<p>具体的效果可以参见下面的 demo，相似比过大、过小、为负数等都会有奇特的曲线出现，感兴趣的可以试试。</p>\n<p class=\"codepen\" data-height=\"600\" data-theme-id=\"dark\" data-default-tab=\"js,result\" data-user=\"kitety\" data-slug-hash=\"dyNRmbY\" data-preview=\"true\" style=\"height: 600px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;\" data-pen-title=\"dyNRmbY\">\n  <span>See the Pen <a href=\"https://codepen.io/kitety/pen/dyNRmbY\">\n  dyNRmbY</a> by kitety (<a href=\"https://codepen.io/kitety\">@kitety</a>)\n  on <a href=\"https://codepen.io\">CodePen</a>.</span>\n</p>\n<script async src=\"https://cpwebassets.codepen.io/assets/embed/ei.js\"></script>\n可见，使用线段位置与具体常数的乘积效果最好。\n\n<h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p>本篇文章简要分析了使用 canvas 绘制线条的具体方式，循序渐进的讲解了绘制线条，曲线和相似三角形曲线的处理方法，思路也是步步递进。感兴趣的可以在 demo 里面试试效果，尝试更换不同的相似比会有意想不到的效果。</p>\n<p>本文也是借鉴了很多前人的思考成果加以思考，参考链接在文章末尾已经列出。</p>\n<p>感谢阅读，完结撒花。</p>\n<h2 id=\"参考链接\"><a href=\"#参考链接\" class=\"headerlink\" title=\"参考链接\"></a>参考链接</h2><ul>\n<li><a href=\"https://stackoverflow.com/questions/7054272/how-to-draw-smooth-curve-through-n-points-using-javascript-html5-canvas\">how-to-draw-smooth-curve-through-n-points-using-javascript-html5-canvas</a></li>\n<li><a href=\"http://scaledinnovation.com/analytics/splines/aboutSplines.html\">Spline Interpolation</a></li>\n<li><a href=\"https://juejin.cn/post/6844903692747948039\">canvas 进阶——如何画出平滑的曲线?</a></li>\n<li><a href=\"https://github.com/hujiulong/blog/issues/1\">用 canvas 绘制一个曲线动画——深入理解贝塞尔曲线</a></li>\n<li><a href=\"https://www.zhihu.com/question/29565629\">怎么理解贝塞尔曲线？</a></li>\n<li><a href=\"https://output.jsbin.com/ApitIxo/2/\">stackoverflow 中的一个demo</a></li>\n</ul>\n","site":{"data":{}},"length":5953,"excerpt":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>点和线是平面世界的基础，而画点连线更是基本操作。但是关于画点连线的方法，以及所能带来的思考，也是蛮有意思的。</p>\n<p>在这片文章中，我会简单分析画点连线的基本方法。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210404111938.png\"></p>","more":"<h2 id=\"一起来画画\"><a href=\"#一起来画画\" class=\"headerlink\" title=\"一起来画画\"></a>一起来画画</h2><h3 id=\"基本的画点连线\"><a href=\"#基本的画点连线\" class=\"headerlink\" title=\"基本的画点连线\"></a>基本的画点连线</h3><p>在这个章节，我们会创建 <code>canvas</code> 并且在上面获取鼠标的点的位置，并且将点放入一个数组存储，用直线连接起来。为了方便操作，我们使用 <a href=\"https://www.pixijs.com/\">PIXI</a> 这个库来简化操作。</p>\n<p>具体的细节步骤如下：</p>\n<ul>\n<li>首先使用 PIXI 初始化应用，创建一个舞台</li>\n<li>然后获取 app.view，在 canvas 上面绑定点击事件</li>\n<li>获取点击事件的具体的坐标，在对应位置绘制圆，将其放入数组存储</li>\n<li>循环遍历数组，将两点依次连线，绘制出图形。</li>\n</ul>\n<p>便可以得出以下的效果<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210327114145.png\"><br>也可以在下面的环境中测试。</p>\n<p class=\"codepen\" data-height=\"600\" data-theme-id=\"dark\" data-default-tab=\"js,result\" data-user=\"kitety\" data-slug-hash=\"xxgVzpW\" data-preview=\"true\" style=\"height: 600px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;\" data-pen-title=\"xxgVzpW\">\n  <span>See the Pen <a href=\"https://codepen.io/kitety/pen/xxgVzpW\">\n  xxgVzpW</a> by kitety (<a href=\"https://codepen.io/kitety\">@kitety</a>)\n  on <a href=\"https://codepen.io\">CodePen</a>.</span>\n</p>\n<script async src=\"https://cpwebassets.codepen.io/assets/embed/ei.js\"></script>\n\n<p>上述的 demo 基本的实现了直线连接，但是表述很生硬，就是一段一段的线段，没有任何的美感。假如我们想要的是折线图，这就已经实现目标了，但是如果我们想要的是有点美感的曲线呢？这应该怎么做呢？这个时候就该我们的贝赛尔曲线登场了。</p>\n<h3 id=\"贝赛尔曲线\"><a href=\"#贝赛尔曲线\" class=\"headerlink\" title=\"贝赛尔曲线\"></a>贝赛尔曲线</h3><p>在<a href=\"https://zh.wikipedia.org/wiki/%E8%B2%9D%E8%8C%B2%E6%9B%B2%E7%B7%9A\">维基百科</a>中，他是这么解释的：在数学的数值分析领域中，贝塞尔曲线（英语：Bézier curve）是计算机图形学中相当重要的参数曲线。</p>\n<p>感觉还是不理解，详细的过程可以参考这篇<a href=\"https://github.com/hujiulong/blog/issues/1\">文章</a></p>\n<p>本节不是对贝塞尔曲线做专业分析，如果有需要请参考其他网站，本文引用已经列举出来了。</p>\n<h4 id=\"二次贝赛尔曲线\"><a href=\"#二次贝赛尔曲线\" class=\"headerlink\" title=\"二次贝赛尔曲线\"></a>二次贝赛尔曲线</h4><p>大概的二次贝赛尔曲线就如下图所示：<br><img src=\"https://z3.ax1x.com/2021/03/27/6x5yX4.gif\"><br>二次贝塞尔曲线由三个点 <code>P0</code>、<code>P1</code>、<code>P2</code> 来确定，这些点也叫做控制点。我们需要三个点就可以绘制出一条二次贝赛尔曲线，在 <code>canvas</code> 中的对应的方法就是<code>quadraticCurveTo</code>这个方法。</p>\n<h4 id=\"高次贝塞尔曲线\"><a href=\"#高次贝塞尔曲线\" class=\"headerlink\" title=\"高次贝塞尔曲线\"></a>高次贝塞尔曲线</h4><p>随着控制点的个数的增加，可以有三次，四次，N 次贝赛尔曲线，再多就不过多探讨。需要提示一下，绘制三次贝塞尔曲线的方法<code>bezierCurveTo</code>。</p>\n<h3 id=\"使用贝塞尔曲线绘制平滑曲线\"><a href=\"#使用贝塞尔曲线绘制平滑曲线\" class=\"headerlink\" title=\"使用贝塞尔曲线绘制平滑曲线\"></a>使用贝塞尔曲线绘制平滑曲线</h3><p>要想绘制贝赛尔曲线，我们最简单的思路就是需要找准起点，控制点，终点。</p>\n<p>最简单的就是假如我们有 A、B、C 三个点，我们需要绘制一条看似还算完美的曲线，我们应该怎么去思考呢？</p>\n<p>我们会计算出 B 和 C 的中点 B1，以 A 为起点，B 为控制点，B1 为终点，最后将 B1、C 用直线链接。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210327121024.png\"></p>\n<p>当然这只是三个点的情况，我们如此循环往复就可以绘制足够多的点了。</p>\n<h4 id=\"代码简析\"><a href=\"#代码简析\" class=\"headerlink\" title=\"代码简析\"></a>代码简析</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">drawLine</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 绘制之前全部清除</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> ii = <span class=\"number\">0</span>; ii &lt; ss.<span class=\"property\">length</span>; ii++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> bezier = ss[ii];</span><br><span class=\"line\">    app.<span class=\"property\">stage</span>.<span class=\"title function_\">removeChild</span>(bezier);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  ss = [];</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> start = arr[<span class=\"number\">0</span>];</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (arr.<span class=\"property\">length</span> === <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 两个点直接连线</span></span><br><span class=\"line\">    <span class=\"title function_\">drawBaseLine</span>(start.<span class=\"property\">pos</span>, arr[<span class=\"number\">1</span>].<span class=\"property\">pos</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (arr.<span class=\"property\">length</span> &gt;= <span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">1</span>; i &lt; arr.<span class=\"property\">length</span>; i++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> control = arr[i];</span><br><span class=\"line\">      <span class=\"keyword\">let</span> end;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!arr[i + <span class=\"number\">1</span>]) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 后面没有点了，将上一个贝塞尔曲线的终点和当前点连接</span></span><br><span class=\"line\">        <span class=\"title function_\">drawBaseLine</span>(start.<span class=\"property\">pos</span>, arr[i].<span class=\"property\">pos</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 将贝赛尔曲线终点设置为两点之间的中点</span></span><br><span class=\"line\">        end = <span class=\"title function_\">getMiddle</span>(arr[i], arr[i + <span class=\"number\">1</span>]);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"comment\">//  绘制贝赛尔曲线</span></span><br><span class=\"line\">      <span class=\"keyword\">var</span> bezier = <span class=\"keyword\">new</span> <span class=\"variable constant_\">PIXI</span>.<span class=\"title class_\">Graphics</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">      bezier.<span class=\"title function_\">lineStyle</span>(<span class=\"number\">4</span>, <span class=\"number\">0x1a7af8</span>, <span class=\"number\">1</span>);</span><br><span class=\"line\">      bezier.<span class=\"title function_\">moveTo</span>(start.<span class=\"property\">pos</span>.<span class=\"property\">x</span>, start.<span class=\"property\">pos</span>.<span class=\"property\">y</span>);</span><br><span class=\"line\">      bezier.<span class=\"title function_\">quadraticCurveTo</span>(</span><br><span class=\"line\">        control.<span class=\"property\">pos</span>.<span class=\"property\">x</span>,</span><br><span class=\"line\">        control.<span class=\"property\">pos</span>.<span class=\"property\">y</span>,</span><br><span class=\"line\">        end.<span class=\"property\">pos</span>.<span class=\"property\">x</span>,</span><br><span class=\"line\">        end.<span class=\"property\">pos</span>.<span class=\"property\">y</span></span><br><span class=\"line\">      );</span><br><span class=\"line\">      bezier.<span class=\"title function_\">endFill</span>();</span><br><span class=\"line\">      start = end;</span><br><span class=\"line\">      app.<span class=\"property\">stage</span>.<span class=\"title function_\">addChild</span>(bezier);</span><br><span class=\"line\">      ss.<span class=\"title function_\">push</span>(bezier);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>这样我们就可以尽量绘制出比较平滑的曲线了<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210327123049.png\"><br>也可以在下面的环境中测试。</p>\n<p class=\"codepen\" data-height=\"600\" data-theme-id=\"dark\" data-default-tab=\"js,result\" data-user=\"kitety\" data-slug-hash=\"eYgZjOM\" data-preview=\"true\" style=\"height: 600px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;\" data-pen-title=\"eYgZjOM\">\n  <span>See the Pen <a href=\"https://codepen.io/kitety/pen/eYgZjOM\">\n  eYgZjOM</a> by kitety (<a href=\"https://codepen.io/kitety\">@kitety</a>)\n  on <a href=\"https://codepen.io\">CodePen</a>.</span>\n</p>\n<script async src=\"https://cpwebassets.codepen.io/assets/embed/ei.js\"></script>\n\n<p>上述的代码基本是实现了比较平滑的曲线，但是我们的还是会发现一些问题，就是在绘制的时候会出现画出来的线并没有经过所有点这种情况。而且参考的文章下面也有了类似的思考，一样抛出了这个问题。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210404111818.png\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210327123211.png\"><br>看来革命尚未成功，同志仍需努力啊。</p>\n<h3 id=\"相似三角形与贝赛尔曲线\"><a href=\"#相似三角形与贝赛尔曲线\" class=\"headerlink\" title=\"相似三角形与贝赛尔曲线\"></a>相似三角形与贝赛尔曲线</h3><p>其实在处理问题的时候，我们需要将问题简单化。比如在画点连线的过程中，我们很轻易的知道，两点之间肯定是连接直线就是最佳的。在需要曲线的时候，往往是两个点以上，因此我们就先画好三个点的曲线。</p>\n<h4 id=\"切线\"><a href=\"#切线\" class=\"headerlink\" title=\"切线\"></a>切线</h4><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210327135731.png\"><br>如图，我们为三个点分了三种情况，其实前面两种很明显都是不合理的，都出现了没有必要的弯曲，只有最后一种稍显合理。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210327135938.png\"><br>我们围绕三种情况 B 点的位置做出切线，发现只有看 k1 和 k2 的斜率几乎一直的时候才是比较合理的曲线，也就是三点中，曲线经过中间一点的切线和另外两点所成的直线平行的时候，这样的曲线才是比较合理的。</p>\n<h4 id=\"贝塞尔切线\"><a href=\"#贝塞尔切线\" class=\"headerlink\" title=\"贝塞尔切线\"></a>贝塞尔切线</h4><p>而贝赛尔曲线的绘制图如下<br><img src=\"https://z3.ax1x.com/2021/03/27/6x5yX4.gif\"><br>我们截取中间的某个时刻会发现，很明显，贝塞尔曲线的起点和终点（其实也是控制点），他们的切线其实就是和轨迹相切的，这也是贝赛尔曲线的绘制方法，只不过起点和终点对应的就是 <code>t</code> 的 <code>0</code> 时刻和 <code>1</code> 时刻。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210327140837.png\"></p>\n<p>结论：我们绘制的曲线经过点的切线要和相邻的两点的直线平行，而贝赛尔曲线就是起点和终点平行，我们现在只需要找到其他的控制点绘制贝塞尔曲线即可。</p>\n<h4 id=\"解决问题\"><a href=\"#解决问题\" class=\"headerlink\" title=\"解决问题\"></a>解决问题</h4><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210327141659.png\"></p>\n<p>根据以上的思考，我们就有了后续的思路，我们分别需要在 AB 之间绘制一条贝赛尔曲线，B 为终点，切线相切；同时还要在 BC 之间绘制贝塞尔曲线，并且 B 点此时作为起点，要和上一条曲线经过 B 点的斜率一致。我们就有了上示的草稿图，并且可以得出一些相似的三角形。<br>在当我们有了 A、B、C 三个点的坐标之后，还有对应的相似比 <code>S1</code> 和 <code>S2</code>，<code>P1</code> 和 <code>P2</code> 的坐标就是比较简单了。</p>\n<p>接下来我们简单分析一下有 ABCDE 五个点的情况。我们五点中，中间的三个点是 BCD,我们都可以根据其各自的相邻两点做出对应的平行切线，并且每个点的切点上都可以找到对应两个点的控制点，根据控制点和各自的起点终点（其实也是控制点），我们可以绘制不同的红色举行的区域，分别可以用二次贝赛尔曲线绘制和三次贝赛尔曲线绘制。两点中有一个控制点的就是二次贝塞尔，比如 AB 之间；有两个控制点的就是三次贝塞尔，比如 BC 之间等。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210327143112.png\"></p>\n<p>说了这么多我们还没有落实一个数据，就是上面提到的相似比，我们用 S 表示。采用一种简单的情况来做具体的分析<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210331221957.png\"></p>\n<h4 id=\"代码简析-1\"><a href=\"#代码简析-1\" class=\"headerlink\" title=\"代码简析\"></a>代码简析</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 数组的两个点的构成的直角三角形的[w，h](w：底边长度，h：高)</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">va</span>(<span class=\"params\">arr, i, j</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> [arr[<span class=\"number\">2</span> * j] - arr[<span class=\"number\">2</span> * i], arr[<span class=\"number\">2</span> * j + <span class=\"number\">1</span>] - arr[<span class=\"number\">2</span> * i + <span class=\"number\">1</span>]];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 计算arr数组的i和j两个点之间的距离</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">distance</span>(<span class=\"params\">arr, i, j</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"title class_\">Math</span>.<span class=\"title function_\">sqrt</span>(</span><br><span class=\"line\">    <span class=\"title class_\">Math</span>.<span class=\"title function_\">pow</span>(arr[<span class=\"number\">2</span> * i] - arr[<span class=\"number\">2</span> * j], <span class=\"number\">2</span>) +</span><br><span class=\"line\">      <span class=\"title class_\">Math</span>.<span class=\"title function_\">pow</span>(arr[<span class=\"number\">2</span> * i + <span class=\"number\">1</span>] - arr[<span class=\"number\">2</span> * j + <span class=\"number\">1</span>], <span class=\"number\">2</span>)</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">controlPoints</span>(<span class=\"params\">x1, y1, x2, y2, x3, y3</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> t = <span class=\"number\">0.5</span>; <span class=\"comment\">// 常数取得0.5</span></span><br><span class=\"line\">  <span class=\"comment\">// 返回 w 和 h=&gt;[w,h]</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> v = <span class=\"title function_\">va</span>(<span class=\"variable language_\">arguments</span>, <span class=\"number\">0</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\">  <span class=\"keyword\">var</span> d01 = <span class=\"title function_\">distance</span>(<span class=\"variable language_\">arguments</span>, <span class=\"number\">0</span>, <span class=\"number\">1</span>);</span><br><span class=\"line\">  <span class=\"keyword\">var</span> d12 = <span class=\"title function_\">distance</span>(<span class=\"variable language_\">arguments</span>, <span class=\"number\">1</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\">  <span class=\"comment\">// 带入距离比例</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> d012 = d01 + d12;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> [</span><br><span class=\"line\">    x2 - (v[<span class=\"number\">0</span>] * t * d01) / d012,</span><br><span class=\"line\">    y2 - (v[<span class=\"number\">1</span>] * t * d01) / d012,</span><br><span class=\"line\">    x2 + (v[<span class=\"number\">0</span>] * t * d12) / d012,</span><br><span class=\"line\">    y2 + (v[<span class=\"number\">1</span>] * t * d12) / d012,</span><br><span class=\"line\">  ];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> ss = [];</span><br><span class=\"line\"><span class=\"keyword\">let</span> pts = [];</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">drawLine2</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 清楚所有的线段</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> ii = <span class=\"number\">0</span>; ii &lt; ss.<span class=\"property\">length</span>; ii++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> bezier = ss[ii];</span><br><span class=\"line\">    app.<span class=\"property\">stage</span>.<span class=\"title function_\">removeChild</span>(bezier);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  ss = [];</span><br><span class=\"line\">  pts = [];</span><br><span class=\"line\">  <span class=\"comment\">// 将点转换为位置的一维数组</span></span><br><span class=\"line\">  <span class=\"comment\">// [&#123;pos:&#123;x1,y1&#125;&#125;,&#123;pos:&#123;x2,y2&#125;&#125;]=&gt;[x1,y1,x2,y2]</span></span><br><span class=\"line\">  arr</span><br><span class=\"line\">    .<span class=\"title function_\">map</span>(<span class=\"function\">(<span class=\"params\">i</span>) =&gt;</span> i.<span class=\"property\">pos</span>)</span><br><span class=\"line\">    .<span class=\"title function_\">forEach</span>(<span class=\"function\">(<span class=\"params\">item</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      pts.<span class=\"title function_\">push</span>(item.<span class=\"property\">x</span>);</span><br><span class=\"line\">      pts.<span class=\"title function_\">push</span>(item.<span class=\"property\">y</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  cps = []; <span class=\"comment\">// 控制点的位置</span></span><br><span class=\"line\">  <span class=\"comment\">// 根据点的位置计算控制点的位置</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; pts.<span class=\"property\">length</span> - <span class=\"number\">2</span>; i += <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">    cps = cps.<span class=\"title function_\">concat</span>(</span><br><span class=\"line\">      <span class=\"title function_\">controlPoints</span>(</span><br><span class=\"line\">        pts[<span class=\"number\">2</span> * i],</span><br><span class=\"line\">        pts[<span class=\"number\">2</span> * i + <span class=\"number\">1</span>],</span><br><span class=\"line\">        pts[<span class=\"number\">2</span> * i + <span class=\"number\">2</span>],</span><br><span class=\"line\">        pts[<span class=\"number\">2</span> * i + <span class=\"number\">3</span>],</span><br><span class=\"line\">        pts[<span class=\"number\">2</span> * i + <span class=\"number\">4</span>],</span><br><span class=\"line\">        pts[<span class=\"number\">2</span> * i + <span class=\"number\">5</span>]</span><br><span class=\"line\">      )</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> start = arr[<span class=\"number\">0</span>];</span><br><span class=\"line\">  <span class=\"comment\">// 两个点</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (arr.<span class=\"property\">length</span> === <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">    <span class=\"title function_\">drawBaseLine</span>(start.<span class=\"property\">pos</span>, arr[<span class=\"number\">1</span>].<span class=\"property\">pos</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// 多个点</span></span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;pts&quot;</span>, pts, <span class=\"string\">&quot;cps&quot;</span>, cps);</span><br><span class=\"line\">  <span class=\"keyword\">let</span> end;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> control;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> len = arr.<span class=\"property\">length</span>;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (arr.<span class=\"property\">length</span> &gt;= <span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">    start = arr[<span class=\"number\">0</span>];</span><br><span class=\"line\">    end = arr[<span class=\"number\">1</span>];</span><br><span class=\"line\">    <span class=\"comment\">// 开始的部分为二次贝赛尔曲线</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> bezier = <span class=\"keyword\">new</span> <span class=\"variable constant_\">PIXI</span>.<span class=\"title class_\">Graphics</span>();</span><br><span class=\"line\">    bezier.<span class=\"title function_\">lineStyle</span>(<span class=\"number\">4</span>, <span class=\"number\">0x1a7af8</span>, <span class=\"number\">1</span>);</span><br><span class=\"line\">    bezier.<span class=\"title function_\">moveTo</span>(start.<span class=\"property\">pos</span>.<span class=\"property\">x</span>, start.<span class=\"property\">pos</span>.<span class=\"property\">y</span>);</span><br><span class=\"line\">    bezier.<span class=\"title function_\">quadraticCurveTo</span>(cps[<span class=\"number\">0</span>], cps[<span class=\"number\">1</span>], pts[<span class=\"number\">2</span>], pts[<span class=\"number\">3</span>]);</span><br><span class=\"line\">    bezier.<span class=\"title function_\">endFill</span>();</span><br><span class=\"line\">    start = end;</span><br><span class=\"line\">    app.<span class=\"property\">stage</span>.<span class=\"title function_\">addChild</span>(bezier);</span><br><span class=\"line\">    ss.<span class=\"title function_\">push</span>(bezier);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">2</span>; i &lt; len - <span class=\"number\">1</span>; i += <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 中间部分为三次贝赛尔曲线</span></span><br><span class=\"line\">      start = end;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">var</span> bezier = <span class=\"keyword\">new</span> <span class=\"variable constant_\">PIXI</span>.<span class=\"title class_\">Graphics</span>();</span><br><span class=\"line\">      bezier.<span class=\"title function_\">lineStyle</span>(<span class=\"number\">4</span>, <span class=\"number\">0x1a7af8</span>, <span class=\"number\">1</span>);</span><br><span class=\"line\">      bezier.<span class=\"title function_\">moveTo</span>(start.<span class=\"property\">pos</span>.<span class=\"property\">x</span>, start.<span class=\"property\">pos</span>.<span class=\"property\">y</span>);</span><br><span class=\"line\">      bezier.<span class=\"title function_\">bezierCurveTo</span>(</span><br><span class=\"line\">        cps[(<span class=\"number\">2</span> * (i - <span class=\"number\">1</span>) - <span class=\"number\">1</span>) * <span class=\"number\">2</span>],</span><br><span class=\"line\">        cps[(<span class=\"number\">2</span> * (i - <span class=\"number\">1</span>) - <span class=\"number\">1</span>) * <span class=\"number\">2</span> + <span class=\"number\">1</span>],</span><br><span class=\"line\">        cps[<span class=\"number\">2</span> * (i - <span class=\"number\">1</span>) * <span class=\"number\">2</span>],</span><br><span class=\"line\">        cps[<span class=\"number\">2</span> * (i - <span class=\"number\">1</span>) * <span class=\"number\">2</span> + <span class=\"number\">1</span>],</span><br><span class=\"line\">        pts[i * <span class=\"number\">2</span>],</span><br><span class=\"line\">        pts[i * <span class=\"number\">2</span> + <span class=\"number\">1</span>]</span><br><span class=\"line\">      );</span><br><span class=\"line\">      bezier.<span class=\"title function_\">endFill</span>();</span><br><span class=\"line\">      end = arr[i];</span><br><span class=\"line\">      app.<span class=\"property\">stage</span>.<span class=\"title function_\">addChild</span>(bezier);</span><br><span class=\"line\">      ss.<span class=\"title function_\">push</span>(bezier);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    start = end;</span><br><span class=\"line\">    <span class=\"comment\">// 结束部分为二次贝赛尔曲线</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> bezier = <span class=\"keyword\">new</span> <span class=\"variable constant_\">PIXI</span>.<span class=\"title class_\">Graphics</span>();</span><br><span class=\"line\">    bezier.<span class=\"title function_\">lineStyle</span>(<span class=\"number\">4</span>, <span class=\"number\">0x1a7af8</span>, <span class=\"number\">1</span>);</span><br><span class=\"line\">    bezier.<span class=\"title function_\">moveTo</span>(start.<span class=\"property\">pos</span>.<span class=\"property\">x</span>, start.<span class=\"property\">pos</span>.<span class=\"property\">y</span>);</span><br><span class=\"line\">    bezier.<span class=\"title function_\">quadraticCurveTo</span>(</span><br><span class=\"line\">      cps[(<span class=\"number\">2</span> * (i - <span class=\"number\">1</span>) - <span class=\"number\">1</span>) * <span class=\"number\">2</span>],</span><br><span class=\"line\">      cps[(<span class=\"number\">2</span> * (i - <span class=\"number\">1</span>) - <span class=\"number\">1</span>) * <span class=\"number\">2</span> + <span class=\"number\">1</span>],</span><br><span class=\"line\">      pts[i * <span class=\"number\">2</span>],</span><br><span class=\"line\">      pts[i * <span class=\"number\">2</span> + <span class=\"number\">1</span>]</span><br><span class=\"line\">    );</span><br><span class=\"line\">    bezier.<span class=\"title function_\">endFill</span>();</span><br><span class=\"line\">    app.<span class=\"property\">stage</span>.<span class=\"title function_\">addChild</span>(bezier);</span><br><span class=\"line\">    ss.<span class=\"title function_\">push</span>(bezier);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>具体我们可以看看下面的 demo。(相思比<code>S = t * d01 / d012</code>)</p>\n<p class=\"codepen\" data-height=\"600\" data-theme-id=\"dark\" data-default-tab=\"js,result\" data-user=\"kitety\" data-slug-hash=\"ZELKwyj\" data-preview=\"true\" style=\"height: 600px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;\" data-pen-title=\"ZELKwyj\">\n  <span>See the Pen <a href=\"https://codepen.io/kitety/pen/ZELKwyj\">\n  ZELKwyj</a> by kitety (<a href=\"https://codepen.io/kitety\">@kitety</a>)\n  on <a href=\"https://codepen.io\">CodePen</a>.</span>\n</p>\n<script async src=\"https://cpwebassets.codepen.io/assets/embed/ei.js\"></script>\n\n<p>除此之外我还做了一下测试，分别做出相似比为 0.1、0.5、0.5 加距离乘积、0.8 的相似比对于<strong>同样</strong>的点，得出如下。</p>\n<p>点的位置如下，可见不同的相似比画出来的曲线的效果也是不同的。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[</span><br><span class=\"line\">  &#123; <span class=\"attr\">x</span>: <span class=\"number\">100</span>, <span class=\"attr\">y</span>: <span class=\"number\">100</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">x</span>: <span class=\"number\">400</span>, <span class=\"attr\">y</span>: <span class=\"number\">100</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">x</span>: <span class=\"number\">400</span>, <span class=\"attr\">y</span>: <span class=\"number\">400</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">x</span>: <span class=\"number\">100</span>, <span class=\"attr\">y</span>: <span class=\"number\">400</span> &#125;,</span><br><span class=\"line\">];</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20210405185248.png\"></p>\n<p>具体的效果可以参见下面的 demo，相似比过大、过小、为负数等都会有奇特的曲线出现，感兴趣的可以试试。</p>\n<p class=\"codepen\" data-height=\"600\" data-theme-id=\"dark\" data-default-tab=\"js,result\" data-user=\"kitety\" data-slug-hash=\"dyNRmbY\" data-preview=\"true\" style=\"height: 600px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;\" data-pen-title=\"dyNRmbY\">\n  <span>See the Pen <a href=\"https://codepen.io/kitety/pen/dyNRmbY\">\n  dyNRmbY</a> by kitety (<a href=\"https://codepen.io/kitety\">@kitety</a>)\n  on <a href=\"https://codepen.io\">CodePen</a>.</span>\n</p>\n<script async src=\"https://cpwebassets.codepen.io/assets/embed/ei.js\"></script>\n可见，使用线段位置与具体常数的乘积效果最好。\n\n<h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p>本篇文章简要分析了使用 canvas 绘制线条的具体方式，循序渐进的讲解了绘制线条，曲线和相似三角形曲线的处理方法，思路也是步步递进。感兴趣的可以在 demo 里面试试效果，尝试更换不同的相似比会有意想不到的效果。</p>\n<p>本文也是借鉴了很多前人的思考成果加以思考，参考链接在文章末尾已经列出。</p>\n<p>感谢阅读，完结撒花。</p>\n<h2 id=\"参考链接\"><a href=\"#参考链接\" class=\"headerlink\" title=\"参考链接\"></a>参考链接</h2><ul>\n<li><a href=\"https://stackoverflow.com/questions/7054272/how-to-draw-smooth-curve-through-n-points-using-javascript-html5-canvas\">how-to-draw-smooth-curve-through-n-points-using-javascript-html5-canvas</a></li>\n<li><a href=\"http://scaledinnovation.com/analytics/splines/aboutSplines.html\">Spline Interpolation</a></li>\n<li><a href=\"https://juejin.cn/post/6844903692747948039\">canvas 进阶——如何画出平滑的曲线?</a></li>\n<li><a href=\"https://github.com/hujiulong/blog/issues/1\">用 canvas 绘制一个曲线动画——深入理解贝塞尔曲线</a></li>\n<li><a href=\"https://www.zhihu.com/question/29565629\">怎么理解贝塞尔曲线？</a></li>\n<li><a href=\"https://output.jsbin.com/ApitIxo/2/\">stackoverflow 中的一个demo</a></li>\n</ul>"},{"title":"Git修改Commit信息","abbrlink":"7295d6aa","translate_title":"git-modify-commit-information","date":"2020-12-07T05:48:30.000Z","_content":"\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607320222725-image.png)\n\n## 背景\n\n在我们的业务开发中，最常见的就是使用`Git`对代码进行版本控制。随之衍生的，就是有可能会遇到修改 Commit Message 的场景，今天我们来总结一下这些基本的操作。\n\n<!-- more -->\n\n## 应用场景\n\n### 准备环境\n\n我们先初始化一个仓库，里面提交一些 commit。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607320677223-image.png)\n我这里是有五次提交，分别添加：a,b,c,d,e。\n\n### 修改最近一次的 Commit\n\n```bash\ngit commit --amend\n```\n\n输入之后我们可以进入 vi 编辑模式对 Git Commit 信息进行编辑\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607320804092-image.png)\n我们输入`i`编辑，退出是：按键 esc，再在底部输入`:x`即可。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607320903950-image.png)\n\n可以看到，此时最后一个的 commit message 已经修改了。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607320937476-image.png)\n\n### 修改非最后一次的 Commit 信息\n\n比如我们想修改 b 节点-`* be12459 - b (17 minutes ago)`这个节点的信息，我们需要使用到`git rebase`命令。我来简单示范一下。\n\ngit rebase 的操作是变基，我们要信息 b 的信息，因此就要变到 b 的前一个：a 的后面，因此我们使用 a 的 hash 来操作\n\n```bash\ngit rebase -i 8f9a167（目标提交的前一个提交的hash）\n```\n\n我们就可以进入一个 vi 编辑的模式\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607321359580-image.png)\n我对下面的提示做个简单的翻译\n\n```bash\n# p, pick <commit> = 保留commit\n# r, reword <commit> = 保留commit, 可以修改信息\n# e, edit <commit> = 保留commit，但是要修改提交文件\n# s, squash <commit> = 将次commit和前一个commit合并\n# f, fixup <commit> = 和squash类似，但是我不保留这次的提交信息\n# x, exec <command> = 执行shell\n# b, break = 停止在此处 (后续使用 'git rebase --continue')\n# d, drop <commit> = 丢弃commit\n# l, label <label> = 用名称标记当前HEAD\n# t, reset <label> = 重置到某个label\n# m, merge [-C <commit> | -c <commit>] <label> [# <oneline>]\n# .       create a merge commit using the original merge commit's\n# .       message (or the oneline, if no original merge commit was\n# .       specified). Use -c <commit> to reword the commit message.\n```\n\n可以发现我们使用`r, reword`就可以达到目的了。\n我们修改 b 的操作 tag 为 r，这个时候不用修改 commit 信息，在后面修改。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607321592158-image.png)\n接下来会自动进入页面，我们修改 b 的 commit 信息\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607321620974-image.png)\n验证下结果，明显成功了。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607321637038-image.png)\n\n### 删除一个 commit 信息\n\n比如此处我要删除 C 的提交信息，**但是保留 C 的文件修改**。我们经过上一步，我们使用 f 就是了。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607322289030-image.png)\n结果如下：\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607322295320-image.png)\n发现 C 提交的信息的删除了，但是 C 提交的文件修改还是存在的，所造成的文件修改最终归于 C 的上一个提交：`b-edit`去了。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-8/1607407070868-image.png)\n\n## 结语\n\n简单总结了下平常在工作中遇到的修改 Git commit 信息的方法，留以备忘。\n","source":"_posts/git修改commit信息.md","raw":"---\ntitle: Git修改Commit信息\nabbrlink: 7295d6aa\ntranslate_title: git-modify-commit-information\ndate: 2020-12-07 13:48:30\ntags:\n  - Git\n---\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607320222725-image.png)\n\n## 背景\n\n在我们的业务开发中，最常见的就是使用`Git`对代码进行版本控制。随之衍生的，就是有可能会遇到修改 Commit Message 的场景，今天我们来总结一下这些基本的操作。\n\n<!-- more -->\n\n## 应用场景\n\n### 准备环境\n\n我们先初始化一个仓库，里面提交一些 commit。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607320677223-image.png)\n我这里是有五次提交，分别添加：a,b,c,d,e。\n\n### 修改最近一次的 Commit\n\n```bash\ngit commit --amend\n```\n\n输入之后我们可以进入 vi 编辑模式对 Git Commit 信息进行编辑\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607320804092-image.png)\n我们输入`i`编辑，退出是：按键 esc，再在底部输入`:x`即可。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607320903950-image.png)\n\n可以看到，此时最后一个的 commit message 已经修改了。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607320937476-image.png)\n\n### 修改非最后一次的 Commit 信息\n\n比如我们想修改 b 节点-`* be12459 - b (17 minutes ago)`这个节点的信息，我们需要使用到`git rebase`命令。我来简单示范一下。\n\ngit rebase 的操作是变基，我们要信息 b 的信息，因此就要变到 b 的前一个：a 的后面，因此我们使用 a 的 hash 来操作\n\n```bash\ngit rebase -i 8f9a167（目标提交的前一个提交的hash）\n```\n\n我们就可以进入一个 vi 编辑的模式\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607321359580-image.png)\n我对下面的提示做个简单的翻译\n\n```bash\n# p, pick <commit> = 保留commit\n# r, reword <commit> = 保留commit, 可以修改信息\n# e, edit <commit> = 保留commit，但是要修改提交文件\n# s, squash <commit> = 将次commit和前一个commit合并\n# f, fixup <commit> = 和squash类似，但是我不保留这次的提交信息\n# x, exec <command> = 执行shell\n# b, break = 停止在此处 (后续使用 'git rebase --continue')\n# d, drop <commit> = 丢弃commit\n# l, label <label> = 用名称标记当前HEAD\n# t, reset <label> = 重置到某个label\n# m, merge [-C <commit> | -c <commit>] <label> [# <oneline>]\n# .       create a merge commit using the original merge commit's\n# .       message (or the oneline, if no original merge commit was\n# .       specified). Use -c <commit> to reword the commit message.\n```\n\n可以发现我们使用`r, reword`就可以达到目的了。\n我们修改 b 的操作 tag 为 r，这个时候不用修改 commit 信息，在后面修改。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607321592158-image.png)\n接下来会自动进入页面，我们修改 b 的 commit 信息\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607321620974-image.png)\n验证下结果，明显成功了。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607321637038-image.png)\n\n### 删除一个 commit 信息\n\n比如此处我要删除 C 的提交信息，**但是保留 C 的文件修改**。我们经过上一步，我们使用 f 就是了。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607322289030-image.png)\n结果如下：\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607322295320-image.png)\n发现 C 提交的信息的删除了，但是 C 提交的文件修改还是存在的，所造成的文件修改最终归于 C 的上一个提交：`b-edit`去了。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-8/1607407070868-image.png)\n\n## 结语\n\n简单总结了下平常在工作中遇到的修改 Git commit 信息的方法，留以备忘。\n","slug":"git修改commit信息","published":1,"updated":"2021-09-29T07:53:51.821Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy6bm001vp4vledat3g6e","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607320222725-image.png\"></p>\n<h2 id=\"背景\"><a href=\"#背景\" class=\"headerlink\" title=\"背景\"></a>背景</h2><p>在我们的业务开发中，最常见的就是使用<code>Git</code>对代码进行版本控制。随之衍生的，就是有可能会遇到修改 Commit Message 的场景，今天我们来总结一下这些基本的操作。</p>\n<span id=\"more\"></span>\n\n<h2 id=\"应用场景\"><a href=\"#应用场景\" class=\"headerlink\" title=\"应用场景\"></a>应用场景</h2><h3 id=\"准备环境\"><a href=\"#准备环境\" class=\"headerlink\" title=\"准备环境\"></a>准备环境</h3><p>我们先初始化一个仓库，里面提交一些 commit。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607320677223-image.png\"><br>我这里是有五次提交，分别添加：a,b,c,d,e。</p>\n<h3 id=\"修改最近一次的-Commit\"><a href=\"#修改最近一次的-Commit\" class=\"headerlink\" title=\"修改最近一次的 Commit\"></a>修改最近一次的 Commit</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git commit --amend</span><br></pre></td></tr></table></figure>\n\n<p>输入之后我们可以进入 vi 编辑模式对 Git Commit 信息进行编辑</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607320804092-image.png\"><br>我们输入<code>i</code>编辑，退出是：按键 esc，再在底部输入<code>:x</code>即可。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607320903950-image.png\"></p>\n<p>可以看到，此时最后一个的 commit message 已经修改了。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607320937476-image.png\"></p>\n<h3 id=\"修改非最后一次的-Commit-信息\"><a href=\"#修改非最后一次的-Commit-信息\" class=\"headerlink\" title=\"修改非最后一次的 Commit 信息\"></a>修改非最后一次的 Commit 信息</h3><p>比如我们想修改 b 节点-<code>* be12459 - b (17 minutes ago)</code>这个节点的信息，我们需要使用到<code>git rebase</code>命令。我来简单示范一下。</p>\n<p>git rebase 的操作是变基，我们要信息 b 的信息，因此就要变到 b 的前一个：a 的后面，因此我们使用 a 的 hash 来操作</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git rebase -i 8f9a167（目标提交的前一个提交的<span class=\"built_in\">hash</span>）</span><br></pre></td></tr></table></figure>\n\n<p>我们就可以进入一个 vi 编辑的模式</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607321359580-image.png\"><br>我对下面的提示做个简单的翻译</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># p, pick &lt;commit&gt; = 保留commit</span></span><br><span class=\"line\"><span class=\"comment\"># r, reword &lt;commit&gt; = 保留commit, 可以修改信息</span></span><br><span class=\"line\"><span class=\"comment\"># e, edit &lt;commit&gt; = 保留commit，但是要修改提交文件</span></span><br><span class=\"line\"><span class=\"comment\"># s, squash &lt;commit&gt; = 将次commit和前一个commit合并</span></span><br><span class=\"line\"><span class=\"comment\"># f, fixup &lt;commit&gt; = 和squash类似，但是我不保留这次的提交信息</span></span><br><span class=\"line\"><span class=\"comment\"># x, exec &lt;command&gt; = 执行shell</span></span><br><span class=\"line\"><span class=\"comment\"># b, break = 停止在此处 (后续使用 &#x27;git rebase --continue&#x27;)</span></span><br><span class=\"line\"><span class=\"comment\"># d, drop &lt;commit&gt; = 丢弃commit</span></span><br><span class=\"line\"><span class=\"comment\"># l, label &lt;label&gt; = 用名称标记当前HEAD</span></span><br><span class=\"line\"><span class=\"comment\"># t, reset &lt;label&gt; = 重置到某个label</span></span><br><span class=\"line\"><span class=\"comment\"># m, merge [-C &lt;commit&gt; | -c &lt;commit&gt;] &lt;label&gt; [# &lt;oneline&gt;]</span></span><br><span class=\"line\"><span class=\"comment\"># .       create a merge commit using the original merge commit&#x27;s</span></span><br><span class=\"line\"><span class=\"comment\"># .       message (or the oneline, if no original merge commit was</span></span><br><span class=\"line\"><span class=\"comment\"># .       specified). Use -c &lt;commit&gt; to reword the commit message.</span></span><br></pre></td></tr></table></figure>\n\n<p>可以发现我们使用<code>r, reword</code>就可以达到目的了。<br>我们修改 b 的操作 tag 为 r，这个时候不用修改 commit 信息，在后面修改。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607321592158-image.png\"><br>接下来会自动进入页面，我们修改 b 的 commit 信息<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607321620974-image.png\"><br>验证下结果，明显成功了。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607321637038-image.png\"></p>\n<h3 id=\"删除一个-commit-信息\"><a href=\"#删除一个-commit-信息\" class=\"headerlink\" title=\"删除一个 commit 信息\"></a>删除一个 commit 信息</h3><p>比如此处我要删除 C 的提交信息，<strong>但是保留 C 的文件修改</strong>。我们经过上一步，我们使用 f 就是了。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607322289030-image.png\"><br>结果如下：<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607322295320-image.png\"><br>发现 C 提交的信息的删除了，但是 C 提交的文件修改还是存在的，所造成的文件修改最终归于 C 的上一个提交：<code>b-edit</code>去了。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-8/1607407070868-image.png\"></p>\n<h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p>简单总结了下平常在工作中遇到的修改 Git commit 信息的方法，留以备忘。</p>\n","site":{"data":{}},"length":1357,"excerpt":"<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607320222725-image.png\"></p>\n<h2 id=\"背景\"><a href=\"#背景\" class=\"headerlink\" title=\"背景\"></a>背景</h2><p>在我们的业务开发中，最常见的就是使用<code>Git</code>对代码进行版本控制。随之衍生的，就是有可能会遇到修改 Commit Message 的场景，今天我们来总结一下这些基本的操作。</p>","more":"<h2 id=\"应用场景\"><a href=\"#应用场景\" class=\"headerlink\" title=\"应用场景\"></a>应用场景</h2><h3 id=\"准备环境\"><a href=\"#准备环境\" class=\"headerlink\" title=\"准备环境\"></a>准备环境</h3><p>我们先初始化一个仓库，里面提交一些 commit。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607320677223-image.png\"><br>我这里是有五次提交，分别添加：a,b,c,d,e。</p>\n<h3 id=\"修改最近一次的-Commit\"><a href=\"#修改最近一次的-Commit\" class=\"headerlink\" title=\"修改最近一次的 Commit\"></a>修改最近一次的 Commit</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git commit --amend</span><br></pre></td></tr></table></figure>\n\n<p>输入之后我们可以进入 vi 编辑模式对 Git Commit 信息进行编辑</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607320804092-image.png\"><br>我们输入<code>i</code>编辑，退出是：按键 esc，再在底部输入<code>:x</code>即可。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607320903950-image.png\"></p>\n<p>可以看到，此时最后一个的 commit message 已经修改了。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607320937476-image.png\"></p>\n<h3 id=\"修改非最后一次的-Commit-信息\"><a href=\"#修改非最后一次的-Commit-信息\" class=\"headerlink\" title=\"修改非最后一次的 Commit 信息\"></a>修改非最后一次的 Commit 信息</h3><p>比如我们想修改 b 节点-<code>* be12459 - b (17 minutes ago)</code>这个节点的信息，我们需要使用到<code>git rebase</code>命令。我来简单示范一下。</p>\n<p>git rebase 的操作是变基，我们要信息 b 的信息，因此就要变到 b 的前一个：a 的后面，因此我们使用 a 的 hash 来操作</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git rebase -i 8f9a167（目标提交的前一个提交的<span class=\"built_in\">hash</span>）</span><br></pre></td></tr></table></figure>\n\n<p>我们就可以进入一个 vi 编辑的模式</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607321359580-image.png\"><br>我对下面的提示做个简单的翻译</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># p, pick &lt;commit&gt; = 保留commit</span></span><br><span class=\"line\"><span class=\"comment\"># r, reword &lt;commit&gt; = 保留commit, 可以修改信息</span></span><br><span class=\"line\"><span class=\"comment\"># e, edit &lt;commit&gt; = 保留commit，但是要修改提交文件</span></span><br><span class=\"line\"><span class=\"comment\"># s, squash &lt;commit&gt; = 将次commit和前一个commit合并</span></span><br><span class=\"line\"><span class=\"comment\"># f, fixup &lt;commit&gt; = 和squash类似，但是我不保留这次的提交信息</span></span><br><span class=\"line\"><span class=\"comment\"># x, exec &lt;command&gt; = 执行shell</span></span><br><span class=\"line\"><span class=\"comment\"># b, break = 停止在此处 (后续使用 &#x27;git rebase --continue&#x27;)</span></span><br><span class=\"line\"><span class=\"comment\"># d, drop &lt;commit&gt; = 丢弃commit</span></span><br><span class=\"line\"><span class=\"comment\"># l, label &lt;label&gt; = 用名称标记当前HEAD</span></span><br><span class=\"line\"><span class=\"comment\"># t, reset &lt;label&gt; = 重置到某个label</span></span><br><span class=\"line\"><span class=\"comment\"># m, merge [-C &lt;commit&gt; | -c &lt;commit&gt;] &lt;label&gt; [# &lt;oneline&gt;]</span></span><br><span class=\"line\"><span class=\"comment\"># .       create a merge commit using the original merge commit&#x27;s</span></span><br><span class=\"line\"><span class=\"comment\"># .       message (or the oneline, if no original merge commit was</span></span><br><span class=\"line\"><span class=\"comment\"># .       specified). Use -c &lt;commit&gt; to reword the commit message.</span></span><br></pre></td></tr></table></figure>\n\n<p>可以发现我们使用<code>r, reword</code>就可以达到目的了。<br>我们修改 b 的操作 tag 为 r，这个时候不用修改 commit 信息，在后面修改。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607321592158-image.png\"><br>接下来会自动进入页面，我们修改 b 的 commit 信息<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607321620974-image.png\"><br>验证下结果，明显成功了。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607321637038-image.png\"></p>\n<h3 id=\"删除一个-commit-信息\"><a href=\"#删除一个-commit-信息\" class=\"headerlink\" title=\"删除一个 commit 信息\"></a>删除一个 commit 信息</h3><p>比如此处我要删除 C 的提交信息，<strong>但是保留 C 的文件修改</strong>。我们经过上一步，我们使用 f 就是了。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607322289030-image.png\"><br>结果如下：<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-7/1607322295320-image.png\"><br>发现 C 提交的信息的删除了，但是 C 提交的文件修改还是存在的，所造成的文件修改最终归于 C 的上一个提交：<code>b-edit</code>去了。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-12-8/1607407070868-image.png\"></p>\n<h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p>简单总结了下平常在工作中遇到的修改 Git commit 信息的方法，留以备忘。</p>"},{"title":"再学一次JS原型","abbrlink":"982386de","translate_title":"learn-js-prototype-again","date":"2020-08-23T08:09:51.000Z","_content":"\n## 忘却的知识需要复习\n\n看到这张图的时候感觉很乱，心中已经忘却的原型知识明显招架不住，因此就需要重新整理一下了。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200823161711.png)\n\n<!-- more -->\n\n## 单例模式\n\n![image-20200823162649747](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/image-20200823162649747.png)\n\n单例模式解决的问题：把描述同一件事物的属性和特征进行归类，存储在同一个内存空间中，因此避免了全局变量之间的冲突、污染。\n\n其中 person1 等就是为命名空间。每一个命名空间都是 JS 的 Object 这个内置基类的实例，单独的实例。\n\n### 高级单例模式\n\n```js\nvar nameSpace=(function(){\n  var n = 12;\n  function fn(){\n    ...\n  }\n  return {\n    fn:fn\n  }\n})()\n```\n\n在给命名空间赋值的时候不是直接返回对象，先执行匿名函数，形成一个私有作用域，不销毁的栈内存。在这个私有作用域中创建堆内存，把堆内存的地址赋值给命名空间。\n\n优点: 可以在命名空间中创建很多的内容，比如变量、函数，哪些需要提供给外面调取使用，我们才返回到最终的对象中，这也是模块化实现的一种思想。\n\n### this 作用域（浏览器中）\n\n- 可以根据函数调用前面的对象来判断。例如`a.b()`的话 this 就指向 a，没有的话就指向全局。\n- 在事件中指向触发事件的`target`\n- 立即执行函数的 this 指向全局\n\n### 题目\n\n## 工厂模式\n\n把实现相同功能的代码封装，批量生产。低耦合高内聚，减少页面中的冗余代码，提高代码的重复使用率。\n\n```js\nfunction createPerson(name, age) {\n  var obj = {};\n  obj.name = name;\n  obj.age = age;\n  return obj;\n}\nvar p1 = new Person(\"x\", 12);\nvar p2 = new Person(\"y\", 12);\n```\n\n## 面向对象\n\n简单的定义\n\n- 对象：万物皆对象；\n- 类：对象的具体细分（功能特点分类）\n- 实例：类中具体的一个事物。\n- JS 就是基于面向对象设计和开发出来的语言\n\n### 实例和类型的判断\n\n- typeof\n- instanceof\n- Object.prototype.toString.call(X)\n\n### 原型链的查找原则\n\n- 所有的函数数据类型都天生自带一个属性：prototype（原型），这个属性是一个对象，浏览器会默认开辟一个堆内存\n- 在浏览器给 prototype 开辟的堆内存中有一个天生自带的属性：constructor，这个属性指向当前函数本身。\n- 每一个对象都有一个`__proto__`属性，这个属性指向当前实例所属类的 prototype（如果不能确定他是谁的实例，都是 object 的实例）。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200823232308.png)\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200823232322.png)\n","source":"_posts/再学一次JS原型.md","raw":"---\ntitle: 再学一次JS原型\nabbrlink: 982386de\ntags:\n  - JS\ntranslate_title: learn-js-prototype-again\ndate: 2020-08-23 16:09:51\n---\n\n## 忘却的知识需要复习\n\n看到这张图的时候感觉很乱，心中已经忘却的原型知识明显招架不住，因此就需要重新整理一下了。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200823161711.png)\n\n<!-- more -->\n\n## 单例模式\n\n![image-20200823162649747](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/image-20200823162649747.png)\n\n单例模式解决的问题：把描述同一件事物的属性和特征进行归类，存储在同一个内存空间中，因此避免了全局变量之间的冲突、污染。\n\n其中 person1 等就是为命名空间。每一个命名空间都是 JS 的 Object 这个内置基类的实例，单独的实例。\n\n### 高级单例模式\n\n```js\nvar nameSpace=(function(){\n  var n = 12;\n  function fn(){\n    ...\n  }\n  return {\n    fn:fn\n  }\n})()\n```\n\n在给命名空间赋值的时候不是直接返回对象，先执行匿名函数，形成一个私有作用域，不销毁的栈内存。在这个私有作用域中创建堆内存，把堆内存的地址赋值给命名空间。\n\n优点: 可以在命名空间中创建很多的内容，比如变量、函数，哪些需要提供给外面调取使用，我们才返回到最终的对象中，这也是模块化实现的一种思想。\n\n### this 作用域（浏览器中）\n\n- 可以根据函数调用前面的对象来判断。例如`a.b()`的话 this 就指向 a，没有的话就指向全局。\n- 在事件中指向触发事件的`target`\n- 立即执行函数的 this 指向全局\n\n### 题目\n\n## 工厂模式\n\n把实现相同功能的代码封装，批量生产。低耦合高内聚，减少页面中的冗余代码，提高代码的重复使用率。\n\n```js\nfunction createPerson(name, age) {\n  var obj = {};\n  obj.name = name;\n  obj.age = age;\n  return obj;\n}\nvar p1 = new Person(\"x\", 12);\nvar p2 = new Person(\"y\", 12);\n```\n\n## 面向对象\n\n简单的定义\n\n- 对象：万物皆对象；\n- 类：对象的具体细分（功能特点分类）\n- 实例：类中具体的一个事物。\n- JS 就是基于面向对象设计和开发出来的语言\n\n### 实例和类型的判断\n\n- typeof\n- instanceof\n- Object.prototype.toString.call(X)\n\n### 原型链的查找原则\n\n- 所有的函数数据类型都天生自带一个属性：prototype（原型），这个属性是一个对象，浏览器会默认开辟一个堆内存\n- 在浏览器给 prototype 开辟的堆内存中有一个天生自带的属性：constructor，这个属性指向当前函数本身。\n- 每一个对象都有一个`__proto__`属性，这个属性指向当前实例所属类的 prototype（如果不能确定他是谁的实例，都是 object 的实例）。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200823232308.png)\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200823232322.png)\n","slug":"再学一次JS原型","published":1,"updated":"2021-09-29T07:53:51.824Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy6bn001xp4vlfdcm2too","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"忘却的知识需要复习\"><a href=\"#忘却的知识需要复习\" class=\"headerlink\" title=\"忘却的知识需要复习\"></a>忘却的知识需要复习</h2><p>看到这张图的时候感觉很乱，心中已经忘却的原型知识明显招架不住，因此就需要重新整理一下了。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200823161711.png\"></p>\n<span id=\"more\"></span>\n\n<h2 id=\"单例模式\"><a href=\"#单例模式\" class=\"headerlink\" title=\"单例模式\"></a>单例模式</h2><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/image-20200823162649747.png\" alt=\"image-20200823162649747\"></p>\n<p>单例模式解决的问题：把描述同一件事物的属性和特征进行归类，存储在同一个内存空间中，因此避免了全局变量之间的冲突、污染。</p>\n<p>其中 person1 等就是为命名空间。每一个命名空间都是 JS 的 Object 这个内置基类的实例，单独的实例。</p>\n<h3 id=\"高级单例模式\"><a href=\"#高级单例模式\" class=\"headerlink\" title=\"高级单例模式\"></a>高级单例模式</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> nameSpace=(<span class=\"keyword\">function</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> n = <span class=\"number\">12</span>;</span><br><span class=\"line\">  <span class=\"keyword\">function</span> <span class=\"title function_\">fn</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">fn</span>:fn</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)()</span><br></pre></td></tr></table></figure>\n\n<p>在给命名空间赋值的时候不是直接返回对象，先执行匿名函数，形成一个私有作用域，不销毁的栈内存。在这个私有作用域中创建堆内存，把堆内存的地址赋值给命名空间。</p>\n<p>优点: 可以在命名空间中创建很多的内容，比如变量、函数，哪些需要提供给外面调取使用，我们才返回到最终的对象中，这也是模块化实现的一种思想。</p>\n<h3 id=\"this-作用域（浏览器中）\"><a href=\"#this-作用域（浏览器中）\" class=\"headerlink\" title=\"this 作用域（浏览器中）\"></a>this 作用域（浏览器中）</h3><ul>\n<li>可以根据函数调用前面的对象来判断。例如<code>a.b()</code>的话 this 就指向 a，没有的话就指向全局。</li>\n<li>在事件中指向触发事件的<code>target</code></li>\n<li>立即执行函数的 this 指向全局</li>\n</ul>\n<h3 id=\"题目\"><a href=\"#题目\" class=\"headerlink\" title=\"题目\"></a>题目</h3><h2 id=\"工厂模式\"><a href=\"#工厂模式\" class=\"headerlink\" title=\"工厂模式\"></a>工厂模式</h2><p>把实现相同功能的代码封装，批量生产。低耦合高内聚，减少页面中的冗余代码，提高代码的重复使用率。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">createPerson</span>(<span class=\"params\">name, age</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> obj = &#123;&#125;;</span><br><span class=\"line\">  obj.<span class=\"property\">name</span> = name;</span><br><span class=\"line\">  obj.<span class=\"property\">age</span> = age;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> obj;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> p1 = <span class=\"keyword\">new</span> <span class=\"title class_\">Person</span>(<span class=\"string\">&quot;x&quot;</span>, <span class=\"number\">12</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> p2 = <span class=\"keyword\">new</span> <span class=\"title class_\">Person</span>(<span class=\"string\">&quot;y&quot;</span>, <span class=\"number\">12</span>);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"面向对象\"><a href=\"#面向对象\" class=\"headerlink\" title=\"面向对象\"></a>面向对象</h2><p>简单的定义</p>\n<ul>\n<li>对象：万物皆对象；</li>\n<li>类：对象的具体细分（功能特点分类）</li>\n<li>实例：类中具体的一个事物。</li>\n<li>JS 就是基于面向对象设计和开发出来的语言</li>\n</ul>\n<h3 id=\"实例和类型的判断\"><a href=\"#实例和类型的判断\" class=\"headerlink\" title=\"实例和类型的判断\"></a>实例和类型的判断</h3><ul>\n<li>typeof</li>\n<li>instanceof</li>\n<li>Object.prototype.toString.call(X)</li>\n</ul>\n<h3 id=\"原型链的查找原则\"><a href=\"#原型链的查找原则\" class=\"headerlink\" title=\"原型链的查找原则\"></a>原型链的查找原则</h3><ul>\n<li>所有的函数数据类型都天生自带一个属性：prototype（原型），这个属性是一个对象，浏览器会默认开辟一个堆内存</li>\n<li>在浏览器给 prototype 开辟的堆内存中有一个天生自带的属性：constructor，这个属性指向当前函数本身。</li>\n<li>每一个对象都有一个<code>__proto__</code>属性，这个属性指向当前实例所属类的 prototype（如果不能确定他是谁的实例，都是 object 的实例）。</li>\n</ul>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200823232308.png\"><br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200823232322.png\"></p>\n","site":{"data":{}},"length":1058,"excerpt":"<h2 id=\"忘却的知识需要复习\"><a href=\"#忘却的知识需要复习\" class=\"headerlink\" title=\"忘却的知识需要复习\"></a>忘却的知识需要复习</h2><p>看到这张图的时候感觉很乱，心中已经忘却的原型知识明显招架不住，因此就需要重新整理一下了。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200823161711.png\"></p>","more":"<h2 id=\"单例模式\"><a href=\"#单例模式\" class=\"headerlink\" title=\"单例模式\"></a>单例模式</h2><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/image-20200823162649747.png\" alt=\"image-20200823162649747\"></p>\n<p>单例模式解决的问题：把描述同一件事物的属性和特征进行归类，存储在同一个内存空间中，因此避免了全局变量之间的冲突、污染。</p>\n<p>其中 person1 等就是为命名空间。每一个命名空间都是 JS 的 Object 这个内置基类的实例，单独的实例。</p>\n<h3 id=\"高级单例模式\"><a href=\"#高级单例模式\" class=\"headerlink\" title=\"高级单例模式\"></a>高级单例模式</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> nameSpace=(<span class=\"keyword\">function</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> n = <span class=\"number\">12</span>;</span><br><span class=\"line\">  <span class=\"keyword\">function</span> <span class=\"title function_\">fn</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">fn</span>:fn</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)()</span><br></pre></td></tr></table></figure>\n\n<p>在给命名空间赋值的时候不是直接返回对象，先执行匿名函数，形成一个私有作用域，不销毁的栈内存。在这个私有作用域中创建堆内存，把堆内存的地址赋值给命名空间。</p>\n<p>优点: 可以在命名空间中创建很多的内容，比如变量、函数，哪些需要提供给外面调取使用，我们才返回到最终的对象中，这也是模块化实现的一种思想。</p>\n<h3 id=\"this-作用域（浏览器中）\"><a href=\"#this-作用域（浏览器中）\" class=\"headerlink\" title=\"this 作用域（浏览器中）\"></a>this 作用域（浏览器中）</h3><ul>\n<li>可以根据函数调用前面的对象来判断。例如<code>a.b()</code>的话 this 就指向 a，没有的话就指向全局。</li>\n<li>在事件中指向触发事件的<code>target</code></li>\n<li>立即执行函数的 this 指向全局</li>\n</ul>\n<h3 id=\"题目\"><a href=\"#题目\" class=\"headerlink\" title=\"题目\"></a>题目</h3><h2 id=\"工厂模式\"><a href=\"#工厂模式\" class=\"headerlink\" title=\"工厂模式\"></a>工厂模式</h2><p>把实现相同功能的代码封装，批量生产。低耦合高内聚，减少页面中的冗余代码，提高代码的重复使用率。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">createPerson</span>(<span class=\"params\">name, age</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> obj = &#123;&#125;;</span><br><span class=\"line\">  obj.<span class=\"property\">name</span> = name;</span><br><span class=\"line\">  obj.<span class=\"property\">age</span> = age;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> obj;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> p1 = <span class=\"keyword\">new</span> <span class=\"title class_\">Person</span>(<span class=\"string\">&quot;x&quot;</span>, <span class=\"number\">12</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> p2 = <span class=\"keyword\">new</span> <span class=\"title class_\">Person</span>(<span class=\"string\">&quot;y&quot;</span>, <span class=\"number\">12</span>);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"面向对象\"><a href=\"#面向对象\" class=\"headerlink\" title=\"面向对象\"></a>面向对象</h2><p>简单的定义</p>\n<ul>\n<li>对象：万物皆对象；</li>\n<li>类：对象的具体细分（功能特点分类）</li>\n<li>实例：类中具体的一个事物。</li>\n<li>JS 就是基于面向对象设计和开发出来的语言</li>\n</ul>\n<h3 id=\"实例和类型的判断\"><a href=\"#实例和类型的判断\" class=\"headerlink\" title=\"实例和类型的判断\"></a>实例和类型的判断</h3><ul>\n<li>typeof</li>\n<li>instanceof</li>\n<li>Object.prototype.toString.call(X)</li>\n</ul>\n<h3 id=\"原型链的查找原则\"><a href=\"#原型链的查找原则\" class=\"headerlink\" title=\"原型链的查找原则\"></a>原型链的查找原则</h3><ul>\n<li>所有的函数数据类型都天生自带一个属性：prototype（原型），这个属性是一个对象，浏览器会默认开辟一个堆内存</li>\n<li>在浏览器给 prototype 开辟的堆内存中有一个天生自带的属性：constructor，这个属性指向当前函数本身。</li>\n<li>每一个对象都有一个<code>__proto__</code>属性，这个属性指向当前实例所属类的 prototype（如果不能确定他是谁的实例，都是 object 的实例）。</li>\n</ul>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200823232308.png\"><br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200823232322.png\"></p>"},{"title":"mysql基础知识（一）","abbrlink":"4545161d","translate_title":"mysql-basic-knowledge-1","date":"2020-07-24T03:57:01.000Z","_content":"\n### 目的\n\n学习一些基本的 mysql 知识\n\n### 预备\n\n#### 安装 mysql\n\n[安装教程地址](https://blog.csdn.net/u014416239/article/details/52446608)\n\n#### 终端准备\n\n我这里使用的是[cmder](https://cmder.net/)，并且设置为管理员模式，加上[右键快捷打开](https://blog.csdn.net/hicoldcat/article/details/64904652)，挺方便的。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200457.png)\n\n在准备工作完成之后，正式开始学习。\n\n<!-- more -->\n\n### 基础命令\n\n- 启动停止\n\n```bash\n// 启动mysql（如果出现错误应该以**管理员模式**运行终端，mysql80lzk为我安装的时候的**服务名**）\nnet start mysql80lzk\nnet stop mysql80lzk // 停止mysql\n```\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200506.png)\n\n- 命令行进入\n\n```bash\nmysql -h 127.0.0.1 -P 3306 -uroot -p123456 // 安装的时候设置的(-u)账号(-p)密码\n```\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200922.png)\n\n- 列出数据库\n\n```bash\nshow databases;\n```\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200527.png)\n\n- 查看表\n\n```bash\nuse mysql;// 选择数据库\nshow tables;\n// 或者\nshow tables from mysql;\n```\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200743.png)\n\n- 显示当前的数据库\n\n```bash\nselect database();\n```\n\n- 查询表结构\n\n```bash\nDESC user; // user 是表结构中显示的\n```\n\n### 数据完整性\n\n为了实现数据完整性，需要检验数据库表中的每行和每列数据是否符合要求。在创建表的时候，应该保证以后的数据输入是正确的，错误的数据不允许输入。\n\n#### 数据类型\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200751.png)\n[Mysql 列类型](https://www.runoob.com/mysql/mysql-data-types.html)\n\n#### 默认值\n\n用户没有指定值得情况下提供一个预先设定的值\n\n#### 非空约束\n\n指定某个字段不能不输入，必须提供一个非空的值。\n\n### 实体完整性\n\n#### 主键约束\n\n- 表中一列或者几列组合的值能用来唯一标识表中的每一行，这样的列或者列组合称为表的主键，主键表的数据不同重复。\n- 如果两列或者多列组合起来唯一标识表中的每一行，则该主键又称为\"组合键\"\n\n主键选择标准\n\n1.最少性 尽量选择单个建为主键\n\n2.稳定性，更新频率少，稳定\n\n#### 外键\n\n成绩表中的学生 ID 应该在学生表中是存在的，我们应该让成绩表中的 ID 只能引用学生表中的 ID，它们的值应该是一一对应的。也就是说成绩表中的 ID 是成绩表中的外键，对应学生表的主键，这样就可以保证数据的引用完整性。\n\n即：一个表的外键引用了其他表的主键\n\n#### 唯一约束\n\n唯一约束是指某个字段值是唯一的，在所有的记录中不能有重复的值。比如身份证号。\n\n#### 标识列\n\n- 当表中没有合适的列作为主键时可以考虑增加标识列，标识列是一个无实际业务含义的列，仅仅用来区分每条记录。\n- 标识列的值是自动生成的，不能在该列上输入数据\n\n#### 外键约束\n\n一个表的外键引用了其他表的主键。比如成绩表中的学生 ID 会引用学生表的主键，课程 ID 会引用成绩表的主键。\n\n- 主表没有记录，子表中不能添加相应的记录\n- 修改和删除主表记录不能让子表记录孤立，必须相应修改和删除\n\n### 数据操作\n\n#### 创建学生表\n\n```sql\nCREATE TABLE `student` (\n`id` int(11) NOT NULL PRIMARY KEY AUTO_INCREMENT ,\n`name` varchar(50) NOT NULL ,\n`age` int(11) NULL DEFAULT NULL ,\n`city` varchar(50) DEFAULT '北京'\n);\n```\n\n#### 增加身份证字段\n\n```sql\n // 在city后面增加一个字段，\n ALTER TABLE `student` ADD COLUMN `idcard` varchar(15) NULL AFTER `city`;\n // 修改一个字段为carchar(18)\n ALTER TABLE `student` MODIFY COLUMN `idcard` varchar(18) DEFAULT NULL;\n```\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200802.png)\n\n```sql\n // 删除身份证字段\n ALTER TABLE `student`DROP COLUMN `idcard`;\n```\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200809.png)\n\n#### 添加约束\n\n```sql\n-- 主键约束\nALTER TABLE `student` ADD PRIMARY KEY (`id`);\n-- 唯一约束\nALTER TABLE `student` ADD UNIQUE INDEX `uq_idcard` (`idcard`) ;\n-- 默认约束\n ALTER TABLE `student` MODIFY COLUMN `city` varchar(50) DEFAULT '北京';\n```\n\n### 准备数据\n\n创建数据库\n\n```\n创建学生表，如果前面没创建可以创建\nCREATE TABLE `student` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `name` varchar(50) NOT NULL,\n `idcard` varchar(18) DEFAULT NULL,\n `age` int(11) DEFAULT NULL,\n `city` varchar(50) DEFAULT '',\n PRIMARY KEY (`id`)\n);\n\n CREATE TABLE `course` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `name` varchar(50) DEFAULT NULL,\n PRIMARY KEY (`id`) );\n```\n","source":"_posts/mysql1.md","raw":"---\ntitle: mysql基础知识（一）\nabbrlink: 4545161d\ntags:\n  - Mysql\ntranslate_title: mysql-basic-knowledge-1\ndate: 2020-07-24 11:57:01\n---\n\n### 目的\n\n学习一些基本的 mysql 知识\n\n### 预备\n\n#### 安装 mysql\n\n[安装教程地址](https://blog.csdn.net/u014416239/article/details/52446608)\n\n#### 终端准备\n\n我这里使用的是[cmder](https://cmder.net/)，并且设置为管理员模式，加上[右键快捷打开](https://blog.csdn.net/hicoldcat/article/details/64904652)，挺方便的。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200457.png)\n\n在准备工作完成之后，正式开始学习。\n\n<!-- more -->\n\n### 基础命令\n\n- 启动停止\n\n```bash\n// 启动mysql（如果出现错误应该以**管理员模式**运行终端，mysql80lzk为我安装的时候的**服务名**）\nnet start mysql80lzk\nnet stop mysql80lzk // 停止mysql\n```\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200506.png)\n\n- 命令行进入\n\n```bash\nmysql -h 127.0.0.1 -P 3306 -uroot -p123456 // 安装的时候设置的(-u)账号(-p)密码\n```\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200922.png)\n\n- 列出数据库\n\n```bash\nshow databases;\n```\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200527.png)\n\n- 查看表\n\n```bash\nuse mysql;// 选择数据库\nshow tables;\n// 或者\nshow tables from mysql;\n```\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200743.png)\n\n- 显示当前的数据库\n\n```bash\nselect database();\n```\n\n- 查询表结构\n\n```bash\nDESC user; // user 是表结构中显示的\n```\n\n### 数据完整性\n\n为了实现数据完整性，需要检验数据库表中的每行和每列数据是否符合要求。在创建表的时候，应该保证以后的数据输入是正确的，错误的数据不允许输入。\n\n#### 数据类型\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200751.png)\n[Mysql 列类型](https://www.runoob.com/mysql/mysql-data-types.html)\n\n#### 默认值\n\n用户没有指定值得情况下提供一个预先设定的值\n\n#### 非空约束\n\n指定某个字段不能不输入，必须提供一个非空的值。\n\n### 实体完整性\n\n#### 主键约束\n\n- 表中一列或者几列组合的值能用来唯一标识表中的每一行，这样的列或者列组合称为表的主键，主键表的数据不同重复。\n- 如果两列或者多列组合起来唯一标识表中的每一行，则该主键又称为\"组合键\"\n\n主键选择标准\n\n1.最少性 尽量选择单个建为主键\n\n2.稳定性，更新频率少，稳定\n\n#### 外键\n\n成绩表中的学生 ID 应该在学生表中是存在的，我们应该让成绩表中的 ID 只能引用学生表中的 ID，它们的值应该是一一对应的。也就是说成绩表中的 ID 是成绩表中的外键，对应学生表的主键，这样就可以保证数据的引用完整性。\n\n即：一个表的外键引用了其他表的主键\n\n#### 唯一约束\n\n唯一约束是指某个字段值是唯一的，在所有的记录中不能有重复的值。比如身份证号。\n\n#### 标识列\n\n- 当表中没有合适的列作为主键时可以考虑增加标识列，标识列是一个无实际业务含义的列，仅仅用来区分每条记录。\n- 标识列的值是自动生成的，不能在该列上输入数据\n\n#### 外键约束\n\n一个表的外键引用了其他表的主键。比如成绩表中的学生 ID 会引用学生表的主键，课程 ID 会引用成绩表的主键。\n\n- 主表没有记录，子表中不能添加相应的记录\n- 修改和删除主表记录不能让子表记录孤立，必须相应修改和删除\n\n### 数据操作\n\n#### 创建学生表\n\n```sql\nCREATE TABLE `student` (\n`id` int(11) NOT NULL PRIMARY KEY AUTO_INCREMENT ,\n`name` varchar(50) NOT NULL ,\n`age` int(11) NULL DEFAULT NULL ,\n`city` varchar(50) DEFAULT '北京'\n);\n```\n\n#### 增加身份证字段\n\n```sql\n // 在city后面增加一个字段，\n ALTER TABLE `student` ADD COLUMN `idcard` varchar(15) NULL AFTER `city`;\n // 修改一个字段为carchar(18)\n ALTER TABLE `student` MODIFY COLUMN `idcard` varchar(18) DEFAULT NULL;\n```\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200802.png)\n\n```sql\n // 删除身份证字段\n ALTER TABLE `student`DROP COLUMN `idcard`;\n```\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200809.png)\n\n#### 添加约束\n\n```sql\n-- 主键约束\nALTER TABLE `student` ADD PRIMARY KEY (`id`);\n-- 唯一约束\nALTER TABLE `student` ADD UNIQUE INDEX `uq_idcard` (`idcard`) ;\n-- 默认约束\n ALTER TABLE `student` MODIFY COLUMN `city` varchar(50) DEFAULT '北京';\n```\n\n### 准备数据\n\n创建数据库\n\n```\n创建学生表，如果前面没创建可以创建\nCREATE TABLE `student` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `name` varchar(50) NOT NULL,\n `idcard` varchar(18) DEFAULT NULL,\n `age` int(11) DEFAULT NULL,\n `city` varchar(50) DEFAULT '',\n PRIMARY KEY (`id`)\n);\n\n CREATE TABLE `course` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `name` varchar(50) DEFAULT NULL,\n PRIMARY KEY (`id`) );\n```\n","slug":"mysql1","published":1,"updated":"2021-09-29T07:53:51.823Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy6bo0020p4vl3z8zasta","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"目的\"><a href=\"#目的\" class=\"headerlink\" title=\"目的\"></a>目的</h3><p>学习一些基本的 mysql 知识</p>\n<h3 id=\"预备\"><a href=\"#预备\" class=\"headerlink\" title=\"预备\"></a>预备</h3><h4 id=\"安装-mysql\"><a href=\"#安装-mysql\" class=\"headerlink\" title=\"安装 mysql\"></a>安装 mysql</h4><p><a href=\"https://blog.csdn.net/u014416239/article/details/52446608\">安装教程地址</a></p>\n<h4 id=\"终端准备\"><a href=\"#终端准备\" class=\"headerlink\" title=\"终端准备\"></a>终端准备</h4><p>我这里使用的是<a href=\"https://cmder.net/\">cmder</a>，并且设置为管理员模式，加上<a href=\"https://blog.csdn.net/hicoldcat/article/details/64904652\">右键快捷打开</a>，挺方便的。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200457.png\"></p>\n<p>在准备工作完成之后，正式开始学习。</p>\n<span id=\"more\"></span>\n\n<h3 id=\"基础命令\"><a href=\"#基础命令\" class=\"headerlink\" title=\"基础命令\"></a>基础命令</h3><ul>\n<li>启动停止</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// 启动mysql（如果出现错误应该以**管理员模式**运行终端，mysql80lzk为我安装的时候的**服务名**）</span><br><span class=\"line\">net start mysql80lzk</span><br><span class=\"line\">net stop mysql80lzk // 停止mysql</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200506.png\"></p>\n<ul>\n<li>命令行进入</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql -h 127.0.0.1 -P 3306 -uroot -p123456 // 安装的时候设置的(-u)账号(-p)密码</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200922.png\"></p>\n<ul>\n<li>列出数据库</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show databases;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200527.png\"></p>\n<ul>\n<li>查看表</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">use mysql;// 选择数据库</span><br><span class=\"line\">show tables;</span><br><span class=\"line\">// 或者</span><br><span class=\"line\">show tables from mysql;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200743.png\"></p>\n<ul>\n<li>显示当前的数据库</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select database();</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>查询表结构</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DESC user; // user 是表结构中显示的</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"数据完整性\"><a href=\"#数据完整性\" class=\"headerlink\" title=\"数据完整性\"></a>数据完整性</h3><p>为了实现数据完整性，需要检验数据库表中的每行和每列数据是否符合要求。在创建表的时候，应该保证以后的数据输入是正确的，错误的数据不允许输入。</p>\n<h4 id=\"数据类型\"><a href=\"#数据类型\" class=\"headerlink\" title=\"数据类型\"></a>数据类型</h4><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200751.png\"><br><a href=\"https://www.runoob.com/mysql/mysql-data-types.html\">Mysql 列类型</a></p>\n<h4 id=\"默认值\"><a href=\"#默认值\" class=\"headerlink\" title=\"默认值\"></a>默认值</h4><p>用户没有指定值得情况下提供一个预先设定的值</p>\n<h4 id=\"非空约束\"><a href=\"#非空约束\" class=\"headerlink\" title=\"非空约束\"></a>非空约束</h4><p>指定某个字段不能不输入，必须提供一个非空的值。</p>\n<h3 id=\"实体完整性\"><a href=\"#实体完整性\" class=\"headerlink\" title=\"实体完整性\"></a>实体完整性</h3><h4 id=\"主键约束\"><a href=\"#主键约束\" class=\"headerlink\" title=\"主键约束\"></a>主键约束</h4><ul>\n<li>表中一列或者几列组合的值能用来唯一标识表中的每一行，这样的列或者列组合称为表的主键，主键表的数据不同重复。</li>\n<li>如果两列或者多列组合起来唯一标识表中的每一行，则该主键又称为”组合键”</li>\n</ul>\n<p>主键选择标准</p>\n<p>1.最少性 尽量选择单个建为主键</p>\n<p>2.稳定性，更新频率少，稳定</p>\n<h4 id=\"外键\"><a href=\"#外键\" class=\"headerlink\" title=\"外键\"></a>外键</h4><p>成绩表中的学生 ID 应该在学生表中是存在的，我们应该让成绩表中的 ID 只能引用学生表中的 ID，它们的值应该是一一对应的。也就是说成绩表中的 ID 是成绩表中的外键，对应学生表的主键，这样就可以保证数据的引用完整性。</p>\n<p>即：一个表的外键引用了其他表的主键</p>\n<h4 id=\"唯一约束\"><a href=\"#唯一约束\" class=\"headerlink\" title=\"唯一约束\"></a>唯一约束</h4><p>唯一约束是指某个字段值是唯一的，在所有的记录中不能有重复的值。比如身份证号。</p>\n<h4 id=\"标识列\"><a href=\"#标识列\" class=\"headerlink\" title=\"标识列\"></a>标识列</h4><ul>\n<li>当表中没有合适的列作为主键时可以考虑增加标识列，标识列是一个无实际业务含义的列，仅仅用来区分每条记录。</li>\n<li>标识列的值是自动生成的，不能在该列上输入数据</li>\n</ul>\n<h4 id=\"外键约束\"><a href=\"#外键约束\" class=\"headerlink\" title=\"外键约束\"></a>外键约束</h4><p>一个表的外键引用了其他表的主键。比如成绩表中的学生 ID 会引用学生表的主键，课程 ID 会引用成绩表的主键。</p>\n<ul>\n<li>主表没有记录，子表中不能添加相应的记录</li>\n<li>修改和删除主表记录不能让子表记录孤立，必须相应修改和删除</li>\n</ul>\n<h3 id=\"数据操作\"><a href=\"#数据操作\" class=\"headerlink\" title=\"数据操作\"></a>数据操作</h3><h4 id=\"创建学生表\"><a href=\"#创建学生表\" class=\"headerlink\" title=\"创建学生表\"></a>创建学生表</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> `student` (</span><br><span class=\"line\">`id` <span class=\"type\">int</span>(<span class=\"number\">11</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> <span class=\"keyword\">PRIMARY</span> KEY AUTO_INCREMENT ,</span><br><span class=\"line\">`name` <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> ,</span><br><span class=\"line\">`age` <span class=\"type\">int</span>(<span class=\"number\">11</span>) <span class=\"keyword\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span> ,</span><br><span class=\"line\">`city` <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"string\">&#x27;北京&#x27;</span></span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"增加身份证字段\"><a href=\"#增加身份证字段\" class=\"headerlink\" title=\"增加身份证字段\"></a>增加身份证字段</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"operator\">/</span><span class=\"operator\">/</span> 在city后面增加一个字段，</span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> `student` <span class=\"keyword\">ADD</span> <span class=\"keyword\">COLUMN</span> `idcard` <span class=\"type\">varchar</span>(<span class=\"number\">15</span>) <span class=\"keyword\">NULL</span> AFTER `city`;</span><br><span class=\"line\"><span class=\"operator\">/</span><span class=\"operator\">/</span> 修改一个字段为carchar(<span class=\"number\">18</span>)</span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> `student` MODIFY <span class=\"keyword\">COLUMN</span> `idcard` <span class=\"type\">varchar</span>(<span class=\"number\">18</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span>;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200802.png\"></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"operator\">/</span><span class=\"operator\">/</span> 删除身份证字段</span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> `student`<span class=\"keyword\">DROP</span> <span class=\"keyword\">COLUMN</span> `idcard`;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200809.png\"></p>\n<h4 id=\"添加约束\"><a href=\"#添加约束\" class=\"headerlink\" title=\"添加约束\"></a>添加约束</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 主键约束</span></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> `student` <span class=\"keyword\">ADD</span> <span class=\"keyword\">PRIMARY</span> KEY (`id`);</span><br><span class=\"line\"><span class=\"comment\">-- 唯一约束</span></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> `student` <span class=\"keyword\">ADD</span> <span class=\"keyword\">UNIQUE</span> INDEX `uq_idcard` (`idcard`) ;</span><br><span class=\"line\"><span class=\"comment\">-- 默认约束</span></span><br><span class=\"line\"> <span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> `student` MODIFY <span class=\"keyword\">COLUMN</span> `city` <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"string\">&#x27;北京&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"准备数据\"><a href=\"#准备数据\" class=\"headerlink\" title=\"准备数据\"></a>准备数据</h3><p>创建数据库</p>\n<figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">创建学生表，如果前面没创建可以创建</span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> `student` (</span><br><span class=\"line\"> `id` <span class=\"type\">int</span>(<span class=\"number\">11</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> AUTO_INCREMENT,</span><br><span class=\"line\"> `<span class=\"type\">name</span>` <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span>,</span><br><span class=\"line\"> `idcard` <span class=\"type\">varchar</span>(<span class=\"number\">18</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span>,</span><br><span class=\"line\"> `age` <span class=\"type\">int</span>(<span class=\"number\">11</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span>,</span><br><span class=\"line\"> `city` <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"string\">&#x27;&#x27;</span>,</span><br><span class=\"line\"> <span class=\"keyword\">PRIMARY KEY</span> (`id`)</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> `course` (</span><br><span class=\"line\"> `id` <span class=\"type\">int</span>(<span class=\"number\">11</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> AUTO_INCREMENT,</span><br><span class=\"line\"> `<span class=\"type\">name</span>` <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span>,</span><br><span class=\"line\"> <span class=\"keyword\">PRIMARY KEY</span> (`id`) );</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"length":1931,"excerpt":"<h3 id=\"目的\"><a href=\"#目的\" class=\"headerlink\" title=\"目的\"></a>目的</h3><p>学习一些基本的 mysql 知识</p>\n<h3 id=\"预备\"><a href=\"#预备\" class=\"headerlink\" title=\"预备\"></a>预备</h3><h4 id=\"安装-mysql\"><a href=\"#安装-mysql\" class=\"headerlink\" title=\"安装 mysql\"></a>安装 mysql</h4><p><a href=\"https://blog.csdn.net/u014416239/article/details/52446608\">安装教程地址</a></p>\n<h4 id=\"终端准备\"><a href=\"#终端准备\" class=\"headerlink\" title=\"终端准备\"></a>终端准备</h4><p>我这里使用的是<a href=\"https://cmder.net/\">cmder</a>，并且设置为管理员模式，加上<a href=\"https://blog.csdn.net/hicoldcat/article/details/64904652\">右键快捷打开</a>，挺方便的。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200457.png\"></p>\n<p>在准备工作完成之后，正式开始学习。</p>","more":"<h3 id=\"基础命令\"><a href=\"#基础命令\" class=\"headerlink\" title=\"基础命令\"></a>基础命令</h3><ul>\n<li>启动停止</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// 启动mysql（如果出现错误应该以**管理员模式**运行终端，mysql80lzk为我安装的时候的**服务名**）</span><br><span class=\"line\">net start mysql80lzk</span><br><span class=\"line\">net stop mysql80lzk // 停止mysql</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200506.png\"></p>\n<ul>\n<li>命令行进入</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql -h 127.0.0.1 -P 3306 -uroot -p123456 // 安装的时候设置的(-u)账号(-p)密码</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200922.png\"></p>\n<ul>\n<li>列出数据库</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show databases;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200527.png\"></p>\n<ul>\n<li>查看表</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">use mysql;// 选择数据库</span><br><span class=\"line\">show tables;</span><br><span class=\"line\">// 或者</span><br><span class=\"line\">show tables from mysql;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200743.png\"></p>\n<ul>\n<li>显示当前的数据库</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select database();</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>查询表结构</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DESC user; // user 是表结构中显示的</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"数据完整性\"><a href=\"#数据完整性\" class=\"headerlink\" title=\"数据完整性\"></a>数据完整性</h3><p>为了实现数据完整性，需要检验数据库表中的每行和每列数据是否符合要求。在创建表的时候，应该保证以后的数据输入是正确的，错误的数据不允许输入。</p>\n<h4 id=\"数据类型\"><a href=\"#数据类型\" class=\"headerlink\" title=\"数据类型\"></a>数据类型</h4><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200751.png\"><br><a href=\"https://www.runoob.com/mysql/mysql-data-types.html\">Mysql 列类型</a></p>\n<h4 id=\"默认值\"><a href=\"#默认值\" class=\"headerlink\" title=\"默认值\"></a>默认值</h4><p>用户没有指定值得情况下提供一个预先设定的值</p>\n<h4 id=\"非空约束\"><a href=\"#非空约束\" class=\"headerlink\" title=\"非空约束\"></a>非空约束</h4><p>指定某个字段不能不输入，必须提供一个非空的值。</p>\n<h3 id=\"实体完整性\"><a href=\"#实体完整性\" class=\"headerlink\" title=\"实体完整性\"></a>实体完整性</h3><h4 id=\"主键约束\"><a href=\"#主键约束\" class=\"headerlink\" title=\"主键约束\"></a>主键约束</h4><ul>\n<li>表中一列或者几列组合的值能用来唯一标识表中的每一行，这样的列或者列组合称为表的主键，主键表的数据不同重复。</li>\n<li>如果两列或者多列组合起来唯一标识表中的每一行，则该主键又称为”组合键”</li>\n</ul>\n<p>主键选择标准</p>\n<p>1.最少性 尽量选择单个建为主键</p>\n<p>2.稳定性，更新频率少，稳定</p>\n<h4 id=\"外键\"><a href=\"#外键\" class=\"headerlink\" title=\"外键\"></a>外键</h4><p>成绩表中的学生 ID 应该在学生表中是存在的，我们应该让成绩表中的 ID 只能引用学生表中的 ID，它们的值应该是一一对应的。也就是说成绩表中的 ID 是成绩表中的外键，对应学生表的主键，这样就可以保证数据的引用完整性。</p>\n<p>即：一个表的外键引用了其他表的主键</p>\n<h4 id=\"唯一约束\"><a href=\"#唯一约束\" class=\"headerlink\" title=\"唯一约束\"></a>唯一约束</h4><p>唯一约束是指某个字段值是唯一的，在所有的记录中不能有重复的值。比如身份证号。</p>\n<h4 id=\"标识列\"><a href=\"#标识列\" class=\"headerlink\" title=\"标识列\"></a>标识列</h4><ul>\n<li>当表中没有合适的列作为主键时可以考虑增加标识列，标识列是一个无实际业务含义的列，仅仅用来区分每条记录。</li>\n<li>标识列的值是自动生成的，不能在该列上输入数据</li>\n</ul>\n<h4 id=\"外键约束\"><a href=\"#外键约束\" class=\"headerlink\" title=\"外键约束\"></a>外键约束</h4><p>一个表的外键引用了其他表的主键。比如成绩表中的学生 ID 会引用学生表的主键，课程 ID 会引用成绩表的主键。</p>\n<ul>\n<li>主表没有记录，子表中不能添加相应的记录</li>\n<li>修改和删除主表记录不能让子表记录孤立，必须相应修改和删除</li>\n</ul>\n<h3 id=\"数据操作\"><a href=\"#数据操作\" class=\"headerlink\" title=\"数据操作\"></a>数据操作</h3><h4 id=\"创建学生表\"><a href=\"#创建学生表\" class=\"headerlink\" title=\"创建学生表\"></a>创建学生表</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> `student` (</span><br><span class=\"line\">`id` <span class=\"type\">int</span>(<span class=\"number\">11</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> <span class=\"keyword\">PRIMARY</span> KEY AUTO_INCREMENT ,</span><br><span class=\"line\">`name` <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> ,</span><br><span class=\"line\">`age` <span class=\"type\">int</span>(<span class=\"number\">11</span>) <span class=\"keyword\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span> ,</span><br><span class=\"line\">`city` <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"string\">&#x27;北京&#x27;</span></span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"增加身份证字段\"><a href=\"#增加身份证字段\" class=\"headerlink\" title=\"增加身份证字段\"></a>增加身份证字段</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"operator\">/</span><span class=\"operator\">/</span> 在city后面增加一个字段，</span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> `student` <span class=\"keyword\">ADD</span> <span class=\"keyword\">COLUMN</span> `idcard` <span class=\"type\">varchar</span>(<span class=\"number\">15</span>) <span class=\"keyword\">NULL</span> AFTER `city`;</span><br><span class=\"line\"><span class=\"operator\">/</span><span class=\"operator\">/</span> 修改一个字段为carchar(<span class=\"number\">18</span>)</span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> `student` MODIFY <span class=\"keyword\">COLUMN</span> `idcard` <span class=\"type\">varchar</span>(<span class=\"number\">18</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span>;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200802.png\"></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"operator\">/</span><span class=\"operator\">/</span> 删除身份证字段</span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> `student`<span class=\"keyword\">DROP</span> <span class=\"keyword\">COLUMN</span> `idcard`;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20200923200809.png\"></p>\n<h4 id=\"添加约束\"><a href=\"#添加约束\" class=\"headerlink\" title=\"添加约束\"></a>添加约束</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 主键约束</span></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> `student` <span class=\"keyword\">ADD</span> <span class=\"keyword\">PRIMARY</span> KEY (`id`);</span><br><span class=\"line\"><span class=\"comment\">-- 唯一约束</span></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> `student` <span class=\"keyword\">ADD</span> <span class=\"keyword\">UNIQUE</span> INDEX `uq_idcard` (`idcard`) ;</span><br><span class=\"line\"><span class=\"comment\">-- 默认约束</span></span><br><span class=\"line\"> <span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> `student` MODIFY <span class=\"keyword\">COLUMN</span> `city` <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"string\">&#x27;北京&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"准备数据\"><a href=\"#准备数据\" class=\"headerlink\" title=\"准备数据\"></a>准备数据</h3><p>创建数据库</p>\n<figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">创建学生表，如果前面没创建可以创建</span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> `student` (</span><br><span class=\"line\"> `id` <span class=\"type\">int</span>(<span class=\"number\">11</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> AUTO_INCREMENT,</span><br><span class=\"line\"> `<span class=\"type\">name</span>` <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span>,</span><br><span class=\"line\"> `idcard` <span class=\"type\">varchar</span>(<span class=\"number\">18</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span>,</span><br><span class=\"line\"> `age` <span class=\"type\">int</span>(<span class=\"number\">11</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span>,</span><br><span class=\"line\"> `city` <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"string\">&#x27;&#x27;</span>,</span><br><span class=\"line\"> <span class=\"keyword\">PRIMARY KEY</span> (`id`)</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> `course` (</span><br><span class=\"line\"> `id` <span class=\"type\">int</span>(<span class=\"number\">11</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> AUTO_INCREMENT,</span><br><span class=\"line\"> `<span class=\"type\">name</span>` <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span>,</span><br><span class=\"line\"> <span class=\"keyword\">PRIMARY KEY</span> (`id`) );</span><br></pre></td></tr></table></figure>"},{"title":"实现自己的React之渲染字符串和数字","abbrlink":"8bb7b5c2","translate_title":"realize-your-own-react-rendering-strings-and-numbers","date":"2020-10-28T11:59:23.000Z","_content":"\n## 前言\n\n在上一篇文章中我们已经渲染了我们的字符串到 id 为 root 的元素上，但是用的是直接操作 DOM，我们会在后面逐渐的完善它。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201028205234.png)\n\n<!-- more -->\n\n## 问题和解决方案\n\n### 遇到的问题\n\n我们上次的操作是直接操作 DOM 来放入字符串或者数字，但是后面我们还会传入 DOM 元素和 class，因此不能够统一处理，**我们需要根据不同的类型来做与之对应的处理**。\n\n除此之外，我们还提到了要为每个 DOM 元素添加属性增加唯一值，以便后续查找和更新。\n\n### 解决办法\n\n- 我们会将传入的元素传入一个工厂函数\n- 这个工厂函数里面会根据类型的不同而返回对应的实例 unit\n- 实例上面有个属性 getMarkup，我们可以传入唯一的 key 用来放在属性上，返回一个字符串。\n- 最后将字符串放入到 container（比如之前 id 为 root 的元素）。\n\n大体示意图如下\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201028202228.png)\n\n## 渲染字符串和数字\n\n**字符串和数字是一样的逻辑，因此我就用字符串举例**\n\n修改目录结构\n\n```\n▇\nE:\\study\\my-react-15.x\n├── package.json\n├── public\n├── README.md\n├── src\n|  ├── index.js\n|  └── react\n|     ├── index.js\n|     └── unit.js //新增的文件\n└── yarn.lock\n```\n\n### index.js\n\n我们先修改 react/index.jsx 下面的 render 方法\n\n```js\nfunction render(element, container) {\n  // 最重要的形式container.innerHTML = `<span data-reactid=\"xxx-id\">${element}</span>`\n  // 传入元素 返回对应的unit(对象实例),上面有个getMarkUp方法，传入id可以获得字符串\n\n  // unit 负责渲染 主要用来将元素转换为html字符串\n  let unit = createUnit(element); // createUnit就是要引入的工厂函数\n  let markUp = unit.getMarkUp(0); // 返回HTML标记 简单示例，从0开始\n  $(container).html(markUp);\n}\n```\n\n### unit.js\n\n我们这个文件就是根据传入的 element，根据类型返回对象实例。\n\n#### 工厂函数\n\n首先我们创建 createUnit 工厂函数\n\n```js\nfunction createUnit(element) {\n  // 先是处理字符串和数字 根绝typeof\n  if ([\"number\", \"string\"].includes(typeof element)) {\n    return new TextUint(element);\n  }\n}\n```\n\n#### TextUint\n\n我们是要根据不同的类型来处理，因此最少有三种类型，我们在这里用一个 Unit 的 class 作为基类，有点像 TS 的抽象类，具体的实现用具体的类去继承。\n\n```js\n// 基类 不可以实例化\nclass Unit {\n  constructor(element) {\n    // 挂载在下划线 私有属性\n    // 实例存一份\n    this._currentElement = element;\n  }\n}\n```\n\n接下来我们来写具体操作文本的 class\n\n```js\n// 文本的类 处理字符串和数字\nclass TextUint extends Unit {\n  // 传入id 返回字符串\n  getMarkUp(reactId) {\n    // id存一份在示例上\n    this._reactId = reactId;\n    // 因为要添加属性，所以用span包装一下，上面添加data-reactid属性，值为reactId，里面的元素就是实例的时候element，可以从this上面获取\n    return `<span data-reactid=\"${reactId}\">${this._currentElement}</span>`;\n  }\n}\n```\n\n然后再暴露出这个工厂函数，在 index.js 引入就可以跑起来了。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-29/1603947047283-image.png)\n\n本节代码地址：[代码地址](https://github.com/kitety/my-react-15.x/tree/9ee49e3356fe330cebecd7b189efddc8db1bca19)\n\n## 结语\n\n至此，我们用比较规整的方式实现了渲染字符串和数字，接下来我们将渲染原生 DOM。\n","source":"_posts/实现自己的React之渲染字符串.md","raw":"---\ntitle: 实现自己的React之渲染字符串和数字\nabbrlink: 8bb7b5c2\ntranslate_title: realize-your-own-react-rendering-strings-and-numbers\ndate: 2020-10-28 19:59:23\ntags:\n  - React\n---\n\n## 前言\n\n在上一篇文章中我们已经渲染了我们的字符串到 id 为 root 的元素上，但是用的是直接操作 DOM，我们会在后面逐渐的完善它。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201028205234.png)\n\n<!-- more -->\n\n## 问题和解决方案\n\n### 遇到的问题\n\n我们上次的操作是直接操作 DOM 来放入字符串或者数字，但是后面我们还会传入 DOM 元素和 class，因此不能够统一处理，**我们需要根据不同的类型来做与之对应的处理**。\n\n除此之外，我们还提到了要为每个 DOM 元素添加属性增加唯一值，以便后续查找和更新。\n\n### 解决办法\n\n- 我们会将传入的元素传入一个工厂函数\n- 这个工厂函数里面会根据类型的不同而返回对应的实例 unit\n- 实例上面有个属性 getMarkup，我们可以传入唯一的 key 用来放在属性上，返回一个字符串。\n- 最后将字符串放入到 container（比如之前 id 为 root 的元素）。\n\n大体示意图如下\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201028202228.png)\n\n## 渲染字符串和数字\n\n**字符串和数字是一样的逻辑，因此我就用字符串举例**\n\n修改目录结构\n\n```\n▇\nE:\\study\\my-react-15.x\n├── package.json\n├── public\n├── README.md\n├── src\n|  ├── index.js\n|  └── react\n|     ├── index.js\n|     └── unit.js //新增的文件\n└── yarn.lock\n```\n\n### index.js\n\n我们先修改 react/index.jsx 下面的 render 方法\n\n```js\nfunction render(element, container) {\n  // 最重要的形式container.innerHTML = `<span data-reactid=\"xxx-id\">${element}</span>`\n  // 传入元素 返回对应的unit(对象实例),上面有个getMarkUp方法，传入id可以获得字符串\n\n  // unit 负责渲染 主要用来将元素转换为html字符串\n  let unit = createUnit(element); // createUnit就是要引入的工厂函数\n  let markUp = unit.getMarkUp(0); // 返回HTML标记 简单示例，从0开始\n  $(container).html(markUp);\n}\n```\n\n### unit.js\n\n我们这个文件就是根据传入的 element，根据类型返回对象实例。\n\n#### 工厂函数\n\n首先我们创建 createUnit 工厂函数\n\n```js\nfunction createUnit(element) {\n  // 先是处理字符串和数字 根绝typeof\n  if ([\"number\", \"string\"].includes(typeof element)) {\n    return new TextUint(element);\n  }\n}\n```\n\n#### TextUint\n\n我们是要根据不同的类型来处理，因此最少有三种类型，我们在这里用一个 Unit 的 class 作为基类，有点像 TS 的抽象类，具体的实现用具体的类去继承。\n\n```js\n// 基类 不可以实例化\nclass Unit {\n  constructor(element) {\n    // 挂载在下划线 私有属性\n    // 实例存一份\n    this._currentElement = element;\n  }\n}\n```\n\n接下来我们来写具体操作文本的 class\n\n```js\n// 文本的类 处理字符串和数字\nclass TextUint extends Unit {\n  // 传入id 返回字符串\n  getMarkUp(reactId) {\n    // id存一份在示例上\n    this._reactId = reactId;\n    // 因为要添加属性，所以用span包装一下，上面添加data-reactid属性，值为reactId，里面的元素就是实例的时候element，可以从this上面获取\n    return `<span data-reactid=\"${reactId}\">${this._currentElement}</span>`;\n  }\n}\n```\n\n然后再暴露出这个工厂函数，在 index.js 引入就可以跑起来了。\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-29/1603947047283-image.png)\n\n本节代码地址：[代码地址](https://github.com/kitety/my-react-15.x/tree/9ee49e3356fe330cebecd7b189efddc8db1bca19)\n\n## 结语\n\n至此，我们用比较规整的方式实现了渲染字符串和数字，接下来我们将渲染原生 DOM。\n","slug":"实现自己的React之渲染字符串","published":1,"updated":"2021-09-29T07:53:51.825Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy6bp0022p4vl58uh3ju8","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>在上一篇文章中我们已经渲染了我们的字符串到 id 为 root 的元素上，但是用的是直接操作 DOM，我们会在后面逐渐的完善它。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201028205234.png\"></p>\n<span id=\"more\"></span>\n\n<h2 id=\"问题和解决方案\"><a href=\"#问题和解决方案\" class=\"headerlink\" title=\"问题和解决方案\"></a>问题和解决方案</h2><h3 id=\"遇到的问题\"><a href=\"#遇到的问题\" class=\"headerlink\" title=\"遇到的问题\"></a>遇到的问题</h3><p>我们上次的操作是直接操作 DOM 来放入字符串或者数字，但是后面我们还会传入 DOM 元素和 class，因此不能够统一处理，<strong>我们需要根据不同的类型来做与之对应的处理</strong>。</p>\n<p>除此之外，我们还提到了要为每个 DOM 元素添加属性增加唯一值，以便后续查找和更新。</p>\n<h3 id=\"解决办法\"><a href=\"#解决办法\" class=\"headerlink\" title=\"解决办法\"></a>解决办法</h3><ul>\n<li>我们会将传入的元素传入一个工厂函数</li>\n<li>这个工厂函数里面会根据类型的不同而返回对应的实例 unit</li>\n<li>实例上面有个属性 getMarkup，我们可以传入唯一的 key 用来放在属性上，返回一个字符串。</li>\n<li>最后将字符串放入到 container（比如之前 id 为 root 的元素）。</li>\n</ul>\n<p>大体示意图如下</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201028202228.png\"></p>\n<h2 id=\"渲染字符串和数字\"><a href=\"#渲染字符串和数字\" class=\"headerlink\" title=\"渲染字符串和数字\"></a>渲染字符串和数字</h2><p><strong>字符串和数字是一样的逻辑，因此我就用字符串举例</strong></p>\n<p>修改目录结构</p>\n<figure class=\"highlight oxygene\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">▇</span><br><span class=\"line\">E:\\study\\my-react-<span class=\"number\">15</span>.x</span><br><span class=\"line\">├── package.json</span><br><span class=\"line\">├── <span class=\"keyword\">public</span></span><br><span class=\"line\">├── README.md</span><br><span class=\"line\">├── src</span><br><span class=\"line\">|  ├── <span class=\"keyword\">index</span>.js</span><br><span class=\"line\">|  └── react</span><br><span class=\"line\">|     ├── <span class=\"keyword\">index</span>.js</span><br><span class=\"line\">|     └── <span class=\"keyword\">unit</span>.js <span class=\"comment\">//新增的文件</span></span><br><span class=\"line\">└── yarn.lock</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"index-js\"><a href=\"#index-js\" class=\"headerlink\" title=\"index.js\"></a>index.js</h3><p>我们先修改 react/index.jsx 下面的 render 方法</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">render</span>(<span class=\"params\">element, container</span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 最重要的形式container.innerHTML = `&lt;span data-reactid=&quot;xxx-id&quot;&gt;$&#123;element&#125;&lt;/span&gt;`</span></span><br><span class=\"line\">  <span class=\"comment\">// 传入元素 返回对应的unit(对象实例),上面有个getMarkUp方法，传入id可以获得字符串</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// unit 负责渲染 主要用来将元素转换为html字符串</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> unit = <span class=\"title function_\">createUnit</span>(element); <span class=\"comment\">// createUnit就是要引入的工厂函数</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> markUp = unit.<span class=\"title function_\">getMarkUp</span>(<span class=\"number\">0</span>); <span class=\"comment\">// 返回HTML标记 简单示例，从0开始</span></span><br><span class=\"line\">  $(container).<span class=\"title function_\">html</span>(markUp);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"unit-js\"><a href=\"#unit-js\" class=\"headerlink\" title=\"unit.js\"></a>unit.js</h3><p>我们这个文件就是根据传入的 element，根据类型返回对象实例。</p>\n<h4 id=\"工厂函数\"><a href=\"#工厂函数\" class=\"headerlink\" title=\"工厂函数\"></a>工厂函数</h4><p>首先我们创建 createUnit 工厂函数</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">createUnit</span>(<span class=\"params\">element</span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 先是处理字符串和数字 根绝typeof</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> ([<span class=\"string\">&quot;number&quot;</span>, <span class=\"string\">&quot;string&quot;</span>].<span class=\"title function_\">includes</span>(<span class=\"keyword\">typeof</span> element)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">TextUint</span>(element);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"TextUint\"><a href=\"#TextUint\" class=\"headerlink\" title=\"TextUint\"></a>TextUint</h4><p>我们是要根据不同的类型来处理，因此最少有三种类型，我们在这里用一个 Unit 的 class 作为基类，有点像 TS 的抽象类，具体的实现用具体的类去继承。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 基类 不可以实例化</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Unit</span> &#123;</span><br><span class=\"line\">  <span class=\"title function_\">constructor</span>(<span class=\"params\">element</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 挂载在下划线 私有属性</span></span><br><span class=\"line\">    <span class=\"comment\">// 实例存一份</span></span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">_currentElement</span> = element;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>接下来我们来写具体操作文本的 class</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 文本的类 处理字符串和数字</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">TextUint</span> <span class=\"keyword\">extends</span> <span class=\"title class_ inherited__\">Unit</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 传入id 返回字符串</span></span><br><span class=\"line\">  <span class=\"title function_\">getMarkUp</span>(<span class=\"params\">reactId</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// id存一份在示例上</span></span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">_reactId</span> = reactId;</span><br><span class=\"line\">    <span class=\"comment\">// 因为要添加属性，所以用span包装一下，上面添加data-reactid属性，值为reactId，里面的元素就是实例的时候element，可以从this上面获取</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">`&lt;span data-reactid=&quot;<span class=\"subst\">$&#123;reactId&#125;</span>&quot;&gt;<span class=\"subst\">$&#123;<span class=\"variable language_\">this</span>._currentElement&#125;</span>&lt;/span&gt;`</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>然后再暴露出这个工厂函数，在 index.js 引入就可以跑起来了。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-29/1603947047283-image.png\"></p>\n<p>本节代码地址：<a href=\"https://github.com/kitety/my-react-15.x/tree/9ee49e3356fe330cebecd7b189efddc8db1bca19\">代码地址</a></p>\n<h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p>至此，我们用比较规整的方式实现了渲染字符串和数字，接下来我们将渲染原生 DOM。</p>\n","site":{"data":{}},"length":1770,"excerpt":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>在上一篇文章中我们已经渲染了我们的字符串到 id 为 root 的元素上，但是用的是直接操作 DOM，我们会在后面逐渐的完善它。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201028205234.png\"></p>","more":"<h2 id=\"问题和解决方案\"><a href=\"#问题和解决方案\" class=\"headerlink\" title=\"问题和解决方案\"></a>问题和解决方案</h2><h3 id=\"遇到的问题\"><a href=\"#遇到的问题\" class=\"headerlink\" title=\"遇到的问题\"></a>遇到的问题</h3><p>我们上次的操作是直接操作 DOM 来放入字符串或者数字，但是后面我们还会传入 DOM 元素和 class，因此不能够统一处理，<strong>我们需要根据不同的类型来做与之对应的处理</strong>。</p>\n<p>除此之外，我们还提到了要为每个 DOM 元素添加属性增加唯一值，以便后续查找和更新。</p>\n<h3 id=\"解决办法\"><a href=\"#解决办法\" class=\"headerlink\" title=\"解决办法\"></a>解决办法</h3><ul>\n<li>我们会将传入的元素传入一个工厂函数</li>\n<li>这个工厂函数里面会根据类型的不同而返回对应的实例 unit</li>\n<li>实例上面有个属性 getMarkup，我们可以传入唯一的 key 用来放在属性上，返回一个字符串。</li>\n<li>最后将字符串放入到 container（比如之前 id 为 root 的元素）。</li>\n</ul>\n<p>大体示意图如下</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201028202228.png\"></p>\n<h2 id=\"渲染字符串和数字\"><a href=\"#渲染字符串和数字\" class=\"headerlink\" title=\"渲染字符串和数字\"></a>渲染字符串和数字</h2><p><strong>字符串和数字是一样的逻辑，因此我就用字符串举例</strong></p>\n<p>修改目录结构</p>\n<figure class=\"highlight oxygene\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">▇</span><br><span class=\"line\">E:\\study\\my-react-<span class=\"number\">15</span>.x</span><br><span class=\"line\">├── package.json</span><br><span class=\"line\">├── <span class=\"keyword\">public</span></span><br><span class=\"line\">├── README.md</span><br><span class=\"line\">├── src</span><br><span class=\"line\">|  ├── <span class=\"keyword\">index</span>.js</span><br><span class=\"line\">|  └── react</span><br><span class=\"line\">|     ├── <span class=\"keyword\">index</span>.js</span><br><span class=\"line\">|     └── <span class=\"keyword\">unit</span>.js <span class=\"comment\">//新增的文件</span></span><br><span class=\"line\">└── yarn.lock</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"index-js\"><a href=\"#index-js\" class=\"headerlink\" title=\"index.js\"></a>index.js</h3><p>我们先修改 react/index.jsx 下面的 render 方法</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">render</span>(<span class=\"params\">element, container</span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 最重要的形式container.innerHTML = `&lt;span data-reactid=&quot;xxx-id&quot;&gt;$&#123;element&#125;&lt;/span&gt;`</span></span><br><span class=\"line\">  <span class=\"comment\">// 传入元素 返回对应的unit(对象实例),上面有个getMarkUp方法，传入id可以获得字符串</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// unit 负责渲染 主要用来将元素转换为html字符串</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> unit = <span class=\"title function_\">createUnit</span>(element); <span class=\"comment\">// createUnit就是要引入的工厂函数</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> markUp = unit.<span class=\"title function_\">getMarkUp</span>(<span class=\"number\">0</span>); <span class=\"comment\">// 返回HTML标记 简单示例，从0开始</span></span><br><span class=\"line\">  $(container).<span class=\"title function_\">html</span>(markUp);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"unit-js\"><a href=\"#unit-js\" class=\"headerlink\" title=\"unit.js\"></a>unit.js</h3><p>我们这个文件就是根据传入的 element，根据类型返回对象实例。</p>\n<h4 id=\"工厂函数\"><a href=\"#工厂函数\" class=\"headerlink\" title=\"工厂函数\"></a>工厂函数</h4><p>首先我们创建 createUnit 工厂函数</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">createUnit</span>(<span class=\"params\">element</span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 先是处理字符串和数字 根绝typeof</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> ([<span class=\"string\">&quot;number&quot;</span>, <span class=\"string\">&quot;string&quot;</span>].<span class=\"title function_\">includes</span>(<span class=\"keyword\">typeof</span> element)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">TextUint</span>(element);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"TextUint\"><a href=\"#TextUint\" class=\"headerlink\" title=\"TextUint\"></a>TextUint</h4><p>我们是要根据不同的类型来处理，因此最少有三种类型，我们在这里用一个 Unit 的 class 作为基类，有点像 TS 的抽象类，具体的实现用具体的类去继承。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 基类 不可以实例化</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Unit</span> &#123;</span><br><span class=\"line\">  <span class=\"title function_\">constructor</span>(<span class=\"params\">element</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 挂载在下划线 私有属性</span></span><br><span class=\"line\">    <span class=\"comment\">// 实例存一份</span></span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">_currentElement</span> = element;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>接下来我们来写具体操作文本的 class</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 文本的类 处理字符串和数字</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">TextUint</span> <span class=\"keyword\">extends</span> <span class=\"title class_ inherited__\">Unit</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 传入id 返回字符串</span></span><br><span class=\"line\">  <span class=\"title function_\">getMarkUp</span>(<span class=\"params\">reactId</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// id存一份在示例上</span></span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">_reactId</span> = reactId;</span><br><span class=\"line\">    <span class=\"comment\">// 因为要添加属性，所以用span包装一下，上面添加data-reactid属性，值为reactId，里面的元素就是实例的时候element，可以从this上面获取</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">`&lt;span data-reactid=&quot;<span class=\"subst\">$&#123;reactId&#125;</span>&quot;&gt;<span class=\"subst\">$&#123;<span class=\"variable language_\">this</span>._currentElement&#125;</span>&lt;/span&gt;`</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>然后再暴露出这个工厂函数，在 index.js 引入就可以跑起来了。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-10-29/1603947047283-image.png\"></p>\n<p>本节代码地址：<a href=\"https://github.com/kitety/my-react-15.x/tree/9ee49e3356fe330cebecd7b189efddc8db1bca19\">代码地址</a></p>\n<h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p>至此，我们用比较规整的方式实现了渲染字符串和数字，接下来我们将渲染原生 DOM。</p>"},{"title":"实现自己的React之基础准备","abbrlink":"a222758f","translate_title":"basic-preparation-for-implementing-your-own-react","date":"2020-10-27T12:54:36.000Z","_content":"\n## 前言\n\n现在的工作中已经用过[React](https://reactjs.org/)一段时间了，然后就想好好深入学习一下，尝试着写一个简单的 demo 来体验一下。\n学习事物都有个过程，大概是了解、熟悉、深入。自己做到理解只是第一步，**真正的掌握是能够完全向别人讲清楚**。因此我就想写下笔记，争取向别人讲清楚，也激励自己学习。\n**注意，本次会先实现简单的 React 15.x 版本，React Fiber 版本会在后面推出**\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201027205937.png)\n\n<!-- more -->\n\n## 预备知识\n\n### JSX 的了解\n\n在实际的编写代码中，我们使用最多的就是`JSX`。实际上根据中文官网的解释：\n\n> JSX 仅仅只是 React.createElement(component, props, ...children) 函数的语法糖\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201027211058.png)\n由图可知，JSX 会经过 babel 转换为 React.createElement 的语句，它只是个语法糖。在后续的过程中，我们实现了自己的 React.createElement，我们也可以写`JSX`语句来调试。\n\n### jquery 的使用\n\n为了方便开发，我们将采用 Jquery 来代替频繁的原生 DOM 的增删改查和事件绑定和解绑。主要用到了 jquery 的属性选择器和事件的绑定解绑、命名空间。\n\n<!-- 事件的绑定和解绑简单的 demo 可以看下面的 demo。 -->\n\n### DOM 的属性\n\n我们的网页将会被浏览器解析为各种 Tree，我们比较熟悉的就是 DOM Tree。在我们的这个简单的 React 中也是一样。将为每个 DOM 节点都添加一个唯一的 data-reactid 属性，方便的后续的更新。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201028193346.png)\n\n如图所示，第一个为 0，递进一级，就添加一个`.`,像数组下标一样从 0 开始逐渐增加。\n\n## 环境搭建\n\n我们将使用`create react app`快捷创建项目，然后将代码替换为我们的就可以了，简单快捷就可以使用现有的开发环境。\n\n### 项目创建\n\n```bash\nnpx create-react-app my-react-15\n# 项目中有jquery\nyarn add jquery\n```\n\n### 文件操作\n\n删除 src 里面的文件，创建 index.js 修改文件的引入方式，我们简单渲染一个字符串，挂在在 root 上。\n\n#### 目录结构\n\n```\nE:\\study\\my-react-15.x\n├── package.json\n├── public\n├── README.md\n├── src\n|  ├── index.js\n|  └── react\n|     └── index.js\n└── yarn.lock\n```\n\n#### 代码\n\n```tsx\n//  src/index.js\nimport React from \"./react\";\nReact.render(\"hello\", document.getElementById(\"root\"));\n```\n\n新建 react 文件夹，创建 index.js。暴露一个 react 对象，里面有个 render 方法。\n\n```tsx\n//  src/react/index.js\nconst React = {\n  render,\n};\nfunction render(element, container) {\n  container.innerHTML = element;\n}\nexport default React;\n```\n\n简单跑起来，渲染正常。\n\n## 结语\n\n在这一节，我们搭建了基本的开发环境，在后面的文章中会逐渐深入，渲染原生 dom 和 class 组件，一起学习吧！\n","source":"_posts/实现自己的React（15版）-1.md","raw":"---\ntitle: 实现自己的React之基础准备\ntags:\n  - React\nabbrlink: a222758f\ntranslate_title: basic-preparation-for-implementing-your-own-react\ndate: 2020-10-27 20:54:36\n---\n\n## 前言\n\n现在的工作中已经用过[React](https://reactjs.org/)一段时间了，然后就想好好深入学习一下，尝试着写一个简单的 demo 来体验一下。\n学习事物都有个过程，大概是了解、熟悉、深入。自己做到理解只是第一步，**真正的掌握是能够完全向别人讲清楚**。因此我就想写下笔记，争取向别人讲清楚，也激励自己学习。\n**注意，本次会先实现简单的 React 15.x 版本，React Fiber 版本会在后面推出**\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201027205937.png)\n\n<!-- more -->\n\n## 预备知识\n\n### JSX 的了解\n\n在实际的编写代码中，我们使用最多的就是`JSX`。实际上根据中文官网的解释：\n\n> JSX 仅仅只是 React.createElement(component, props, ...children) 函数的语法糖\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201027211058.png)\n由图可知，JSX 会经过 babel 转换为 React.createElement 的语句，它只是个语法糖。在后续的过程中，我们实现了自己的 React.createElement，我们也可以写`JSX`语句来调试。\n\n### jquery 的使用\n\n为了方便开发，我们将采用 Jquery 来代替频繁的原生 DOM 的增删改查和事件绑定和解绑。主要用到了 jquery 的属性选择器和事件的绑定解绑、命名空间。\n\n<!-- 事件的绑定和解绑简单的 demo 可以看下面的 demo。 -->\n\n### DOM 的属性\n\n我们的网页将会被浏览器解析为各种 Tree，我们比较熟悉的就是 DOM Tree。在我们的这个简单的 React 中也是一样。将为每个 DOM 节点都添加一个唯一的 data-reactid 属性，方便的后续的更新。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201028193346.png)\n\n如图所示，第一个为 0，递进一级，就添加一个`.`,像数组下标一样从 0 开始逐渐增加。\n\n## 环境搭建\n\n我们将使用`create react app`快捷创建项目，然后将代码替换为我们的就可以了，简单快捷就可以使用现有的开发环境。\n\n### 项目创建\n\n```bash\nnpx create-react-app my-react-15\n# 项目中有jquery\nyarn add jquery\n```\n\n### 文件操作\n\n删除 src 里面的文件，创建 index.js 修改文件的引入方式，我们简单渲染一个字符串，挂在在 root 上。\n\n#### 目录结构\n\n```\nE:\\study\\my-react-15.x\n├── package.json\n├── public\n├── README.md\n├── src\n|  ├── index.js\n|  └── react\n|     └── index.js\n└── yarn.lock\n```\n\n#### 代码\n\n```tsx\n//  src/index.js\nimport React from \"./react\";\nReact.render(\"hello\", document.getElementById(\"root\"));\n```\n\n新建 react 文件夹，创建 index.js。暴露一个 react 对象，里面有个 render 方法。\n\n```tsx\n//  src/react/index.js\nconst React = {\n  render,\n};\nfunction render(element, container) {\n  container.innerHTML = element;\n}\nexport default React;\n```\n\n简单跑起来，渲染正常。\n\n## 结语\n\n在这一节，我们搭建了基本的开发环境，在后面的文章中会逐渐深入，渲染原生 dom 和 class 组件，一起学习吧！\n","slug":"实现自己的React（15版）-1","published":1,"updated":"2021-09-29T07:53:51.825Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy6bq0024p4vl44imeujb","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>现在的工作中已经用过<a href=\"https://reactjs.org/\">React</a>一段时间了，然后就想好好深入学习一下，尝试着写一个简单的 demo 来体验一下。<br>学习事物都有个过程，大概是了解、熟悉、深入。自己做到理解只是第一步，<strong>真正的掌握是能够完全向别人讲清楚</strong>。因此我就想写下笔记，争取向别人讲清楚，也激励自己学习。<br><strong>注意，本次会先实现简单的 React 15.x 版本，React Fiber 版本会在后面推出</strong><br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201027205937.png\"></p>\n<span id=\"more\"></span>\n\n<h2 id=\"预备知识\"><a href=\"#预备知识\" class=\"headerlink\" title=\"预备知识\"></a>预备知识</h2><h3 id=\"JSX-的了解\"><a href=\"#JSX-的了解\" class=\"headerlink\" title=\"JSX 的了解\"></a>JSX 的了解</h3><p>在实际的编写代码中，我们使用最多的就是<code>JSX</code>。实际上根据中文官网的解释：</p>\n<blockquote>\n<p>JSX 仅仅只是 React.createElement(component, props, …children) 函数的语法糖</p>\n</blockquote>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201027211058.png\"><br>由图可知，JSX 会经过 babel 转换为 React.createElement 的语句，它只是个语法糖。在后续的过程中，我们实现了自己的 React.createElement，我们也可以写<code>JSX</code>语句来调试。</p>\n<h3 id=\"jquery-的使用\"><a href=\"#jquery-的使用\" class=\"headerlink\" title=\"jquery 的使用\"></a>jquery 的使用</h3><p>为了方便开发，我们将采用 Jquery 来代替频繁的原生 DOM 的增删改查和事件绑定和解绑。主要用到了 jquery 的属性选择器和事件的绑定解绑、命名空间。</p>\n<!-- 事件的绑定和解绑简单的 demo 可以看下面的 demo。 -->\n\n<h3 id=\"DOM-的属性\"><a href=\"#DOM-的属性\" class=\"headerlink\" title=\"DOM 的属性\"></a>DOM 的属性</h3><p>我们的网页将会被浏览器解析为各种 Tree，我们比较熟悉的就是 DOM Tree。在我们的这个简单的 React 中也是一样。将为每个 DOM 节点都添加一个唯一的 data-reactid 属性，方便的后续的更新。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201028193346.png\"></p>\n<p>如图所示，第一个为 0，递进一级，就添加一个<code>.</code>,像数组下标一样从 0 开始逐渐增加。</p>\n<h2 id=\"环境搭建\"><a href=\"#环境搭建\" class=\"headerlink\" title=\"环境搭建\"></a>环境搭建</h2><p>我们将使用<code>create react app</code>快捷创建项目，然后将代码替换为我们的就可以了，简单快捷就可以使用现有的开发环境。</p>\n<h3 id=\"项目创建\"><a href=\"#项目创建\" class=\"headerlink\" title=\"项目创建\"></a>项目创建</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npx create-react-app my-react-15</span><br><span class=\"line\"><span class=\"comment\"># 项目中有jquery</span></span><br><span class=\"line\">yarn add jquery</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"文件操作\"><a href=\"#文件操作\" class=\"headerlink\" title=\"文件操作\"></a>文件操作</h3><p>删除 src 里面的文件，创建 index.js 修改文件的引入方式，我们简单渲染一个字符串，挂在在 root 上。</p>\n<h4 id=\"目录结构\"><a href=\"#目录结构\" class=\"headerlink\" title=\"目录结构\"></a>目录结构</h4><figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">E:\\study\\my-react<span class=\"number\">-15.</span>x</span><br><span class=\"line\">├── package.json</span><br><span class=\"line\">├── <span class=\"built_in\">public</span></span><br><span class=\"line\">├── README.md</span><br><span class=\"line\">├── src</span><br><span class=\"line\">|  ├── <span class=\"keyword\">index</span>.js</span><br><span class=\"line\">|  └── react</span><br><span class=\"line\">|     └── <span class=\"keyword\">index</span>.js</span><br><span class=\"line\">└── yarn.<span class=\"keyword\">lock</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h4><figure class=\"highlight tsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//  src/index.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">React</span> <span class=\"keyword\">from</span> <span class=\"string\">&quot;./react&quot;</span>;</span><br><span class=\"line\"><span class=\"title class_\">React</span>.<span class=\"title function_\">render</span>(<span class=\"string\">&quot;hello&quot;</span>, <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;root&quot;</span>));</span><br></pre></td></tr></table></figure>\n\n<p>新建 react 文件夹，创建 index.js。暴露一个 react 对象，里面有个 render 方法。</p>\n<figure class=\"highlight tsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//  src/react/index.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">React</span> = &#123;</span><br><span class=\"line\">  render,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">render</span>(<span class=\"params\">element, container</span>) &#123;</span><br><span class=\"line\">  container.<span class=\"property\">innerHTML</span> = element;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title class_\">React</span>;</span><br></pre></td></tr></table></figure>\n\n<p>简单跑起来，渲染正常。</p>\n<h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p>在这一节，我们搭建了基本的开发环境，在后面的文章中会逐渐深入，渲染原生 dom 和 class 组件，一起学习吧！</p>\n","site":{"data":{}},"length":1302,"excerpt":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>现在的工作中已经用过<a href=\"https://reactjs.org/\">React</a>一段时间了，然后就想好好深入学习一下，尝试着写一个简单的 demo 来体验一下。<br>学习事物都有个过程，大概是了解、熟悉、深入。自己做到理解只是第一步，<strong>真正的掌握是能够完全向别人讲清楚</strong>。因此我就想写下笔记，争取向别人讲清楚，也激励自己学习。<br><strong>注意，本次会先实现简单的 React 15.x 版本，React Fiber 版本会在后面推出</strong><br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201027205937.png\"></p>","more":"<h2 id=\"预备知识\"><a href=\"#预备知识\" class=\"headerlink\" title=\"预备知识\"></a>预备知识</h2><h3 id=\"JSX-的了解\"><a href=\"#JSX-的了解\" class=\"headerlink\" title=\"JSX 的了解\"></a>JSX 的了解</h3><p>在实际的编写代码中，我们使用最多的就是<code>JSX</code>。实际上根据中文官网的解释：</p>\n<blockquote>\n<p>JSX 仅仅只是 React.createElement(component, props, …children) 函数的语法糖</p>\n</blockquote>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201027211058.png\"><br>由图可知，JSX 会经过 babel 转换为 React.createElement 的语句，它只是个语法糖。在后续的过程中，我们实现了自己的 React.createElement，我们也可以写<code>JSX</code>语句来调试。</p>\n<h3 id=\"jquery-的使用\"><a href=\"#jquery-的使用\" class=\"headerlink\" title=\"jquery 的使用\"></a>jquery 的使用</h3><p>为了方便开发，我们将采用 Jquery 来代替频繁的原生 DOM 的增删改查和事件绑定和解绑。主要用到了 jquery 的属性选择器和事件的绑定解绑、命名空间。</p>\n<!-- 事件的绑定和解绑简单的 demo 可以看下面的 demo。 -->\n\n<h3 id=\"DOM-的属性\"><a href=\"#DOM-的属性\" class=\"headerlink\" title=\"DOM 的属性\"></a>DOM 的属性</h3><p>我们的网页将会被浏览器解析为各种 Tree，我们比较熟悉的就是 DOM Tree。在我们的这个简单的 React 中也是一样。将为每个 DOM 节点都添加一个唯一的 data-reactid 属性，方便的后续的更新。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201028193346.png\"></p>\n<p>如图所示，第一个为 0，递进一级，就添加一个<code>.</code>,像数组下标一样从 0 开始逐渐增加。</p>\n<h2 id=\"环境搭建\"><a href=\"#环境搭建\" class=\"headerlink\" title=\"环境搭建\"></a>环境搭建</h2><p>我们将使用<code>create react app</code>快捷创建项目，然后将代码替换为我们的就可以了，简单快捷就可以使用现有的开发环境。</p>\n<h3 id=\"项目创建\"><a href=\"#项目创建\" class=\"headerlink\" title=\"项目创建\"></a>项目创建</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npx create-react-app my-react-15</span><br><span class=\"line\"><span class=\"comment\"># 项目中有jquery</span></span><br><span class=\"line\">yarn add jquery</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"文件操作\"><a href=\"#文件操作\" class=\"headerlink\" title=\"文件操作\"></a>文件操作</h3><p>删除 src 里面的文件，创建 index.js 修改文件的引入方式，我们简单渲染一个字符串，挂在在 root 上。</p>\n<h4 id=\"目录结构\"><a href=\"#目录结构\" class=\"headerlink\" title=\"目录结构\"></a>目录结构</h4><figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">E:\\study\\my-react<span class=\"number\">-15.</span>x</span><br><span class=\"line\">├── package.json</span><br><span class=\"line\">├── <span class=\"built_in\">public</span></span><br><span class=\"line\">├── README.md</span><br><span class=\"line\">├── src</span><br><span class=\"line\">|  ├── <span class=\"keyword\">index</span>.js</span><br><span class=\"line\">|  └── react</span><br><span class=\"line\">|     └── <span class=\"keyword\">index</span>.js</span><br><span class=\"line\">└── yarn.<span class=\"keyword\">lock</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h4><figure class=\"highlight tsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//  src/index.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">React</span> <span class=\"keyword\">from</span> <span class=\"string\">&quot;./react&quot;</span>;</span><br><span class=\"line\"><span class=\"title class_\">React</span>.<span class=\"title function_\">render</span>(<span class=\"string\">&quot;hello&quot;</span>, <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;root&quot;</span>));</span><br></pre></td></tr></table></figure>\n\n<p>新建 react 文件夹，创建 index.js。暴露一个 react 对象，里面有个 render 方法。</p>\n<figure class=\"highlight tsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//  src/react/index.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">React</span> = &#123;</span><br><span class=\"line\">  render,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">render</span>(<span class=\"params\">element, container</span>) &#123;</span><br><span class=\"line\">  container.<span class=\"property\">innerHTML</span> = element;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title class_\">React</span>;</span><br></pre></td></tr></table></figure>\n\n<p>简单跑起来，渲染正常。</p>\n<h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p>在这一节，我们搭建了基本的开发环境，在后面的文章中会逐渐深入，渲染原生 dom 和 class 组件，一起学习吧！</p>"},{"title":"实现自己的React之渲染原生DOM","abbrlink":"a72c43c","translate_title":"realize-your-own-react-rendering-native-dom","date":"2020-10-29T12:27:21.000Z","_content":"\n## 前言\n\n之前我们已经用比较规范的方式实现了字符串和数字的渲染，接下来我们将渲染原生 DOM。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-11-3/1604368409871-image.png)\n\n<!-- more -->\n\n## 预备知识\n\n### 正则\n\n我们在匹配事件和 style 属性的时候，我们需要用到简单的正则知识点\n\n- [A-Z] 大写字母\n- ^ 以\\*\\*开头\n\n除了使用正则的 test 判断以外，我们还可以和[String.place](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace)搭配使用。**注意：这个方法不会改变原字符串。**\n\n### jquery 事件的命名空间和事件代理\n\n在元素创建的时候，我们会在 document 上采用事件委托绑定事件（后面会解释原因），元素移除的时候我们还要移除事件。为了简便操作我们会用命名空间来实现。\n\n## 原理分析\n\n我们在写 React 的代码的时候，我们一般会写 JSX.而在我们的现在开发中，会经过 babel 等转换为 React.createElement 代码。这也就是 JSX 的作用，简单可以理解为 React.createElement 的语法糖。\n\n我们用下面的代码示例\n\n```jsx\n<div\n  onClick={() => {\n    console.log(1);\n  }}\n  style={{ backgroundColor: \"red\" }}\n>\n  你好\n  <span className=\"test\" id=\"thisisaspan\">\n    hehe\n  </span>\n</div>\n```\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201102210123.png)\n\n而如果我们直接在代码中打印这个 `element` 会是什么样子呢？代码可以[看这里](https://codesandbox.io/s/cool-cloud-vfbkc?file=/src/App.js)\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201102210351.png)\n\n可以看到，打印出来是一个对象，里面有`$$typeof、key、type、props` 等等很多属性。而我们需要关注的是 `type` 属性和 `props` 属性，甚至可以可以看到，`props` 里面有个 `children` 属性，而且可以继续展开，里面就是层层递进的 `children` 子元素。其实这个对象就是**虚拟 DOM**，在后面更新的时候我们也会说到。\n\n至此我们也有了一个大概的流程。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201102211725.png)\n\n和之前的字符串的渲染对比得知，我们这次渲染的是 `React.createElement` 的返回值，它的返回值是一个实例，我们现在称为 `Element` 实例。\n\n## 动手实现\n\n经过上述的分析，我们得到此次渲染原生 DOM 我们需要做的事情后大致如下\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201102212917.png)\n我们这次渲染的代码为\n\n```js\n//src/index,js\nconst ele =\n  /*#__PURE__*/\n  React.createElement(\n    \"div\",\n    {\n      onClick: () => {\n        console.log(1);\n      },\n      style: {\n        backgroundColor: \"red\",\n      },\n    },\n    \"\\u4F60\\u597D\",\n    /*#__PURE__*/ React.createElement(\n      \"span\",\n      {\n        className: \"test\",\n        id: \"thisisaspan\",\n      },\n      \"hehe\"\n    )\n  );\nReact.render(ele, document.getElementById(\"root\"));\n```\n\n### createElement\n\n我们在 react 文件夹新建 element.js，这个函数的作用就是根据将所有传入的参数实例化，返回一个对象\n代码如下：\n\n```js\nclass Element {\n  constructor(type, props) {\n    // 存一遍\n    this.type = type;\n    this.props = props;\n  }\n}\n\n/*\n// \nReact.createElement(\"div\", {\n  onClick: () => {\n    console.log(1);\n  },\n  style: {\n    backgroundColor: 'red'\n  }\n}, \"\\u4F60\\u597D\",React.createElement(\"span\", {\n  className: \"test\",\n  id: \"thisisaspan\"\n}, \"hehe\"));\n*/\n// 从第三项开始,后面的都是children,因此用了reset的方式存入数组\nfunction createElement(type, props = {}, ...children) {\n  // 存入props\n  props.children = children;\n  // 返回的element实例\n  // 后面也可以用instanceof来辅助判断\n  return new Element(type, props);\n}\n\nexport { Element, createElement };\n```\n\n再在 react/index.js 引入 createElement，方便调用。\n\n### createUnit\n\ncreateElement 函数调用完成之后，我们就要进入 createUnit 工厂函数来进行判断生成实例\n\n这个地方我们要注意，这个时候的 element 是 Element 的实例，因此我们可以用 instanceof，而且渲染的都是原生的 DOM，因此 tag 名称都是字符串，我们可以使用 element.type 辅助判断。\n\n```js\nfunction createUnit(element) {\n  if ([\"number\", \"string\"].includes(typeof element)) {\n    return new TextUint(element);\n  } else if (\n+    element instanceof Element &&\n+    [\"string\"].includes(typeof element.type)\n+  ) {\n+    return new NativeUint(element);\n+  }\n}\n```\n\n### NativeUint\n\n经过 createUnit 工厂函数之后我们就要生成 NativeUint 了，我们写一个 NativeUint 的 class。我们仍然是继承了 Unit，将元素存到了 `this._currentElement`\n\n```js\nclass NativeUint extends Unit {}\n```\n\n### 调用实例 getMarkUp\n\n在这一步我们需要调用 getMarkUp。我们先想想我们这个步骤的大概流程。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201102214813.png)\n我们之前说过，我们的 getMarkup 函数需要传入一个**key**，然后返回一个**字符串**。对这就是最直观的理解，而返回的字符串可能就是下面的样子。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201102215219.png)\n我们最终需要的字符串大概为：`<span data-reactid=\"0.1\" class=\"test\" id=\"thisisaspan\"><span data-reactid=\"0.1.0\">hehe</span></span>`，包含了一个闭合的 tag，上面还有一些属性，我们就需要遍历添加属性，还要添加对应的唯一 id，还要对 children 子元素做处理。\n\n我们理一下：\n\n- 原生 DOM,要根据渲染对应的 tag\n- style 等 css 处理\n- class 等属性梳理\n- 事件绑定 **为什么要事件委托，因为开始的时候元素还只是个字符串，无法绑定事件**\n- children 的处理\n- 其他属性\n\n我们添加 getMarkup 函数，现在我们讲解这部分代码。\n\n```js\n  /**\n   *\n   * @param {*} reactId\n   * 传入id 返回数组\n   */\n  getMarkUp (reactId) {\n    // 实例存一下id\n    this._reactId = reactId\n    // this._currentElement为Element的实例 我们取出type和props\n    // 而type就是标签的tag\n    const { type, props } = this._currentElement\n    // tag的开头\n    let tagStart = `<${type} data-reactid=\"${reactId}\" `\n    // 中间的children字符串\n    let childString = ''\n    // 结尾的tag\n    let tagEnd = `</${type}>`\n    // 对props进行遍历\n    for (let propName in props) {\n      // 这种就是事件类型\n      if (/^on[A-Z]/.test(propName)) {\n        // 需要绑定事件，取出真实的事件，\n        let eventName = propName.slice(2).toLowerCase()\n        // 委托到的document上面 元素还只是个字符串，无法绑定事件\n        $(document).on(`${eventName}.${reactId}`, `[data-reactid=\"${reactId}\"]`, props[propName])\n      } else if (propName === 'style') {\n        // 样式，取出样式的对象\n        const styleObj = props[propName]\n        // 样式对象 backgroundColor====backgropund-color\n        // 将对象先转换为key-value的数组，在yongmap转换为字符串\n        let styles = Object.entries(styleObj).map(([attr, value]) => {\n          // 正则+replace处理大写字母\n          attr = attr.replace(/[A-Z]/g, (m) => `-${m.toLocaleLowerCase()}`)\n          return `${attr}:${value}`\n        }).join(';')\n        // 依次添加到 开始的tag后面 注意要加空格\n        tagStart += ` style=\"${styles}\"`\n\n      } else if (propName === 'children') {\n        // children 子元素，徐亚将他们遍历，并且传入索引，搭配reactid作为id\n        let children = props[propName]\n        // map返回字符串，再转换为数组 复制给childString\n        childString = children.map((child, index) => {\n          // 通过工程函数生成实例\n          let unit = createUnit(child)\n          // 传入id返回字符串\n          let str = unit.getMarkUp(`${reactId}.${index}`)\n          return str\n        }).join('')\n      } else if (propName === 'className') {\n        // className 类名，不使用class是因为和js的class冲突\n        tagStart += ` class=\"${props[propName]}\"`\n      } else {\n        // 其他的属性直接添加到html上面 如id等等\n        tagStart += ` ${propName}=${props[propName]} `\n      }\n    }\n    // forin循环结束，将所欲的字符串拼接到一起 getMarkUp的使命完成\n    return tagStart + '>' + childString + tagEnd\n  }\n```\n\n### 最后渲染\n\n```js\n// 最后在render中完成使命\nlet unit = createUnit(element);\nlet markUp = unit.getMarkUp(React.rootIndex); // 返回HTML标记\n$(container).html(markUp);\n```\n\n## 结语\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201102220641.png)\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201102220726.png)\n顺着以上的思路，我们成功渲染了原生 DOM,事件、样式、类名等等都一一成功渲染出来。而原生 DOM 的渲染看起来还是有点点复杂，就是深度优先，直接递归，直到没有元素方才完成使命。\n\n本节代码地址：**[代码地址](https://github.com/kitety/my-react-15.x/tree/c772a7af8a909e21ff2ba280ee1cea69ced95b13)**\n\n今天，我们成功完成了原生 DOM 的渲染，接下来我们将处理 Class Component，敬请期待吧！\n","source":"_posts/实现自己的react-15-3.md","raw":"---\ntitle: 实现自己的React之渲染原生DOM\ntags:\n  - React\nabbrlink: a72c43c\ntranslate_title: realize-your-own-react-rendering-native-dom\ndate: 2020-10-29 20:27:21\n---\n\n## 前言\n\n之前我们已经用比较规范的方式实现了字符串和数字的渲染，接下来我们将渲染原生 DOM。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-11-3/1604368409871-image.png)\n\n<!-- more -->\n\n## 预备知识\n\n### 正则\n\n我们在匹配事件和 style 属性的时候，我们需要用到简单的正则知识点\n\n- [A-Z] 大写字母\n- ^ 以\\*\\*开头\n\n除了使用正则的 test 判断以外，我们还可以和[String.place](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace)搭配使用。**注意：这个方法不会改变原字符串。**\n\n### jquery 事件的命名空间和事件代理\n\n在元素创建的时候，我们会在 document 上采用事件委托绑定事件（后面会解释原因），元素移除的时候我们还要移除事件。为了简便操作我们会用命名空间来实现。\n\n## 原理分析\n\n我们在写 React 的代码的时候，我们一般会写 JSX.而在我们的现在开发中，会经过 babel 等转换为 React.createElement 代码。这也就是 JSX 的作用，简单可以理解为 React.createElement 的语法糖。\n\n我们用下面的代码示例\n\n```jsx\n<div\n  onClick={() => {\n    console.log(1);\n  }}\n  style={{ backgroundColor: \"red\" }}\n>\n  你好\n  <span className=\"test\" id=\"thisisaspan\">\n    hehe\n  </span>\n</div>\n```\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201102210123.png)\n\n而如果我们直接在代码中打印这个 `element` 会是什么样子呢？代码可以[看这里](https://codesandbox.io/s/cool-cloud-vfbkc?file=/src/App.js)\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201102210351.png)\n\n可以看到，打印出来是一个对象，里面有`$$typeof、key、type、props` 等等很多属性。而我们需要关注的是 `type` 属性和 `props` 属性，甚至可以可以看到，`props` 里面有个 `children` 属性，而且可以继续展开，里面就是层层递进的 `children` 子元素。其实这个对象就是**虚拟 DOM**，在后面更新的时候我们也会说到。\n\n至此我们也有了一个大概的流程。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201102211725.png)\n\n和之前的字符串的渲染对比得知，我们这次渲染的是 `React.createElement` 的返回值，它的返回值是一个实例，我们现在称为 `Element` 实例。\n\n## 动手实现\n\n经过上述的分析，我们得到此次渲染原生 DOM 我们需要做的事情后大致如下\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201102212917.png)\n我们这次渲染的代码为\n\n```js\n//src/index,js\nconst ele =\n  /*#__PURE__*/\n  React.createElement(\n    \"div\",\n    {\n      onClick: () => {\n        console.log(1);\n      },\n      style: {\n        backgroundColor: \"red\",\n      },\n    },\n    \"\\u4F60\\u597D\",\n    /*#__PURE__*/ React.createElement(\n      \"span\",\n      {\n        className: \"test\",\n        id: \"thisisaspan\",\n      },\n      \"hehe\"\n    )\n  );\nReact.render(ele, document.getElementById(\"root\"));\n```\n\n### createElement\n\n我们在 react 文件夹新建 element.js，这个函数的作用就是根据将所有传入的参数实例化，返回一个对象\n代码如下：\n\n```js\nclass Element {\n  constructor(type, props) {\n    // 存一遍\n    this.type = type;\n    this.props = props;\n  }\n}\n\n/*\n// \nReact.createElement(\"div\", {\n  onClick: () => {\n    console.log(1);\n  },\n  style: {\n    backgroundColor: 'red'\n  }\n}, \"\\u4F60\\u597D\",React.createElement(\"span\", {\n  className: \"test\",\n  id: \"thisisaspan\"\n}, \"hehe\"));\n*/\n// 从第三项开始,后面的都是children,因此用了reset的方式存入数组\nfunction createElement(type, props = {}, ...children) {\n  // 存入props\n  props.children = children;\n  // 返回的element实例\n  // 后面也可以用instanceof来辅助判断\n  return new Element(type, props);\n}\n\nexport { Element, createElement };\n```\n\n再在 react/index.js 引入 createElement，方便调用。\n\n### createUnit\n\ncreateElement 函数调用完成之后，我们就要进入 createUnit 工厂函数来进行判断生成实例\n\n这个地方我们要注意，这个时候的 element 是 Element 的实例，因此我们可以用 instanceof，而且渲染的都是原生的 DOM，因此 tag 名称都是字符串，我们可以使用 element.type 辅助判断。\n\n```js\nfunction createUnit(element) {\n  if ([\"number\", \"string\"].includes(typeof element)) {\n    return new TextUint(element);\n  } else if (\n+    element instanceof Element &&\n+    [\"string\"].includes(typeof element.type)\n+  ) {\n+    return new NativeUint(element);\n+  }\n}\n```\n\n### NativeUint\n\n经过 createUnit 工厂函数之后我们就要生成 NativeUint 了，我们写一个 NativeUint 的 class。我们仍然是继承了 Unit，将元素存到了 `this._currentElement`\n\n```js\nclass NativeUint extends Unit {}\n```\n\n### 调用实例 getMarkUp\n\n在这一步我们需要调用 getMarkUp。我们先想想我们这个步骤的大概流程。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201102214813.png)\n我们之前说过，我们的 getMarkup 函数需要传入一个**key**，然后返回一个**字符串**。对这就是最直观的理解，而返回的字符串可能就是下面的样子。\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201102215219.png)\n我们最终需要的字符串大概为：`<span data-reactid=\"0.1\" class=\"test\" id=\"thisisaspan\"><span data-reactid=\"0.1.0\">hehe</span></span>`，包含了一个闭合的 tag，上面还有一些属性，我们就需要遍历添加属性，还要添加对应的唯一 id，还要对 children 子元素做处理。\n\n我们理一下：\n\n- 原生 DOM,要根据渲染对应的 tag\n- style 等 css 处理\n- class 等属性梳理\n- 事件绑定 **为什么要事件委托，因为开始的时候元素还只是个字符串，无法绑定事件**\n- children 的处理\n- 其他属性\n\n我们添加 getMarkup 函数，现在我们讲解这部分代码。\n\n```js\n  /**\n   *\n   * @param {*} reactId\n   * 传入id 返回数组\n   */\n  getMarkUp (reactId) {\n    // 实例存一下id\n    this._reactId = reactId\n    // this._currentElement为Element的实例 我们取出type和props\n    // 而type就是标签的tag\n    const { type, props } = this._currentElement\n    // tag的开头\n    let tagStart = `<${type} data-reactid=\"${reactId}\" `\n    // 中间的children字符串\n    let childString = ''\n    // 结尾的tag\n    let tagEnd = `</${type}>`\n    // 对props进行遍历\n    for (let propName in props) {\n      // 这种就是事件类型\n      if (/^on[A-Z]/.test(propName)) {\n        // 需要绑定事件，取出真实的事件，\n        let eventName = propName.slice(2).toLowerCase()\n        // 委托到的document上面 元素还只是个字符串，无法绑定事件\n        $(document).on(`${eventName}.${reactId}`, `[data-reactid=\"${reactId}\"]`, props[propName])\n      } else if (propName === 'style') {\n        // 样式，取出样式的对象\n        const styleObj = props[propName]\n        // 样式对象 backgroundColor====backgropund-color\n        // 将对象先转换为key-value的数组，在yongmap转换为字符串\n        let styles = Object.entries(styleObj).map(([attr, value]) => {\n          // 正则+replace处理大写字母\n          attr = attr.replace(/[A-Z]/g, (m) => `-${m.toLocaleLowerCase()}`)\n          return `${attr}:${value}`\n        }).join(';')\n        // 依次添加到 开始的tag后面 注意要加空格\n        tagStart += ` style=\"${styles}\"`\n\n      } else if (propName === 'children') {\n        // children 子元素，徐亚将他们遍历，并且传入索引，搭配reactid作为id\n        let children = props[propName]\n        // map返回字符串，再转换为数组 复制给childString\n        childString = children.map((child, index) => {\n          // 通过工程函数生成实例\n          let unit = createUnit(child)\n          // 传入id返回字符串\n          let str = unit.getMarkUp(`${reactId}.${index}`)\n          return str\n        }).join('')\n      } else if (propName === 'className') {\n        // className 类名，不使用class是因为和js的class冲突\n        tagStart += ` class=\"${props[propName]}\"`\n      } else {\n        // 其他的属性直接添加到html上面 如id等等\n        tagStart += ` ${propName}=${props[propName]} `\n      }\n    }\n    // forin循环结束，将所欲的字符串拼接到一起 getMarkUp的使命完成\n    return tagStart + '>' + childString + tagEnd\n  }\n```\n\n### 最后渲染\n\n```js\n// 最后在render中完成使命\nlet unit = createUnit(element);\nlet markUp = unit.getMarkUp(React.rootIndex); // 返回HTML标记\n$(container).html(markUp);\n```\n\n## 结语\n\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201102220641.png)\n![](https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201102220726.png)\n顺着以上的思路，我们成功渲染了原生 DOM,事件、样式、类名等等都一一成功渲染出来。而原生 DOM 的渲染看起来还是有点点复杂，就是深度优先，直接递归，直到没有元素方才完成使命。\n\n本节代码地址：**[代码地址](https://github.com/kitety/my-react-15.x/tree/c772a7af8a909e21ff2ba280ee1cea69ced95b13)**\n\n今天，我们成功完成了原生 DOM 的渲染，接下来我们将处理 Class Component，敬请期待吧！\n","slug":"实现自己的react-15-3","published":1,"updated":"2021-09-29T07:53:51.826Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy6br0026p4vlh5i54v1d","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>之前我们已经用比较规范的方式实现了字符串和数字的渲染，接下来我们将渲染原生 DOM。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-11-3/1604368409871-image.png\"></p>\n<span id=\"more\"></span>\n\n<h2 id=\"预备知识\"><a href=\"#预备知识\" class=\"headerlink\" title=\"预备知识\"></a>预备知识</h2><h3 id=\"正则\"><a href=\"#正则\" class=\"headerlink\" title=\"正则\"></a>正则</h3><p>我们在匹配事件和 style 属性的时候，我们需要用到简单的正则知识点</p>\n<ul>\n<li>[A-Z] 大写字母</li>\n<li>^ 以**开头</li>\n</ul>\n<p>除了使用正则的 test 判断以外，我们还可以和<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace\">String.place</a>搭配使用。<strong>注意：这个方法不会改变原字符串。</strong></p>\n<h3 id=\"jquery-事件的命名空间和事件代理\"><a href=\"#jquery-事件的命名空间和事件代理\" class=\"headerlink\" title=\"jquery 事件的命名空间和事件代理\"></a>jquery 事件的命名空间和事件代理</h3><p>在元素创建的时候，我们会在 document 上采用事件委托绑定事件（后面会解释原因），元素移除的时候我们还要移除事件。为了简便操作我们会用命名空间来实现。</p>\n<h2 id=\"原理分析\"><a href=\"#原理分析\" class=\"headerlink\" title=\"原理分析\"></a>原理分析</h2><p>我们在写 React 的代码的时候，我们一般会写 JSX.而在我们的现在开发中，会经过 babel 等转换为 React.createElement 代码。这也就是 JSX 的作用，简单可以理解为 React.createElement 的语法糖。</p>\n<p>我们用下面的代码示例</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div</span><br><span class=\"line\">  onClick=&#123;<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">  &#125;&#125;</span><br><span class=\"line\">  style=&#123;&#123; <span class=\"attr\">backgroundColor</span>: <span class=\"string\">&quot;red&quot;</span> &#125;&#125;</span><br><span class=\"line\">&gt;</span><br><span class=\"line\">  你好</span><br><span class=\"line\">  &lt;span className=<span class=\"string\">&quot;test&quot;</span> id=<span class=\"string\">&quot;thisisaspan&quot;</span>&gt;</span><br><span class=\"line\">    hehe</span><br><span class=\"line\">  &lt;/span&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201102210123.png\"></p>\n<p>而如果我们直接在代码中打印这个 <code>element</code> 会是什么样子呢？代码可以<a href=\"https://codesandbox.io/s/cool-cloud-vfbkc?file=/src/App.js\">看这里</a></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201102210351.png\"></p>\n<p>可以看到，打印出来是一个对象，里面有<code>$$typeof、key、type、props</code> 等等很多属性。而我们需要关注的是 <code>type</code> 属性和 <code>props</code> 属性，甚至可以可以看到，<code>props</code> 里面有个 <code>children</code> 属性，而且可以继续展开，里面就是层层递进的 <code>children</code> 子元素。其实这个对象就是<strong>虚拟 DOM</strong>，在后面更新的时候我们也会说到。</p>\n<p>至此我们也有了一个大概的流程。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201102211725.png\"></p>\n<p>和之前的字符串的渲染对比得知，我们这次渲染的是 <code>React.createElement</code> 的返回值，它的返回值是一个实例，我们现在称为 <code>Element</code> 实例。</p>\n<h2 id=\"动手实现\"><a href=\"#动手实现\" class=\"headerlink\" title=\"动手实现\"></a>动手实现</h2><p>经过上述的分析，我们得到此次渲染原生 DOM 我们需要做的事情后大致如下<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201102212917.png\"><br>我们这次渲染的代码为</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//src/index,js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> ele =</span><br><span class=\"line\">  <span class=\"comment\">/*#__PURE__*/</span></span><br><span class=\"line\">  <span class=\"title class_\">React</span>.<span class=\"title function_\">createElement</span>(</span><br><span class=\"line\">    <span class=\"string\">&quot;div&quot;</span>,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"attr\">onClick</span>: <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      <span class=\"attr\">style</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">backgroundColor</span>: <span class=\"string\">&quot;red&quot;</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"string\">&quot;\\u4F60\\u597D&quot;</span>,</span><br><span class=\"line\">    <span class=\"comment\">/*#__PURE__*/</span> <span class=\"title class_\">React</span>.<span class=\"title function_\">createElement</span>(</span><br><span class=\"line\">      <span class=\"string\">&quot;span&quot;</span>,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">className</span>: <span class=\"string\">&quot;test&quot;</span>,</span><br><span class=\"line\">        <span class=\"attr\">id</span>: <span class=\"string\">&quot;thisisaspan&quot;</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      <span class=\"string\">&quot;hehe&quot;</span></span><br><span class=\"line\">    )</span><br><span class=\"line\">  );</span><br><span class=\"line\"><span class=\"title class_\">React</span>.<span class=\"title function_\">render</span>(ele, <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;root&quot;</span>));</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"createElement\"><a href=\"#createElement\" class=\"headerlink\" title=\"createElement\"></a>createElement</h3><p>我们在 react 文件夹新建 element.js，这个函数的作用就是根据将所有传入的参数实例化，返回一个对象<br>代码如下：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Element</span> &#123;</span><br><span class=\"line\">  <span class=\"title function_\">constructor</span>(<span class=\"params\">type, props</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 存一遍</span></span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">type</span> = type;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">props</span> = props;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"comment\">React.createElement(&quot;div&quot;, &#123;</span></span><br><span class=\"line\"><span class=\"comment\">  onClick: () =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"comment\">    console.log(1);</span></span><br><span class=\"line\"><span class=\"comment\">  &#125;,</span></span><br><span class=\"line\"><span class=\"comment\">  style: &#123;</span></span><br><span class=\"line\"><span class=\"comment\">    backgroundColor: &#x27;red&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">  &#125;</span></span><br><span class=\"line\"><span class=\"comment\">&#125;, &quot;\\u4F60\\u597D&quot;,React.createElement(&quot;span&quot;, &#123;</span></span><br><span class=\"line\"><span class=\"comment\">  className: &quot;test&quot;,</span></span><br><span class=\"line\"><span class=\"comment\">  id: &quot;thisisaspan&quot;</span></span><br><span class=\"line\"><span class=\"comment\">&#125;, &quot;hehe&quot;));</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"comment\">// 从第三项开始,后面的都是children,因此用了reset的方式存入数组</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">createElement</span>(<span class=\"params\">type, props = &#123;&#125;, ...children</span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 存入props</span></span><br><span class=\"line\">  props.<span class=\"property\">children</span> = children;</span><br><span class=\"line\">  <span class=\"comment\">// 返回的element实例</span></span><br><span class=\"line\">  <span class=\"comment\">// 后面也可以用instanceof来辅助判断</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Element</span>(type, props);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123; <span class=\"title class_\">Element</span>, createElement &#125;;</span><br></pre></td></tr></table></figure>\n\n<p>再在 react/index.js 引入 createElement，方便调用。</p>\n<h3 id=\"createUnit\"><a href=\"#createUnit\" class=\"headerlink\" title=\"createUnit\"></a>createUnit</h3><p>createElement 函数调用完成之后，我们就要进入 createUnit 工厂函数来进行判断生成实例</p>\n<p>这个地方我们要注意，这个时候的 element 是 Element 的实例，因此我们可以用 instanceof，而且渲染的都是原生的 DOM，因此 tag 名称都是字符串，我们可以使用 element.type 辅助判断。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">createUnit</span>(<span class=\"params\">element</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> ([<span class=\"string\">&quot;number&quot;</span>, <span class=\"string\">&quot;string&quot;</span>].<span class=\"title function_\">includes</span>(<span class=\"keyword\">typeof</span> element)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">TextUint</span>(element);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (</span><br><span class=\"line\">+    element <span class=\"keyword\">instanceof</span> <span class=\"title class_\">Element</span> &amp;&amp;</span><br><span class=\"line\">+    [<span class=\"string\">&quot;string&quot;</span>].<span class=\"title function_\">includes</span>(<span class=\"keyword\">typeof</span> element.<span class=\"property\">type</span>)</span><br><span class=\"line\">+  ) &#123;</span><br><span class=\"line\">+    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">NativeUint</span>(element);</span><br><span class=\"line\">+  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"NativeUint\"><a href=\"#NativeUint\" class=\"headerlink\" title=\"NativeUint\"></a>NativeUint</h3><p>经过 createUnit 工厂函数之后我们就要生成 NativeUint 了，我们写一个 NativeUint 的 class。我们仍然是继承了 Unit，将元素存到了 <code>this._currentElement</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">NativeUint</span> <span class=\"keyword\">extends</span> <span class=\"title class_ inherited__\">Unit</span> &#123;&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"调用实例-getMarkUp\"><a href=\"#调用实例-getMarkUp\" class=\"headerlink\" title=\"调用实例 getMarkUp\"></a>调用实例 getMarkUp</h3><p>在这一步我们需要调用 getMarkUp。我们先想想我们这个步骤的大概流程。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201102214813.png\"><br>我们之前说过，我们的 getMarkup 函数需要传入一个<strong>key</strong>，然后返回一个<strong>字符串</strong>。对这就是最直观的理解，而返回的字符串可能就是下面的样子。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201102215219.png\"><br>我们最终需要的字符串大概为：<code>&lt;span data-reactid=&quot;0.1&quot; class=&quot;test&quot; id=&quot;thisisaspan&quot;&gt;&lt;span data-reactid=&quot;0.1.0&quot;&gt;hehe&lt;/span&gt;&lt;/span&gt;</code>，包含了一个闭合的 tag，上面还有一些属性，我们就需要遍历添加属性，还要添加对应的唯一 id，还要对 children 子元素做处理。</p>\n<p>我们理一下：</p>\n<ul>\n<li>原生 DOM,要根据渲染对应的 tag</li>\n<li>style 等 css 处理</li>\n<li>class 等属性梳理</li>\n<li>事件绑定 <strong>为什么要事件委托，因为开始的时候元素还只是个字符串，无法绑定事件</strong></li>\n<li>children 的处理</li>\n<li>其他属性</li>\n</ul>\n<p>我们添加 getMarkup 函数，现在我们讲解这部分代码。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> &#123;<span class=\"type\">*</span>&#125; <span class=\"variable\">reactId</span></span></span><br><span class=\"line\"><span class=\"comment\"> * 传入id 返回数组</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">getMarkUp (reactId) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 实例存一下id</span></span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">_reactId</span> = reactId</span><br><span class=\"line\">  <span class=\"comment\">// this._currentElement为Element的实例 我们取出type和props</span></span><br><span class=\"line\">  <span class=\"comment\">// 而type就是标签的tag</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; type, props &#125; = <span class=\"variable language_\">this</span>.<span class=\"property\">_currentElement</span></span><br><span class=\"line\">  <span class=\"comment\">// tag的开头</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> tagStart = <span class=\"string\">`&lt;<span class=\"subst\">$&#123;type&#125;</span> data-reactid=&quot;<span class=\"subst\">$&#123;reactId&#125;</span>&quot; `</span></span><br><span class=\"line\">  <span class=\"comment\">// 中间的children字符串</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> childString = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">  <span class=\"comment\">// 结尾的tag</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> tagEnd = <span class=\"string\">`&lt;/<span class=\"subst\">$&#123;type&#125;</span>&gt;`</span></span><br><span class=\"line\">  <span class=\"comment\">// 对props进行遍历</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> propName <span class=\"keyword\">in</span> props) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 这种就是事件类型</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"regexp\">/^on[A-Z]/</span>.<span class=\"title function_\">test</span>(propName)) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 需要绑定事件，取出真实的事件，</span></span><br><span class=\"line\">      <span class=\"keyword\">let</span> eventName = propName.<span class=\"title function_\">slice</span>(<span class=\"number\">2</span>).<span class=\"title function_\">toLowerCase</span>()</span><br><span class=\"line\">      <span class=\"comment\">// 委托到的document上面 元素还只是个字符串，无法绑定事件</span></span><br><span class=\"line\">      $(<span class=\"variable language_\">document</span>).<span class=\"title function_\">on</span>(<span class=\"string\">`<span class=\"subst\">$&#123;eventName&#125;</span>.<span class=\"subst\">$&#123;reactId&#125;</span>`</span>, <span class=\"string\">`[data-reactid=&quot;<span class=\"subst\">$&#123;reactId&#125;</span>&quot;]`</span>, props[propName])</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (propName === <span class=\"string\">&#x27;style&#x27;</span>) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 样式，取出样式的对象</span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> styleObj = props[propName]</span><br><span class=\"line\">      <span class=\"comment\">// 样式对象 backgroundColor====backgropund-color</span></span><br><span class=\"line\">      <span class=\"comment\">// 将对象先转换为key-value的数组，在yongmap转换为字符串</span></span><br><span class=\"line\">      <span class=\"keyword\">let</span> styles = <span class=\"title class_\">Object</span>.<span class=\"title function_\">entries</span>(styleObj).<span class=\"title function_\">map</span>(<span class=\"function\">(<span class=\"params\">[attr, value]</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 正则+replace处理大写字母</span></span><br><span class=\"line\">        attr = attr.<span class=\"title function_\">replace</span>(<span class=\"regexp\">/[A-Z]/g</span>, <span class=\"function\">(<span class=\"params\">m</span>) =&gt;</span> <span class=\"string\">`-<span class=\"subst\">$&#123;m.toLocaleLowerCase()&#125;</span>`</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">`<span class=\"subst\">$&#123;attr&#125;</span>:<span class=\"subst\">$&#123;value&#125;</span>`</span></span><br><span class=\"line\">      &#125;).<span class=\"title function_\">join</span>(<span class=\"string\">&#x27;;&#x27;</span>)</span><br><span class=\"line\">      <span class=\"comment\">// 依次添加到 开始的tag后面 注意要加空格</span></span><br><span class=\"line\">      tagStart += <span class=\"string\">` style=&quot;<span class=\"subst\">$&#123;styles&#125;</span>&quot;`</span></span><br><span class=\"line\"></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (propName === <span class=\"string\">&#x27;children&#x27;</span>) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// children 子元素，徐亚将他们遍历，并且传入索引，搭配reactid作为id</span></span><br><span class=\"line\">      <span class=\"keyword\">let</span> children = props[propName]</span><br><span class=\"line\">      <span class=\"comment\">// map返回字符串，再转换为数组 复制给childString</span></span><br><span class=\"line\">      childString = children.<span class=\"title function_\">map</span>(<span class=\"function\">(<span class=\"params\">child, index</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 通过工程函数生成实例</span></span><br><span class=\"line\">        <span class=\"keyword\">let</span> unit = <span class=\"title function_\">createUnit</span>(child)</span><br><span class=\"line\">        <span class=\"comment\">// 传入id返回字符串</span></span><br><span class=\"line\">        <span class=\"keyword\">let</span> str = unit.<span class=\"title function_\">getMarkUp</span>(<span class=\"string\">`<span class=\"subst\">$&#123;reactId&#125;</span>.<span class=\"subst\">$&#123;index&#125;</span>`</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> str</span><br><span class=\"line\">      &#125;).<span class=\"title function_\">join</span>(<span class=\"string\">&#x27;&#x27;</span>)</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (propName === <span class=\"string\">&#x27;className&#x27;</span>) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// className 类名，不使用class是因为和js的class冲突</span></span><br><span class=\"line\">      tagStart += <span class=\"string\">` class=&quot;<span class=\"subst\">$&#123;props[propName]&#125;</span>&quot;`</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 其他的属性直接添加到html上面 如id等等</span></span><br><span class=\"line\">      tagStart += <span class=\"string\">` <span class=\"subst\">$&#123;propName&#125;</span>=<span class=\"subst\">$&#123;props[propName]&#125;</span> `</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// forin循环结束，将所欲的字符串拼接到一起 getMarkUp的使命完成</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> tagStart + <span class=\"string\">&#x27;&gt;&#x27;</span> + childString + tagEnd</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"最后渲染\"><a href=\"#最后渲染\" class=\"headerlink\" title=\"最后渲染\"></a>最后渲染</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 最后在render中完成使命</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> unit = <span class=\"title function_\">createUnit</span>(element);</span><br><span class=\"line\"><span class=\"keyword\">let</span> markUp = unit.<span class=\"title function_\">getMarkUp</span>(<span class=\"title class_\">React</span>.<span class=\"property\">rootIndex</span>); <span class=\"comment\">// 返回HTML标记</span></span><br><span class=\"line\">$(container).<span class=\"title function_\">html</span>(markUp);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201102220641.png\"><br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/giphy.gif\" data-original=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201102220726.png\"><br>顺着以上的思路，我们成功渲染了原生 DOM,事件、样式、类名等等都一一成功渲染出来。而原生 DOM 的渲染看起来还是有点点复杂，就是深度优先，直接递归，直到没有元素方才完成使命。</p>\n<p>本节代码地址：**<a href=\"https://github.com/kitety/my-react-15.x/tree/c772a7af8a909e21ff2ba280ee1cea69ced95b13\">代码地址</a>**</p>\n<p>今天，我们成功完成了原生 DOM 的渲染，接下来我们将处理 Class Component，敬请期待吧！</p>\n","site":{"data":{}},"length":5507,"excerpt":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>之前我们已经用比较规范的方式实现了字符串和数字的渲染，接下来我们将渲染原生 DOM。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/2020-11-3/1604368409871-image.png\"></p>","more":"<h2 id=\"预备知识\"><a href=\"#预备知识\" class=\"headerlink\" title=\"预备知识\"></a>预备知识</h2><h3 id=\"正则\"><a href=\"#正则\" class=\"headerlink\" title=\"正则\"></a>正则</h3><p>我们在匹配事件和 style 属性的时候，我们需要用到简单的正则知识点</p>\n<ul>\n<li>[A-Z] 大写字母</li>\n<li>^ 以**开头</li>\n</ul>\n<p>除了使用正则的 test 判断以外，我们还可以和<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace\">String.place</a>搭配使用。<strong>注意：这个方法不会改变原字符串。</strong></p>\n<h3 id=\"jquery-事件的命名空间和事件代理\"><a href=\"#jquery-事件的命名空间和事件代理\" class=\"headerlink\" title=\"jquery 事件的命名空间和事件代理\"></a>jquery 事件的命名空间和事件代理</h3><p>在元素创建的时候，我们会在 document 上采用事件委托绑定事件（后面会解释原因），元素移除的时候我们还要移除事件。为了简便操作我们会用命名空间来实现。</p>\n<h2 id=\"原理分析\"><a href=\"#原理分析\" class=\"headerlink\" title=\"原理分析\"></a>原理分析</h2><p>我们在写 React 的代码的时候，我们一般会写 JSX.而在我们的现在开发中，会经过 babel 等转换为 React.createElement 代码。这也就是 JSX 的作用，简单可以理解为 React.createElement 的语法糖。</p>\n<p>我们用下面的代码示例</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div</span><br><span class=\"line\">  onClick=&#123;<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">  &#125;&#125;</span><br><span class=\"line\">  style=&#123;&#123; <span class=\"attr\">backgroundColor</span>: <span class=\"string\">&quot;red&quot;</span> &#125;&#125;</span><br><span class=\"line\">&gt;</span><br><span class=\"line\">  你好</span><br><span class=\"line\">  &lt;span className=<span class=\"string\">&quot;test&quot;</span> id=<span class=\"string\">&quot;thisisaspan&quot;</span>&gt;</span><br><span class=\"line\">    hehe</span><br><span class=\"line\">  &lt;/span&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201102210123.png\"></p>\n<p>而如果我们直接在代码中打印这个 <code>element</code> 会是什么样子呢？代码可以<a href=\"https://codesandbox.io/s/cool-cloud-vfbkc?file=/src/App.js\">看这里</a></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201102210351.png\"></p>\n<p>可以看到，打印出来是一个对象，里面有<code>$$typeof、key、type、props</code> 等等很多属性。而我们需要关注的是 <code>type</code> 属性和 <code>props</code> 属性，甚至可以可以看到，<code>props</code> 里面有个 <code>children</code> 属性，而且可以继续展开，里面就是层层递进的 <code>children</code> 子元素。其实这个对象就是<strong>虚拟 DOM</strong>，在后面更新的时候我们也会说到。</p>\n<p>至此我们也有了一个大概的流程。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201102211725.png\"></p>\n<p>和之前的字符串的渲染对比得知，我们这次渲染的是 <code>React.createElement</code> 的返回值，它的返回值是一个实例，我们现在称为 <code>Element</code> 实例。</p>\n<h2 id=\"动手实现\"><a href=\"#动手实现\" class=\"headerlink\" title=\"动手实现\"></a>动手实现</h2><p>经过上述的分析，我们得到此次渲染原生 DOM 我们需要做的事情后大致如下<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201102212917.png\"><br>我们这次渲染的代码为</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//src/index,js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> ele =</span><br><span class=\"line\">  <span class=\"comment\">/*#__PURE__*/</span></span><br><span class=\"line\">  <span class=\"title class_\">React</span>.<span class=\"title function_\">createElement</span>(</span><br><span class=\"line\">    <span class=\"string\">&quot;div&quot;</span>,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"attr\">onClick</span>: <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      <span class=\"attr\">style</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">backgroundColor</span>: <span class=\"string\">&quot;red&quot;</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"string\">&quot;\\u4F60\\u597D&quot;</span>,</span><br><span class=\"line\">    <span class=\"comment\">/*#__PURE__*/</span> <span class=\"title class_\">React</span>.<span class=\"title function_\">createElement</span>(</span><br><span class=\"line\">      <span class=\"string\">&quot;span&quot;</span>,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">className</span>: <span class=\"string\">&quot;test&quot;</span>,</span><br><span class=\"line\">        <span class=\"attr\">id</span>: <span class=\"string\">&quot;thisisaspan&quot;</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      <span class=\"string\">&quot;hehe&quot;</span></span><br><span class=\"line\">    )</span><br><span class=\"line\">  );</span><br><span class=\"line\"><span class=\"title class_\">React</span>.<span class=\"title function_\">render</span>(ele, <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;root&quot;</span>));</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"createElement\"><a href=\"#createElement\" class=\"headerlink\" title=\"createElement\"></a>createElement</h3><p>我们在 react 文件夹新建 element.js，这个函数的作用就是根据将所有传入的参数实例化，返回一个对象<br>代码如下：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Element</span> &#123;</span><br><span class=\"line\">  <span class=\"title function_\">constructor</span>(<span class=\"params\">type, props</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 存一遍</span></span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">type</span> = type;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">props</span> = props;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"comment\">React.createElement(&quot;div&quot;, &#123;</span></span><br><span class=\"line\"><span class=\"comment\">  onClick: () =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"comment\">    console.log(1);</span></span><br><span class=\"line\"><span class=\"comment\">  &#125;,</span></span><br><span class=\"line\"><span class=\"comment\">  style: &#123;</span></span><br><span class=\"line\"><span class=\"comment\">    backgroundColor: &#x27;red&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">  &#125;</span></span><br><span class=\"line\"><span class=\"comment\">&#125;, &quot;\\u4F60\\u597D&quot;,React.createElement(&quot;span&quot;, &#123;</span></span><br><span class=\"line\"><span class=\"comment\">  className: &quot;test&quot;,</span></span><br><span class=\"line\"><span class=\"comment\">  id: &quot;thisisaspan&quot;</span></span><br><span class=\"line\"><span class=\"comment\">&#125;, &quot;hehe&quot;));</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"comment\">// 从第三项开始,后面的都是children,因此用了reset的方式存入数组</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">createElement</span>(<span class=\"params\">type, props = &#123;&#125;, ...children</span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 存入props</span></span><br><span class=\"line\">  props.<span class=\"property\">children</span> = children;</span><br><span class=\"line\">  <span class=\"comment\">// 返回的element实例</span></span><br><span class=\"line\">  <span class=\"comment\">// 后面也可以用instanceof来辅助判断</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Element</span>(type, props);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123; <span class=\"title class_\">Element</span>, createElement &#125;;</span><br></pre></td></tr></table></figure>\n\n<p>再在 react/index.js 引入 createElement，方便调用。</p>\n<h3 id=\"createUnit\"><a href=\"#createUnit\" class=\"headerlink\" title=\"createUnit\"></a>createUnit</h3><p>createElement 函数调用完成之后，我们就要进入 createUnit 工厂函数来进行判断生成实例</p>\n<p>这个地方我们要注意，这个时候的 element 是 Element 的实例，因此我们可以用 instanceof，而且渲染的都是原生的 DOM，因此 tag 名称都是字符串，我们可以使用 element.type 辅助判断。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">createUnit</span>(<span class=\"params\">element</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> ([<span class=\"string\">&quot;number&quot;</span>, <span class=\"string\">&quot;string&quot;</span>].<span class=\"title function_\">includes</span>(<span class=\"keyword\">typeof</span> element)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">TextUint</span>(element);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (</span><br><span class=\"line\">+    element <span class=\"keyword\">instanceof</span> <span class=\"title class_\">Element</span> &amp;&amp;</span><br><span class=\"line\">+    [<span class=\"string\">&quot;string&quot;</span>].<span class=\"title function_\">includes</span>(<span class=\"keyword\">typeof</span> element.<span class=\"property\">type</span>)</span><br><span class=\"line\">+  ) &#123;</span><br><span class=\"line\">+    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">NativeUint</span>(element);</span><br><span class=\"line\">+  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"NativeUint\"><a href=\"#NativeUint\" class=\"headerlink\" title=\"NativeUint\"></a>NativeUint</h3><p>经过 createUnit 工厂函数之后我们就要生成 NativeUint 了，我们写一个 NativeUint 的 class。我们仍然是继承了 Unit，将元素存到了 <code>this._currentElement</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">NativeUint</span> <span class=\"keyword\">extends</span> <span class=\"title class_ inherited__\">Unit</span> &#123;&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"调用实例-getMarkUp\"><a href=\"#调用实例-getMarkUp\" class=\"headerlink\" title=\"调用实例 getMarkUp\"></a>调用实例 getMarkUp</h3><p>在这一步我们需要调用 getMarkUp。我们先想想我们这个步骤的大概流程。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201102214813.png\"><br>我们之前说过，我们的 getMarkup 函数需要传入一个<strong>key</strong>，然后返回一个<strong>字符串</strong>。对这就是最直观的理解，而返回的字符串可能就是下面的样子。<br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201102215219.png\"><br>我们最终需要的字符串大概为：<code>&lt;span data-reactid=&quot;0.1&quot; class=&quot;test&quot; id=&quot;thisisaspan&quot;&gt;&lt;span data-reactid=&quot;0.1.0&quot;&gt;hehe&lt;/span&gt;&lt;/span&gt;</code>，包含了一个闭合的 tag，上面还有一些属性，我们就需要遍历添加属性，还要添加对应的唯一 id，还要对 children 子元素做处理。</p>\n<p>我们理一下：</p>\n<ul>\n<li>原生 DOM,要根据渲染对应的 tag</li>\n<li>style 等 css 处理</li>\n<li>class 等属性梳理</li>\n<li>事件绑定 <strong>为什么要事件委托，因为开始的时候元素还只是个字符串，无法绑定事件</strong></li>\n<li>children 的处理</li>\n<li>其他属性</li>\n</ul>\n<p>我们添加 getMarkup 函数，现在我们讲解这部分代码。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> &#123;<span class=\"type\">*</span>&#125; <span class=\"variable\">reactId</span></span></span><br><span class=\"line\"><span class=\"comment\"> * 传入id 返回数组</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">getMarkUp (reactId) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 实例存一下id</span></span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">_reactId</span> = reactId</span><br><span class=\"line\">  <span class=\"comment\">// this._currentElement为Element的实例 我们取出type和props</span></span><br><span class=\"line\">  <span class=\"comment\">// 而type就是标签的tag</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; type, props &#125; = <span class=\"variable language_\">this</span>.<span class=\"property\">_currentElement</span></span><br><span class=\"line\">  <span class=\"comment\">// tag的开头</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> tagStart = <span class=\"string\">`&lt;<span class=\"subst\">$&#123;type&#125;</span> data-reactid=&quot;<span class=\"subst\">$&#123;reactId&#125;</span>&quot; `</span></span><br><span class=\"line\">  <span class=\"comment\">// 中间的children字符串</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> childString = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">  <span class=\"comment\">// 结尾的tag</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> tagEnd = <span class=\"string\">`&lt;/<span class=\"subst\">$&#123;type&#125;</span>&gt;`</span></span><br><span class=\"line\">  <span class=\"comment\">// 对props进行遍历</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> propName <span class=\"keyword\">in</span> props) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 这种就是事件类型</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"regexp\">/^on[A-Z]/</span>.<span class=\"title function_\">test</span>(propName)) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 需要绑定事件，取出真实的事件，</span></span><br><span class=\"line\">      <span class=\"keyword\">let</span> eventName = propName.<span class=\"title function_\">slice</span>(<span class=\"number\">2</span>).<span class=\"title function_\">toLowerCase</span>()</span><br><span class=\"line\">      <span class=\"comment\">// 委托到的document上面 元素还只是个字符串，无法绑定事件</span></span><br><span class=\"line\">      $(<span class=\"variable language_\">document</span>).<span class=\"title function_\">on</span>(<span class=\"string\">`<span class=\"subst\">$&#123;eventName&#125;</span>.<span class=\"subst\">$&#123;reactId&#125;</span>`</span>, <span class=\"string\">`[data-reactid=&quot;<span class=\"subst\">$&#123;reactId&#125;</span>&quot;]`</span>, props[propName])</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (propName === <span class=\"string\">&#x27;style&#x27;</span>) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 样式，取出样式的对象</span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> styleObj = props[propName]</span><br><span class=\"line\">      <span class=\"comment\">// 样式对象 backgroundColor====backgropund-color</span></span><br><span class=\"line\">      <span class=\"comment\">// 将对象先转换为key-value的数组，在yongmap转换为字符串</span></span><br><span class=\"line\">      <span class=\"keyword\">let</span> styles = <span class=\"title class_\">Object</span>.<span class=\"title function_\">entries</span>(styleObj).<span class=\"title function_\">map</span>(<span class=\"function\">(<span class=\"params\">[attr, value]</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 正则+replace处理大写字母</span></span><br><span class=\"line\">        attr = attr.<span class=\"title function_\">replace</span>(<span class=\"regexp\">/[A-Z]/g</span>, <span class=\"function\">(<span class=\"params\">m</span>) =&gt;</span> <span class=\"string\">`-<span class=\"subst\">$&#123;m.toLocaleLowerCase()&#125;</span>`</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">`<span class=\"subst\">$&#123;attr&#125;</span>:<span class=\"subst\">$&#123;value&#125;</span>`</span></span><br><span class=\"line\">      &#125;).<span class=\"title function_\">join</span>(<span class=\"string\">&#x27;;&#x27;</span>)</span><br><span class=\"line\">      <span class=\"comment\">// 依次添加到 开始的tag后面 注意要加空格</span></span><br><span class=\"line\">      tagStart += <span class=\"string\">` style=&quot;<span class=\"subst\">$&#123;styles&#125;</span>&quot;`</span></span><br><span class=\"line\"></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (propName === <span class=\"string\">&#x27;children&#x27;</span>) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// children 子元素，徐亚将他们遍历，并且传入索引，搭配reactid作为id</span></span><br><span class=\"line\">      <span class=\"keyword\">let</span> children = props[propName]</span><br><span class=\"line\">      <span class=\"comment\">// map返回字符串，再转换为数组 复制给childString</span></span><br><span class=\"line\">      childString = children.<span class=\"title function_\">map</span>(<span class=\"function\">(<span class=\"params\">child, index</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 通过工程函数生成实例</span></span><br><span class=\"line\">        <span class=\"keyword\">let</span> unit = <span class=\"title function_\">createUnit</span>(child)</span><br><span class=\"line\">        <span class=\"comment\">// 传入id返回字符串</span></span><br><span class=\"line\">        <span class=\"keyword\">let</span> str = unit.<span class=\"title function_\">getMarkUp</span>(<span class=\"string\">`<span class=\"subst\">$&#123;reactId&#125;</span>.<span class=\"subst\">$&#123;index&#125;</span>`</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> str</span><br><span class=\"line\">      &#125;).<span class=\"title function_\">join</span>(<span class=\"string\">&#x27;&#x27;</span>)</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (propName === <span class=\"string\">&#x27;className&#x27;</span>) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// className 类名，不使用class是因为和js的class冲突</span></span><br><span class=\"line\">      tagStart += <span class=\"string\">` class=&quot;<span class=\"subst\">$&#123;props[propName]&#125;</span>&quot;`</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 其他的属性直接添加到html上面 如id等等</span></span><br><span class=\"line\">      tagStart += <span class=\"string\">` <span class=\"subst\">$&#123;propName&#125;</span>=<span class=\"subst\">$&#123;props[propName]&#125;</span> `</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// forin循环结束，将所欲的字符串拼接到一起 getMarkUp的使命完成</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> tagStart + <span class=\"string\">&#x27;&gt;&#x27;</span> + childString + tagEnd</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"最后渲染\"><a href=\"#最后渲染\" class=\"headerlink\" title=\"最后渲染\"></a>最后渲染</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 最后在render中完成使命</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> unit = <span class=\"title function_\">createUnit</span>(element);</span><br><span class=\"line\"><span class=\"keyword\">let</span> markUp = unit.<span class=\"title function_\">getMarkUp</span>(<span class=\"title class_\">React</span>.<span class=\"property\">rootIndex</span>); <span class=\"comment\">// 返回HTML标记</span></span><br><span class=\"line\">$(container).<span class=\"title function_\">html</span>(markUp);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201102220641.png\"><br><img src=\"https://cdn.jsdelivr.net/gh/kitety/blog_img@master/img/20201102220726.png\"><br>顺着以上的思路，我们成功渲染了原生 DOM,事件、样式、类名等等都一一成功渲染出来。而原生 DOM 的渲染看起来还是有点点复杂，就是深度优先，直接递归，直到没有元素方才完成使命。</p>\n<p>本节代码地址：**<a href=\"https://github.com/kitety/my-react-15.x/tree/c772a7af8a909e21ff2ba280ee1cea69ced95b13\">代码地址</a>**</p>\n<p>今天，我们成功完成了原生 DOM 的渲染，接下来我们将处理 Class Component，敬请期待吧！</p>"},{"title":"2020年末启示","abbrlink":"b36246b1","translate_title":"end-of-2020-inspiration","date":"2021-01-04T02:38:03.000Z","_content":"无论你做什么工作，你都要把自己的本职工作做好，因为公司是不养闲人的。\n\n如果你要技术分享，你可以技术分享，这样会增加你的话语权；并且要尽量将分享落地，和现在的业务逻辑结合起来，这样会更加增加你的影响力。\n\n所有的学习不要仅仅停留在使用的层面，我们要多去想一想他是怎么实现的。保持一颗好奇心，知其原理会更好一些。\n\n想想你的领导为什么他可以当领导，肯定有过人之处，有你值得学习的地方。\n\n去到一个环境多去学习现在所缺乏的，因为先进的理念只有在这些地方才可以学到。\n\n你要学会怎么产生价值，实现自己的价值。\n\n任何时候，心态都是相当重要的。\n\n","source":"_posts/年末启示.md","raw":"---\ntitle: 2020年末启示\nabbrlink: b36246b1\ntranslate_title: end-of-2020-inspiration\ndate: 2021-01-04 10:38:03\ntags:\n- 心得\n---\n无论你做什么工作，你都要把自己的本职工作做好，因为公司是不养闲人的。\n\n如果你要技术分享，你可以技术分享，这样会增加你的话语权；并且要尽量将分享落地，和现在的业务逻辑结合起来，这样会更加增加你的影响力。\n\n所有的学习不要仅仅停留在使用的层面，我们要多去想一想他是怎么实现的。保持一颗好奇心，知其原理会更好一些。\n\n想想你的领导为什么他可以当领导，肯定有过人之处，有你值得学习的地方。\n\n去到一个环境多去学习现在所缺乏的，因为先进的理念只有在这些地方才可以学到。\n\n你要学会怎么产生价值，实现自己的价值。\n\n任何时候，心态都是相当重要的。\n\n","slug":"年末启示","published":1,"updated":"2021-09-29T07:53:51.826Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy6bs0028p4vl5gvr0qgc","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>无论你做什么工作，你都要把自己的本职工作做好，因为公司是不养闲人的。</p>\n<p>如果你要技术分享，你可以技术分享，这样会增加你的话语权；并且要尽量将分享落地，和现在的业务逻辑结合起来，这样会更加增加你的影响力。</p>\n<p>所有的学习不要仅仅停留在使用的层面，我们要多去想一想他是怎么实现的。保持一颗好奇心，知其原理会更好一些。</p>\n<p>想想你的领导为什么他可以当领导，肯定有过人之处，有你值得学习的地方。</p>\n<p>去到一个环境多去学习现在所缺乏的，因为先进的理念只有在这些地方才可以学到。</p>\n<p>你要学会怎么产生价值，实现自己的价值。</p>\n<p>任何时候，心态都是相当重要的。</p>\n","site":{"data":{}},"length":256,"excerpt":"","more":"<p>无论你做什么工作，你都要把自己的本职工作做好，因为公司是不养闲人的。</p>\n<p>如果你要技术分享，你可以技术分享，这样会增加你的话语权；并且要尽量将分享落地，和现在的业务逻辑结合起来，这样会更加增加你的影响力。</p>\n<p>所有的学习不要仅仅停留在使用的层面，我们要多去想一想他是怎么实现的。保持一颗好奇心，知其原理会更好一些。</p>\n<p>想想你的领导为什么他可以当领导，肯定有过人之处，有你值得学习的地方。</p>\n<p>去到一个环境多去学习现在所缺乏的，因为先进的理念只有在这些地方才可以学到。</p>\n<p>你要学会怎么产生价值，实现自己的价值。</p>\n<p>任何时候，心态都是相当重要的。</p>\n"},{"title":"CSS 伪类合集分享","abbrlink":"a54a0322","translate_title":"css-pseudoclass-collection-sharing","date":"2020-06-28T02:32:54.000Z","_content":"\n<!-- demo的样式 -->\n<style>\n.demo{\n   border:1px dashed #ccc;\n   padding:5px;\n}\n.demo:hover{\n   box-shadow: 0 0 11px rgba(33,33,33,.2);\n}\n</style>\n\n## 引用\n\n分享总结一下现有的伪类和简单的 demo\n源地址：[MDN](https://developer.mozilla.org/zh-CN/docs/Web/CSS/Pseudo-classes)\n\n## 伪类\n\n### :active\n\n匹配被用户激活的元素。它让页面能在浏览器监测到激活时给出反馈。当用鼠标交互时，它代表的是用户按下按键和松开按键之间的时间。\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n .demo .active:active{ color:red;}\n  </style>\n  <div class=\"active\">鼠标按下就变为红色</div>\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n .demo .active:active{ color:red;}\n  </style>\n  <div class=\"active\">鼠标按下就变为红色</div>\n</div>\n<!-- more -->\n\n### :only-child\n\n匹配没有任何兄弟元素的元素。\n\n等效的选择器还可以写成:first-child:last-child 或者:nth-child(1):nth-last-child(1),当然,前者的权重会低一点.\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n.demo .onlyChild :only-child {\n  color: red;\n}\n.demo  .onlyChild .haha::after {\n content:'after伪类不影响';\n}\n  </style>\n  <div class=\"onlyChild\">\n  <div>\n  直接的文本也不影响选择\n    <i>没有兄弟元素</i>\n  </div>\n\n  <div>\n    <i>有兄弟</i><br>\n    <b>有兄弟</b><br>\n    <span>有兄弟 <span>没兄弟</span></span>\n  </div>\n</div>\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n  .demo   .onlyChild :only-child {\n      color: red;\n    }\n  .demo   .onlyChild .haha::after {\n      content:'after伪类不影响';\n    }\n  </style>\n  <div class=\"onlyChild\">\n    <div class=\"haha\">\n      直接的文本也不影响选择\n      <i>没有兄弟元素,</i>\n    </div>\n    <div>\n      <i>有兄弟</i><br>\n      <b>有兄弟</b><br>\n      <span>有兄弟 <span>没兄弟</span></span>\n    </div>\n</div>\n</div>\n\n### :any-link\n\n选择器代表一个有链接锚点的元素，而不管它是否被访问过，也就是说，它会匹配每一个有**href**属性的 `<a>`、`<area>` 或 `<link>` 元素。因此，它会匹配到所有的 :link 或 :visited。\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n.demo .anyLink a:any-link {\n  color: red;\n}\n/_ WebKit browsers _/\n.demo .anyLink a:-webkit-any-link {\ncolor: red;\n}\n</style>\n<div class=\"anyLink\">\n<a href=\"https://example.com\">href为地址</a><br>\n<a href=\"#\">href为#</a><br>\n<a href=\"\">href为空字符串</a><br>\n<div href=\"#\">href为#的div</div><br>\n<a>没有 href</a>\n</div>\n\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n.demo .anyLink a:any-link {\n  color: red;\n}\n/_ WebKit browsers _/\n.demo .anyLink a:-webkit-any-link {\ncolor: red;\n}\n</style>\n<div class=\"anyLink\">\n<a href=\"https://example.com\">href为地址</a><br>\n<a href=\"#\">href为#</a><br>\n<a href=\"\">href为空字符串</a><br>\n<div href=\"#\">href为#的div</div><br>\n<a>没有 href</a>\n</div>\n\n</div>\n\n### :only-of-type\n\n代表了任意一个元素，这个元素没有其他相同类型的兄弟元素。(子元素中唯一的标签)\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n .demo  .onlyoftype :only-of-type {\n    color: red;\n  }\n  </style>\n  <div class=\"onlyoftype\">\n    <div>I am `div` #1.</div>\n    <p>I am the only `p` among my siblings.</p>\n    <div>I am `div` #2.</div>\n    <div>I am `div` #3.\n      <i>I am the only `i` child.</i>\n      <em>I am `em` #1.</em>\n      <b>I am `b` #2.</b>\n    </div>\n  </div>\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n  .demo .onlyoftype :only-of-type {\n    color: red;\n  }\n  </style>\n  <div class=\"onlyoftype\">\n    <div>I am `div` #1.</div>\n    <p>I am the only `p` among my siblings.</p>\n    <div>I am `div` #2.</div>\n    <div>I am `div` #3.\n      <i>I am the only `i` child.</i>\n      <em>I am `em` #1.</em>\n      <b>I am `b` #2.</b>\n    </div>\n  </div>\n</div>\n\n### :blank 火狐验证\n\n没有子节点；仅有空的文本节点；仅有空白符的文本节点。\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n.demo .blanks p {\n  min-height: 30px;\n  width: 250px;\n  background-color: lightblue;\n}\n.demo .blanks p:blank { display: none; }\n.demo .blanks p:-moz-only-whitespace { display: none; } /* Mozilla-only pseudo-class that works like :blank will */\n</style>\n\n  <div class=\"blanks\">\n  <p>This paragraph is not empty or blank.</p>\n  <p><!--this is empty and blank --></p>\n  <p>\n    \n    <!-- this is not empty, because it has whitespace. But it is blank.-->\n    \n  </p>\n  <p>This paragraph is not empty or blank.</p>\n</div>\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n.demo .blanks p {\n  min-height: 30px;\n  width: 250px;\n  background-color: lightblue;\n}\n.demo .blanks p:blank { display: none; }\n.demo .blanks p:-moz-only-whitespace { display: none; } /* Mozilla-only pseudo-class that works like :blank will */\n</style>\n\n  <div class=\"blanks\">\n  <p>This paragraph is not empty or blank.</p>\n  <p><!--this is empty and blank --></p>\n  <p>\n    \n    <!-- this is not empty, because it has whitespace. But it is blank.-->\n    \n  </p>\n  <p>This paragraph is not empty or blank.</p>\n</div>\n</div>\n\n### :empty\n\n代表没有子元素的元素。子元素只可以是元素节点或文本（包括空格）。注释或处理指令都不会产生影响。\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n   .demo  .empty .box {\n        background: pink;\n        height: 80px;\n        width: 80px;\n    }\n   .demo  .empty .box:empty {\n      background: lime;\n    }\n</style>\n\n  <div class=\"empty\">\n    <div class=\"box\"><!-- I will be lime --></div>\n    <div class=\"box\">I will be pink</div>\n    <div class=\"box\">\n        <!-- I will be red because of the whitespace around this comment -->\n    </div>\n  </div>\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n   .demo  .empty .box {\n        background: pink;\n        height: 80px;\n        width: 80px;\n    }\n   .demo  .empty .box:empty {\n      background: lime;\n    }\n</style>\n\n  <div class=\"empty\">\n    <div class=\"box\"><!-- I will be lime --></div>\n    <div class=\"box\">I will be pink</div>\n    <div class=\"box\">\n        <!-- I will be red because of the whitespace around this comment -->\n    </div>\n  </div>\n</div>\n\n### :optional\n\n任意没有 required 属性的 `<input>`，`<select>` 或 `<textarea>` 元素使用它。\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n .demo  .optional input:optional {\n  border: 1px dashed red;\n}\n  </style>\n  <div class=\"optional\">\n  <input type=\"text\"/>\n  <input type=\"text\" required placeholder=\"有required的input\"/>\n  </div>\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n .demo  .optional input:optional {\n  border: 1px dashed red;\n}\n  </style>\n  <div class=\"optional\">\n  <input type=\"text\"/>\n  <input type=\"text\" required placeholder=\"有required的input\"/>\n  </div>\n</div>\n\n### :checked\n\n选择器表示任何处于选中状态的 radio(`<input type=\"radio\">`), checkbox (`<input type=\"checkbox\">`) 或(\"select\") 元素中的 option HTML 元素(\"option\")\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n .demo  .checked :checked {\n    background:red;\n    margin-left:20px;\n    margin-right:20px;\n  }\n  </style>\n  <div class=\"checked\">\n  <input type=\"radio\" name=\"my-input\" id=\"yes\">\n  <label for=\"yes\">Yes</label>\n\n  <input type=\"radio\" name=\"my-input\" id=\"no\">\n  <label for=\"no\">No</label>\n  </div>\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n  .demo .checked :checked {\n    background:red;\n    margin-left:20px;\n    margin-right:20px;\n  }\n  </style>\n  <div class=\"checked\">\n  <input type=\"radio\" name=\"my-input\" id=\"yes\">\n  <label for=\"yes\">Yes</label>\n\n  <input type=\"radio\" name=\"my-input\" id=\"no\">\n  <label for=\"no\">No</label>\n  </div>\n</div>\n\n### :hover\n\n光标（鼠标指针）悬停在元素上时提供关联的样式,按照 LVHA 的循顺序声明:link－:visited－:hover－:active。\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n .demo  .hover:hover {\n   color:red;\n  }\n  </style>\n  <div class=\"hover\">\nhover\n  </div>\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n .demo  .hover:hover {\n   color:red;\n  }\n  </style>\n  <div class=\"hover\">\nhover\n  </div>\n</div>\n\n### :out-of-range 和:in-range\n\n- out-of-range:表示一个 `<input>` 元素，其当前值处于属性 min 和 max 限定的范围外\n- in-range：表一个 `<input>` 元素，其当前值处于属性 min 和 max 限定的范围之内\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n  input {\n    border: 1px solid black;\n  }\n .demo  .outofrange input:in-range {\n    background-color: rgba(0, 255, 0, 0.25);\n  }\n .demo  .outofrange input:out-of-range {\n    background-color: rgba(255, 0, 0, 0.25);\n    border: 2px solid red;\n  }\n .demo  .outofrange input:in-range + label::after {\n    content: 'okay.';\n  }\n .demo  .outofrange input:out-of-range + label::after {\n    content: 'out of range!';\n  }\n  </style>\n  <div class=\"outofrange\">\n    <form action=\"\" id=\"form1\">\n      <ul>Values between 1 and 10 are valid.\n        <li>\n          <input id=\"value1\" name=\"value1\" type=\"number\" placeholder=\"1 to 10\" min=\"1\" max=\"10\" value=\"12\">\n          <label for=\"value1\">Your value is </label>\n        </li>\n      </ul>\n    </form>\n  </div>\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n  input {\n    border: 1px solid black;\n  }\n .demo  .outofrange input:in-range {\n    background-color: rgba(0, 255, 0, 0.25);\n  }\n .demo  .outofrange input:out-of-range {\n    background-color: rgba(255, 0, 0, 0.25);\n    border: 2px solid red;\n  }\n  .demo .outofrange input:in-range + label::after {\n    content: 'okay.';\n  }\n  .demo .outofrange input:out-of-range + label::after {\n    content: 'out of range!';\n  }\n  </style>\n  <div class=\"outofrange\">\n    <form action=\"\" id=\"form1\">\n      <ul>Values between 1 and 10 are valid.\n        <li>\n          <input id=\"value1\" name=\"value1\" type=\"number\" placeholder=\"1 to 10\" min=\"1\" max=\"10\" value=\"12\">\n          <label for=\"value1\">Your value is </label>\n        </li>\n      </ul>\n    </form>\n  </div>\n</div>\n\n### :indeterminate\n\n表示状态不确定的表单元素。\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n  .demo .indeterminate input:indeterminate, .indeterminate input:indeterminate + label {\n    background: red;\n  }\n  </style>\n  <div class=\"indeterminate\">\n    <input type=\"checkbox\" id=\"checkbox\">\n    <label for=\"checkbox\">Background should be green</label></br>\n    <input type=\"radio\" id=\"radio\">\n    <label for=\"radio\">Background should be green</label>\n  </div>\n  <script>\n  var inputs = document.querySelector('.indeterminate').getElementsByTagName(\"input\");\n  for(var i = 0; i < inputs.length; i++) {\n    inputs[i].indeterminate = true;\n  }\n  </script>\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n  .demo .indeterminate input:indeterminate, .indeterminate input:indeterminate + label {\n    background: red;\n  }\n  </style>\n  <div class=\"indeterminate\">\n    <input type=\"checkbox\" id=\"checkbox\">\n    <label for=\"checkbox\">Background should be green</label></br>\n    <input type=\"radio\" id=\"radio\">\n    <label for=\"radio\">Background should be green</label>\n  </div>\n  <script>\n  var inputs = document.querySelector('.indeterminate').getElementsByTagName(\"input\");\n  for(var i = 0; i < inputs.length; i++) {\n    inputs[i].indeterminate = true;\n  }\n  </script>\n</div>\n\n### :default\n\n选择设置默认值的元素，该选择器可以在 `<button>`, `<input type=\"checkbox\">`, `<input type=\"radio\">`, 以及 `<option>` 上使用。\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n   .demo  .default1 input:default {\n      box-shadow: 0 0 2px 1px red;\n    }\n   .demo  .default1 input:default + label {\n      color: red;\n    }\n  </style>\n\n  <div class=\"default1\">\n    <input type=\"radio\" name=\"season\" id=\"spring\" >\n    <label for=\"spring\">1</label>\n    <input type=\"radio\" name=\"season\" id=\"summer\" checked>\n    <label for=\"summer\">2</label>\n  </div>\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n   .demo  .default1 input:default {\n      box-shadow: 0 0 2px 1px red;\n    }\n   .demo  .default1 input:default + label {\n      color: red;\n    }\n  </style>\n\n  <div class=\"default1\">\n    <input type=\"radio\" name=\"season\" id=\"spring\" >\n    <label for=\"spring\">1</label>\n    <input type=\"radio\" name=\"season\" id=\"summer\" checked>\n    <label for=\"summer\">2</label>\n  </div>\n</div>\n\n### :placeholder-shown\n\n在 placeholader 显示的时候被选择\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n   .demo  .placeholader input:placeholder-shown {\n      border-color: red;\n    }\n  </style>\n\n  <div class=\"placeholader\">\n    <input placeholder=\"Type something here!\">\n    </br>\n    空placeholder<input placeholder=\"\" >\n    </br>\n    无placeholder<input>\n  </div>\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n   .demo  .placeholader input:placeholder-shown {\n      border-color: red;\n    }\n  </style>\n\n  <div class=\"placeholader\">\n    <input placeholder=\"Type something here!\">\n    </br>\n    空placeholder<input placeholder=\"\" >\n    </br>\n    无placeholder<input>\n  </div>\n</div>\n\n### :invalid\n\n表示任意内容未通过验证的 `<input>` 或其他 `<form>` 元素\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n  .demo   .invalid input:invalid {\n      background-color: red;\n    }\n  </style>\n\n  <div class=\"invalid\">\n    <form>\n      <label for=\"url_input\">Enter a URL:</label>\n      <input type=\"url\" id=\"url_input\" />\n      <br />\n      <br />\n      <label for=\"email_input\">Enter an email address:</label>\n      <input type=\"email\" id=\"email_input\" required/>\n    </form>\n  </div>\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n   .demo  .invalid input:invalid {\n      background-color: red;\n    }\n  </style>\n\n  <div class=\"invalid\">\n    <form>\n      <label for=\"url_input\">Enter a URL:</label>\n      <input type=\"url\" id=\"url_input\" />\n      <br />\n      <br />\n      <label for=\"email_input\">Enter an email address:</label>\n      <input type=\"email\" id=\"email_input\" required/>\n    </form>\n  </div>\n</div>\n\n### :read-only\n\n选择只读的元素\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n   .demo  .readonly input:-moz-read-only {\n      background-color: #ccc;\n    }\n    /* Supported in Blink/WebKit/Edge without a prefix */\n  .demo .readonly input:read-only {\n      background-color: #ccc;\n    }\n .demo  .readonly p:-moz-read-only { background: lightgray; }\n .demo  .readonly p:read-only { background: lightgray; }\n .demo  .readonly .div:read-only { background: lightgray; }\n  </style>\n\n  <div class=\"readonly\">\n    <input type=\"text\" value=\"This is a read-only field.\" readonly>\n    <p>不可以编辑的都可以被选中</p>\n    <p contenteditable=\"true\">可以编辑的p标签就不行</p>\n    <div class=\"div\">div也一样</div>\n  </div>\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n   .demo  .readonly input:-moz-read-only {\n      background-color: #ccc;\n    }\n    /* Supported in Blink/WebKit/Edge without a prefix */\n .demo  .readonly input:read-only {\n      background-color: #ccc;\n    }\n.demo  .readonly p:-moz-read-only { background: lightgray; }\n.demo  .readonly p:read-only { background: lightgray; }\n.demo  .readonly .div:read-only { background: lightgray; }\n  </style>\n\n  <div class=\"readonly\">\n    <input type=\"text\" value=\"This is a read-only field.\" readonly>\n    <p>不可以编辑的都可以被选中</p>\n    <p contenteditable=\"true\">可以编辑的p标签就不行</p>\n    <div class=\"div\">div也一样</div>\n  </div>\n</div>\n\n### :read-write\n\n选择可以被用户编辑的元素\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n  .demo   .readwrite input:read-write {\n      background-color: #ccc;\n    }\n    /* Supported in Blink/WebKit/Edge without a prefix */\n  .demo .readwrite input:read-write {\n      background-color: #ccc;\n    }\n  .demo .readwrite p:read-write { background: lightgray; }\n  .demo .readwrite .div:read-write { background: lightgray; }\n  </style>\n\n  <div class=\"readwrite\">\n    <input type=\"text\" value=\"This is a read-only field.\" >\n    <p contenteditable=\"true\">可以编辑的p标签也行</p>\n    <p>不可以编辑的不可以被选中</p>\n  </div>\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n   .demo  .readwrite input:read-write {\n      background-color: #ccc;\n    }\n    /* Supported in Blink/WebKit/Edge without a prefix */\n.demo   .readwrite input:read-write {\n      background-color: #ccc;\n    }\n  .demo .readwrite p:read-write { background: lightgray; }\n  .demo .readwrite .div:read-write { background: lightgray; }\n  </style>\n\n  <div class=\"readwrite\">\n    <input type=\"text\" value=\"This is a read-only field.\" >\n    <p contenteditable=\"true\">可以编辑的p标签也行</p>\n    <p>不可以编辑的不可以被选中</p>\n  </div>\n</div>\n\n### :disabled\n\n选择禁用的元素(表单元素)。\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n  .demo   .disabled1 input:disabled {\n      background-color: #ccc;\n      cursor:not-allowed;\n    }\n  .demo   .disabled1 div:disabled {\n      background-color: #ccc;\n      cursor:not-allowed;\n    }\n  \n  </style>\n  <div class=\"disabled1\">\n    <input type=\"text\" value=\"我被禁用了，尴尬\" disabled >\n    <div disabled >禁用的div</div>\n  </div>\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n   .demo  .disabled1 input:disabled {\n      background-color: #ccc;\n      cursor:not-allowed;\n    }\n   .demo  .disabled1 div:disabled {\n      background-color: #ccc;\n      cursor:not-allowed;\n    }\n  \n  </style>\n  <div class=\"disabled1\">\n    <input type=\"text\" value=\"我被禁用了，尴尬\" disabled >\n    <div disabled >禁用的div</div>\n  </div>\n</div>\n\n### :enabled\n\n表示任何被启用的（enabled）元素。如果一个元素能够被激活（如选择、点击或接受文本输入），或者能够获取焦点，则该元素是启用的。\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n  .demo   .enabled input:enabled {\n      background-color: red;\n    }\n  .demo   .enabled div:enabled {\n      background-color: red;\n    }\n  \n  </style>\n  <div class=\"enabled\">\n    <input type=\"text\" value=\"我可以输入，尴尬\"  >\n    <div  >禁用的div</div>\n  </div>\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n   .demo  .enabled input:enabled {\n      background-color: red;\n    }\n   .demo  .enabled div:enabled {\n      background-color: red;\n    }\n  \n  </style>\n  <div class=\"enabled\">\n    <input type=\"text\" value=\"我可以输入，尴尬\"  >\n    <div  >禁用的div</div>\n  </div>\n</div>\n\n### :lang()\n\n基于元素语言来匹配页面元素。\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n   .demo .lang div:lang(en) > q { background:red; }\n  .demo  .lang div:lang(fr) > q {background:green;}\n  </style>\n  <div class=\"lang\">\n    <div lang=\"en\"><q>英语语言</q></div>\n    <div lang=\"fr\"><q>法语语言</div>\n  </div>\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n .demo   .lang div:lang(en) > q { background:red; }\n .demo   .lang div:lang(fr) > q {background:green;}\n  </style>\n  <div class=\"lang\">\n    <div lang=\"en\"><q>英语语言</q></div>\n    <div lang=\"fr\"><q>法语语言</div>\n  </div>\n</div>\n\n### :not()\n\n用来匹配不符合一组选择器的元素。由于它的作用是防止特定的元素被选中，它也被称为反选伪类（negation pseudo-class）。\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n  .demo  .not .fancy {\n      text-shadow: 2px 2px 3px gold;\n    }\n    /* 类名不是 `.fancy` 的 <p> 元素 */\n   .demo  .not p:not(.fancy) {\n      color: green;\n    }\n    /* 非 <p> 元素 */ \n  .demo   .not  :not(p) {\n      text-decoration: underline;\n    }\n    /* 既不是 <div> 也不是 <span> 的元素 */\n  .demo   .not  :not(div):not(span) {\n      font-weight: bold;\n    }\n    /* 类名不是 `.crazy` 或 `.fancy` 的元素 */\n    /* 注意，此语法尚未获广泛支持。 */\n  .demo   .not  :not(.crazy, .fancy) {\n      color:red;\n    }\n  </style>\n  <div class=\"not\">\n    <p>我是一个段落。</p>\n    <p class=\"fancy\">我好看极了！</p>\n    <div>我「不是」一个段落。</div>\n  </div>\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n .demo   .not .fancy {\n      text-shadow: 2px 2px 3px gold;\n    }\n    /* 类名不是 `.fancy` 的 <p> 元素 */\n .demo    .not p:not(.fancy) {\n      color: green;\n    }\n    /* 非 <p> 元素 */ \n  .demo   .not  :not(p) {\n      text-decoration: underline;\n    }\n    /* 既不是 <div> 也不是 <span> 的元素 */\n  .demo   .not  :not(div):not(span) {\n      font-weight: bold;\n    }\n    /* 类名不是 `.crazy` 或 `.fancy` 的元素 */\n    /* 注意，此语法尚未获广泛支持。 */\n   .demo  .not  :not(.crazy, .fancy) {\n      color:red;\n    }\n  </style>\n  <div class=\"not\">\n    <p>我是一个段落。</p>\n    <p class=\"fancy\">我好看极了！</p>\n    <div>我「不是」一个段落。</div>\n  </div>\n</div>\n\n### :focus\n\n:focus 表示获得焦点的元素（如表单输入）。当用户点击或触摸元素或通过键盘的 “tab” 键选择它时会被触发。\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n.demo   .focus input:focus {\n    background: red;\n  }\n  </style>\n  <div class=\"focus\">\n   <input />\n  </div>\n</div>\n\n````\n</details>\n<div class=\"demo\">\n  <style>\n .demo  .focus input:focus {\n    background: red;\n  }\n  </style>\n  <div class=\"focus\">\n   <input />\n  </div>\n</div>\n\n### :focus-within\n\n表示一个元素获得焦点，或，该元素的后代元素获得焦点。换句话说，元素自身或者它的某个后代匹配 :focus 伪类。（shadow DOM 树中的后代也包括在内）\n\n子元素获得焦点，父元素改变样式\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n  .focusWithin:focus-within {\n    background: red;\n  }\n  </style>\n  <div class=\"focusWithin\">\n   <input />\n  </div>\n</div>\n````\n\n</details>\n<div class=\"demo\">\n  <style>\n .demo  .focusWithin:focus-within {\n    background: red;\n  }\n  </style>\n  <div class=\"focusWithin\">\n   <input />\n  </div>\n</div>\n\n### :fullscreen\n\n应用于当前处于全屏显示模式的元素。\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n .demo  .top {\n  margin: 15px;\n}\n.demo .main {\n  width: 100%;\n  display: flex;\n}\n.demo .right:fullscreen{\n  background:green;\n}\n.demo .right {\n  width: 100%;\n  height: 300px;\n  background: #dddddd;\n}\n.demo .right:fullscreen {\n  background: green;\n  color:red;\n  font-size:20px;\n}\n</style>\n\n<div class=\"top\">\n  <button onclick=\"rightScreen()\">全屏</button>\n</div>\n<div class=\"main\">\n  <div class=\"right\">内容</div>\n</div>\n<script>\nclass fullScreen {\n  /**\n   * @description: 全屏初始化\n   * @param {Function} fn 用户浏览器不支持全屏的回调\n   */\n  constructor(fn) {\n    this.prefixName = \"\"; // 浏览器前缀\n    this.isFullscreenData = true; // 浏览器是否支持全屏\n    this.isFullscreen(fn);\n  }\n  /**\n   * @description: 将传进来的元素全屏\n   * @param {String} domName 要全屏的dom名称\n   */\n  Fullscreen(domName) {\n    const element = document.querySelector(domName);\n    const methodName =\n      this.prefixName === \"\"\n        ? \"requestFullscreen\"\n        : `${this.prefixName}RequestFullScreen`;\n    element[methodName]();\n  }\n  // 退出全屏\n  exitFullscreen() {\n    const methodName =\n      this.prefixName === \"\"\n        ? \"exitFullscreen\"\n        : `${this.prefixName}ExitFullscreen`;\n    document[methodName]();\n  }\n  /**\n   * @description: 监听进入/离开全屏\n   * @param {Function} enter 进入全屏的回调\n   *  @param {Function} quit 离开全屏的回调\n   */\n  screenChange(enter, quit) {\n    if (!this.isFullscreenData) return;\n    const methodName = `on${this.prefixName}fullscreenchange`;\n    document[methodName] = e => {\n      if (this.isElementFullScreen()) {\n        enter && enter(e); // 进入全屏回调\n      } else {\n        quit && quit(e); // 离开全屏的回调\n      }\n    };\n  }\n  /**\n   * @description: 浏览器无法进入全屏时触发,可能是技术原因，也可能是用户拒绝：比如全屏请求不是在事件处理函数中调用,会在这里拦截到错误\n   * @param {Function} enterErrorFn 回调\n   */\n  screenError(enterErrorFn) {\n    const methodName = `on${this.prefixName}fullscreenerror`;\n    document[methodName] = e => {\n      enterErrorFn && enterErrorFn(e);\n    };\n  }\n  /**\n   * @description: 是否支持全屏+判断浏览器前缀\n   * @param {Function} fn 不支持全屏的回调函数 这里设了一个默认值\n   */\n  isFullscreen(fn) {\n    let fullscreenEnabled;\n    // 判断浏览器前缀\n    if (document.fullscreenEnabled) {\n      fullscreenEnabled = document.fullscreenEnabled;\n    } else if (document.webkitFullscreenEnabled) {\n      fullscreenEnabled = document.webkitFullscreenEnabled;\n      this.prefixName = \"webkit\";\n    } else if (document.mozFullScreenEnabled) {\n      fullscreenEnabled = document.mozFullScreenEnabled;\n      this.prefixName = \"moz\";\n    } else if (document.msFullscreenEnabled) {\n      fullscreenEnabled = document.msFullscreenEnabled;\n      this.prefixName = \"ms\";\n    }\n    if (!fullscreenEnabled) {\n      this.isFullscreenData = false;\n      fn && fn(); // 执行不支持全屏的回调\n    }\n  }\n  /**\n   * @description: 检测有没有元素处于全屏状态\n   * @return 布尔值\n   */\n  isElementFullScreen() {\n    const fullscreenElement =\n      document.fullscreenElement ||\n      document.msFullscreenElement ||\n      document.mozFullScreenElement ||\n      document.webkitFullscreenElement;\n    if (fullscreenElement === null) {\n      return false; // 当前没有元素在全屏状态\n    } else {\n      return true; // 有元素在全屏状态\n    }\n  }\n}\nlet full = new fullScreen(() => {\n  console.log(\"不支持\");\n});\nfull.screenError(e => {\n  console.log(\"进去全屏失败:\", e);\n});\n// 全屏请求必须在事件处理函数中调用，否则将会被拒绝。\n// full.Fullscreen(\".left\"); // 触发进去全屏失败回调\nconst obj = {\n  enter: e => {\n    // 如果退出全屏 退出的还是全屏状态，将会触发进入全屏的回调，这种情况比较少 注意一下\n    console.log(\"进入全屏\", e);\n  },\n  quit: e => {\n    console.log(\"退出全屏\", e);\n    // 通常不会出现嵌套的情况\n  }\n};\nfull.screenChange(obj.enter, obj.quit);\nfunction leftScreen() {\n  full.Fullscreen(\".left\");\n}\nfunction rightScreen() {\n  full.Fullscreen(\".right\");\n}\nfunction redScreen() {\n  full.Fullscreen(\".left-son\");\n}\n// 退出全屏 退出到上次的状态\nfunction exitScreen() {\n  full.exitFullscreen();\n}\n</script>\n</div>\n```\n</details>\n<div class=\"demo\">\n<style>\n.demo .top {\n  margin: 15px;\n}\n.demo .main {\n  width: 100%;\n  display: flex;\n}\n.demo .right:fullscreen{\n  background:green;\n}\n.demo .right {\n  width: 100%;\n  height: 300px;\n  background: #dddddd;\n}\n.demo .right:fullscreen {\n  background: green;\n  color:red;\n  font-size:20px;\n}\n</style>\n\n<div class=\"top\">\n  <button onclick=\"rightScreen()\">全屏</button>\n</div>\n<div class=\"main\">\n  <div class=\"right\">内容</div>\n</div>\n<script>\nclass fullScreen {\n  /**\n   * @description: 全屏初始化\n   * @param {Function} fn 用户浏览器不支持全屏的回调\n   */\n  constructor(fn) {\n    this.prefixName = \"\"; // 浏览器前缀\n    this.isFullscreenData = true; // 浏览器是否支持全屏\n    this.isFullscreen(fn);\n  }\n  /**\n   * @description: 将传进来的元素全屏\n   * @param {String} domName 要全屏的dom名称\n   */\n  Fullscreen(domName) {\n    const element = document.querySelector(domName);\n    const methodName =\n      this.prefixName === \"\"\n        ? \"requestFullscreen\"\n        : `${this.prefixName}RequestFullScreen`;\n    element[methodName]();\n  }\n  // 退出全屏\n  exitFullscreen() {\n    const methodName =\n      this.prefixName === \"\"\n        ? \"exitFullscreen\"\n        : `${this.prefixName}ExitFullscreen`;\n    document[methodName]();\n  }\n  /**\n   * @description: 监听进入/离开全屏\n   * @param {Function} enter 进入全屏的回调\n   *  @param {Function} quit 离开全屏的回调\n   */\n  screenChange(enter, quit) {\n    if (!this.isFullscreenData) return;\n    const methodName = `on${this.prefixName}fullscreenchange`;\n    document[methodName] = e => {\n      if (this.isElementFullScreen()) {\n        enter && enter(e); // 进入全屏回调\n      } else {\n        quit && quit(e); // 离开全屏的回调\n      }\n    };\n  }\n  /**\n   * @description: 浏览器无法进入全屏时触发,可能是技术原因，也可能是用户拒绝：比如全屏请求不是在事件处理函数中调用,会在这里拦截到错误\n   * @param {Function} enterErrorFn 回调\n   */\n  screenError(enterErrorFn) {\n    const methodName = `on${this.prefixName}fullscreenerror`;\n    document[methodName] = e => {\n      enterErrorFn && enterErrorFn(e);\n    };\n  }\n  /**\n   * @description: 是否支持全屏+判断浏览器前缀\n   * @param {Function} fn 不支持全屏的回调函数 这里设了一个默认值\n   */\n  isFullscreen(fn) {\n    let fullscreenEnabled;\n    // 判断浏览器前缀\n    if (document.fullscreenEnabled) {\n      fullscreenEnabled = document.fullscreenEnabled;\n    } else if (document.webkitFullscreenEnabled) {\n      fullscreenEnabled = document.webkitFullscreenEnabled;\n      this.prefixName = \"webkit\";\n    } else if (document.mozFullScreenEnabled) {\n      fullscreenEnabled = document.mozFullScreenEnabled;\n      this.prefixName = \"moz\";\n    } else if (document.msFullscreenEnabled) {\n      fullscreenEnabled = document.msFullscreenEnabled;\n      this.prefixName = \"ms\";\n    }\n    if (!fullscreenEnabled) {\n      this.isFullscreenData = false;\n      fn && fn(); // 执行不支持全屏的回调\n    }\n  }\n  /**\n   * @description: 检测有没有元素处于全屏状态\n   * @return 布尔值\n   */\n  isElementFullScreen() {\n    const fullscreenElement =\n      document.fullscreenElement ||\n      document.msFullscreenElement ||\n      document.mozFullScreenElement ||\n      document.webkitFullscreenElement;\n    if (fullscreenElement === null) {\n      return false; // 当前没有元素在全屏状态\n    } else {\n      return true; // 有元素在全屏状态\n    }\n  }\n}\nlet full = new fullScreen(() => {\n  console.log(\"不支持\");\n});\nfull.screenError(e => {\n  console.log(\"进去全屏失败:\", e);\n});\n// 全屏请求必须在事件处理函数中调用，否则将会被拒绝。\n// full.Fullscreen(\".left\"); // 触发进去全屏失败回调\nconst obj = {\n  enter: e => {\n    // 如果退出全屏 退出的还是全屏状态，将会触发进入全屏的回调，这种情况比较少 注意一下\n    console.log(\"进入全屏\", e);\n  },\n  quit: e => {\n    console.log(\"退出全屏\", e);\n    // 通常不会出现嵌套的情况\n  }\n};\nfull.screenChange(obj.enter, obj.quit);\nfunction leftScreen() {\n  full.Fullscreen(\".left\");\n}\nfunction rightScreen() {\n  full.Fullscreen(\".right\");\n}\nfunction redScreen() {\n  full.Fullscreen(\".left-son\");\n}\n// 退出全屏 退出到上次的状态\nfunction exitScreen() {\n  full.exitFullscreen();\n}\n</script>\n</div>\n\n## 结语\n\n以上就是本次的全部分享内容，合理的利用伪类可以比较巧妙的实现一些特殊效果。但是部分伪类还是涉及到浏览器的兼容问题，或者还在草案之中，具体的兼容性可以为[Can I Use](https://caniuse.com/)查看\n","source":"_posts/pseudo-classes.md","raw":"---\ntitle: CSS 伪类合集分享\nabbrlink: a54a0322\ntags:\n  - CSS\ntranslate_title: css-pseudoclass-collection-sharing\ndate: 2020-06-28 10:32:54\n---\n\n<!-- demo的样式 -->\n<style>\n.demo{\n   border:1px dashed #ccc;\n   padding:5px;\n}\n.demo:hover{\n   box-shadow: 0 0 11px rgba(33,33,33,.2);\n}\n</style>\n\n## 引用\n\n分享总结一下现有的伪类和简单的 demo\n源地址：[MDN](https://developer.mozilla.org/zh-CN/docs/Web/CSS/Pseudo-classes)\n\n## 伪类\n\n### :active\n\n匹配被用户激活的元素。它让页面能在浏览器监测到激活时给出反馈。当用鼠标交互时，它代表的是用户按下按键和松开按键之间的时间。\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n .demo .active:active{ color:red;}\n  </style>\n  <div class=\"active\">鼠标按下就变为红色</div>\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n .demo .active:active{ color:red;}\n  </style>\n  <div class=\"active\">鼠标按下就变为红色</div>\n</div>\n<!-- more -->\n\n### :only-child\n\n匹配没有任何兄弟元素的元素。\n\n等效的选择器还可以写成:first-child:last-child 或者:nth-child(1):nth-last-child(1),当然,前者的权重会低一点.\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n.demo .onlyChild :only-child {\n  color: red;\n}\n.demo  .onlyChild .haha::after {\n content:'after伪类不影响';\n}\n  </style>\n  <div class=\"onlyChild\">\n  <div>\n  直接的文本也不影响选择\n    <i>没有兄弟元素</i>\n  </div>\n\n  <div>\n    <i>有兄弟</i><br>\n    <b>有兄弟</b><br>\n    <span>有兄弟 <span>没兄弟</span></span>\n  </div>\n</div>\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n  .demo   .onlyChild :only-child {\n      color: red;\n    }\n  .demo   .onlyChild .haha::after {\n      content:'after伪类不影响';\n    }\n  </style>\n  <div class=\"onlyChild\">\n    <div class=\"haha\">\n      直接的文本也不影响选择\n      <i>没有兄弟元素,</i>\n    </div>\n    <div>\n      <i>有兄弟</i><br>\n      <b>有兄弟</b><br>\n      <span>有兄弟 <span>没兄弟</span></span>\n    </div>\n</div>\n</div>\n\n### :any-link\n\n选择器代表一个有链接锚点的元素，而不管它是否被访问过，也就是说，它会匹配每一个有**href**属性的 `<a>`、`<area>` 或 `<link>` 元素。因此，它会匹配到所有的 :link 或 :visited。\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n.demo .anyLink a:any-link {\n  color: red;\n}\n/_ WebKit browsers _/\n.demo .anyLink a:-webkit-any-link {\ncolor: red;\n}\n</style>\n<div class=\"anyLink\">\n<a href=\"https://example.com\">href为地址</a><br>\n<a href=\"#\">href为#</a><br>\n<a href=\"\">href为空字符串</a><br>\n<div href=\"#\">href为#的div</div><br>\n<a>没有 href</a>\n</div>\n\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n.demo .anyLink a:any-link {\n  color: red;\n}\n/_ WebKit browsers _/\n.demo .anyLink a:-webkit-any-link {\ncolor: red;\n}\n</style>\n<div class=\"anyLink\">\n<a href=\"https://example.com\">href为地址</a><br>\n<a href=\"#\">href为#</a><br>\n<a href=\"\">href为空字符串</a><br>\n<div href=\"#\">href为#的div</div><br>\n<a>没有 href</a>\n</div>\n\n</div>\n\n### :only-of-type\n\n代表了任意一个元素，这个元素没有其他相同类型的兄弟元素。(子元素中唯一的标签)\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n .demo  .onlyoftype :only-of-type {\n    color: red;\n  }\n  </style>\n  <div class=\"onlyoftype\">\n    <div>I am `div` #1.</div>\n    <p>I am the only `p` among my siblings.</p>\n    <div>I am `div` #2.</div>\n    <div>I am `div` #3.\n      <i>I am the only `i` child.</i>\n      <em>I am `em` #1.</em>\n      <b>I am `b` #2.</b>\n    </div>\n  </div>\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n  .demo .onlyoftype :only-of-type {\n    color: red;\n  }\n  </style>\n  <div class=\"onlyoftype\">\n    <div>I am `div` #1.</div>\n    <p>I am the only `p` among my siblings.</p>\n    <div>I am `div` #2.</div>\n    <div>I am `div` #3.\n      <i>I am the only `i` child.</i>\n      <em>I am `em` #1.</em>\n      <b>I am `b` #2.</b>\n    </div>\n  </div>\n</div>\n\n### :blank 火狐验证\n\n没有子节点；仅有空的文本节点；仅有空白符的文本节点。\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n.demo .blanks p {\n  min-height: 30px;\n  width: 250px;\n  background-color: lightblue;\n}\n.demo .blanks p:blank { display: none; }\n.demo .blanks p:-moz-only-whitespace { display: none; } /* Mozilla-only pseudo-class that works like :blank will */\n</style>\n\n  <div class=\"blanks\">\n  <p>This paragraph is not empty or blank.</p>\n  <p><!--this is empty and blank --></p>\n  <p>\n    \n    <!-- this is not empty, because it has whitespace. But it is blank.-->\n    \n  </p>\n  <p>This paragraph is not empty or blank.</p>\n</div>\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n.demo .blanks p {\n  min-height: 30px;\n  width: 250px;\n  background-color: lightblue;\n}\n.demo .blanks p:blank { display: none; }\n.demo .blanks p:-moz-only-whitespace { display: none; } /* Mozilla-only pseudo-class that works like :blank will */\n</style>\n\n  <div class=\"blanks\">\n  <p>This paragraph is not empty or blank.</p>\n  <p><!--this is empty and blank --></p>\n  <p>\n    \n    <!-- this is not empty, because it has whitespace. But it is blank.-->\n    \n  </p>\n  <p>This paragraph is not empty or blank.</p>\n</div>\n</div>\n\n### :empty\n\n代表没有子元素的元素。子元素只可以是元素节点或文本（包括空格）。注释或处理指令都不会产生影响。\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n   .demo  .empty .box {\n        background: pink;\n        height: 80px;\n        width: 80px;\n    }\n   .demo  .empty .box:empty {\n      background: lime;\n    }\n</style>\n\n  <div class=\"empty\">\n    <div class=\"box\"><!-- I will be lime --></div>\n    <div class=\"box\">I will be pink</div>\n    <div class=\"box\">\n        <!-- I will be red because of the whitespace around this comment -->\n    </div>\n  </div>\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n   .demo  .empty .box {\n        background: pink;\n        height: 80px;\n        width: 80px;\n    }\n   .demo  .empty .box:empty {\n      background: lime;\n    }\n</style>\n\n  <div class=\"empty\">\n    <div class=\"box\"><!-- I will be lime --></div>\n    <div class=\"box\">I will be pink</div>\n    <div class=\"box\">\n        <!-- I will be red because of the whitespace around this comment -->\n    </div>\n  </div>\n</div>\n\n### :optional\n\n任意没有 required 属性的 `<input>`，`<select>` 或 `<textarea>` 元素使用它。\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n .demo  .optional input:optional {\n  border: 1px dashed red;\n}\n  </style>\n  <div class=\"optional\">\n  <input type=\"text\"/>\n  <input type=\"text\" required placeholder=\"有required的input\"/>\n  </div>\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n .demo  .optional input:optional {\n  border: 1px dashed red;\n}\n  </style>\n  <div class=\"optional\">\n  <input type=\"text\"/>\n  <input type=\"text\" required placeholder=\"有required的input\"/>\n  </div>\n</div>\n\n### :checked\n\n选择器表示任何处于选中状态的 radio(`<input type=\"radio\">`), checkbox (`<input type=\"checkbox\">`) 或(\"select\") 元素中的 option HTML 元素(\"option\")\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n .demo  .checked :checked {\n    background:red;\n    margin-left:20px;\n    margin-right:20px;\n  }\n  </style>\n  <div class=\"checked\">\n  <input type=\"radio\" name=\"my-input\" id=\"yes\">\n  <label for=\"yes\">Yes</label>\n\n  <input type=\"radio\" name=\"my-input\" id=\"no\">\n  <label for=\"no\">No</label>\n  </div>\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n  .demo .checked :checked {\n    background:red;\n    margin-left:20px;\n    margin-right:20px;\n  }\n  </style>\n  <div class=\"checked\">\n  <input type=\"radio\" name=\"my-input\" id=\"yes\">\n  <label for=\"yes\">Yes</label>\n\n  <input type=\"radio\" name=\"my-input\" id=\"no\">\n  <label for=\"no\">No</label>\n  </div>\n</div>\n\n### :hover\n\n光标（鼠标指针）悬停在元素上时提供关联的样式,按照 LVHA 的循顺序声明:link－:visited－:hover－:active。\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n .demo  .hover:hover {\n   color:red;\n  }\n  </style>\n  <div class=\"hover\">\nhover\n  </div>\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n .demo  .hover:hover {\n   color:red;\n  }\n  </style>\n  <div class=\"hover\">\nhover\n  </div>\n</div>\n\n### :out-of-range 和:in-range\n\n- out-of-range:表示一个 `<input>` 元素，其当前值处于属性 min 和 max 限定的范围外\n- in-range：表一个 `<input>` 元素，其当前值处于属性 min 和 max 限定的范围之内\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n  input {\n    border: 1px solid black;\n  }\n .demo  .outofrange input:in-range {\n    background-color: rgba(0, 255, 0, 0.25);\n  }\n .demo  .outofrange input:out-of-range {\n    background-color: rgba(255, 0, 0, 0.25);\n    border: 2px solid red;\n  }\n .demo  .outofrange input:in-range + label::after {\n    content: 'okay.';\n  }\n .demo  .outofrange input:out-of-range + label::after {\n    content: 'out of range!';\n  }\n  </style>\n  <div class=\"outofrange\">\n    <form action=\"\" id=\"form1\">\n      <ul>Values between 1 and 10 are valid.\n        <li>\n          <input id=\"value1\" name=\"value1\" type=\"number\" placeholder=\"1 to 10\" min=\"1\" max=\"10\" value=\"12\">\n          <label for=\"value1\">Your value is </label>\n        </li>\n      </ul>\n    </form>\n  </div>\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n  input {\n    border: 1px solid black;\n  }\n .demo  .outofrange input:in-range {\n    background-color: rgba(0, 255, 0, 0.25);\n  }\n .demo  .outofrange input:out-of-range {\n    background-color: rgba(255, 0, 0, 0.25);\n    border: 2px solid red;\n  }\n  .demo .outofrange input:in-range + label::after {\n    content: 'okay.';\n  }\n  .demo .outofrange input:out-of-range + label::after {\n    content: 'out of range!';\n  }\n  </style>\n  <div class=\"outofrange\">\n    <form action=\"\" id=\"form1\">\n      <ul>Values between 1 and 10 are valid.\n        <li>\n          <input id=\"value1\" name=\"value1\" type=\"number\" placeholder=\"1 to 10\" min=\"1\" max=\"10\" value=\"12\">\n          <label for=\"value1\">Your value is </label>\n        </li>\n      </ul>\n    </form>\n  </div>\n</div>\n\n### :indeterminate\n\n表示状态不确定的表单元素。\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n  .demo .indeterminate input:indeterminate, .indeterminate input:indeterminate + label {\n    background: red;\n  }\n  </style>\n  <div class=\"indeterminate\">\n    <input type=\"checkbox\" id=\"checkbox\">\n    <label for=\"checkbox\">Background should be green</label></br>\n    <input type=\"radio\" id=\"radio\">\n    <label for=\"radio\">Background should be green</label>\n  </div>\n  <script>\n  var inputs = document.querySelector('.indeterminate').getElementsByTagName(\"input\");\n  for(var i = 0; i < inputs.length; i++) {\n    inputs[i].indeterminate = true;\n  }\n  </script>\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n  .demo .indeterminate input:indeterminate, .indeterminate input:indeterminate + label {\n    background: red;\n  }\n  </style>\n  <div class=\"indeterminate\">\n    <input type=\"checkbox\" id=\"checkbox\">\n    <label for=\"checkbox\">Background should be green</label></br>\n    <input type=\"radio\" id=\"radio\">\n    <label for=\"radio\">Background should be green</label>\n  </div>\n  <script>\n  var inputs = document.querySelector('.indeterminate').getElementsByTagName(\"input\");\n  for(var i = 0; i < inputs.length; i++) {\n    inputs[i].indeterminate = true;\n  }\n  </script>\n</div>\n\n### :default\n\n选择设置默认值的元素，该选择器可以在 `<button>`, `<input type=\"checkbox\">`, `<input type=\"radio\">`, 以及 `<option>` 上使用。\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n   .demo  .default1 input:default {\n      box-shadow: 0 0 2px 1px red;\n    }\n   .demo  .default1 input:default + label {\n      color: red;\n    }\n  </style>\n\n  <div class=\"default1\">\n    <input type=\"radio\" name=\"season\" id=\"spring\" >\n    <label for=\"spring\">1</label>\n    <input type=\"radio\" name=\"season\" id=\"summer\" checked>\n    <label for=\"summer\">2</label>\n  </div>\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n   .demo  .default1 input:default {\n      box-shadow: 0 0 2px 1px red;\n    }\n   .demo  .default1 input:default + label {\n      color: red;\n    }\n  </style>\n\n  <div class=\"default1\">\n    <input type=\"radio\" name=\"season\" id=\"spring\" >\n    <label for=\"spring\">1</label>\n    <input type=\"radio\" name=\"season\" id=\"summer\" checked>\n    <label for=\"summer\">2</label>\n  </div>\n</div>\n\n### :placeholder-shown\n\n在 placeholader 显示的时候被选择\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n   .demo  .placeholader input:placeholder-shown {\n      border-color: red;\n    }\n  </style>\n\n  <div class=\"placeholader\">\n    <input placeholder=\"Type something here!\">\n    </br>\n    空placeholder<input placeholder=\"\" >\n    </br>\n    无placeholder<input>\n  </div>\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n   .demo  .placeholader input:placeholder-shown {\n      border-color: red;\n    }\n  </style>\n\n  <div class=\"placeholader\">\n    <input placeholder=\"Type something here!\">\n    </br>\n    空placeholder<input placeholder=\"\" >\n    </br>\n    无placeholder<input>\n  </div>\n</div>\n\n### :invalid\n\n表示任意内容未通过验证的 `<input>` 或其他 `<form>` 元素\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n  .demo   .invalid input:invalid {\n      background-color: red;\n    }\n  </style>\n\n  <div class=\"invalid\">\n    <form>\n      <label for=\"url_input\">Enter a URL:</label>\n      <input type=\"url\" id=\"url_input\" />\n      <br />\n      <br />\n      <label for=\"email_input\">Enter an email address:</label>\n      <input type=\"email\" id=\"email_input\" required/>\n    </form>\n  </div>\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n   .demo  .invalid input:invalid {\n      background-color: red;\n    }\n  </style>\n\n  <div class=\"invalid\">\n    <form>\n      <label for=\"url_input\">Enter a URL:</label>\n      <input type=\"url\" id=\"url_input\" />\n      <br />\n      <br />\n      <label for=\"email_input\">Enter an email address:</label>\n      <input type=\"email\" id=\"email_input\" required/>\n    </form>\n  </div>\n</div>\n\n### :read-only\n\n选择只读的元素\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n   .demo  .readonly input:-moz-read-only {\n      background-color: #ccc;\n    }\n    /* Supported in Blink/WebKit/Edge without a prefix */\n  .demo .readonly input:read-only {\n      background-color: #ccc;\n    }\n .demo  .readonly p:-moz-read-only { background: lightgray; }\n .demo  .readonly p:read-only { background: lightgray; }\n .demo  .readonly .div:read-only { background: lightgray; }\n  </style>\n\n  <div class=\"readonly\">\n    <input type=\"text\" value=\"This is a read-only field.\" readonly>\n    <p>不可以编辑的都可以被选中</p>\n    <p contenteditable=\"true\">可以编辑的p标签就不行</p>\n    <div class=\"div\">div也一样</div>\n  </div>\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n   .demo  .readonly input:-moz-read-only {\n      background-color: #ccc;\n    }\n    /* Supported in Blink/WebKit/Edge without a prefix */\n .demo  .readonly input:read-only {\n      background-color: #ccc;\n    }\n.demo  .readonly p:-moz-read-only { background: lightgray; }\n.demo  .readonly p:read-only { background: lightgray; }\n.demo  .readonly .div:read-only { background: lightgray; }\n  </style>\n\n  <div class=\"readonly\">\n    <input type=\"text\" value=\"This is a read-only field.\" readonly>\n    <p>不可以编辑的都可以被选中</p>\n    <p contenteditable=\"true\">可以编辑的p标签就不行</p>\n    <div class=\"div\">div也一样</div>\n  </div>\n</div>\n\n### :read-write\n\n选择可以被用户编辑的元素\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n  .demo   .readwrite input:read-write {\n      background-color: #ccc;\n    }\n    /* Supported in Blink/WebKit/Edge without a prefix */\n  .demo .readwrite input:read-write {\n      background-color: #ccc;\n    }\n  .demo .readwrite p:read-write { background: lightgray; }\n  .demo .readwrite .div:read-write { background: lightgray; }\n  </style>\n\n  <div class=\"readwrite\">\n    <input type=\"text\" value=\"This is a read-only field.\" >\n    <p contenteditable=\"true\">可以编辑的p标签也行</p>\n    <p>不可以编辑的不可以被选中</p>\n  </div>\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n   .demo  .readwrite input:read-write {\n      background-color: #ccc;\n    }\n    /* Supported in Blink/WebKit/Edge without a prefix */\n.demo   .readwrite input:read-write {\n      background-color: #ccc;\n    }\n  .demo .readwrite p:read-write { background: lightgray; }\n  .demo .readwrite .div:read-write { background: lightgray; }\n  </style>\n\n  <div class=\"readwrite\">\n    <input type=\"text\" value=\"This is a read-only field.\" >\n    <p contenteditable=\"true\">可以编辑的p标签也行</p>\n    <p>不可以编辑的不可以被选中</p>\n  </div>\n</div>\n\n### :disabled\n\n选择禁用的元素(表单元素)。\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n  .demo   .disabled1 input:disabled {\n      background-color: #ccc;\n      cursor:not-allowed;\n    }\n  .demo   .disabled1 div:disabled {\n      background-color: #ccc;\n      cursor:not-allowed;\n    }\n  \n  </style>\n  <div class=\"disabled1\">\n    <input type=\"text\" value=\"我被禁用了，尴尬\" disabled >\n    <div disabled >禁用的div</div>\n  </div>\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n   .demo  .disabled1 input:disabled {\n      background-color: #ccc;\n      cursor:not-allowed;\n    }\n   .demo  .disabled1 div:disabled {\n      background-color: #ccc;\n      cursor:not-allowed;\n    }\n  \n  </style>\n  <div class=\"disabled1\">\n    <input type=\"text\" value=\"我被禁用了，尴尬\" disabled >\n    <div disabled >禁用的div</div>\n  </div>\n</div>\n\n### :enabled\n\n表示任何被启用的（enabled）元素。如果一个元素能够被激活（如选择、点击或接受文本输入），或者能够获取焦点，则该元素是启用的。\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n  .demo   .enabled input:enabled {\n      background-color: red;\n    }\n  .demo   .enabled div:enabled {\n      background-color: red;\n    }\n  \n  </style>\n  <div class=\"enabled\">\n    <input type=\"text\" value=\"我可以输入，尴尬\"  >\n    <div  >禁用的div</div>\n  </div>\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n   .demo  .enabled input:enabled {\n      background-color: red;\n    }\n   .demo  .enabled div:enabled {\n      background-color: red;\n    }\n  \n  </style>\n  <div class=\"enabled\">\n    <input type=\"text\" value=\"我可以输入，尴尬\"  >\n    <div  >禁用的div</div>\n  </div>\n</div>\n\n### :lang()\n\n基于元素语言来匹配页面元素。\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n   .demo .lang div:lang(en) > q { background:red; }\n  .demo  .lang div:lang(fr) > q {background:green;}\n  </style>\n  <div class=\"lang\">\n    <div lang=\"en\"><q>英语语言</q></div>\n    <div lang=\"fr\"><q>法语语言</div>\n  </div>\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n .demo   .lang div:lang(en) > q { background:red; }\n .demo   .lang div:lang(fr) > q {background:green;}\n  </style>\n  <div class=\"lang\">\n    <div lang=\"en\"><q>英语语言</q></div>\n    <div lang=\"fr\"><q>法语语言</div>\n  </div>\n</div>\n\n### :not()\n\n用来匹配不符合一组选择器的元素。由于它的作用是防止特定的元素被选中，它也被称为反选伪类（negation pseudo-class）。\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n  .demo  .not .fancy {\n      text-shadow: 2px 2px 3px gold;\n    }\n    /* 类名不是 `.fancy` 的 <p> 元素 */\n   .demo  .not p:not(.fancy) {\n      color: green;\n    }\n    /* 非 <p> 元素 */ \n  .demo   .not  :not(p) {\n      text-decoration: underline;\n    }\n    /* 既不是 <div> 也不是 <span> 的元素 */\n  .demo   .not  :not(div):not(span) {\n      font-weight: bold;\n    }\n    /* 类名不是 `.crazy` 或 `.fancy` 的元素 */\n    /* 注意，此语法尚未获广泛支持。 */\n  .demo   .not  :not(.crazy, .fancy) {\n      color:red;\n    }\n  </style>\n  <div class=\"not\">\n    <p>我是一个段落。</p>\n    <p class=\"fancy\">我好看极了！</p>\n    <div>我「不是」一个段落。</div>\n  </div>\n</div>\n```\n</details>\n<div class=\"demo\">\n  <style>\n .demo   .not .fancy {\n      text-shadow: 2px 2px 3px gold;\n    }\n    /* 类名不是 `.fancy` 的 <p> 元素 */\n .demo    .not p:not(.fancy) {\n      color: green;\n    }\n    /* 非 <p> 元素 */ \n  .demo   .not  :not(p) {\n      text-decoration: underline;\n    }\n    /* 既不是 <div> 也不是 <span> 的元素 */\n  .demo   .not  :not(div):not(span) {\n      font-weight: bold;\n    }\n    /* 类名不是 `.crazy` 或 `.fancy` 的元素 */\n    /* 注意，此语法尚未获广泛支持。 */\n   .demo  .not  :not(.crazy, .fancy) {\n      color:red;\n    }\n  </style>\n  <div class=\"not\">\n    <p>我是一个段落。</p>\n    <p class=\"fancy\">我好看极了！</p>\n    <div>我「不是」一个段落。</div>\n  </div>\n</div>\n\n### :focus\n\n:focus 表示获得焦点的元素（如表单输入）。当用户点击或触摸元素或通过键盘的 “tab” 键选择它时会被触发。\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n.demo   .focus input:focus {\n    background: red;\n  }\n  </style>\n  <div class=\"focus\">\n   <input />\n  </div>\n</div>\n\n````\n</details>\n<div class=\"demo\">\n  <style>\n .demo  .focus input:focus {\n    background: red;\n  }\n  </style>\n  <div class=\"focus\">\n   <input />\n  </div>\n</div>\n\n### :focus-within\n\n表示一个元素获得焦点，或，该元素的后代元素获得焦点。换句话说，元素自身或者它的某个后代匹配 :focus 伪类。（shadow DOM 树中的后代也包括在内）\n\n子元素获得焦点，父元素改变样式\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n  .focusWithin:focus-within {\n    background: red;\n  }\n  </style>\n  <div class=\"focusWithin\">\n   <input />\n  </div>\n</div>\n````\n\n</details>\n<div class=\"demo\">\n  <style>\n .demo  .focusWithin:focus-within {\n    background: red;\n  }\n  </style>\n  <div class=\"focusWithin\">\n   <input />\n  </div>\n</div>\n\n### :fullscreen\n\n应用于当前处于全屏显示模式的元素。\n\n<details>\n<summary>展开查看</summary>\n```html\n<div class=\"demo\">\n  <style>\n .demo  .top {\n  margin: 15px;\n}\n.demo .main {\n  width: 100%;\n  display: flex;\n}\n.demo .right:fullscreen{\n  background:green;\n}\n.demo .right {\n  width: 100%;\n  height: 300px;\n  background: #dddddd;\n}\n.demo .right:fullscreen {\n  background: green;\n  color:red;\n  font-size:20px;\n}\n</style>\n\n<div class=\"top\">\n  <button onclick=\"rightScreen()\">全屏</button>\n</div>\n<div class=\"main\">\n  <div class=\"right\">内容</div>\n</div>\n<script>\nclass fullScreen {\n  /**\n   * @description: 全屏初始化\n   * @param {Function} fn 用户浏览器不支持全屏的回调\n   */\n  constructor(fn) {\n    this.prefixName = \"\"; // 浏览器前缀\n    this.isFullscreenData = true; // 浏览器是否支持全屏\n    this.isFullscreen(fn);\n  }\n  /**\n   * @description: 将传进来的元素全屏\n   * @param {String} domName 要全屏的dom名称\n   */\n  Fullscreen(domName) {\n    const element = document.querySelector(domName);\n    const methodName =\n      this.prefixName === \"\"\n        ? \"requestFullscreen\"\n        : `${this.prefixName}RequestFullScreen`;\n    element[methodName]();\n  }\n  // 退出全屏\n  exitFullscreen() {\n    const methodName =\n      this.prefixName === \"\"\n        ? \"exitFullscreen\"\n        : `${this.prefixName}ExitFullscreen`;\n    document[methodName]();\n  }\n  /**\n   * @description: 监听进入/离开全屏\n   * @param {Function} enter 进入全屏的回调\n   *  @param {Function} quit 离开全屏的回调\n   */\n  screenChange(enter, quit) {\n    if (!this.isFullscreenData) return;\n    const methodName = `on${this.prefixName}fullscreenchange`;\n    document[methodName] = e => {\n      if (this.isElementFullScreen()) {\n        enter && enter(e); // 进入全屏回调\n      } else {\n        quit && quit(e); // 离开全屏的回调\n      }\n    };\n  }\n  /**\n   * @description: 浏览器无法进入全屏时触发,可能是技术原因，也可能是用户拒绝：比如全屏请求不是在事件处理函数中调用,会在这里拦截到错误\n   * @param {Function} enterErrorFn 回调\n   */\n  screenError(enterErrorFn) {\n    const methodName = `on${this.prefixName}fullscreenerror`;\n    document[methodName] = e => {\n      enterErrorFn && enterErrorFn(e);\n    };\n  }\n  /**\n   * @description: 是否支持全屏+判断浏览器前缀\n   * @param {Function} fn 不支持全屏的回调函数 这里设了一个默认值\n   */\n  isFullscreen(fn) {\n    let fullscreenEnabled;\n    // 判断浏览器前缀\n    if (document.fullscreenEnabled) {\n      fullscreenEnabled = document.fullscreenEnabled;\n    } else if (document.webkitFullscreenEnabled) {\n      fullscreenEnabled = document.webkitFullscreenEnabled;\n      this.prefixName = \"webkit\";\n    } else if (document.mozFullScreenEnabled) {\n      fullscreenEnabled = document.mozFullScreenEnabled;\n      this.prefixName = \"moz\";\n    } else if (document.msFullscreenEnabled) {\n      fullscreenEnabled = document.msFullscreenEnabled;\n      this.prefixName = \"ms\";\n    }\n    if (!fullscreenEnabled) {\n      this.isFullscreenData = false;\n      fn && fn(); // 执行不支持全屏的回调\n    }\n  }\n  /**\n   * @description: 检测有没有元素处于全屏状态\n   * @return 布尔值\n   */\n  isElementFullScreen() {\n    const fullscreenElement =\n      document.fullscreenElement ||\n      document.msFullscreenElement ||\n      document.mozFullScreenElement ||\n      document.webkitFullscreenElement;\n    if (fullscreenElement === null) {\n      return false; // 当前没有元素在全屏状态\n    } else {\n      return true; // 有元素在全屏状态\n    }\n  }\n}\nlet full = new fullScreen(() => {\n  console.log(\"不支持\");\n});\nfull.screenError(e => {\n  console.log(\"进去全屏失败:\", e);\n});\n// 全屏请求必须在事件处理函数中调用，否则将会被拒绝。\n// full.Fullscreen(\".left\"); // 触发进去全屏失败回调\nconst obj = {\n  enter: e => {\n    // 如果退出全屏 退出的还是全屏状态，将会触发进入全屏的回调，这种情况比较少 注意一下\n    console.log(\"进入全屏\", e);\n  },\n  quit: e => {\n    console.log(\"退出全屏\", e);\n    // 通常不会出现嵌套的情况\n  }\n};\nfull.screenChange(obj.enter, obj.quit);\nfunction leftScreen() {\n  full.Fullscreen(\".left\");\n}\nfunction rightScreen() {\n  full.Fullscreen(\".right\");\n}\nfunction redScreen() {\n  full.Fullscreen(\".left-son\");\n}\n// 退出全屏 退出到上次的状态\nfunction exitScreen() {\n  full.exitFullscreen();\n}\n</script>\n</div>\n```\n</details>\n<div class=\"demo\">\n<style>\n.demo .top {\n  margin: 15px;\n}\n.demo .main {\n  width: 100%;\n  display: flex;\n}\n.demo .right:fullscreen{\n  background:green;\n}\n.demo .right {\n  width: 100%;\n  height: 300px;\n  background: #dddddd;\n}\n.demo .right:fullscreen {\n  background: green;\n  color:red;\n  font-size:20px;\n}\n</style>\n\n<div class=\"top\">\n  <button onclick=\"rightScreen()\">全屏</button>\n</div>\n<div class=\"main\">\n  <div class=\"right\">内容</div>\n</div>\n<script>\nclass fullScreen {\n  /**\n   * @description: 全屏初始化\n   * @param {Function} fn 用户浏览器不支持全屏的回调\n   */\n  constructor(fn) {\n    this.prefixName = \"\"; // 浏览器前缀\n    this.isFullscreenData = true; // 浏览器是否支持全屏\n    this.isFullscreen(fn);\n  }\n  /**\n   * @description: 将传进来的元素全屏\n   * @param {String} domName 要全屏的dom名称\n   */\n  Fullscreen(domName) {\n    const element = document.querySelector(domName);\n    const methodName =\n      this.prefixName === \"\"\n        ? \"requestFullscreen\"\n        : `${this.prefixName}RequestFullScreen`;\n    element[methodName]();\n  }\n  // 退出全屏\n  exitFullscreen() {\n    const methodName =\n      this.prefixName === \"\"\n        ? \"exitFullscreen\"\n        : `${this.prefixName}ExitFullscreen`;\n    document[methodName]();\n  }\n  /**\n   * @description: 监听进入/离开全屏\n   * @param {Function} enter 进入全屏的回调\n   *  @param {Function} quit 离开全屏的回调\n   */\n  screenChange(enter, quit) {\n    if (!this.isFullscreenData) return;\n    const methodName = `on${this.prefixName}fullscreenchange`;\n    document[methodName] = e => {\n      if (this.isElementFullScreen()) {\n        enter && enter(e); // 进入全屏回调\n      } else {\n        quit && quit(e); // 离开全屏的回调\n      }\n    };\n  }\n  /**\n   * @description: 浏览器无法进入全屏时触发,可能是技术原因，也可能是用户拒绝：比如全屏请求不是在事件处理函数中调用,会在这里拦截到错误\n   * @param {Function} enterErrorFn 回调\n   */\n  screenError(enterErrorFn) {\n    const methodName = `on${this.prefixName}fullscreenerror`;\n    document[methodName] = e => {\n      enterErrorFn && enterErrorFn(e);\n    };\n  }\n  /**\n   * @description: 是否支持全屏+判断浏览器前缀\n   * @param {Function} fn 不支持全屏的回调函数 这里设了一个默认值\n   */\n  isFullscreen(fn) {\n    let fullscreenEnabled;\n    // 判断浏览器前缀\n    if (document.fullscreenEnabled) {\n      fullscreenEnabled = document.fullscreenEnabled;\n    } else if (document.webkitFullscreenEnabled) {\n      fullscreenEnabled = document.webkitFullscreenEnabled;\n      this.prefixName = \"webkit\";\n    } else if (document.mozFullScreenEnabled) {\n      fullscreenEnabled = document.mozFullScreenEnabled;\n      this.prefixName = \"moz\";\n    } else if (document.msFullscreenEnabled) {\n      fullscreenEnabled = document.msFullscreenEnabled;\n      this.prefixName = \"ms\";\n    }\n    if (!fullscreenEnabled) {\n      this.isFullscreenData = false;\n      fn && fn(); // 执行不支持全屏的回调\n    }\n  }\n  /**\n   * @description: 检测有没有元素处于全屏状态\n   * @return 布尔值\n   */\n  isElementFullScreen() {\n    const fullscreenElement =\n      document.fullscreenElement ||\n      document.msFullscreenElement ||\n      document.mozFullScreenElement ||\n      document.webkitFullscreenElement;\n    if (fullscreenElement === null) {\n      return false; // 当前没有元素在全屏状态\n    } else {\n      return true; // 有元素在全屏状态\n    }\n  }\n}\nlet full = new fullScreen(() => {\n  console.log(\"不支持\");\n});\nfull.screenError(e => {\n  console.log(\"进去全屏失败:\", e);\n});\n// 全屏请求必须在事件处理函数中调用，否则将会被拒绝。\n// full.Fullscreen(\".left\"); // 触发进去全屏失败回调\nconst obj = {\n  enter: e => {\n    // 如果退出全屏 退出的还是全屏状态，将会触发进入全屏的回调，这种情况比较少 注意一下\n    console.log(\"进入全屏\", e);\n  },\n  quit: e => {\n    console.log(\"退出全屏\", e);\n    // 通常不会出现嵌套的情况\n  }\n};\nfull.screenChange(obj.enter, obj.quit);\nfunction leftScreen() {\n  full.Fullscreen(\".left\");\n}\nfunction rightScreen() {\n  full.Fullscreen(\".right\");\n}\nfunction redScreen() {\n  full.Fullscreen(\".left-son\");\n}\n// 退出全屏 退出到上次的状态\nfunction exitScreen() {\n  full.exitFullscreen();\n}\n</script>\n</div>\n\n## 结语\n\n以上就是本次的全部分享内容，合理的利用伪类可以比较巧妙的实现一些特殊效果。但是部分伪类还是涉及到浏览器的兼容问题，或者还在草案之中，具体的兼容性可以为[Can I Use](https://caniuse.com/)查看\n","slug":"pseudo-classes","published":1,"updated":"2021-09-29T07:53:51.823Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1zxy6bt002ap4vlcy1bhqd8","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><!-- demo的样式 -->\n<style>\n.demo{\n   border:1px dashed #ccc;\n   padding:5px;\n}\n.demo:hover{\n   box-shadow: 0 0 11px rgba(33,33,33,.2);\n}\n</style>\n\n<h2 id=\"引用\"><a href=\"#引用\" class=\"headerlink\" title=\"引用\"></a>引用</h2><p>分享总结一下现有的伪类和简单的 demo<br>源地址：<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/CSS/Pseudo-classes\">MDN</a></p>\n<h2 id=\"伪类\"><a href=\"#伪类\" class=\"headerlink\" title=\"伪类\"></a>伪类</h2><h3 id=\"active\"><a href=\"#active\" class=\"headerlink\" title=\":active\"></a>:active</h3><p>匹配被用户激活的元素。它让页面能在浏览器监测到激活时给出反馈。当用鼠标交互时，它代表的是用户按下按键和松开按键之间的时间。</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"> <span class=\"selector-class\">.demo</span> <span class=\"selector-class\">.active</span><span class=\"selector-pseudo\">:active</span>&#123; <span class=\"attribute\">color</span>:red;&#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;active&quot;</span>&gt;</span>鼠标按下就变为红色<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n .demo .active:active{ color:red;}\n  </style>\n  <div class=\"active\">鼠标按下就变为红色</div>\n</div>\n<span id=\"more\"></span>\n\n<h3 id=\"only-child\"><a href=\"#only-child\" class=\"headerlink\" title=\":only-child\"></a>:only-child</h3><p>匹配没有任何兄弟元素的元素。</p>\n<p>等效的选择器还可以写成:first-child:last-child 或者:nth-child(1):nth-last-child(1),当然,前者的权重会低一点.</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"selector-class\">.demo</span> <span class=\"selector-class\">.onlyChild</span> <span class=\"selector-pseudo\">:only-child</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"attribute\">color</span>: red;</span></span><br><span class=\"line\"><span class=\"language-css\">&#125;</span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.onlyChild</span> <span class=\"selector-class\">.haha</span><span class=\"selector-pseudo\">::after</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\"> <span class=\"attribute\">content</span>:<span class=\"string\">&#x27;after伪类不影响&#x27;</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">&#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;onlyChild&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  直接的文本也不影响选择</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">i</span>&gt;</span>没有兄弟元素<span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">i</span>&gt;</span>有兄弟<span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">b</span>&gt;</span>有兄弟<span class=\"tag\">&lt;/<span class=\"name\">b</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>有兄弟 <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>没兄弟<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n  .demo   .onlyChild :only-child {\n      color: red;\n    }\n  .demo   .onlyChild .haha::after {\n      content:'after伪类不影响';\n    }\n  </style>\n  <div class=\"onlyChild\">\n    <div class=\"haha\">\n      直接的文本也不影响选择\n      <i>没有兄弟元素,</i>\n    </div>\n    <div>\n      <i>有兄弟</i><br>\n      <b>有兄弟</b><br>\n      <span>有兄弟 <span>没兄弟</span></span>\n    </div>\n</div>\n</div>\n\n<h3 id=\"any-link\"><a href=\"#any-link\" class=\"headerlink\" title=\":any-link\"></a>:any-link</h3><p>选择器代表一个有链接锚点的元素，而不管它是否被访问过，也就是说，它会匹配每一个有<strong>href</strong>属性的 <code>&lt;a&gt;</code>、<code>&lt;area&gt;</code> 或 <code>&lt;link&gt;</code> 元素。因此，它会匹配到所有的 :link 或 :visited。</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"selector-class\">.demo</span> <span class=\"selector-class\">.anyLink</span> <span class=\"selector-tag\">a</span><span class=\"selector-pseudo\">:any-link</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"attribute\">color</span>: red;</span></span><br><span class=\"line\"><span class=\"language-css\">&#125;</span></span><br><span class=\"line\"><span class=\"language-css\">/_ WebKit browsers _/</span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"selector-class\">.demo</span> <span class=\"selector-class\">.anyLink</span> <span class=\"selector-tag\">a</span>:-webkit-any-link &#123;</span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"attribute\">color</span>: red;</span></span><br><span class=\"line\"><span class=\"language-css\">&#125;</span></span><br><span class=\"line\"><span class=\"language-css\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;anyLink&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;https://example.com&quot;</span>&gt;</span>href为地址<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span>&gt;</span>href为#<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span>href为空字符串<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span>&gt;</span>href为#的div<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span>&gt;</span>没有 href<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n.demo .anyLink a:any-link {\n  color: red;\n}\n/_ WebKit browsers _/\n.demo .anyLink a:-webkit-any-link {\ncolor: red;\n}\n</style>\n<div class=\"anyLink\">\n<a href=\"https://example.com\">href为地址</a><br>\n<a href=\"#\">href为#</a><br>\n<a href=\"\">href为空字符串</a><br>\n<div href=\"#\">href为#的div</div><br>\n<a>没有 href</a>\n</div>\n\n</div>\n\n<h3 id=\"only-of-type\"><a href=\"#only-of-type\" class=\"headerlink\" title=\":only-of-type\"></a>:only-of-type</h3><p>代表了任意一个元素，这个元素没有其他相同类型的兄弟元素。(子元素中唯一的标签)</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"> <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.onlyoftype</span> <span class=\"selector-pseudo\">:only-of-type</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"attribute\">color</span>: red;</span></span><br><span class=\"line\"><span class=\"language-css\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;onlyoftype&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>I am `div` #1.<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>I am the only `p` among my siblings.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>I am `div` #2.<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>I am `div` #3.</span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">i</span>&gt;</span>I am the only `i` child.<span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">em</span>&gt;</span>I am `em` #1.<span class=\"tag\">&lt;/<span class=\"name\">em</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">b</span>&gt;</span>I am `b` #2.<span class=\"tag\">&lt;/<span class=\"name\">b</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n  .demo .onlyoftype :only-of-type {\n    color: red;\n  }\n  </style>\n  <div class=\"onlyoftype\">\n    <div>I am `div` #1.</div>\n    <p>I am the only `p` among my siblings.</p>\n    <div>I am `div` #2.</div>\n    <div>I am `div` #3.\n      <i>I am the only `i` child.</i>\n      <em>I am `em` #1.</em>\n      <b>I am `b` #2.</b>\n    </div>\n  </div>\n</div>\n\n<h3 id=\"blank-火狐验证\"><a href=\"#blank-火狐验证\" class=\"headerlink\" title=\":blank 火狐验证\"></a>:blank 火狐验证</h3><p>没有子节点；仅有空的文本节点；仅有空白符的文本节点。</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"selector-class\">.demo</span> <span class=\"selector-class\">.blanks</span> <span class=\"selector-tag\">p</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"attribute\">min-height</span>: <span class=\"number\">30px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"attribute\">width</span>: <span class=\"number\">250px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"attribute\">background-color</span>: lightblue;</span></span><br><span class=\"line\"><span class=\"language-css\">&#125;</span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"selector-class\">.demo</span> <span class=\"selector-class\">.blanks</span> <span class=\"selector-tag\">p</span><span class=\"selector-pseudo\">:blank</span> &#123; <span class=\"attribute\">display</span>: none; &#125;</span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"selector-class\">.demo</span> <span class=\"selector-class\">.blanks</span> <span class=\"selector-tag\">p</span>:-moz-only-whitespace &#123; <span class=\"attribute\">display</span>: none; &#125; <span class=\"comment\">/* Mozilla-only pseudo-class that works like :blank will */</span></span></span><br><span class=\"line\"><span class=\"language-css\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;blanks&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>This paragraph is not empty or blank.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"comment\">&lt;!--this is empty and blank --&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- this is not empty, because it has whitespace. But it is blank.--&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>This paragraph is not empty or blank.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n.demo .blanks p {\n  min-height: 30px;\n  width: 250px;\n  background-color: lightblue;\n}\n.demo .blanks p:blank { display: none; }\n.demo .blanks p:-moz-only-whitespace { display: none; } /* Mozilla-only pseudo-class that works like :blank will */\n</style>\n\n  <div class=\"blanks\">\n  <p>This paragraph is not empty or blank.</p>\n  <p><!--this is empty and blank --></p>\n  <p>\n    \n    <!-- this is not empty, because it has whitespace. But it is blank.-->\n    \n  </p>\n  <p>This paragraph is not empty or blank.</p>\n</div>\n</div>\n\n<h3 id=\"empty\"><a href=\"#empty\" class=\"headerlink\" title=\":empty\"></a>:empty</h3><p>代表没有子元素的元素。子元素只可以是元素节点或文本（包括空格）。注释或处理指令都不会产生影响。</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">   <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.empty</span> <span class=\"selector-class\">.box</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">background</span>: pink;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">height</span>: <span class=\"number\">80px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">width</span>: <span class=\"number\">80px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">   <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.empty</span> <span class=\"selector-class\">.box</span><span class=\"selector-pseudo\">:empty</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">background</span>: lime;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;empty&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span><span class=\"comment\">&lt;!-- I will be lime --&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span>I will be pink<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- I will be red because of the whitespace around this comment --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n   .demo  .empty .box {\n        background: pink;\n        height: 80px;\n        width: 80px;\n    }\n   .demo  .empty .box:empty {\n      background: lime;\n    }\n</style>\n\n  <div class=\"empty\">\n    <div class=\"box\"><!-- I will be lime --></div>\n    <div class=\"box\">I will be pink</div>\n    <div class=\"box\">\n        <!-- I will be red because of the whitespace around this comment -->\n    </div>\n  </div>\n</div>\n\n<h3 id=\"optional\"><a href=\"#optional\" class=\"headerlink\" title=\":optional\"></a>:optional</h3><p>任意没有 required 属性的 <code>&lt;input&gt;</code>，<code>&lt;select&gt;</code> 或 <code>&lt;textarea&gt;</code> 元素使用它。</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"> <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.optional</span> <span class=\"selector-tag\">input</span><span class=\"selector-pseudo\">:optional</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> dashed red;</span></span><br><span class=\"line\"><span class=\"language-css\">&#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;optional&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span>/&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">required</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;有required的input&quot;</span>/&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n .demo  .optional input:optional {\n  border: 1px dashed red;\n}\n  </style>\n  <div class=\"optional\">\n  <input type=\"text\"/>\n  <input type=\"text\" required placeholder=\"有required的input\"/>\n  </div>\n</div>\n\n<h3 id=\"checked\"><a href=\"#checked\" class=\"headerlink\" title=\":checked\"></a>:checked</h3><p>选择器表示任何处于选中状态的 radio(<code>&lt;input type=&quot;radio&quot;&gt;</code>), checkbox (<code>&lt;input type=&quot;checkbox&quot;&gt;</code>) 或(“select”) 元素中的 option HTML 元素(“option”)</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"> <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.checked</span> <span class=\"selector-pseudo\">:checked</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"attribute\">background</span>:red;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"attribute\">margin-left</span>:<span class=\"number\">20px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"attribute\">margin-right</span>:<span class=\"number\">20px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;checked&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;radio&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;my-input&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;yes&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;yes&quot;</span>&gt;</span>Yes<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;radio&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;my-input&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;no&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;no&quot;</span>&gt;</span>No<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n  .demo .checked :checked {\n    background:red;\n    margin-left:20px;\n    margin-right:20px;\n  }\n  </style>\n  <div class=\"checked\">\n  <input type=\"radio\" name=\"my-input\" id=\"yes\">\n  <label for=\"yes\">Yes</label>\n\n  <input type=\"radio\" name=\"my-input\" id=\"no\">\n  <label for=\"no\">No</label>\n  </div>\n</div>\n\n<h3 id=\"hover\"><a href=\"#hover\" class=\"headerlink\" title=\":hover\"></a>:hover</h3><p>光标（鼠标指针）悬停在元素上时提供关联的样式,按照 LVHA 的循顺序声明:link－:visited－:hover－:active。</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"> <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.hover</span><span class=\"selector-pseudo\">:hover</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">   <span class=\"attribute\">color</span>:red;</span></span><br><span class=\"line\"><span class=\"language-css\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;hover&quot;</span>&gt;</span></span><br><span class=\"line\">hover</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n .demo  .hover:hover {\n   color:red;\n  }\n  </style>\n  <div class=\"hover\">\nhover\n  </div>\n</div>\n\n<h3 id=\"out-of-range-和-in-range\"><a href=\"#out-of-range-和-in-range\" class=\"headerlink\" title=\":out-of-range 和:in-range\"></a>:out-of-range 和:in-range</h3><ul>\n<li>out-of-range:表示一个 <code>&lt;input&gt;</code> 元素，其当前值处于属性 min 和 max 限定的范围外</li>\n<li>in-range：表一个 <code>&lt;input&gt;</code> 元素，其当前值处于属性 min 和 max 限定的范围之内</li>\n</ul>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"selector-tag\">input</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid black;</span></span><br><span class=\"line\"><span class=\"language-css\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-css\"> <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.outofrange</span> <span class=\"selector-tag\">input</span><span class=\"selector-pseudo\">:in-range</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"attribute\">background-color</span>: <span class=\"built_in\">rgba</span>(<span class=\"number\">0</span>, <span class=\"number\">255</span>, <span class=\"number\">0</span>, <span class=\"number\">0.25</span>);</span></span><br><span class=\"line\"><span class=\"language-css\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-css\"> <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.outofrange</span> <span class=\"selector-tag\">input</span><span class=\"selector-pseudo\">:out-of-range</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"attribute\">background-color</span>: <span class=\"built_in\">rgba</span>(<span class=\"number\">255</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0.25</span>);</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"attribute\">border</span>: <span class=\"number\">2px</span> solid red;</span></span><br><span class=\"line\"><span class=\"language-css\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-css\"> <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.outofrange</span> <span class=\"selector-tag\">input</span><span class=\"selector-pseudo\">:in-range</span> + <span class=\"selector-tag\">label</span><span class=\"selector-pseudo\">::after</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"attribute\">content</span>: <span class=\"string\">&#x27;okay.&#x27;</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-css\"> <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.outofrange</span> <span class=\"selector-tag\">input</span><span class=\"selector-pseudo\">:out-of-range</span> + <span class=\"selector-tag\">label</span><span class=\"selector-pseudo\">::after</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"attribute\">content</span>: <span class=\"string\">&#x27;out of range!&#x27;</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;outofrange&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;form1&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span>Values between 1 and 10 are valid.</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;value1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;value1&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;number&quot;</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;1 to 10&quot;</span> <span class=\"attr\">min</span>=<span class=\"string\">&quot;1&quot;</span> <span class=\"attr\">max</span>=<span class=\"string\">&quot;10&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;12&quot;</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;value1&quot;</span>&gt;</span>Your value is <span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n  input {\n    border: 1px solid black;\n  }\n .demo  .outofrange input:in-range {\n    background-color: rgba(0, 255, 0, 0.25);\n  }\n .demo  .outofrange input:out-of-range {\n    background-color: rgba(255, 0, 0, 0.25);\n    border: 2px solid red;\n  }\n  .demo .outofrange input:in-range + label::after {\n    content: 'okay.';\n  }\n  .demo .outofrange input:out-of-range + label::after {\n    content: 'out of range!';\n  }\n  </style>\n  <div class=\"outofrange\">\n    <form action=\"\" id=\"form1\">\n      <ul>Values between 1 and 10 are valid.\n        <li>\n          <input id=\"value1\" name=\"value1\" type=\"number\" placeholder=\"1 to 10\" min=\"1\" max=\"10\" value=\"12\">\n          <label for=\"value1\">Your value is </label>\n        </li>\n      </ul>\n    </form>\n  </div>\n</div>\n\n<h3 id=\"indeterminate\"><a href=\"#indeterminate\" class=\"headerlink\" title=\":indeterminate\"></a>:indeterminate</h3><p>表示状态不确定的表单元素。</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"selector-class\">.demo</span> <span class=\"selector-class\">.indeterminate</span> <span class=\"selector-tag\">input</span><span class=\"selector-pseudo\">:indeterminate</span>, <span class=\"selector-class\">.indeterminate</span> <span class=\"selector-tag\">input</span><span class=\"selector-pseudo\">:indeterminate</span> + <span class=\"selector-tag\">label</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"attribute\">background</span>: red;</span></span><br><span class=\"line\"><span class=\"language-css\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;indeterminate&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;checkbox&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;checkbox&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;checkbox&quot;</span>&gt;</span>Background should be green<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;radio&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;radio&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;radio&quot;</span>&gt;</span>Background should be green<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">var</span> inputs = <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;.indeterminate&#x27;</span>).<span class=\"title function_\">getElementsByTagName</span>(<span class=\"string\">&quot;input&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; inputs.<span class=\"property\">length</span>; i++) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    inputs[i].<span class=\"property\">indeterminate</span> = <span class=\"literal\">true</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n  .demo .indeterminate input:indeterminate, .indeterminate input:indeterminate + label {\n    background: red;\n  }\n  </style>\n  <div class=\"indeterminate\">\n    <input type=\"checkbox\" id=\"checkbox\">\n    <label for=\"checkbox\">Background should be green</label></br>\n    <input type=\"radio\" id=\"radio\">\n    <label for=\"radio\">Background should be green</label>\n  </div>\n  <script>\n  var inputs = document.querySelector('.indeterminate').getElementsByTagName(\"input\");\n  for(var i = 0; i < inputs.length; i++) {\n    inputs[i].indeterminate = true;\n  }\n  </script>\n</div>\n\n<h3 id=\"default\"><a href=\"#default\" class=\"headerlink\" title=\":default\"></a>:default</h3><p>选择设置默认值的元素，该选择器可以在 <code>&lt;button&gt;</code>, <code>&lt;input type=&quot;checkbox&quot;&gt;</code>, <code>&lt;input type=&quot;radio&quot;&gt;</code>, 以及 <code>&lt;option&gt;</code> 上使用。</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">   <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.default1</span> <span class=\"selector-tag\">input</span><span class=\"selector-pseudo\">:default</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">box-shadow</span>: <span class=\"number\">0</span> <span class=\"number\">0</span> <span class=\"number\">2px</span> <span class=\"number\">1px</span> red;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">   <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.default1</span> <span class=\"selector-tag\">input</span><span class=\"selector-pseudo\">:default</span> + <span class=\"selector-tag\">label</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">color</span>: red;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;default1&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;radio&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;season&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;spring&quot;</span> &gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;spring&quot;</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;radio&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;season&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;summer&quot;</span> <span class=\"attr\">checked</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;summer&quot;</span>&gt;</span>2<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n   .demo  .default1 input:default {\n      box-shadow: 0 0 2px 1px red;\n    }\n   .demo  .default1 input:default + label {\n      color: red;\n    }\n  </style>\n\n  <div class=\"default1\">\n    <input type=\"radio\" name=\"season\" id=\"spring\" >\n    <label for=\"spring\">1</label>\n    <input type=\"radio\" name=\"season\" id=\"summer\" checked>\n    <label for=\"summer\">2</label>\n  </div>\n</div>\n\n<h3 id=\"placeholder-shown\"><a href=\"#placeholder-shown\" class=\"headerlink\" title=\":placeholder-shown\"></a>:placeholder-shown</h3><p>在 placeholader 显示的时候被选择</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">   <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.placeholader</span> <span class=\"selector-tag\">input</span><span class=\"selector-pseudo\">:placeholder-shown</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">border-color</span>: red;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;placeholader&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;Type something here!&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\">    空placeholder<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;&quot;</span> &gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\">    无placeholder<span class=\"tag\">&lt;<span class=\"name\">input</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n   .demo  .placeholader input:placeholder-shown {\n      border-color: red;\n    }\n  </style>\n\n  <div class=\"placeholader\">\n    <input placeholder=\"Type something here!\">\n    </br>\n    空placeholder<input placeholder=\"\" >\n    </br>\n    无placeholder<input>\n  </div>\n</div>\n\n<h3 id=\"invalid\"><a href=\"#invalid\" class=\"headerlink\" title=\":invalid\"></a>:invalid</h3><p>表示任意内容未通过验证的 <code>&lt;input&gt;</code> 或其他 <code>&lt;form&gt;</code> 元素</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"selector-class\">.demo</span>   <span class=\"selector-class\">.invalid</span> <span class=\"selector-tag\">input</span><span class=\"selector-pseudo\">:invalid</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">background-color</span>: red;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;invalid&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;url_input&quot;</span>&gt;</span>Enter a URL:<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;url&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;url_input&quot;</span> /&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">br</span> /&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">br</span> /&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;email_input&quot;</span>&gt;</span>Enter an email address:<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;email&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;email_input&quot;</span> <span class=\"attr\">required</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n   .demo  .invalid input:invalid {\n      background-color: red;\n    }\n  </style>\n\n  <div class=\"invalid\">\n    <form>\n      <label for=\"url_input\">Enter a URL:</label>\n      <input type=\"url\" id=\"url_input\" />\n      <br />\n      <br />\n      <label for=\"email_input\">Enter an email address:</label>\n      <input type=\"email\" id=\"email_input\" required/>\n    </form>\n  </div>\n</div>\n\n<h3 id=\"read-only\"><a href=\"#read-only\" class=\"headerlink\" title=\":read-only\"></a>:read-only</h3><p>选择只读的元素</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">   <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.readonly</span> <span class=\"selector-tag\">input</span>:-moz-read-only &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">background-color</span>: <span class=\"number\">#ccc</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"comment\">/* Supported in Blink/WebKit/Edge without a prefix */</span></span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"selector-class\">.demo</span> <span class=\"selector-class\">.readonly</span> <span class=\"selector-tag\">input</span><span class=\"selector-pseudo\">:read-only</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">background-color</span>: <span class=\"number\">#ccc</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\"> <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.readonly</span> <span class=\"selector-tag\">p</span>:-moz-read-only &#123; <span class=\"attribute\">background</span>: lightgray; &#125;</span></span><br><span class=\"line\"><span class=\"language-css\"> <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.readonly</span> <span class=\"selector-tag\">p</span><span class=\"selector-pseudo\">:read-only</span> &#123; <span class=\"attribute\">background</span>: lightgray; &#125;</span></span><br><span class=\"line\"><span class=\"language-css\"> <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.readonly</span> <span class=\"selector-class\">.div</span><span class=\"selector-pseudo\">:read-only</span> &#123; <span class=\"attribute\">background</span>: lightgray; &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;readonly&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;This is a read-only field.&quot;</span> <span class=\"attr\">readonly</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>不可以编辑的都可以被选中<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">contenteditable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span>可以编辑的p标签就不行<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;div&quot;</span>&gt;</span>div也一样<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n   .demo  .readonly input:-moz-read-only {\n      background-color: #ccc;\n    }\n    /* Supported in Blink/WebKit/Edge without a prefix */\n .demo  .readonly input:read-only {\n      background-color: #ccc;\n    }\n.demo  .readonly p:-moz-read-only { background: lightgray; }\n.demo  .readonly p:read-only { background: lightgray; }\n.demo  .readonly .div:read-only { background: lightgray; }\n  </style>\n\n  <div class=\"readonly\">\n    <input type=\"text\" value=\"This is a read-only field.\" readonly>\n    <p>不可以编辑的都可以被选中</p>\n    <p contenteditable=\"true\">可以编辑的p标签就不行</p>\n    <div class=\"div\">div也一样</div>\n  </div>\n</div>\n\n<h3 id=\"read-write\"><a href=\"#read-write\" class=\"headerlink\" title=\":read-write\"></a>:read-write</h3><p>选择可以被用户编辑的元素</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"selector-class\">.demo</span>   <span class=\"selector-class\">.readwrite</span> <span class=\"selector-tag\">input</span><span class=\"selector-pseudo\">:read-write</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">background-color</span>: <span class=\"number\">#ccc</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"comment\">/* Supported in Blink/WebKit/Edge without a prefix */</span></span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"selector-class\">.demo</span> <span class=\"selector-class\">.readwrite</span> <span class=\"selector-tag\">input</span><span class=\"selector-pseudo\">:read-write</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">background-color</span>: <span class=\"number\">#ccc</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"selector-class\">.demo</span> <span class=\"selector-class\">.readwrite</span> <span class=\"selector-tag\">p</span><span class=\"selector-pseudo\">:read-write</span> &#123; <span class=\"attribute\">background</span>: lightgray; &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"selector-class\">.demo</span> <span class=\"selector-class\">.readwrite</span> <span class=\"selector-class\">.div</span><span class=\"selector-pseudo\">:read-write</span> &#123; <span class=\"attribute\">background</span>: lightgray; &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;readwrite&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;This is a read-only field.&quot;</span> &gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">contenteditable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span>可以编辑的p标签也行<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>不可以编辑的不可以被选中<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n   .demo  .readwrite input:read-write {\n      background-color: #ccc;\n    }\n    /* Supported in Blink/WebKit/Edge without a prefix */\n.demo   .readwrite input:read-write {\n      background-color: #ccc;\n    }\n  .demo .readwrite p:read-write { background: lightgray; }\n  .demo .readwrite .div:read-write { background: lightgray; }\n  </style>\n\n  <div class=\"readwrite\">\n    <input type=\"text\" value=\"This is a read-only field.\" >\n    <p contenteditable=\"true\">可以编辑的p标签也行</p>\n    <p>不可以编辑的不可以被选中</p>\n  </div>\n</div>\n\n<h3 id=\"disabled\"><a href=\"#disabled\" class=\"headerlink\" title=\":disabled\"></a>:disabled</h3><p>选择禁用的元素(表单元素)。</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"selector-class\">.demo</span>   <span class=\"selector-class\">.disabled1</span> <span class=\"selector-tag\">input</span><span class=\"selector-pseudo\">:disabled</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">background-color</span>: <span class=\"number\">#ccc</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">cursor</span><span class=\"selector-pseudo\">:not</span>-allowed;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"selector-class\">.demo</span>   <span class=\"selector-class\">.disabled1</span> <span class=\"selector-tag\">div</span><span class=\"selector-pseudo\">:disabled</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">background-color</span>: <span class=\"number\">#ccc</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">cursor</span><span class=\"selector-pseudo\">:not</span>-allowed;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;disabled1&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;我被禁用了，尴尬&quot;</span> <span class=\"attr\">disabled</span> &gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">disabled</span> &gt;</span>禁用的div<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n   .demo  .disabled1 input:disabled {\n      background-color: #ccc;\n      cursor:not-allowed;\n    }\n   .demo  .disabled1 div:disabled {\n      background-color: #ccc;\n      cursor:not-allowed;\n    }\n  \n  </style>\n  <div class=\"disabled1\">\n    <input type=\"text\" value=\"我被禁用了，尴尬\" disabled >\n    <div disabled >禁用的div</div>\n  </div>\n</div>\n\n<h3 id=\"enabled\"><a href=\"#enabled\" class=\"headerlink\" title=\":enabled\"></a>:enabled</h3><p>表示任何被启用的（enabled）元素。如果一个元素能够被激活（如选择、点击或接受文本输入），或者能够获取焦点，则该元素是启用的。</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"selector-class\">.demo</span>   <span class=\"selector-class\">.enabled</span> <span class=\"selector-tag\">input</span><span class=\"selector-pseudo\">:enabled</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">background-color</span>: red;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"selector-class\">.demo</span>   <span class=\"selector-class\">.enabled</span> <span class=\"selector-tag\">div</span><span class=\"selector-pseudo\">:enabled</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">background-color</span>: red;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;enabled&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;我可以输入，尴尬&quot;</span>  &gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>  &gt;</span>禁用的div<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n   .demo  .enabled input:enabled {\n      background-color: red;\n    }\n   .demo  .enabled div:enabled {\n      background-color: red;\n    }\n  \n  </style>\n  <div class=\"enabled\">\n    <input type=\"text\" value=\"我可以输入，尴尬\"  >\n    <div  >禁用的div</div>\n  </div>\n</div>\n\n<h3 id=\"lang\"><a href=\"#lang\" class=\"headerlink\" title=\":lang()\"></a>:lang()</h3><p>基于元素语言来匹配页面元素。</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">   <span class=\"selector-class\">.demo</span> <span class=\"selector-class\">.lang</span> <span class=\"selector-tag\">div</span><span class=\"selector-pseudo\">:lang</span>(en) &gt; <span class=\"selector-tag\">q</span> &#123; <span class=\"attribute\">background</span>:red; &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.lang</span> <span class=\"selector-tag\">div</span><span class=\"selector-pseudo\">:lang</span>(fr) &gt; <span class=\"selector-tag\">q</span> &#123;<span class=\"attribute\">background</span>:green;&#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;lang&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">q</span>&gt;</span>英语语言<span class=\"tag\">&lt;/<span class=\"name\">q</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;fr&quot;</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">q</span>&gt;</span>法语语言<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n .demo   .lang div:lang(en) > q { background:red; }\n .demo   .lang div:lang(fr) > q {background:green;}\n  </style>\n  <div class=\"lang\">\n    <div lang=\"en\"><q>英语语言</q></div>\n    <div lang=\"fr\"><q>法语语言</div>\n  </div>\n</div>\n\n<h3 id=\"not\"><a href=\"#not\" class=\"headerlink\" title=\":not()\"></a>:not()</h3><p>用来匹配不符合一组选择器的元素。由于它的作用是防止特定的元素被选中，它也被称为反选伪类（negation pseudo-class）。</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.not</span> <span class=\"selector-class\">.fancy</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">text-shadow</span>: <span class=\"number\">2px</span> <span class=\"number\">2px</span> <span class=\"number\">3px</span> gold;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"comment\">/* 类名不是 `.fancy` 的 &lt;p&gt; 元素 */</span></span></span><br><span class=\"line\"><span class=\"language-css\">   <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.not</span> <span class=\"selector-tag\">p</span><span class=\"selector-pseudo\">:not</span>(<span class=\"selector-class\">.fancy</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">color</span>: green;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"comment\">/* 非 &lt;p&gt; 元素 */</span> </span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"selector-class\">.demo</span>   <span class=\"selector-class\">.not</span>  <span class=\"selector-pseudo\">:not</span>(<span class=\"selector-tag\">p</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">text-decoration</span>: underline;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"comment\">/* 既不是 &lt;div&gt; 也不是 &lt;span&gt; 的元素 */</span></span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"selector-class\">.demo</span>   <span class=\"selector-class\">.not</span>  <span class=\"selector-pseudo\">:not</span>(<span class=\"selector-tag\">div</span>)<span class=\"selector-pseudo\">:not</span>(<span class=\"selector-tag\">span</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">font-weight</span>: bold;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"comment\">/* 类名不是 `.crazy` 或 `.fancy` 的元素 */</span></span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"comment\">/* 注意，此语法尚未获广泛支持。 */</span></span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"selector-class\">.demo</span>   <span class=\"selector-class\">.not</span>  <span class=\"selector-pseudo\">:not</span>(<span class=\"selector-class\">.crazy</span>, <span class=\"selector-class\">.fancy</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">color</span>:red;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;not&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>我是一个段落。<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;fancy&quot;</span>&gt;</span>我好看极了！<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>我「不是」一个段落。<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n .demo   .not .fancy {\n      text-shadow: 2px 2px 3px gold;\n    }\n    /* 类名不是 `.fancy` 的 <p> 元素 */\n .demo    .not p:not(.fancy) {\n      color: green;\n    }\n    /* 非 <p> 元素 */ \n  .demo   .not  :not(p) {\n      text-decoration: underline;\n    }\n    /* 既不是 <div> 也不是 <span> 的元素 */\n  .demo   .not  :not(div):not(span) {\n      font-weight: bold;\n    }\n    /* 类名不是 `.crazy` 或 `.fancy` 的元素 */\n    /* 注意，此语法尚未获广泛支持。 */\n   .demo  .not  :not(.crazy, .fancy) {\n      color:red;\n    }\n  </style>\n  <div class=\"not\">\n    <p>我是一个段落。</p>\n    <p class=\"fancy\">我好看极了！</p>\n    <div>我「不是」一个段落。</div>\n  </div>\n</div>\n\n<h3 id=\"focus\"><a href=\"#focus\" class=\"headerlink\" title=\":focus\"></a>:focus</h3><p>:focus 表示获得焦点的元素（如表单输入）。当用户点击或触摸元素或通过键盘的 “tab” 键选择它时会被触发。</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"selector-class\">.demo</span>   <span class=\"selector-class\">.focus</span> <span class=\"selector-tag\">input</span><span class=\"selector-pseudo\">:focus</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"attribute\">background</span>: red;</span></span><br><span class=\"line\"><span class=\"language-css\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;focus&quot;</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">input</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">````</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">details</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"> <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.focus</span> <span class=\"selector-tag\">input</span><span class=\"selector-pseudo\">:focus</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"attribute\">background</span>: red;</span></span><br><span class=\"line\"><span class=\"language-css\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;focus&quot;</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">input</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">### :focus-within</span><br><span class=\"line\"></span><br><span class=\"line\">表示一个元素获得焦点，或，该元素的后代元素获得焦点。换句话说，元素自身或者它的某个后代匹配 :focus 伪类。（shadow DOM 树中的后代也包括在内）</span><br><span class=\"line\"></span><br><span class=\"line\">子元素获得焦点，父元素改变样式</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">details</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">summary</span>&gt;</span>展开查看<span class=\"tag\">&lt;/<span class=\"name\">summary</span>&gt;</span></span><br><span class=\"line\">```html</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"selector-class\">.focusWithin</span><span class=\"selector-pseudo\">:focus</span>-within &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"attribute\">background</span>: red;</span></span><br><span class=\"line\"><span class=\"language-css\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;focusWithin&quot;</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">input</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">````</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">details</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"> <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.focusWithin</span><span class=\"selector-pseudo\">:focus</span>-within &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"attribute\">background</span>: red;</span></span><br><span class=\"line\"><span class=\"language-css\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;focusWithin&quot;</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">input</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">### :fullscreen</span><br><span class=\"line\"></span><br><span class=\"line\">应用于当前处于全屏显示模式的元素。</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">details</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">summary</span>&gt;</span>展开查看<span class=\"tag\">&lt;/<span class=\"name\">summary</span>&gt;</span></span><br><span class=\"line\">```html</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"> <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.top</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"attribute\">margin</span>: <span class=\"number\">15px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">&#125;</span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"selector-class\">.demo</span> <span class=\"selector-class\">.main</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"attribute\">display</span>: flex;</span></span><br><span class=\"line\"><span class=\"language-css\">&#125;</span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"selector-class\">.demo</span> <span class=\"selector-class\">.right</span><span class=\"selector-pseudo\">:fullscreen</span>&#123;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"attribute\">background</span>:green;</span></span><br><span class=\"line\"><span class=\"language-css\">&#125;</span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"selector-class\">.demo</span> <span class=\"selector-class\">.right</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"attribute\">height</span>: <span class=\"number\">300px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"attribute\">background</span>: <span class=\"number\">#dddddd</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">&#125;</span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"selector-class\">.demo</span> <span class=\"selector-class\">.right</span><span class=\"selector-pseudo\">:fullscreen</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"attribute\">background</span>: green;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"attribute\">color</span>:red;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"attribute\">font-size</span>:<span class=\"number\">20px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">&#125;</span></span><br><span class=\"line\"><span class=\"language-css\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;top&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">onclick</span>=<span class=\"string\">&quot;rightScreen()&quot;</span>&gt;</span>全屏<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;main&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;right&quot;</span>&gt;</span>内容<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">class</span> <span class=\"title class_\">fullScreen</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"comment\">/**</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">   * <span class=\"doctag\">@description</span>: 全屏初始化</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">   * <span class=\"doctag\">@param</span> &#123;<span class=\"type\">Function</span>&#125; fn 用户浏览器不支持全屏的回调</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">   */</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"title function_\">constructor</span>(<span class=\"params\">fn</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">this</span>.<span class=\"property\">prefixName</span> = <span class=\"string\">&quot;&quot;</span>; <span class=\"comment\">// 浏览器前缀</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">this</span>.<span class=\"property\">isFullscreenData</span> = <span class=\"literal\">true</span>; <span class=\"comment\">// 浏览器是否支持全屏</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">this</span>.<span class=\"title function_\">isFullscreen</span>(fn);</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"comment\">/**</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">   * <span class=\"doctag\">@description</span>: 将传进来的元素全屏</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">   * <span class=\"doctag\">@param</span> &#123;<span class=\"type\">String</span>&#125; domName 要全屏的dom名称</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">   */</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"title class_\">Fullscreen</span>(domName) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">const</span> element = <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(domName);</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">const</span> methodName =</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"variable language_\">this</span>.<span class=\"property\">prefixName</span> === <span class=\"string\">&quot;&quot;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        ? <span class=\"string\">&quot;requestFullscreen&quot;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        : <span class=\"string\">`<span class=\"subst\">$&#123;<span class=\"variable language_\">this</span>.prefixName&#125;</span>RequestFullScreen`</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    element[methodName]();</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"comment\">// 退出全屏</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"title function_\">exitFullscreen</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">const</span> methodName =</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"variable language_\">this</span>.<span class=\"property\">prefixName</span> === <span class=\"string\">&quot;&quot;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        ? <span class=\"string\">&quot;exitFullscreen&quot;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        : <span class=\"string\">`<span class=\"subst\">$&#123;<span class=\"variable language_\">this</span>.prefixName&#125;</span>ExitFullscreen`</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">document</span>[methodName]();</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"comment\">/**</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">   * <span class=\"doctag\">@description</span>: 监听进入/离开全屏</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">   * <span class=\"doctag\">@param</span> &#123;<span class=\"type\">Function</span>&#125; enter 进入全屏的回调</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">   *  <span class=\"doctag\">@param</span> &#123;<span class=\"type\">Function</span>&#125; quit 离开全屏的回调</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">   */</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"title function_\">screenChange</span>(<span class=\"params\">enter, quit</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">if</span> (!<span class=\"variable language_\">this</span>.<span class=\"property\">isFullscreenData</span>) <span class=\"keyword\">return</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">const</span> methodName = <span class=\"string\">`on<span class=\"subst\">$&#123;<span class=\"variable language_\">this</span>.prefixName&#125;</span>fullscreenchange`</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">document</span>[methodName] = <span class=\"function\"><span class=\"params\">e</span> =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">if</span> (<span class=\"variable language_\">this</span>.<span class=\"title function_\">isElementFullScreen</span>()) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        enter &amp;&amp; <span class=\"title function_\">enter</span>(e); <span class=\"comment\">// 进入全屏回调</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      &#125; <span class=\"keyword\">else</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        quit &amp;&amp; <span class=\"title function_\">quit</span>(e); <span class=\"comment\">// 离开全屏的回调</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"comment\">/**</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">   * <span class=\"doctag\">@description</span>: 浏览器无法进入全屏时触发,可能是技术原因，也可能是用户拒绝：比如全屏请求不是在事件处理函数中调用,会在这里拦截到错误</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">   * <span class=\"doctag\">@param</span> &#123;<span class=\"type\">Function</span>&#125; enterErrorFn 回调</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">   */</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"title function_\">screenError</span>(<span class=\"params\">enterErrorFn</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">const</span> methodName = <span class=\"string\">`on<span class=\"subst\">$&#123;<span class=\"variable language_\">this</span>.prefixName&#125;</span>fullscreenerror`</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">document</span>[methodName] = <span class=\"function\"><span class=\"params\">e</span> =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      enterErrorFn &amp;&amp; <span class=\"title function_\">enterErrorFn</span>(e);</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"comment\">/**</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">   * <span class=\"doctag\">@description</span>: 是否支持全屏+判断浏览器前缀</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">   * <span class=\"doctag\">@param</span> &#123;<span class=\"type\">Function</span>&#125; fn 不支持全屏的回调函数 这里设了一个默认值</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">   */</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"title function_\">isFullscreen</span>(<span class=\"params\">fn</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">let</span> fullscreenEnabled;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"comment\">// 判断浏览器前缀</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">if</span> (<span class=\"variable language_\">document</span>.<span class=\"property\">fullscreenEnabled</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      fullscreenEnabled = <span class=\"variable language_\">document</span>.<span class=\"property\">fullscreenEnabled</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"variable language_\">document</span>.<span class=\"property\">webkitFullscreenEnabled</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      fullscreenEnabled = <span class=\"variable language_\">document</span>.<span class=\"property\">webkitFullscreenEnabled</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"variable language_\">this</span>.<span class=\"property\">prefixName</span> = <span class=\"string\">&quot;webkit&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"variable language_\">document</span>.<span class=\"property\">mozFullScreenEnabled</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      fullscreenEnabled = <span class=\"variable language_\">document</span>.<span class=\"property\">mozFullScreenEnabled</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"variable language_\">this</span>.<span class=\"property\">prefixName</span> = <span class=\"string\">&quot;moz&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"variable language_\">document</span>.<span class=\"property\">msFullscreenEnabled</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      fullscreenEnabled = <span class=\"variable language_\">document</span>.<span class=\"property\">msFullscreenEnabled</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"variable language_\">this</span>.<span class=\"property\">prefixName</span> = <span class=\"string\">&quot;ms&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">if</span> (!fullscreenEnabled) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"variable language_\">this</span>.<span class=\"property\">isFullscreenData</span> = <span class=\"literal\">false</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      fn &amp;&amp; <span class=\"title function_\">fn</span>(); <span class=\"comment\">// 执行不支持全屏的回调</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"comment\">/**</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">   * <span class=\"doctag\">@description</span>: 检测有没有元素处于全屏状态</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">   * <span class=\"doctag\">@return</span> 布尔值</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">   */</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"title function_\">isElementFullScreen</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">const</span> fullscreenElement =</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"variable language_\">document</span>.<span class=\"property\">fullscreenElement</span> ||</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"variable language_\">document</span>.<span class=\"property\">msFullscreenElement</span> ||</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"variable language_\">document</span>.<span class=\"property\">mozFullScreenElement</span> ||</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"variable language_\">document</span>.<span class=\"property\">webkitFullscreenElement</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">if</span> (fullscreenElement === <span class=\"literal\">null</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span>; <span class=\"comment\">// 当前没有元素在全屏状态</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125; <span class=\"keyword\">else</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">return</span> <span class=\"literal\">true</span>; <span class=\"comment\">// 有元素在全屏状态</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">let</span> full = <span class=\"keyword\">new</span> <span class=\"title function_\">fullScreen</span>(<span class=\"function\">() =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;不支持&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;);</span></span><br><span class=\"line\"><span class=\"language-javascript\">full.<span class=\"title function_\">screenError</span>(<span class=\"function\"><span class=\"params\">e</span> =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;进去全屏失败:&quot;</span>, e);</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;);</span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"comment\">// 全屏请求必须在事件处理函数中调用，否则将会被拒绝。</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"comment\">// full.Fullscreen(&quot;.left&quot;); // 触发进去全屏失败回调</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">const</span> obj = &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"attr\">enter</span>: <span class=\"function\"><span class=\"params\">e</span> =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"comment\">// 如果退出全屏 退出的还是全屏状态，将会触发进入全屏的回调，这种情况比较少 注意一下</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;进入全屏&quot;</span>, e);</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;,</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"attr\">quit</span>: <span class=\"function\"><span class=\"params\">e</span> =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;退出全屏&quot;</span>, e);</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"comment\">// 通常不会出现嵌套的情况</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;;</span></span><br><span class=\"line\"><span class=\"language-javascript\">full.<span class=\"title function_\">screenChange</span>(obj.<span class=\"property\">enter</span>, obj.<span class=\"property\">quit</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">function</span> <span class=\"title function_\">leftScreen</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  full.<span class=\"title class_\">Fullscreen</span>(<span class=\"string\">&quot;.left&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">function</span> <span class=\"title function_\">rightScreen</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  full.<span class=\"title class_\">Fullscreen</span>(<span class=\"string\">&quot;.right&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">function</span> <span class=\"title function_\">redScreen</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  full.<span class=\"title class_\">Fullscreen</span>(<span class=\"string\">&quot;.left-son&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"comment\">// 退出全屏 退出到上次的状态</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">function</span> <span class=\"title function_\">exitScreen</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  full.<span class=\"title function_\">exitFullscreen</span>();</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n<style>\n.demo .top {\n  margin: 15px;\n}\n.demo .main {\n  width: 100%;\n  display: flex;\n}\n.demo .right:fullscreen{\n  background:green;\n}\n.demo .right {\n  width: 100%;\n  height: 300px;\n  background: #dddddd;\n}\n.demo .right:fullscreen {\n  background: green;\n  color:red;\n  font-size:20px;\n}\n</style>\n\n<div class=\"top\">\n  <button onclick=\"rightScreen()\">全屏</button>\n</div>\n<div class=\"main\">\n  <div class=\"right\">内容</div>\n</div>\n<script>\nclass fullScreen {\n  /**\n   * @description: 全屏初始化\n   * @param {Function} fn 用户浏览器不支持全屏的回调\n   */\n  constructor(fn) {\n    this.prefixName = \"\"; // 浏览器前缀\n    this.isFullscreenData = true; // 浏览器是否支持全屏\n    this.isFullscreen(fn);\n  }\n  /**\n   * @description: 将传进来的元素全屏\n   * @param {String} domName 要全屏的dom名称\n   */\n  Fullscreen(domName) {\n    const element = document.querySelector(domName);\n    const methodName =\n      this.prefixName === \"\"\n        ? \"requestFullscreen\"\n        : `${this.prefixName}RequestFullScreen`;\n    element[methodName]();\n  }\n  // 退出全屏\n  exitFullscreen() {\n    const methodName =\n      this.prefixName === \"\"\n        ? \"exitFullscreen\"\n        : `${this.prefixName}ExitFullscreen`;\n    document[methodName]();\n  }\n  /**\n   * @description: 监听进入/离开全屏\n   * @param {Function} enter 进入全屏的回调\n   *  @param {Function} quit 离开全屏的回调\n   */\n  screenChange(enter, quit) {\n    if (!this.isFullscreenData) return;\n    const methodName = `on${this.prefixName}fullscreenchange`;\n    document[methodName] = e => {\n      if (this.isElementFullScreen()) {\n        enter && enter(e); // 进入全屏回调\n      } else {\n        quit && quit(e); // 离开全屏的回调\n      }\n    };\n  }\n  /**\n   * @description: 浏览器无法进入全屏时触发,可能是技术原因，也可能是用户拒绝：比如全屏请求不是在事件处理函数中调用,会在这里拦截到错误\n   * @param {Function} enterErrorFn 回调\n   */\n  screenError(enterErrorFn) {\n    const methodName = `on${this.prefixName}fullscreenerror`;\n    document[methodName] = e => {\n      enterErrorFn && enterErrorFn(e);\n    };\n  }\n  /**\n   * @description: 是否支持全屏+判断浏览器前缀\n   * @param {Function} fn 不支持全屏的回调函数 这里设了一个默认值\n   */\n  isFullscreen(fn) {\n    let fullscreenEnabled;\n    // 判断浏览器前缀\n    if (document.fullscreenEnabled) {\n      fullscreenEnabled = document.fullscreenEnabled;\n    } else if (document.webkitFullscreenEnabled) {\n      fullscreenEnabled = document.webkitFullscreenEnabled;\n      this.prefixName = \"webkit\";\n    } else if (document.mozFullScreenEnabled) {\n      fullscreenEnabled = document.mozFullScreenEnabled;\n      this.prefixName = \"moz\";\n    } else if (document.msFullscreenEnabled) {\n      fullscreenEnabled = document.msFullscreenEnabled;\n      this.prefixName = \"ms\";\n    }\n    if (!fullscreenEnabled) {\n      this.isFullscreenData = false;\n      fn && fn(); // 执行不支持全屏的回调\n    }\n  }\n  /**\n   * @description: 检测有没有元素处于全屏状态\n   * @return 布尔值\n   */\n  isElementFullScreen() {\n    const fullscreenElement =\n      document.fullscreenElement ||\n      document.msFullscreenElement ||\n      document.mozFullScreenElement ||\n      document.webkitFullscreenElement;\n    if (fullscreenElement === null) {\n      return false; // 当前没有元素在全屏状态\n    } else {\n      return true; // 有元素在全屏状态\n    }\n  }\n}\nlet full = new fullScreen(() => {\n  console.log(\"不支持\");\n});\nfull.screenError(e => {\n  console.log(\"进去全屏失败:\", e);\n});\n// 全屏请求必须在事件处理函数中调用，否则将会被拒绝。\n// full.Fullscreen(\".left\"); // 触发进去全屏失败回调\nconst obj = {\n  enter: e => {\n    // 如果退出全屏 退出的还是全屏状态，将会触发进入全屏的回调，这种情况比较少 注意一下\n    console.log(\"进入全屏\", e);\n  },\n  quit: e => {\n    console.log(\"退出全屏\", e);\n    // 通常不会出现嵌套的情况\n  }\n};\nfull.screenChange(obj.enter, obj.quit);\nfunction leftScreen() {\n  full.Fullscreen(\".left\");\n}\nfunction rightScreen() {\n  full.Fullscreen(\".right\");\n}\nfunction redScreen() {\n  full.Fullscreen(\".left-son\");\n}\n// 退出全屏 退出到上次的状态\nfunction exitScreen() {\n  full.exitFullscreen();\n}\n</script>\n</div>\n\n<h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p>以上就是本次的全部分享内容，合理的利用伪类可以比较巧妙的实现一些特殊效果。但是部分伪类还是涉及到浏览器的兼容问题，或者还在草案之中，具体的兼容性可以为<a href=\"https://caniuse.com/\">Can I Use</a>查看</p>\n","site":{"data":{}},"length":22828,"excerpt":"<!-- demo的样式 -->\n<style>\n.demo{\n   border:1px dashed #ccc;\n   padding:5px;\n}\n.demo:hover{\n   box-shadow: 0 0 11px rgba(33,33,33,.2);\n}\n</style>\n\n<h2 id=\"引用\"><a href=\"#引用\" class=\"headerlink\" title=\"引用\"></a>引用</h2><p>分享总结一下现有的伪类和简单的 demo<br>源地址：<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/CSS/Pseudo-classes\">MDN</a></p>\n<h2 id=\"伪类\"><a href=\"#伪类\" class=\"headerlink\" title=\"伪类\"></a>伪类</h2><h3 id=\"active\"><a href=\"#active\" class=\"headerlink\" title=\":active\"></a>:active</h3><p>匹配被用户激活的元素。它让页面能在浏览器监测到激活时给出反馈。当用鼠标交互时，它代表的是用户按下按键和松开按键之间的时间。</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"> <span class=\"selector-class\">.demo</span> <span class=\"selector-class\">.active</span><span class=\"selector-pseudo\">:active</span>&#123; <span class=\"attribute\">color</span>:red;&#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;active&quot;</span>&gt;</span>鼠标按下就变为红色<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n .demo .active:active{ color:red;}\n  </style>\n  <div class=\"active\">鼠标按下就变为红色</div>\n</div>","more":"<h3 id=\"only-child\"><a href=\"#only-child\" class=\"headerlink\" title=\":only-child\"></a>:only-child</h3><p>匹配没有任何兄弟元素的元素。</p>\n<p>等效的选择器还可以写成:first-child:last-child 或者:nth-child(1):nth-last-child(1),当然,前者的权重会低一点.</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"selector-class\">.demo</span> <span class=\"selector-class\">.onlyChild</span> <span class=\"selector-pseudo\">:only-child</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"attribute\">color</span>: red;</span></span><br><span class=\"line\"><span class=\"language-css\">&#125;</span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.onlyChild</span> <span class=\"selector-class\">.haha</span><span class=\"selector-pseudo\">::after</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\"> <span class=\"attribute\">content</span>:<span class=\"string\">&#x27;after伪类不影响&#x27;</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">&#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;onlyChild&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  直接的文本也不影响选择</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">i</span>&gt;</span>没有兄弟元素<span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">i</span>&gt;</span>有兄弟<span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">b</span>&gt;</span>有兄弟<span class=\"tag\">&lt;/<span class=\"name\">b</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>有兄弟 <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>没兄弟<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n  .demo   .onlyChild :only-child {\n      color: red;\n    }\n  .demo   .onlyChild .haha::after {\n      content:'after伪类不影响';\n    }\n  </style>\n  <div class=\"onlyChild\">\n    <div class=\"haha\">\n      直接的文本也不影响选择\n      <i>没有兄弟元素,</i>\n    </div>\n    <div>\n      <i>有兄弟</i><br>\n      <b>有兄弟</b><br>\n      <span>有兄弟 <span>没兄弟</span></span>\n    </div>\n</div>\n</div>\n\n<h3 id=\"any-link\"><a href=\"#any-link\" class=\"headerlink\" title=\":any-link\"></a>:any-link</h3><p>选择器代表一个有链接锚点的元素，而不管它是否被访问过，也就是说，它会匹配每一个有<strong>href</strong>属性的 <code>&lt;a&gt;</code>、<code>&lt;area&gt;</code> 或 <code>&lt;link&gt;</code> 元素。因此，它会匹配到所有的 :link 或 :visited。</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"selector-class\">.demo</span> <span class=\"selector-class\">.anyLink</span> <span class=\"selector-tag\">a</span><span class=\"selector-pseudo\">:any-link</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"attribute\">color</span>: red;</span></span><br><span class=\"line\"><span class=\"language-css\">&#125;</span></span><br><span class=\"line\"><span class=\"language-css\">/_ WebKit browsers _/</span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"selector-class\">.demo</span> <span class=\"selector-class\">.anyLink</span> <span class=\"selector-tag\">a</span>:-webkit-any-link &#123;</span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"attribute\">color</span>: red;</span></span><br><span class=\"line\"><span class=\"language-css\">&#125;</span></span><br><span class=\"line\"><span class=\"language-css\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;anyLink&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;https://example.com&quot;</span>&gt;</span>href为地址<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span>&gt;</span>href为#<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span>href为空字符串<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span>&gt;</span>href为#的div<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span>&gt;</span>没有 href<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n.demo .anyLink a:any-link {\n  color: red;\n}\n/_ WebKit browsers _/\n.demo .anyLink a:-webkit-any-link {\ncolor: red;\n}\n</style>\n<div class=\"anyLink\">\n<a href=\"https://example.com\">href为地址</a><br>\n<a href=\"#\">href为#</a><br>\n<a href=\"\">href为空字符串</a><br>\n<div href=\"#\">href为#的div</div><br>\n<a>没有 href</a>\n</div>\n\n</div>\n\n<h3 id=\"only-of-type\"><a href=\"#only-of-type\" class=\"headerlink\" title=\":only-of-type\"></a>:only-of-type</h3><p>代表了任意一个元素，这个元素没有其他相同类型的兄弟元素。(子元素中唯一的标签)</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"> <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.onlyoftype</span> <span class=\"selector-pseudo\">:only-of-type</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"attribute\">color</span>: red;</span></span><br><span class=\"line\"><span class=\"language-css\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;onlyoftype&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>I am `div` #1.<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>I am the only `p` among my siblings.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>I am `div` #2.<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>I am `div` #3.</span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">i</span>&gt;</span>I am the only `i` child.<span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">em</span>&gt;</span>I am `em` #1.<span class=\"tag\">&lt;/<span class=\"name\">em</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">b</span>&gt;</span>I am `b` #2.<span class=\"tag\">&lt;/<span class=\"name\">b</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n  .demo .onlyoftype :only-of-type {\n    color: red;\n  }\n  </style>\n  <div class=\"onlyoftype\">\n    <div>I am `div` #1.</div>\n    <p>I am the only `p` among my siblings.</p>\n    <div>I am `div` #2.</div>\n    <div>I am `div` #3.\n      <i>I am the only `i` child.</i>\n      <em>I am `em` #1.</em>\n      <b>I am `b` #2.</b>\n    </div>\n  </div>\n</div>\n\n<h3 id=\"blank-火狐验证\"><a href=\"#blank-火狐验证\" class=\"headerlink\" title=\":blank 火狐验证\"></a>:blank 火狐验证</h3><p>没有子节点；仅有空的文本节点；仅有空白符的文本节点。</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"selector-class\">.demo</span> <span class=\"selector-class\">.blanks</span> <span class=\"selector-tag\">p</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"attribute\">min-height</span>: <span class=\"number\">30px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"attribute\">width</span>: <span class=\"number\">250px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"attribute\">background-color</span>: lightblue;</span></span><br><span class=\"line\"><span class=\"language-css\">&#125;</span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"selector-class\">.demo</span> <span class=\"selector-class\">.blanks</span> <span class=\"selector-tag\">p</span><span class=\"selector-pseudo\">:blank</span> &#123; <span class=\"attribute\">display</span>: none; &#125;</span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"selector-class\">.demo</span> <span class=\"selector-class\">.blanks</span> <span class=\"selector-tag\">p</span>:-moz-only-whitespace &#123; <span class=\"attribute\">display</span>: none; &#125; <span class=\"comment\">/* Mozilla-only pseudo-class that works like :blank will */</span></span></span><br><span class=\"line\"><span class=\"language-css\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;blanks&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>This paragraph is not empty or blank.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"comment\">&lt;!--this is empty and blank --&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- this is not empty, because it has whitespace. But it is blank.--&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>This paragraph is not empty or blank.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n.demo .blanks p {\n  min-height: 30px;\n  width: 250px;\n  background-color: lightblue;\n}\n.demo .blanks p:blank { display: none; }\n.demo .blanks p:-moz-only-whitespace { display: none; } /* Mozilla-only pseudo-class that works like :blank will */\n</style>\n\n  <div class=\"blanks\">\n  <p>This paragraph is not empty or blank.</p>\n  <p><!--this is empty and blank --></p>\n  <p>\n    \n    <!-- this is not empty, because it has whitespace. But it is blank.-->\n    \n  </p>\n  <p>This paragraph is not empty or blank.</p>\n</div>\n</div>\n\n<h3 id=\"empty\"><a href=\"#empty\" class=\"headerlink\" title=\":empty\"></a>:empty</h3><p>代表没有子元素的元素。子元素只可以是元素节点或文本（包括空格）。注释或处理指令都不会产生影响。</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">   <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.empty</span> <span class=\"selector-class\">.box</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">background</span>: pink;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">height</span>: <span class=\"number\">80px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">width</span>: <span class=\"number\">80px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">   <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.empty</span> <span class=\"selector-class\">.box</span><span class=\"selector-pseudo\">:empty</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">background</span>: lime;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;empty&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span><span class=\"comment\">&lt;!-- I will be lime --&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span>I will be pink<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- I will be red because of the whitespace around this comment --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n   .demo  .empty .box {\n        background: pink;\n        height: 80px;\n        width: 80px;\n    }\n   .demo  .empty .box:empty {\n      background: lime;\n    }\n</style>\n\n  <div class=\"empty\">\n    <div class=\"box\"><!-- I will be lime --></div>\n    <div class=\"box\">I will be pink</div>\n    <div class=\"box\">\n        <!-- I will be red because of the whitespace around this comment -->\n    </div>\n  </div>\n</div>\n\n<h3 id=\"optional\"><a href=\"#optional\" class=\"headerlink\" title=\":optional\"></a>:optional</h3><p>任意没有 required 属性的 <code>&lt;input&gt;</code>，<code>&lt;select&gt;</code> 或 <code>&lt;textarea&gt;</code> 元素使用它。</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"> <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.optional</span> <span class=\"selector-tag\">input</span><span class=\"selector-pseudo\">:optional</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> dashed red;</span></span><br><span class=\"line\"><span class=\"language-css\">&#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;optional&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span>/&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">required</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;有required的input&quot;</span>/&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n .demo  .optional input:optional {\n  border: 1px dashed red;\n}\n  </style>\n  <div class=\"optional\">\n  <input type=\"text\"/>\n  <input type=\"text\" required placeholder=\"有required的input\"/>\n  </div>\n</div>\n\n<h3 id=\"checked\"><a href=\"#checked\" class=\"headerlink\" title=\":checked\"></a>:checked</h3><p>选择器表示任何处于选中状态的 radio(<code>&lt;input type=&quot;radio&quot;&gt;</code>), checkbox (<code>&lt;input type=&quot;checkbox&quot;&gt;</code>) 或(“select”) 元素中的 option HTML 元素(“option”)</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"> <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.checked</span> <span class=\"selector-pseudo\">:checked</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"attribute\">background</span>:red;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"attribute\">margin-left</span>:<span class=\"number\">20px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"attribute\">margin-right</span>:<span class=\"number\">20px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;checked&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;radio&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;my-input&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;yes&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;yes&quot;</span>&gt;</span>Yes<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;radio&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;my-input&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;no&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;no&quot;</span>&gt;</span>No<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n  .demo .checked :checked {\n    background:red;\n    margin-left:20px;\n    margin-right:20px;\n  }\n  </style>\n  <div class=\"checked\">\n  <input type=\"radio\" name=\"my-input\" id=\"yes\">\n  <label for=\"yes\">Yes</label>\n\n  <input type=\"radio\" name=\"my-input\" id=\"no\">\n  <label for=\"no\">No</label>\n  </div>\n</div>\n\n<h3 id=\"hover\"><a href=\"#hover\" class=\"headerlink\" title=\":hover\"></a>:hover</h3><p>光标（鼠标指针）悬停在元素上时提供关联的样式,按照 LVHA 的循顺序声明:link－:visited－:hover－:active。</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"> <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.hover</span><span class=\"selector-pseudo\">:hover</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">   <span class=\"attribute\">color</span>:red;</span></span><br><span class=\"line\"><span class=\"language-css\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;hover&quot;</span>&gt;</span></span><br><span class=\"line\">hover</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n .demo  .hover:hover {\n   color:red;\n  }\n  </style>\n  <div class=\"hover\">\nhover\n  </div>\n</div>\n\n<h3 id=\"out-of-range-和-in-range\"><a href=\"#out-of-range-和-in-range\" class=\"headerlink\" title=\":out-of-range 和:in-range\"></a>:out-of-range 和:in-range</h3><ul>\n<li>out-of-range:表示一个 <code>&lt;input&gt;</code> 元素，其当前值处于属性 min 和 max 限定的范围外</li>\n<li>in-range：表一个 <code>&lt;input&gt;</code> 元素，其当前值处于属性 min 和 max 限定的范围之内</li>\n</ul>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"selector-tag\">input</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid black;</span></span><br><span class=\"line\"><span class=\"language-css\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-css\"> <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.outofrange</span> <span class=\"selector-tag\">input</span><span class=\"selector-pseudo\">:in-range</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"attribute\">background-color</span>: <span class=\"built_in\">rgba</span>(<span class=\"number\">0</span>, <span class=\"number\">255</span>, <span class=\"number\">0</span>, <span class=\"number\">0.25</span>);</span></span><br><span class=\"line\"><span class=\"language-css\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-css\"> <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.outofrange</span> <span class=\"selector-tag\">input</span><span class=\"selector-pseudo\">:out-of-range</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"attribute\">background-color</span>: <span class=\"built_in\">rgba</span>(<span class=\"number\">255</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0.25</span>);</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"attribute\">border</span>: <span class=\"number\">2px</span> solid red;</span></span><br><span class=\"line\"><span class=\"language-css\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-css\"> <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.outofrange</span> <span class=\"selector-tag\">input</span><span class=\"selector-pseudo\">:in-range</span> + <span class=\"selector-tag\">label</span><span class=\"selector-pseudo\">::after</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"attribute\">content</span>: <span class=\"string\">&#x27;okay.&#x27;</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-css\"> <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.outofrange</span> <span class=\"selector-tag\">input</span><span class=\"selector-pseudo\">:out-of-range</span> + <span class=\"selector-tag\">label</span><span class=\"selector-pseudo\">::after</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"attribute\">content</span>: <span class=\"string\">&#x27;out of range!&#x27;</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;outofrange&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;form1&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span>Values between 1 and 10 are valid.</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;value1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;value1&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;number&quot;</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;1 to 10&quot;</span> <span class=\"attr\">min</span>=<span class=\"string\">&quot;1&quot;</span> <span class=\"attr\">max</span>=<span class=\"string\">&quot;10&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;12&quot;</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;value1&quot;</span>&gt;</span>Your value is <span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n  input {\n    border: 1px solid black;\n  }\n .demo  .outofrange input:in-range {\n    background-color: rgba(0, 255, 0, 0.25);\n  }\n .demo  .outofrange input:out-of-range {\n    background-color: rgba(255, 0, 0, 0.25);\n    border: 2px solid red;\n  }\n  .demo .outofrange input:in-range + label::after {\n    content: 'okay.';\n  }\n  .demo .outofrange input:out-of-range + label::after {\n    content: 'out of range!';\n  }\n  </style>\n  <div class=\"outofrange\">\n    <form action=\"\" id=\"form1\">\n      <ul>Values between 1 and 10 are valid.\n        <li>\n          <input id=\"value1\" name=\"value1\" type=\"number\" placeholder=\"1 to 10\" min=\"1\" max=\"10\" value=\"12\">\n          <label for=\"value1\">Your value is </label>\n        </li>\n      </ul>\n    </form>\n  </div>\n</div>\n\n<h3 id=\"indeterminate\"><a href=\"#indeterminate\" class=\"headerlink\" title=\":indeterminate\"></a>:indeterminate</h3><p>表示状态不确定的表单元素。</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"selector-class\">.demo</span> <span class=\"selector-class\">.indeterminate</span> <span class=\"selector-tag\">input</span><span class=\"selector-pseudo\">:indeterminate</span>, <span class=\"selector-class\">.indeterminate</span> <span class=\"selector-tag\">input</span><span class=\"selector-pseudo\">:indeterminate</span> + <span class=\"selector-tag\">label</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"attribute\">background</span>: red;</span></span><br><span class=\"line\"><span class=\"language-css\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;indeterminate&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;checkbox&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;checkbox&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;checkbox&quot;</span>&gt;</span>Background should be green<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;radio&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;radio&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;radio&quot;</span>&gt;</span>Background should be green<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">var</span> inputs = <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;.indeterminate&#x27;</span>).<span class=\"title function_\">getElementsByTagName</span>(<span class=\"string\">&quot;input&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; inputs.<span class=\"property\">length</span>; i++) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    inputs[i].<span class=\"property\">indeterminate</span> = <span class=\"literal\">true</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n  .demo .indeterminate input:indeterminate, .indeterminate input:indeterminate + label {\n    background: red;\n  }\n  </style>\n  <div class=\"indeterminate\">\n    <input type=\"checkbox\" id=\"checkbox\">\n    <label for=\"checkbox\">Background should be green</label></br>\n    <input type=\"radio\" id=\"radio\">\n    <label for=\"radio\">Background should be green</label>\n  </div>\n  <script>\n  var inputs = document.querySelector('.indeterminate').getElementsByTagName(\"input\");\n  for(var i = 0; i < inputs.length; i++) {\n    inputs[i].indeterminate = true;\n  }\n  </script>\n</div>\n\n<h3 id=\"default\"><a href=\"#default\" class=\"headerlink\" title=\":default\"></a>:default</h3><p>选择设置默认值的元素，该选择器可以在 <code>&lt;button&gt;</code>, <code>&lt;input type=&quot;checkbox&quot;&gt;</code>, <code>&lt;input type=&quot;radio&quot;&gt;</code>, 以及 <code>&lt;option&gt;</code> 上使用。</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">   <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.default1</span> <span class=\"selector-tag\">input</span><span class=\"selector-pseudo\">:default</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">box-shadow</span>: <span class=\"number\">0</span> <span class=\"number\">0</span> <span class=\"number\">2px</span> <span class=\"number\">1px</span> red;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">   <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.default1</span> <span class=\"selector-tag\">input</span><span class=\"selector-pseudo\">:default</span> + <span class=\"selector-tag\">label</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">color</span>: red;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;default1&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;radio&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;season&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;spring&quot;</span> &gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;spring&quot;</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;radio&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;season&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;summer&quot;</span> <span class=\"attr\">checked</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;summer&quot;</span>&gt;</span>2<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n   .demo  .default1 input:default {\n      box-shadow: 0 0 2px 1px red;\n    }\n   .demo  .default1 input:default + label {\n      color: red;\n    }\n  </style>\n\n  <div class=\"default1\">\n    <input type=\"radio\" name=\"season\" id=\"spring\" >\n    <label for=\"spring\">1</label>\n    <input type=\"radio\" name=\"season\" id=\"summer\" checked>\n    <label for=\"summer\">2</label>\n  </div>\n</div>\n\n<h3 id=\"placeholder-shown\"><a href=\"#placeholder-shown\" class=\"headerlink\" title=\":placeholder-shown\"></a>:placeholder-shown</h3><p>在 placeholader 显示的时候被选择</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">   <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.placeholader</span> <span class=\"selector-tag\">input</span><span class=\"selector-pseudo\">:placeholder-shown</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">border-color</span>: red;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;placeholader&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;Type something here!&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\">    空placeholder<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;&quot;</span> &gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\">    无placeholder<span class=\"tag\">&lt;<span class=\"name\">input</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n   .demo  .placeholader input:placeholder-shown {\n      border-color: red;\n    }\n  </style>\n\n  <div class=\"placeholader\">\n    <input placeholder=\"Type something here!\">\n    </br>\n    空placeholder<input placeholder=\"\" >\n    </br>\n    无placeholder<input>\n  </div>\n</div>\n\n<h3 id=\"invalid\"><a href=\"#invalid\" class=\"headerlink\" title=\":invalid\"></a>:invalid</h3><p>表示任意内容未通过验证的 <code>&lt;input&gt;</code> 或其他 <code>&lt;form&gt;</code> 元素</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"selector-class\">.demo</span>   <span class=\"selector-class\">.invalid</span> <span class=\"selector-tag\">input</span><span class=\"selector-pseudo\">:invalid</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">background-color</span>: red;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;invalid&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;url_input&quot;</span>&gt;</span>Enter a URL:<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;url&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;url_input&quot;</span> /&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">br</span> /&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">br</span> /&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;email_input&quot;</span>&gt;</span>Enter an email address:<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;email&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;email_input&quot;</span> <span class=\"attr\">required</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n   .demo  .invalid input:invalid {\n      background-color: red;\n    }\n  </style>\n\n  <div class=\"invalid\">\n    <form>\n      <label for=\"url_input\">Enter a URL:</label>\n      <input type=\"url\" id=\"url_input\" />\n      <br />\n      <br />\n      <label for=\"email_input\">Enter an email address:</label>\n      <input type=\"email\" id=\"email_input\" required/>\n    </form>\n  </div>\n</div>\n\n<h3 id=\"read-only\"><a href=\"#read-only\" class=\"headerlink\" title=\":read-only\"></a>:read-only</h3><p>选择只读的元素</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">   <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.readonly</span> <span class=\"selector-tag\">input</span>:-moz-read-only &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">background-color</span>: <span class=\"number\">#ccc</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"comment\">/* Supported in Blink/WebKit/Edge without a prefix */</span></span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"selector-class\">.demo</span> <span class=\"selector-class\">.readonly</span> <span class=\"selector-tag\">input</span><span class=\"selector-pseudo\">:read-only</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">background-color</span>: <span class=\"number\">#ccc</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\"> <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.readonly</span> <span class=\"selector-tag\">p</span>:-moz-read-only &#123; <span class=\"attribute\">background</span>: lightgray; &#125;</span></span><br><span class=\"line\"><span class=\"language-css\"> <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.readonly</span> <span class=\"selector-tag\">p</span><span class=\"selector-pseudo\">:read-only</span> &#123; <span class=\"attribute\">background</span>: lightgray; &#125;</span></span><br><span class=\"line\"><span class=\"language-css\"> <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.readonly</span> <span class=\"selector-class\">.div</span><span class=\"selector-pseudo\">:read-only</span> &#123; <span class=\"attribute\">background</span>: lightgray; &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;readonly&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;This is a read-only field.&quot;</span> <span class=\"attr\">readonly</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>不可以编辑的都可以被选中<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">contenteditable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span>可以编辑的p标签就不行<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;div&quot;</span>&gt;</span>div也一样<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n   .demo  .readonly input:-moz-read-only {\n      background-color: #ccc;\n    }\n    /* Supported in Blink/WebKit/Edge without a prefix */\n .demo  .readonly input:read-only {\n      background-color: #ccc;\n    }\n.demo  .readonly p:-moz-read-only { background: lightgray; }\n.demo  .readonly p:read-only { background: lightgray; }\n.demo  .readonly .div:read-only { background: lightgray; }\n  </style>\n\n  <div class=\"readonly\">\n    <input type=\"text\" value=\"This is a read-only field.\" readonly>\n    <p>不可以编辑的都可以被选中</p>\n    <p contenteditable=\"true\">可以编辑的p标签就不行</p>\n    <div class=\"div\">div也一样</div>\n  </div>\n</div>\n\n<h3 id=\"read-write\"><a href=\"#read-write\" class=\"headerlink\" title=\":read-write\"></a>:read-write</h3><p>选择可以被用户编辑的元素</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"selector-class\">.demo</span>   <span class=\"selector-class\">.readwrite</span> <span class=\"selector-tag\">input</span><span class=\"selector-pseudo\">:read-write</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">background-color</span>: <span class=\"number\">#ccc</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"comment\">/* Supported in Blink/WebKit/Edge without a prefix */</span></span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"selector-class\">.demo</span> <span class=\"selector-class\">.readwrite</span> <span class=\"selector-tag\">input</span><span class=\"selector-pseudo\">:read-write</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">background-color</span>: <span class=\"number\">#ccc</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"selector-class\">.demo</span> <span class=\"selector-class\">.readwrite</span> <span class=\"selector-tag\">p</span><span class=\"selector-pseudo\">:read-write</span> &#123; <span class=\"attribute\">background</span>: lightgray; &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"selector-class\">.demo</span> <span class=\"selector-class\">.readwrite</span> <span class=\"selector-class\">.div</span><span class=\"selector-pseudo\">:read-write</span> &#123; <span class=\"attribute\">background</span>: lightgray; &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;readwrite&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;This is a read-only field.&quot;</span> &gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">contenteditable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span>可以编辑的p标签也行<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>不可以编辑的不可以被选中<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n   .demo  .readwrite input:read-write {\n      background-color: #ccc;\n    }\n    /* Supported in Blink/WebKit/Edge without a prefix */\n.demo   .readwrite input:read-write {\n      background-color: #ccc;\n    }\n  .demo .readwrite p:read-write { background: lightgray; }\n  .demo .readwrite .div:read-write { background: lightgray; }\n  </style>\n\n  <div class=\"readwrite\">\n    <input type=\"text\" value=\"This is a read-only field.\" >\n    <p contenteditable=\"true\">可以编辑的p标签也行</p>\n    <p>不可以编辑的不可以被选中</p>\n  </div>\n</div>\n\n<h3 id=\"disabled\"><a href=\"#disabled\" class=\"headerlink\" title=\":disabled\"></a>:disabled</h3><p>选择禁用的元素(表单元素)。</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"selector-class\">.demo</span>   <span class=\"selector-class\">.disabled1</span> <span class=\"selector-tag\">input</span><span class=\"selector-pseudo\">:disabled</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">background-color</span>: <span class=\"number\">#ccc</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">cursor</span><span class=\"selector-pseudo\">:not</span>-allowed;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"selector-class\">.demo</span>   <span class=\"selector-class\">.disabled1</span> <span class=\"selector-tag\">div</span><span class=\"selector-pseudo\">:disabled</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">background-color</span>: <span class=\"number\">#ccc</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">cursor</span><span class=\"selector-pseudo\">:not</span>-allowed;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;disabled1&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;我被禁用了，尴尬&quot;</span> <span class=\"attr\">disabled</span> &gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">disabled</span> &gt;</span>禁用的div<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n   .demo  .disabled1 input:disabled {\n      background-color: #ccc;\n      cursor:not-allowed;\n    }\n   .demo  .disabled1 div:disabled {\n      background-color: #ccc;\n      cursor:not-allowed;\n    }\n  \n  </style>\n  <div class=\"disabled1\">\n    <input type=\"text\" value=\"我被禁用了，尴尬\" disabled >\n    <div disabled >禁用的div</div>\n  </div>\n</div>\n\n<h3 id=\"enabled\"><a href=\"#enabled\" class=\"headerlink\" title=\":enabled\"></a>:enabled</h3><p>表示任何被启用的（enabled）元素。如果一个元素能够被激活（如选择、点击或接受文本输入），或者能够获取焦点，则该元素是启用的。</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"selector-class\">.demo</span>   <span class=\"selector-class\">.enabled</span> <span class=\"selector-tag\">input</span><span class=\"selector-pseudo\">:enabled</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">background-color</span>: red;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"selector-class\">.demo</span>   <span class=\"selector-class\">.enabled</span> <span class=\"selector-tag\">div</span><span class=\"selector-pseudo\">:enabled</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">background-color</span>: red;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;enabled&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;我可以输入，尴尬&quot;</span>  &gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>  &gt;</span>禁用的div<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n   .demo  .enabled input:enabled {\n      background-color: red;\n    }\n   .demo  .enabled div:enabled {\n      background-color: red;\n    }\n  \n  </style>\n  <div class=\"enabled\">\n    <input type=\"text\" value=\"我可以输入，尴尬\"  >\n    <div  >禁用的div</div>\n  </div>\n</div>\n\n<h3 id=\"lang\"><a href=\"#lang\" class=\"headerlink\" title=\":lang()\"></a>:lang()</h3><p>基于元素语言来匹配页面元素。</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">   <span class=\"selector-class\">.demo</span> <span class=\"selector-class\">.lang</span> <span class=\"selector-tag\">div</span><span class=\"selector-pseudo\">:lang</span>(en) &gt; <span class=\"selector-tag\">q</span> &#123; <span class=\"attribute\">background</span>:red; &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.lang</span> <span class=\"selector-tag\">div</span><span class=\"selector-pseudo\">:lang</span>(fr) &gt; <span class=\"selector-tag\">q</span> &#123;<span class=\"attribute\">background</span>:green;&#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;lang&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">q</span>&gt;</span>英语语言<span class=\"tag\">&lt;/<span class=\"name\">q</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;fr&quot;</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">q</span>&gt;</span>法语语言<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n .demo   .lang div:lang(en) > q { background:red; }\n .demo   .lang div:lang(fr) > q {background:green;}\n  </style>\n  <div class=\"lang\">\n    <div lang=\"en\"><q>英语语言</q></div>\n    <div lang=\"fr\"><q>法语语言</div>\n  </div>\n</div>\n\n<h3 id=\"not\"><a href=\"#not\" class=\"headerlink\" title=\":not()\"></a>:not()</h3><p>用来匹配不符合一组选择器的元素。由于它的作用是防止特定的元素被选中，它也被称为反选伪类（negation pseudo-class）。</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.not</span> <span class=\"selector-class\">.fancy</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">text-shadow</span>: <span class=\"number\">2px</span> <span class=\"number\">2px</span> <span class=\"number\">3px</span> gold;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"comment\">/* 类名不是 `.fancy` 的 &lt;p&gt; 元素 */</span></span></span><br><span class=\"line\"><span class=\"language-css\">   <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.not</span> <span class=\"selector-tag\">p</span><span class=\"selector-pseudo\">:not</span>(<span class=\"selector-class\">.fancy</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">color</span>: green;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"comment\">/* 非 &lt;p&gt; 元素 */</span> </span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"selector-class\">.demo</span>   <span class=\"selector-class\">.not</span>  <span class=\"selector-pseudo\">:not</span>(<span class=\"selector-tag\">p</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">text-decoration</span>: underline;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"comment\">/* 既不是 &lt;div&gt; 也不是 &lt;span&gt; 的元素 */</span></span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"selector-class\">.demo</span>   <span class=\"selector-class\">.not</span>  <span class=\"selector-pseudo\">:not</span>(<span class=\"selector-tag\">div</span>)<span class=\"selector-pseudo\">:not</span>(<span class=\"selector-tag\">span</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">font-weight</span>: bold;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"comment\">/* 类名不是 `.crazy` 或 `.fancy` 的元素 */</span></span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"comment\">/* 注意，此语法尚未获广泛支持。 */</span></span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"selector-class\">.demo</span>   <span class=\"selector-class\">.not</span>  <span class=\"selector-pseudo\">:not</span>(<span class=\"selector-class\">.crazy</span>, <span class=\"selector-class\">.fancy</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">color</span>:red;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;not&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>我是一个段落。<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;fancy&quot;</span>&gt;</span>我好看极了！<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>我「不是」一个段落。<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n  <style>\n .demo   .not .fancy {\n      text-shadow: 2px 2px 3px gold;\n    }\n    /* 类名不是 `.fancy` 的 <p> 元素 */\n .demo    .not p:not(.fancy) {\n      color: green;\n    }\n    /* 非 <p> 元素 */ \n  .demo   .not  :not(p) {\n      text-decoration: underline;\n    }\n    /* 既不是 <div> 也不是 <span> 的元素 */\n  .demo   .not  :not(div):not(span) {\n      font-weight: bold;\n    }\n    /* 类名不是 `.crazy` 或 `.fancy` 的元素 */\n    /* 注意，此语法尚未获广泛支持。 */\n   .demo  .not  :not(.crazy, .fancy) {\n      color:red;\n    }\n  </style>\n  <div class=\"not\">\n    <p>我是一个段落。</p>\n    <p class=\"fancy\">我好看极了！</p>\n    <div>我「不是」一个段落。</div>\n  </div>\n</div>\n\n<h3 id=\"focus\"><a href=\"#focus\" class=\"headerlink\" title=\":focus\"></a>:focus</h3><p>:focus 表示获得焦点的元素（如表单输入）。当用户点击或触摸元素或通过键盘的 “tab” 键选择它时会被触发。</p>\n<details>\n<summary>展开查看</summary>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"selector-class\">.demo</span>   <span class=\"selector-class\">.focus</span> <span class=\"selector-tag\">input</span><span class=\"selector-pseudo\">:focus</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"attribute\">background</span>: red;</span></span><br><span class=\"line\"><span class=\"language-css\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;focus&quot;</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">input</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">````</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">details</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"> <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.focus</span> <span class=\"selector-tag\">input</span><span class=\"selector-pseudo\">:focus</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"attribute\">background</span>: red;</span></span><br><span class=\"line\"><span class=\"language-css\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;focus&quot;</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">input</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">### :focus-within</span><br><span class=\"line\"></span><br><span class=\"line\">表示一个元素获得焦点，或，该元素的后代元素获得焦点。换句话说，元素自身或者它的某个后代匹配 :focus 伪类。（shadow DOM 树中的后代也包括在内）</span><br><span class=\"line\"></span><br><span class=\"line\">子元素获得焦点，父元素改变样式</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">details</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">summary</span>&gt;</span>展开查看<span class=\"tag\">&lt;/<span class=\"name\">summary</span>&gt;</span></span><br><span class=\"line\">```html</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"selector-class\">.focusWithin</span><span class=\"selector-pseudo\">:focus</span>-within &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"attribute\">background</span>: red;</span></span><br><span class=\"line\"><span class=\"language-css\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;focusWithin&quot;</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">input</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">````</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">details</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"> <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.focusWithin</span><span class=\"selector-pseudo\">:focus</span>-within &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"attribute\">background</span>: red;</span></span><br><span class=\"line\"><span class=\"language-css\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;focusWithin&quot;</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">input</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">### :fullscreen</span><br><span class=\"line\"></span><br><span class=\"line\">应用于当前处于全屏显示模式的元素。</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">details</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">summary</span>&gt;</span>展开查看<span class=\"tag\">&lt;/<span class=\"name\">summary</span>&gt;</span></span><br><span class=\"line\">```html</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"> <span class=\"selector-class\">.demo</span>  <span class=\"selector-class\">.top</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"attribute\">margin</span>: <span class=\"number\">15px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">&#125;</span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"selector-class\">.demo</span> <span class=\"selector-class\">.main</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"attribute\">display</span>: flex;</span></span><br><span class=\"line\"><span class=\"language-css\">&#125;</span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"selector-class\">.demo</span> <span class=\"selector-class\">.right</span><span class=\"selector-pseudo\">:fullscreen</span>&#123;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"attribute\">background</span>:green;</span></span><br><span class=\"line\"><span class=\"language-css\">&#125;</span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"selector-class\">.demo</span> <span class=\"selector-class\">.right</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"attribute\">height</span>: <span class=\"number\">300px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"attribute\">background</span>: <span class=\"number\">#dddddd</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">&#125;</span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"selector-class\">.demo</span> <span class=\"selector-class\">.right</span><span class=\"selector-pseudo\">:fullscreen</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"attribute\">background</span>: green;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"attribute\">color</span>:red;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"attribute\">font-size</span>:<span class=\"number\">20px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">&#125;</span></span><br><span class=\"line\"><span class=\"language-css\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;top&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">onclick</span>=<span class=\"string\">&quot;rightScreen()&quot;</span>&gt;</span>全屏<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;main&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;right&quot;</span>&gt;</span>内容<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">class</span> <span class=\"title class_\">fullScreen</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"comment\">/**</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">   * <span class=\"doctag\">@description</span>: 全屏初始化</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">   * <span class=\"doctag\">@param</span> &#123;<span class=\"type\">Function</span>&#125; fn 用户浏览器不支持全屏的回调</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">   */</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"title function_\">constructor</span>(<span class=\"params\">fn</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">this</span>.<span class=\"property\">prefixName</span> = <span class=\"string\">&quot;&quot;</span>; <span class=\"comment\">// 浏览器前缀</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">this</span>.<span class=\"property\">isFullscreenData</span> = <span class=\"literal\">true</span>; <span class=\"comment\">// 浏览器是否支持全屏</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">this</span>.<span class=\"title function_\">isFullscreen</span>(fn);</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"comment\">/**</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">   * <span class=\"doctag\">@description</span>: 将传进来的元素全屏</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">   * <span class=\"doctag\">@param</span> &#123;<span class=\"type\">String</span>&#125; domName 要全屏的dom名称</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">   */</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"title class_\">Fullscreen</span>(domName) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">const</span> element = <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(domName);</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">const</span> methodName =</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"variable language_\">this</span>.<span class=\"property\">prefixName</span> === <span class=\"string\">&quot;&quot;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        ? <span class=\"string\">&quot;requestFullscreen&quot;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        : <span class=\"string\">`<span class=\"subst\">$&#123;<span class=\"variable language_\">this</span>.prefixName&#125;</span>RequestFullScreen`</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    element[methodName]();</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"comment\">// 退出全屏</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"title function_\">exitFullscreen</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">const</span> methodName =</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"variable language_\">this</span>.<span class=\"property\">prefixName</span> === <span class=\"string\">&quot;&quot;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        ? <span class=\"string\">&quot;exitFullscreen&quot;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        : <span class=\"string\">`<span class=\"subst\">$&#123;<span class=\"variable language_\">this</span>.prefixName&#125;</span>ExitFullscreen`</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">document</span>[methodName]();</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"comment\">/**</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">   * <span class=\"doctag\">@description</span>: 监听进入/离开全屏</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">   * <span class=\"doctag\">@param</span> &#123;<span class=\"type\">Function</span>&#125; enter 进入全屏的回调</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">   *  <span class=\"doctag\">@param</span> &#123;<span class=\"type\">Function</span>&#125; quit 离开全屏的回调</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">   */</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"title function_\">screenChange</span>(<span class=\"params\">enter, quit</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">if</span> (!<span class=\"variable language_\">this</span>.<span class=\"property\">isFullscreenData</span>) <span class=\"keyword\">return</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">const</span> methodName = <span class=\"string\">`on<span class=\"subst\">$&#123;<span class=\"variable language_\">this</span>.prefixName&#125;</span>fullscreenchange`</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">document</span>[methodName] = <span class=\"function\"><span class=\"params\">e</span> =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">if</span> (<span class=\"variable language_\">this</span>.<span class=\"title function_\">isElementFullScreen</span>()) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        enter &amp;&amp; <span class=\"title function_\">enter</span>(e); <span class=\"comment\">// 进入全屏回调</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      &#125; <span class=\"keyword\">else</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        quit &amp;&amp; <span class=\"title function_\">quit</span>(e); <span class=\"comment\">// 离开全屏的回调</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"comment\">/**</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">   * <span class=\"doctag\">@description</span>: 浏览器无法进入全屏时触发,可能是技术原因，也可能是用户拒绝：比如全屏请求不是在事件处理函数中调用,会在这里拦截到错误</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">   * <span class=\"doctag\">@param</span> &#123;<span class=\"type\">Function</span>&#125; enterErrorFn 回调</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">   */</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"title function_\">screenError</span>(<span class=\"params\">enterErrorFn</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">const</span> methodName = <span class=\"string\">`on<span class=\"subst\">$&#123;<span class=\"variable language_\">this</span>.prefixName&#125;</span>fullscreenerror`</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">document</span>[methodName] = <span class=\"function\"><span class=\"params\">e</span> =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      enterErrorFn &amp;&amp; <span class=\"title function_\">enterErrorFn</span>(e);</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"comment\">/**</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">   * <span class=\"doctag\">@description</span>: 是否支持全屏+判断浏览器前缀</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">   * <span class=\"doctag\">@param</span> &#123;<span class=\"type\">Function</span>&#125; fn 不支持全屏的回调函数 这里设了一个默认值</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">   */</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"title function_\">isFullscreen</span>(<span class=\"params\">fn</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">let</span> fullscreenEnabled;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"comment\">// 判断浏览器前缀</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">if</span> (<span class=\"variable language_\">document</span>.<span class=\"property\">fullscreenEnabled</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      fullscreenEnabled = <span class=\"variable language_\">document</span>.<span class=\"property\">fullscreenEnabled</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"variable language_\">document</span>.<span class=\"property\">webkitFullscreenEnabled</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      fullscreenEnabled = <span class=\"variable language_\">document</span>.<span class=\"property\">webkitFullscreenEnabled</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"variable language_\">this</span>.<span class=\"property\">prefixName</span> = <span class=\"string\">&quot;webkit&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"variable language_\">document</span>.<span class=\"property\">mozFullScreenEnabled</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      fullscreenEnabled = <span class=\"variable language_\">document</span>.<span class=\"property\">mozFullScreenEnabled</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"variable language_\">this</span>.<span class=\"property\">prefixName</span> = <span class=\"string\">&quot;moz&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"variable language_\">document</span>.<span class=\"property\">msFullscreenEnabled</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      fullscreenEnabled = <span class=\"variable language_\">document</span>.<span class=\"property\">msFullscreenEnabled</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"variable language_\">this</span>.<span class=\"property\">prefixName</span> = <span class=\"string\">&quot;ms&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">if</span> (!fullscreenEnabled) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"variable language_\">this</span>.<span class=\"property\">isFullscreenData</span> = <span class=\"literal\">false</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      fn &amp;&amp; <span class=\"title function_\">fn</span>(); <span class=\"comment\">// 执行不支持全屏的回调</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"comment\">/**</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">   * <span class=\"doctag\">@description</span>: 检测有没有元素处于全屏状态</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">   * <span class=\"doctag\">@return</span> 布尔值</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">   */</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"title function_\">isElementFullScreen</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">const</span> fullscreenElement =</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"variable language_\">document</span>.<span class=\"property\">fullscreenElement</span> ||</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"variable language_\">document</span>.<span class=\"property\">msFullscreenElement</span> ||</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"variable language_\">document</span>.<span class=\"property\">mozFullScreenElement</span> ||</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"variable language_\">document</span>.<span class=\"property\">webkitFullscreenElement</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">if</span> (fullscreenElement === <span class=\"literal\">null</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span>; <span class=\"comment\">// 当前没有元素在全屏状态</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125; <span class=\"keyword\">else</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">return</span> <span class=\"literal\">true</span>; <span class=\"comment\">// 有元素在全屏状态</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">let</span> full = <span class=\"keyword\">new</span> <span class=\"title function_\">fullScreen</span>(<span class=\"function\">() =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;不支持&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;);</span></span><br><span class=\"line\"><span class=\"language-javascript\">full.<span class=\"title function_\">screenError</span>(<span class=\"function\"><span class=\"params\">e</span> =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;进去全屏失败:&quot;</span>, e);</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;);</span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"comment\">// 全屏请求必须在事件处理函数中调用，否则将会被拒绝。</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"comment\">// full.Fullscreen(&quot;.left&quot;); // 触发进去全屏失败回调</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">const</span> obj = &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"attr\">enter</span>: <span class=\"function\"><span class=\"params\">e</span> =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"comment\">// 如果退出全屏 退出的还是全屏状态，将会触发进入全屏的回调，这种情况比较少 注意一下</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;进入全屏&quot;</span>, e);</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;,</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"attr\">quit</span>: <span class=\"function\"><span class=\"params\">e</span> =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;退出全屏&quot;</span>, e);</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"comment\">// 通常不会出现嵌套的情况</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;;</span></span><br><span class=\"line\"><span class=\"language-javascript\">full.<span class=\"title function_\">screenChange</span>(obj.<span class=\"property\">enter</span>, obj.<span class=\"property\">quit</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">function</span> <span class=\"title function_\">leftScreen</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  full.<span class=\"title class_\">Fullscreen</span>(<span class=\"string\">&quot;.left&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">function</span> <span class=\"title function_\">rightScreen</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  full.<span class=\"title class_\">Fullscreen</span>(<span class=\"string\">&quot;.right&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">function</span> <span class=\"title function_\">redScreen</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  full.<span class=\"title class_\">Fullscreen</span>(<span class=\"string\">&quot;.left-son&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"comment\">// 退出全屏 退出到上次的状态</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">function</span> <span class=\"title function_\">exitScreen</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  full.<span class=\"title function_\">exitFullscreen</span>();</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</details>\n<div class=\"demo\">\n<style>\n.demo .top {\n  margin: 15px;\n}\n.demo .main {\n  width: 100%;\n  display: flex;\n}\n.demo .right:fullscreen{\n  background:green;\n}\n.demo .right {\n  width: 100%;\n  height: 300px;\n  background: #dddddd;\n}\n.demo .right:fullscreen {\n  background: green;\n  color:red;\n  font-size:20px;\n}\n</style>\n\n<div class=\"top\">\n  <button onclick=\"rightScreen()\">全屏</button>\n</div>\n<div class=\"main\">\n  <div class=\"right\">内容</div>\n</div>\n<script>\nclass fullScreen {\n  /**\n   * @description: 全屏初始化\n   * @param {Function} fn 用户浏览器不支持全屏的回调\n   */\n  constructor(fn) {\n    this.prefixName = \"\"; // 浏览器前缀\n    this.isFullscreenData = true; // 浏览器是否支持全屏\n    this.isFullscreen(fn);\n  }\n  /**\n   * @description: 将传进来的元素全屏\n   * @param {String} domName 要全屏的dom名称\n   */\n  Fullscreen(domName) {\n    const element = document.querySelector(domName);\n    const methodName =\n      this.prefixName === \"\"\n        ? \"requestFullscreen\"\n        : `${this.prefixName}RequestFullScreen`;\n    element[methodName]();\n  }\n  // 退出全屏\n  exitFullscreen() {\n    const methodName =\n      this.prefixName === \"\"\n        ? \"exitFullscreen\"\n        : `${this.prefixName}ExitFullscreen`;\n    document[methodName]();\n  }\n  /**\n   * @description: 监听进入/离开全屏\n   * @param {Function} enter 进入全屏的回调\n   *  @param {Function} quit 离开全屏的回调\n   */\n  screenChange(enter, quit) {\n    if (!this.isFullscreenData) return;\n    const methodName = `on${this.prefixName}fullscreenchange`;\n    document[methodName] = e => {\n      if (this.isElementFullScreen()) {\n        enter && enter(e); // 进入全屏回调\n      } else {\n        quit && quit(e); // 离开全屏的回调\n      }\n    };\n  }\n  /**\n   * @description: 浏览器无法进入全屏时触发,可能是技术原因，也可能是用户拒绝：比如全屏请求不是在事件处理函数中调用,会在这里拦截到错误\n   * @param {Function} enterErrorFn 回调\n   */\n  screenError(enterErrorFn) {\n    const methodName = `on${this.prefixName}fullscreenerror`;\n    document[methodName] = e => {\n      enterErrorFn && enterErrorFn(e);\n    };\n  }\n  /**\n   * @description: 是否支持全屏+判断浏览器前缀\n   * @param {Function} fn 不支持全屏的回调函数 这里设了一个默认值\n   */\n  isFullscreen(fn) {\n    let fullscreenEnabled;\n    // 判断浏览器前缀\n    if (document.fullscreenEnabled) {\n      fullscreenEnabled = document.fullscreenEnabled;\n    } else if (document.webkitFullscreenEnabled) {\n      fullscreenEnabled = document.webkitFullscreenEnabled;\n      this.prefixName = \"webkit\";\n    } else if (document.mozFullScreenEnabled) {\n      fullscreenEnabled = document.mozFullScreenEnabled;\n      this.prefixName = \"moz\";\n    } else if (document.msFullscreenEnabled) {\n      fullscreenEnabled = document.msFullscreenEnabled;\n      this.prefixName = \"ms\";\n    }\n    if (!fullscreenEnabled) {\n      this.isFullscreenData = false;\n      fn && fn(); // 执行不支持全屏的回调\n    }\n  }\n  /**\n   * @description: 检测有没有元素处于全屏状态\n   * @return 布尔值\n   */\n  isElementFullScreen() {\n    const fullscreenElement =\n      document.fullscreenElement ||\n      document.msFullscreenElement ||\n      document.mozFullScreenElement ||\n      document.webkitFullscreenElement;\n    if (fullscreenElement === null) {\n      return false; // 当前没有元素在全屏状态\n    } else {\n      return true; // 有元素在全屏状态\n    }\n  }\n}\nlet full = new fullScreen(() => {\n  console.log(\"不支持\");\n});\nfull.screenError(e => {\n  console.log(\"进去全屏失败:\", e);\n});\n// 全屏请求必须在事件处理函数中调用，否则将会被拒绝。\n// full.Fullscreen(\".left\"); // 触发进去全屏失败回调\nconst obj = {\n  enter: e => {\n    // 如果退出全屏 退出的还是全屏状态，将会触发进入全屏的回调，这种情况比较少 注意一下\n    console.log(\"进入全屏\", e);\n  },\n  quit: e => {\n    console.log(\"退出全屏\", e);\n    // 通常不会出现嵌套的情况\n  }\n};\nfull.screenChange(obj.enter, obj.quit);\nfunction leftScreen() {\n  full.Fullscreen(\".left\");\n}\nfunction rightScreen() {\n  full.Fullscreen(\".right\");\n}\nfunction redScreen() {\n  full.Fullscreen(\".left-son\");\n}\n// 退出全屏 退出到上次的状态\nfunction exitScreen() {\n  full.exitFullscreen();\n}\n</script>\n</div>\n\n<h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p>以上就是本次的全部分享内容，合理的利用伪类可以比较巧妙的实现一些特殊效果。但是部分伪类还是涉及到浏览器的兼容问题，或者还在草案之中，具体的兼容性可以为<a href=\"https://caniuse.com/\">Can I Use</a>查看</p>"}],"PostAsset":[],"PostCategory":[],"PostTag":[{"post_id":"cl1zxy69u0001p4vl827hdpr7","tag_id":"cl1zxy6a00004p4vlfbjccm5v","_id":"cl1zxy6ae000bp4vlgsahhujm"},{"post_id":"cl1zxy6ae000cp4vlfb1f3pyj","tag_id":"cl1zxy6ad000ap4vlhfjp5vhy","_id":"cl1zxy6ah000fp4vl5tyibd7k"},{"post_id":"cl1zxy69z0003p4vlddx13ijg","tag_id":"cl1zxy6ad000ap4vlhfjp5vhy","_id":"cl1zxy6ai000hp4vl3t1wfxc8"},{"post_id":"cl1zxy6a20006p4vl48rs6alz","tag_id":"cl1zxy6ah000ep4vl6l4500i0","_id":"cl1zxy6ar000lp4vl9j8h990b"},{"post_id":"cl1zxy6a80008p4vldvovc667","tag_id":"cl1zxy6ad000ap4vlhfjp5vhy","_id":"cl1zxy6at000pp4vld3a132cd"},{"post_id":"cl1zxy6ac0009p4vldmb820nc","tag_id":"cl1zxy6ad000ap4vlhfjp5vhy","_id":"cl1zxy6aw000tp4vl8pdzefzh"},{"post_id":"cl1zxy6av000sp4vlgn72d896","tag_id":"cl1zxy6ad000ap4vlhfjp5vhy","_id":"cl1zxy6ax000vp4vlder05j73"},{"post_id":"cl1zxy6af000dp4vlbdhf8cao","tag_id":"cl1zxy6au000rp4vleooc4a2l","_id":"cl1zxy6ay000yp4vl60nl9cbu"},{"post_id":"cl1zxy6ah000gp4vl6e8xf8du","tag_id":"cl1zxy6ax000wp4vlcml72s5j","_id":"cl1zxy6b40012p4vlencyedgf"},{"post_id":"cl1zxy6ai000ip4vl3c5o9wwm","tag_id":"cl1zxy6b30011p4vl6zp33oif","_id":"cl1zxy6b70017p4vldn5rh2g8"},{"post_id":"cl1zxy6ap000kp4vl0d61hp8l","tag_id":"cl1zxy6b60015p4vlctgdfg83","_id":"cl1zxy6ba001bp4vl7mpkcif6"},{"post_id":"cl1zxy6b70018p4vl8q4021h1","tag_id":"cl1zxy6a00004p4vlfbjccm5v","_id":"cl1zxy6ba001dp4vl4ylsc8p8"},{"post_id":"cl1zxy6b9001ap4vl8gaealhx","tag_id":"cl1zxy6a00004p4vlfbjccm5v","_id":"cl1zxy6bc001gp4vl05oe3yj6"},{"post_id":"cl1zxy6at000op4vlhc72a8d9","tag_id":"cl1zxy6b80019p4vlemjc4gg5","_id":"cl1zxy6bf001kp4vlcpd33h8q"},{"post_id":"cl1zxy6at000op4vlhc72a8d9","tag_id":"cl1zxy6bb001ep4vl2bs1crrz","_id":"cl1zxy6bg001mp4vlbezq7vls"},{"post_id":"cl1zxy6be001ip4vlhbxf2q33","tag_id":"cl1zxy6au000rp4vleooc4a2l","_id":"cl1zxy6bh001pp4vlcy6s0gwi"},{"post_id":"cl1zxy6bf001lp4vlaxo63tdk","tag_id":"cl1zxy6a00004p4vlfbjccm5v","_id":"cl1zxy6bj001rp4vl59rm4izx"},{"post_id":"cl1zxy6at000qp4vlhfmbf597","tag_id":"cl1zxy6ah000ep4vl6l4500i0","_id":"cl1zxy6bm001up4vldimyh0g0"},{"post_id":"cl1zxy6at000qp4vlhfmbf597","tag_id":"cl1zxy6bf001jp4vl2i67a0nr","_id":"cl1zxy6bn001wp4vld0o0hvqu"},{"post_id":"cl1zxy6aw000up4vl4kssfutt","tag_id":"cl1zxy6bh001op4vl7gxj9474","_id":"cl1zxy6bo001zp4vl5qglffkh"},{"post_id":"cl1zxy6ax000xp4vlar1k337v","tag_id":"cl1zxy6bm001tp4vl5tey5gxg","_id":"cl1zxy6bp0021p4vlhh5xapdm"},{"post_id":"cl1zxy6ay000zp4vlhj40bfec","tag_id":"cl1zxy6bm001tp4vl5tey5gxg","_id":"cl1zxy6br0025p4vl1bil0ifw"},{"post_id":"cl1zxy6az0010p4vlen6u2rok","tag_id":"cl1zxy6bm001tp4vl5tey5gxg","_id":"cl1zxy6bt0029p4vldegs5qax"},{"post_id":"cl1zxy6bs0028p4vl5gvr0qgc","tag_id":"cl1zxy6a00004p4vlfbjccm5v","_id":"cl1zxy6bu002bp4vlgc5fbjby"},{"post_id":"cl1zxy6b40013p4vle544fi3n","tag_id":"cl1zxy6bm001tp4vl5tey5gxg","_id":"cl1zxy6bu002dp4vlb18ehhas"},{"post_id":"cl1zxy6b50014p4vlgfv353ni","tag_id":"cl1zxy6bm001tp4vl5tey5gxg","_id":"cl1zxy6bv002fp4vl7i6x498u"},{"post_id":"cl1zxy6b60016p4vl3x7e2017","tag_id":"cl1zxy6bm001tp4vl5tey5gxg","_id":"cl1zxy6bx002hp4vld1qg0x6h"},{"post_id":"cl1zxy6ba001cp4vlgtq6h3ll","tag_id":"cl1zxy6bw002gp4vl0e0y8bnx","_id":"cl1zxy6by002jp4vlb5d3624v"},{"post_id":"cl1zxy6bd001hp4vl0olfdm06","tag_id":"cl1zxy6bm001tp4vl5tey5gxg","_id":"cl1zxy6by002lp4vleto1gxc6"},{"post_id":"cl1zxy6bi001qp4vl1vw19ijn","tag_id":"cl1zxy6by002kp4vl2kdk66eg","_id":"cl1zxy6bz002np4vlb9k9huob"},{"post_id":"cl1zxy6bk001sp4vl3l3734e7","tag_id":"cl1zxy6bz002mp4vl9son2j05","_id":"cl1zxy6c0002pp4vl7j23eacz"},{"post_id":"cl1zxy6bm001vp4vledat3g6e","tag_id":"cl1zxy6c0002op4vlat19d3e3","_id":"cl1zxy6c1002rp4vle5yvhtyl"},{"post_id":"cl1zxy6bn001xp4vlfdcm2too","tag_id":"cl1zxy6c0002qp4vl7rk5h725","_id":"cl1zxy6c2002tp4vl8bzhhust"},{"post_id":"cl1zxy6bo0020p4vl3z8zasta","tag_id":"cl1zxy6c1002sp4vley7w0bh9","_id":"cl1zxy6c2002vp4vl72kz9hnq"},{"post_id":"cl1zxy6bp0022p4vl58uh3ju8","tag_id":"cl1zxy6c2002up4vl56q08lr4","_id":"cl1zxy6c3002xp4vlhmff1tj3"},{"post_id":"cl1zxy6bq0024p4vl44imeujb","tag_id":"cl1zxy6c2002up4vl56q08lr4","_id":"cl1zxy6c4002zp4vlfbfmazib"},{"post_id":"cl1zxy6br0026p4vlh5i54v1d","tag_id":"cl1zxy6c2002up4vl56q08lr4","_id":"cl1zxy6c50031p4vl002u7brw"},{"post_id":"cl1zxy6bt002ap4vlcy1bhqd8","tag_id":"cl1zxy6c40030p4vlhzs85le3","_id":"cl1zxy6c50032p4vlaw4l3kih"}],"Tag":[{"name":"心得","_id":"cl1zxy6a00004p4vlfbjccm5v"},{"name":"Chrome","_id":"cl1zxy6ad000ap4vlhfjp5vhy"},{"name":"翻译","_id":"cl1zxy6ah000ep4vl6l4500i0"},{"name":"Hexo","_id":"cl1zxy6au000rp4vleooc4a2l"},{"name":"RXJS","_id":"cl1zxy6ax000wp4vlcml72s5j"},{"name":"Github","_id":"cl1zxy6b30011p4vl6zp33oif"},{"name":"TypeScript","_id":"cl1zxy6b60015p4vlctgdfg83"},{"name":"DEBUG","_id":"cl1zxy6b80019p4vlemjc4gg5"},{"name":"VSCODE","_id":"cl1zxy6bb001ep4vl2bs1crrz"},{"name":"前端","_id":"cl1zxy6bf001jp4vl2i67a0nr"},{"name":"干海子","_id":"cl1zxy6bh001op4vl7gxj9474"},{"name":"CICD","_id":"cl1zxy6bm001tp4vl5tey5gxg"},{"name":"HTTP","_id":"cl1zxy6bw002gp4vl0e0y8bnx"},{"name":"小诗","_id":"cl1zxy6by002kp4vl2kdk66eg"},{"name":"算法","_id":"cl1zxy6bz002mp4vl9son2j05"},{"name":"Git","_id":"cl1zxy6c0002op4vlat19d3e3"},{"name":"JS","_id":"cl1zxy6c0002qp4vl7rk5h725"},{"name":"Mysql","_id":"cl1zxy6c1002sp4vley7w0bh9"},{"name":"React","_id":"cl1zxy6c2002up4vl56q08lr4"},{"name":"CSS","_id":"cl1zxy6c40030p4vlhzs85le3"}]}}